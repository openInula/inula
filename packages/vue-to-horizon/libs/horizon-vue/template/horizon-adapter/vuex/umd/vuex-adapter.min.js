!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@cloudsop/horizon")):"function"==typeof define&&define.amd?define(["exports","@cloudsop/horizon"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).VueAdapter={},t.horizon)}(this,(function(t,e){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var r=e.vueReactive.watch;e.vueReactive.useComputed,e.vueReactive.computed;var o=new Map,u=null;function i(t,e,n){return"object"==typeof t&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}function c(t,r,o,i){var c=r.mutations,a=void 0===c?{}:c,f=r.actions,l=void 0===f?{}:f,p=r.getters,v=void 0===p?{}:p,d="function"==typeof r.state?r.state():r.state,y=e.createStore({id:t,state:d,actions:n({},Object.fromEntries(Object.entries(a).map((function(t){return["m_"+t[0],t[1]]}))),Object.fromEntries(Object.entries(l).map((function(e){var r=e[0],u=e[1];return[r,function(e,r){i=i||g;var c=n({},o,{commit:function(e,n,r){o.commit(e,n,r,t)},dispatch:function(e,n,r){return o.dispatch(e,n,r,t)},state:g.$state,rootState:o.state,getter:o.getters,rootGetters:s(i)});return u.call(g,c,r)}]})))),computed:n({},Object.fromEntries(Object.entries(v).map((function(t){var e=t[0],n=t[1];return["g_"+e,function(t){return i=i||g,n.call(g,g.$state,o.getters,i.$state,s(i))}]}))))}),g=y();return null===u&&(u=y),g}function a(t,e){Object.keys(t.$config.computed).forEach((function(n){Object.defineProperty(e,n,{get:function(){return t.$c[n]},configurable:!0})}))}function s(t){return new Proxy({},{get:function(e,n){return t["g_"+n]}})}var f="DEFAULT_VUEX_STORE";function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return u(),o.get(t)}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;o.set(e,t)}var v=e.vueReactive.computed;function d(t){return Array.isArray(t)||null!==t&&"object"==typeof t?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}t.GETTER_PREFIX="g_",t.MUTATION_PREFIX="m_",t.createStore=function(t){var e=t.modules||{},n={},o={},u={state:new Proxy({},{get:function(t,e){return e in n?n[e].storeX:s[e]}}),getters:new Proxy({},{get:function(t,e){if("string"==typeof e){if(e.includes("/")){var r=e.split("/"),u=r[0],i=r[1];return n[u].storeX["g_"+i]}return o["g_"+e]}}}),commit:function(t,e,r,o){var u=i(t,e,r),c=u.type,a=u.payload,f=u.options;if(null!=f&&f.root)return s["m_"+c](a);if(c.includes("/")){var l=c.split("/"),p=l[0],v=l[1];return n[p].storeX["m_"+v](a)}if(null!=o)return n[o].storeX["m_"+c](a);Object.values(n).forEach((function(t){if(!t.namespaced){var e=t.storeX["m_"+c];"function"==typeof e&&e(a)}})),s["m_"+c]&&s["m_"+c](a)},dispatch:function(t,e,r,o){var u=i(t,e,r),c=u.type,a=u.payload,f=u.options;if(null!=f&&f.root)return s[c](a);if(c.includes("/")){var l=c.split("/"),p=l[0],v=l[1];return n[p].storeX[v](a)}if(null!=o)return n[o].storeX[c](a);var d=[];return Object.values(n).forEach((function(t){if(!t.namespaced){var e=t.storeX[c];"function"==typeof e&&d.push(e(a))}})),"function"==typeof s[c]&&d.push(s[c](a)),Promise.all(d)},subscribe:function(t){return s.$subscribe(t)},subscribeAction:function(t){return s.$subscribe(t)},watch:function(t,e){r((function(){return t(u.state,u.getters)}),e)},registerModule:function(t,e){n[t]={storeX:c(t,e,u,s),namespaced:!!e.namespaced},a(n[t].storeX,o)},unregisterModule:function(t){var e,r;e=n[t].storeX,r=o,Object.keys(e.$config.computed).forEach((function(t){Object.defineProperty(r,t,{value:void 0,writable:!0,enumerable:!0,configurable:!0}),delete r[t]})),delete n[t]},hasModule:function(t){return t in n},getModule:function(t){var e;return null===(e=n[t])||void 0===e?void 0:e.storeX},install:function(t,e){p(this,e||f)}},s=c(void 0,t,u);a(s,o);for(var l=0,v=Object.entries(e);l<v.length;l++){var d=v[l],y=d[0],g=d[1];n[y]={storeX:c(y,g,u,s),namespaced:!!g.namespaced},a(n[y].storeX,o)}return u},t.moduleGettersProxy=s,t.prepareTypeParams=i,t.registerStore=p,t.storeKey=f,t.useMapActions=function(t,n){var r=l(),o=e.useRef(null);return null===o.current&&("string"!=typeof t&&(n=t,t=""),o.current={},d(n).forEach((function(e){var n=e.key,u=e.val,i=r.dispatch;t&&(i=function(){r.dispatch(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],t)}),o.current[n]="function"==typeof u?function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.apply(this,[i].concat(e))}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.apply(r,[u].concat(e))}}))),o.current},t.useMapGetters=function(t,n){var r=l(),o=e.useRef(null);return null===o.current&&("string"!=typeof t&&(n=t,t=""),o.current={},d(n).forEach((function(e){var n=e.key,u=e.val;t&&(u=t+"/"+u),o.current[n]=v((function(){return r.getters[u]}))}))),o.current},t.useMapMutations=function(t,n){var r=l(),o=e.useRef(null);return null===o.current&&("string"!=typeof t&&(n=t,t=""),o.current={},d(n).forEach((function(e){var n=e.key,u=e.val,i=r.commit;t&&(i=function(){r.commit(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],t)}),o.current[n]="function"==typeof u?function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.apply(this,[i].concat(e))}:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.apply(r,[u].concat(e))}}))),o.current},t.useMapState=function(t,n){var r=l(),o=e.useRef(null);return null===o.current&&("string"!=typeof t&&(n=t,t=""),o.current={},d(n).forEach((function(e){var n=e.key,u=e.val,i=r.state,c=r.getters;if(t){var a=r.getModule(t);if(!a)return;i=a.$state,c=s(a)}o.current[n]=v("function"==typeof u?function(){return u(i,c)}:function(){return i[u]})}))),o.current},t.useStore=l,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=vuex-adapter.min.js.map
