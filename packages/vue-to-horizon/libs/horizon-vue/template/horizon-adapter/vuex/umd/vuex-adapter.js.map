{"version":3,"file":"vuex-adapter.js","sources":["../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/extends.js","../../../src/vuex/vuex.ts","../../../src/vuex/maps.ts"],"sourcesContent":["export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","/*\r\n * Copyright (c) 2024 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { createStore as createStoreX, StoreObj, vueReactive } from '@cloudsop/horizon';\r\nimport { VuexStore, VuexStoreOptions } from './types';\r\nimport { AnyFunction } from '../vuex/types';\r\n\r\nconst { watch, useComputed, computed } = vueReactive;\r\n\r\nexport const MUTATION_PREFIX = 'm_';\r\nexport const GETTER_PREFIX = 'g_';\r\n\r\nconst storeMap = new Map<string, any>();\r\n\r\n// 用于保存storeX对象的getStoreX方法，主要是为了调用registerDestroyFunction\r\nlet getStoreXCache: null | (() => StoreObj) = null;\r\n\r\ntype GettersMap<T extends StoreObj = StoreObj> = {\r\n  [K in keyof T['$c']]: ReturnType<T['$c'][K]>;\r\n};\r\n\r\nexport function createStore<\r\n  State extends Record<string, unknown> = Record<string, unknown>,\r\n  Mutations extends Record<string, AnyFunction> = Record<string, AnyFunction>,\r\n  Actions extends Record<string, AnyFunction> = Record<string, AnyFunction>,\r\n  Getters extends Record<string, AnyFunction> = Record<string, AnyFunction>,\r\n  RootState extends Record<string, unknown> = Record<string, unknown>,\r\n  RootGetters extends Record<string, AnyFunction> = Record<string, AnyFunction>,\r\n  Modules extends Record<string, Record<string, unknown>> = Record<string, Record<string, unknown>>,\r\n>(\r\n  options: VuexStoreOptions<State, Mutations, Actions, Getters, RootState, RootGetters, Modules>\r\n): VuexStore<State, Getters, Modules> {\r\n  const modules = options.modules || {};\r\n\r\n  const _modules: Record<string, { storeX: StoreObj; namespaced: boolean }> = {};\r\n\r\n  const _getters: GettersMap = {};\r\n\r\n  const vuexStore: VuexStore = {\r\n    state: new Proxy(\r\n      {},\r\n      {\r\n        get: (_, key) => {\r\n          if (key in _modules) {\r\n            const storeX = _modules[key as string].storeX;\r\n            return storeX;\r\n          } else {\r\n            return rootStoreX[key as string];\r\n          }\r\n        },\r\n      }\r\n    ),\r\n    getters: new Proxy(\r\n      {},\r\n      {\r\n        get: (_, key) => {\r\n          if (typeof key === 'string') {\r\n            // 如果key包含/，说明是访问模块的getters，进行split\r\n            if (key.includes('/')) {\r\n              const [moduleName, getterKey] = key.split('/');\r\n              const storeX = _modules[moduleName].storeX;\r\n              return storeX[`${GETTER_PREFIX}${getterKey}`];\r\n            } else {\r\n              return _getters[`${GETTER_PREFIX}${key}`];\r\n            }\r\n          }\r\n        },\r\n      }\r\n    ),\r\n    commit: (_type, _payload, _options, moduleName) => {\r\n      const { type, payload, options } = prepareTypeParams(_type, _payload, _options);\r\n      // 如果options.root为true，调用根store的action\r\n      if (options?.root) {\r\n        return rootStoreX[`${MUTATION_PREFIX}${type}`](payload);\r\n      }\r\n\r\n      // 包含/，说明是访问模块的mutation\r\n      if (type.includes('/')) {\r\n        const [moduleName, key] = type.split('/');\r\n        return _modules[moduleName].storeX[`${MUTATION_PREFIX}${key}`](payload);\r\n      }\r\n\r\n      if (moduleName != undefined) {\r\n        // dispatch到指定的module\r\n        return _modules[moduleName].storeX[`${MUTATION_PREFIX}${type}`](payload);\r\n      }\r\n\r\n      // 调用所有非namespaced的modules的mutation\r\n      Object.values(_modules).forEach(module => {\r\n        if (!module.namespaced) {\r\n          const mutation = module.storeX[`${MUTATION_PREFIX}${type}`];\r\n          if (typeof mutation === 'function') {\r\n            mutation(payload);\r\n          }\r\n        }\r\n      });\r\n\r\n      // 调用storeX对象上的方法\r\n      if (rootStoreX[`${MUTATION_PREFIX}${type}`]) {\r\n        rootStoreX[`${MUTATION_PREFIX}${type}`](payload);\r\n      }\r\n    },\r\n    dispatch: (_type, _payload, _options, moduleName) => {\r\n      const { type, payload, options } = prepareTypeParams(_type, _payload, _options);\r\n      // 如果options.root为true，调用根store的action\r\n      if (options?.root) {\r\n        return rootStoreX[type](payload);\r\n      }\r\n\r\n      // 包含/，说明是访问模块的action\r\n      if (type.includes('/')) {\r\n        const [moduleName, key] = type.split('/');\r\n        return _modules[moduleName].storeX[key](payload);\r\n      }\r\n\r\n      if (moduleName != undefined) {\r\n        // dispatch到指定的module\r\n        return _modules[moduleName].storeX[type](payload);\r\n      }\r\n\r\n      // 把每个action的返回值合并起来，支持then链式调用\r\n      const results: any[] = [];\r\n\r\n      // 调用所有非namespaced的modules的action\r\n      Object.values(_modules).forEach(module => {\r\n        if (!module.namespaced) {\r\n          const action = module.storeX[type];\r\n          if (typeof action === 'function') {\r\n            results.push(action(payload));\r\n          }\r\n        }\r\n      });\r\n\r\n      // 调用storeX对象上的方法\r\n      if (typeof rootStoreX[type] === 'function') {\r\n        results.push(rootStoreX[type](payload));\r\n      }\r\n\r\n      // 返回一个Promise，内容是results，支持then链式调用\r\n      return Promise.all(results);\r\n    },\r\n    subscribe(fn) {\r\n      return rootStoreX.$subscribe(fn);\r\n    },\r\n    subscribeAction(fn) {\r\n      return rootStoreX.$subscribe(fn);\r\n    },\r\n    watch(fn, cb) {\r\n      watch(() => fn(vuexStore.state, vuexStore.getters), cb);\r\n    },\r\n    // 动态注册模块\r\n    registerModule(key, module) {\r\n      _modules[key] = { storeX: _createStoreX(key, module, vuexStore, rootStoreX), namespaced: !!module.namespaced };\r\n      collectGetters(_modules[key].storeX, _getters);\r\n    },\r\n    // 动态注销模块\r\n    unregisterModule(moduleName) {\r\n      deleteGetters(_modules[moduleName].storeX, _getters);\r\n      delete _modules[moduleName];\r\n    },\r\n    hasModule(moduleName) {\r\n      return moduleName in _modules;\r\n    },\r\n    getModule(moduleName) {\r\n      return _modules[moduleName]?.storeX;\r\n    },\r\n    install(app, key) {\r\n      registerStore(this, key || storeKey);\r\n    },\r\n  };\r\n\r\n  const rootStoreX = _createStoreX(undefined, options as VuexStoreOptions, vuexStore);\r\n  collectGetters(rootStoreX, _getters);\r\n\r\n  // 递归创建子模块\r\n  for (const [moduleName, moduleOptions] of Object.entries(modules)) {\r\n    _modules[moduleName] = {\r\n      storeX: _createStoreX(moduleName, moduleOptions as VuexStoreOptions, vuexStore, rootStoreX),\r\n      namespaced: !!(moduleOptions as VuexStoreOptions).namespaced,\r\n    };\r\n    collectGetters(_modules[moduleName].storeX, _getters);\r\n  }\r\n\r\n  return vuexStore as VuexStore<State, Getters, Modules>;\r\n}\r\n\r\nexport function prepareTypeParams(\r\n  type: string | (Record<string, unknown> & { type: string }),\r\n  payload?: any,\r\n  options?: Record<string, unknown>\r\n) {\r\n  if (typeof type === 'object' && type.type) {\r\n    options = payload;\r\n    payload = type;\r\n    type = type.type;\r\n  }\r\n\r\n  return { type, payload, options } as {\r\n    type: string;\r\n    payload: any;\r\n    options: Record<string, unknown>;\r\n  };\r\n}\r\n\r\nfunction _createStoreX(\r\n  moduleName: string | undefined,\r\n  options: VuexStoreOptions,\r\n  store: VuexStore,\r\n  rootStoreX?: any\r\n): StoreObj {\r\n  const { mutations = {}, actions = {}, getters = {} } = options;\r\n  const state = typeof options.state === 'function' ? options.state() : options.state;\r\n\r\n  const getStoreX: () => StoreObj = createStoreX({\r\n    id: moduleName,\r\n    state: state,\r\n    actions: {\r\n      // 给mutations的key增加一个前缀，避免和actions的key冲突\r\n      ...Object.fromEntries(\r\n        Object.entries(mutations).map(([key, mutation]) => {\r\n          return [`${MUTATION_PREFIX}${key}`, mutation];\r\n        })\r\n      ),\r\n      // 重新定义action的方法，绑定this，修改第一参数\r\n      ...Object.fromEntries(\r\n        Object.entries(actions).map(([key, action]) => [\r\n          key,\r\n          function (this: StoreObj, state: Record<string, unknown>, payload) {\r\n            rootStoreX = rootStoreX || storeX;\r\n            const argFirst = {\r\n              ...store,\r\n              // 覆盖commit方法，多传一个参数moduleName\r\n              commit: (\r\n                type: string | (Record<string, unknown> & { type: string }),\r\n                payload?: any,\r\n                options?: Record<string, unknown>\r\n              ) => {\r\n                store.commit(type, payload, options, moduleName);\r\n              },\r\n              // 覆盖dispatch方法，多传一个参数moduleName\r\n              dispatch: (\r\n                type: string | (Record<string, unknown> & { type: string }),\r\n                payload?: any,\r\n                options?: Record<string, unknown>\r\n              ) => {\r\n                return store.dispatch(type, payload, options, moduleName);\r\n              },\r\n              state: storeX.$state,\r\n              rootState: store.state,\r\n              getter: store.getters,\r\n              rootGetters: moduleGettersProxy(rootStoreX),\r\n            };\r\n\r\n            return action.call(storeX, argFirst, payload);\r\n          },\r\n        ])\r\n      ),\r\n    },\r\n    computed: {\r\n      ...Object.fromEntries(\r\n        Object.entries(getters).map(([key, getter]) => {\r\n          return [\r\n            // 给getters的key增加一个前缀，避免和actions, mutations的key冲突\r\n            `${GETTER_PREFIX}${key}`,\r\n            // 重新定义getter的方法，绑定this，修改参数: state, getters, rootState, rootGetters\r\n            function (state: Record<string, unknown>) {\r\n              rootStoreX = rootStoreX || storeX;\r\n              return getter.call(\r\n                storeX,\r\n                storeX.$state,\r\n                store.getters,\r\n                rootStoreX.$state,\r\n                moduleGettersProxy(rootStoreX)\r\n              );\r\n            },\r\n          ];\r\n        })\r\n      ),\r\n    },\r\n  });\r\n\r\n  const storeX = getStoreX();\r\n  if (getStoreXCache === null) {\r\n    getStoreXCache = getStoreX;\r\n  }\r\n\r\n  return storeX;\r\n}\r\n\r\nfunction collectGetters(storeX: StoreObj, gettersMap: GettersMap): void {\r\n  Object.keys(storeX.$config.computed).forEach(type => {\r\n    Object.defineProperty(gettersMap, type, {\r\n      get: () => {\r\n        return storeX.$c[type];\r\n      },\r\n      configurable: true,\r\n    });\r\n  });\r\n}\r\n\r\nfunction deleteGetters(storeX: StoreObj, gettersMap: GettersMap): void {\r\n  Object.keys(storeX.$config.computed).forEach(type => {\r\n    // 删除Object.defineProperty定义的属性\r\n    Object.defineProperty(gettersMap, type, {\r\n      value: undefined,\r\n      writable: true,\r\n      enumerable: true,\r\n      configurable: true,\r\n    });\r\n    delete gettersMap[type];\r\n  });\r\n}\r\n\r\nexport function moduleGettersProxy(storeX: StoreObj) {\r\n  return new Proxy(\r\n    {},\r\n    {\r\n      get: (_, key) => {\r\n        return storeX[`${GETTER_PREFIX}${key as string}`];\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\nexport const storeKey = 'DEFAULT_VUEX_STORE';\r\n\r\nexport function useStore(key = storeKey) {\r\n  getStoreXCache!();\r\n  return storeMap.get(key);\r\n}\r\n\r\nexport function registerStore(store: VuexStore, key = storeKey) {\r\n  storeMap.set(key, store);\r\n}\r\n","/*\r\n * Copyright (c) 2024 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { moduleGettersProxy, useStore } from './vuex';\r\nimport { vueReactive, useRef, ComputedImpl } from '@cloudsop/horizon';\r\n\r\nconst { computed } = vueReactive;\r\n\r\nexport const useMapState = (moduleName, states) => {\r\n  const store = useStore();\r\n  const objRef = useRef<null | { [key: string]: ComputedImpl }>(null);\r\n  if (objRef.current === null) {\r\n    if (typeof moduleName !== 'string') {\r\n      states = moduleName;\r\n      moduleName = '';\r\n    }\r\n\r\n    objRef.current = {};\r\n\r\n    toArray(states).forEach(({ key, val }) => {\r\n      let state = store.state;\r\n      let getters = store.getters;\r\n      if (moduleName) {\r\n        const storeX = store.getModule(moduleName);\r\n        if (!storeX) {\r\n          return;\r\n        }\r\n        state = storeX.$state;\r\n        getters = moduleGettersProxy(storeX);\r\n      }\r\n\r\n      if (typeof val === 'function') {\r\n        objRef.current![key] = computed(function () {\r\n          return val(state, getters);\r\n        });\r\n      } else {\r\n        objRef.current![key] = computed(function () {\r\n          return state[val];\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  return objRef.current;\r\n};\r\n\r\nexport const useMapGetters = (moduleName, getters) => {\r\n  const store = useStore();\r\n  const objRef = useRef<null | { [key: string]: ComputedImpl }>(null);\r\n  if (objRef.current === null) {\r\n    if (typeof moduleName !== 'string') {\r\n      getters = moduleName;\r\n      moduleName = '';\r\n    }\r\n\r\n    objRef.current = {};\r\n\r\n    toArray(getters).forEach(({ key, val }) => {\r\n      if (moduleName) {\r\n        val = `${moduleName}/${val}`;\r\n      }\r\n\r\n      objRef.current![key] = computed(function () {\r\n        return store.getters[val];\r\n      });\r\n    });\r\n  }\r\n\r\n  return objRef.current;\r\n};\r\n\r\nexport const useMapMutations = (moduleName, mutations) => {\r\n  const store = useStore();\r\n  const objRef = useRef<null | { [key: string]: () => any }>(null);\r\n  if (objRef.current === null) {\r\n    if (typeof moduleName !== 'string') {\r\n      mutations = moduleName;\r\n      moduleName = '';\r\n    }\r\n\r\n    objRef.current = {};\r\n\r\n    toArray(mutations).forEach(({ key, val }) => {\r\n      let commit = store.commit;\r\n\r\n      if (moduleName) {\r\n        commit = (...args) => {\r\n          store.commit(args[0], args[1], args[2], moduleName);\r\n        };\r\n      }\r\n\r\n      if (typeof val === 'function') {\r\n        objRef.current![key] = function (...args) {\r\n          return val.apply(this, [commit].concat(args));\r\n        };\r\n      } else {\r\n        objRef.current![key] = function (...args) {\r\n          return commit.apply(store, [val].concat(args));\r\n        };\r\n      }\r\n    });\r\n  }\r\n\r\n  return objRef.current;\r\n};\r\n\r\nexport const useMapActions = (moduleName, actions) => {\r\n  const store = useStore();\r\n  const objRef = useRef<null | { [key: string]: () => any }>(null);\r\n  if (objRef.current === null) {\r\n    if (typeof moduleName !== 'string') {\r\n      actions = moduleName;\r\n      moduleName = '';\r\n    }\r\n\r\n    objRef.current = {};\r\n\r\n    toArray(actions).forEach(({ key, val }) => {\r\n      let dispatch = store.dispatch;\r\n\r\n      if (moduleName) {\r\n        dispatch = (...args) => {\r\n          store.dispatch(args[0], args[1], args[2], moduleName);\r\n        };\r\n      }\r\n\r\n      if (typeof val === 'function') {\r\n        objRef.current![key] = function (...args) {\r\n          return val.apply(this, [dispatch].concat(args));\r\n        };\r\n      } else {\r\n        objRef.current![key] = function (...args) {\r\n          return dispatch.apply(store, [val].concat(args));\r\n        };\r\n      }\r\n    });\r\n  }\r\n\r\n  return objRef.current;\r\n};\r\n\r\nfunction toArray(map) {\r\n  if (!(Array.isArray(map) || (map !== null && typeof map === 'object'))) {\r\n    return [];\r\n  }\r\n  return Array.isArray(map)\r\n    ? map.map(key => ({ key, val: key }))\r\n    : Object.keys(map).map(key => ({ key, val: map[key] }));\r\n}\r\n"],"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","watch","vueReactive","useComputed","computed","MUTATION_PREFIX","GETTER_PREFIX","storeMap","Map","getStoreXCache","createStore","options","modules","_modules","_getters","vuexStore","state","Proxy","get","_","storeX","rootStoreX","getters","includes","_key$split","split","moduleName","getterKey","commit","_type","_payload","_options","_prepareTypeParams","prepareTypeParams","type","payload","root","_type$split","undefined","values","forEach","module","namespaced","mutation","dispatch","_prepareTypeParams2","_type$split2","results","action","push","Promise","all","subscribe","fn","$subscribe","subscribeAction","cb","registerModule","_createStoreX","collectGetters","unregisterModule","deleteGetters","hasModule","getModule","_modules$moduleName","install","app","registerStore","storeKey","_i","_Object$entries","entries","_Object$entries$_i","moduleOptions","store","_options$mutations","mutations","_options$actions","actions","_options$getters","getStoreX","createStoreX","id","fromEntries","map","_ref","_ref2","argFirst","$state","rootState","getter","rootGetters","moduleGettersProxy","_ref3","gettersMap","keys","$config","defineProperty","$c","configurable","value","writable","enumerable","useStore","set","useMapState","states","objRef","useRef","current","toArray","val","useMapGetters","useMapMutations","_len","args","Array","_key","concat","_len2","_key2","useMapActions","_ref4","_len3","_key3","_len4","_key4","isArray"],"mappings":"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"}