"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@cloudsop/horizon");function e(){return(e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var r=t.vueReactive.watch;t.vueReactive.useComputed,t.vueReactive.computed;var n=new Map,o=null;function u(t,e,r){return"object"==typeof t&&t.type&&(r=e,e=t,t=t.type),{type:t,payload:e,options:r}}function c(r,n,u,c){var i=n.mutations,s=void 0===i?{}:i,f=n.actions,l=void 0===f?{}:f,p=n.getters,v=void 0===p?{}:p,y="function"==typeof n.state?n.state():n.state,d=t.createStore({id:r,state:y,actions:e({},Object.fromEntries(Object.entries(s).map((function(t){return["m_"+t[0],t[1]]}))),Object.fromEntries(Object.entries(l).map((function(t){var n=t[0],o=t[1];return[n,function(t,n){c=c||g;var i=e({},u,{commit:function(t,e,n){u.commit(t,e,n,r)},dispatch:function(t,e,n){return u.dispatch(t,e,n,r)},state:g.$state,rootState:u.state,getter:u.getters,rootGetters:a(c)});return o.call(g,i,n)}]})))),computed:e({},Object.fromEntries(Object.entries(v).map((function(t){var e=t[0],r=t[1];return["g_"+e,function(t){return c=c||g,r.call(g,g.$state,u.getters,c.$state,a(c))}]}))))}),g=d();return null===o&&(o=d),g}function i(t,e){Object.keys(t.$config.computed).forEach((function(r){Object.defineProperty(e,r,{get:function(){return t.$c[r]},configurable:!0})}))}function a(t){return new Proxy({},{get:function(e,r){return t["g_"+r]}})}var s="DEFAULT_VUEX_STORE";function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return o(),n.get(t)}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;n.set(e,t)}var p=t.vueReactive.computed;function v(t){return Array.isArray(t)||null!==t&&"object"==typeof t?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}exports.GETTER_PREFIX="g_",exports.MUTATION_PREFIX="m_",exports.createStore=function(t){var e=t.modules||{},n={},o={},a={state:new Proxy({},{get:function(t,e){return e in n?n[e].storeX:f[e]}}),getters:new Proxy({},{get:function(t,e){if("string"==typeof e){if(e.includes("/")){var r=e.split("/"),u=r[0],c=r[1];return n[u].storeX["g_"+c]}return o["g_"+e]}}}),commit:function(t,e,r,o){var c=u(t,e,r),i=c.type,a=c.payload,s=c.options;if(null!=s&&s.root)return f["m_"+i](a);if(i.includes("/")){var l=i.split("/"),p=l[0],v=l[1];return n[p].storeX["m_"+v](a)}if(null!=o)return n[o].storeX["m_"+i](a);Object.values(n).forEach((function(t){if(!t.namespaced){var e=t.storeX["m_"+i];"function"==typeof e&&e(a)}})),f["m_"+i]&&f["m_"+i](a)},dispatch:function(t,e,r,o){var c=u(t,e,r),i=c.type,a=c.payload,s=c.options;if(null!=s&&s.root)return f[i](a);if(i.includes("/")){var l=i.split("/"),p=l[0],v=l[1];return n[p].storeX[v](a)}if(null!=o)return n[o].storeX[i](a);var y=[];return Object.values(n).forEach((function(t){if(!t.namespaced){var e=t.storeX[i];"function"==typeof e&&y.push(e(a))}})),"function"==typeof f[i]&&y.push(f[i](a)),Promise.all(y)},subscribe:function(t){return f.$subscribe(t)},subscribeAction:function(t){return f.$subscribe(t)},watch:function(t,e){r((function(){return t(a.state,a.getters)}),e)},registerModule:function(t,e){n[t]={storeX:c(t,e,a,f),namespaced:!!e.namespaced},i(n[t].storeX,o)},unregisterModule:function(t){var e,r;e=n[t].storeX,r=o,Object.keys(e.$config.computed).forEach((function(t){Object.defineProperty(r,t,{value:void 0,writable:!0,enumerable:!0,configurable:!0}),delete r[t]})),delete n[t]},hasModule:function(t){return t in n},getModule:function(t){var e;return null===(e=n[t])||void 0===e?void 0:e.storeX},install:function(t,e){l(this,e||s)}},f=c(void 0,t,a);i(f,o);for(var p=0,v=Object.entries(e);p<v.length;p++){var y=v[p],d=y[0],g=y[1];n[d]={storeX:c(d,g,a,f),namespaced:!!g.namespaced},i(n[d].storeX,o)}return a},exports.moduleGettersProxy=a,exports.prepareTypeParams=u,exports.registerStore=l,exports.storeKey=s,exports.useMapActions=function(e,r){var n=f(),o=t.useRef(null);return null===o.current&&("string"!=typeof e&&(r=e,e=""),o.current={},v(r).forEach((function(t){var r=t.key,u=t.val,c=n.dispatch;e&&(c=function(){n.dispatch(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],e)}),o.current[r]="function"==typeof u?function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return u.apply(this,[c].concat(e))}:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return c.apply(n,[u].concat(e))}}))),o.current},exports.useMapGetters=function(e,r){var n=f(),o=t.useRef(null);return null===o.current&&("string"!=typeof e&&(r=e,e=""),o.current={},v(r).forEach((function(t){var r=t.key,u=t.val;e&&(u=e+"/"+u),o.current[r]=p((function(){return n.getters[u]}))}))),o.current},exports.useMapMutations=function(e,r){var n=f(),o=t.useRef(null);return null===o.current&&("string"!=typeof e&&(r=e,e=""),o.current={},v(r).forEach((function(t){var r=t.key,u=t.val,c=n.commit;e&&(c=function(){n.commit(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],e)}),o.current[r]="function"==typeof u?function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return u.apply(this,[c].concat(e))}:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return c.apply(n,[u].concat(e))}}))),o.current},exports.useMapState=function(e,r){var n=f(),o=t.useRef(null);return null===o.current&&("string"!=typeof e&&(r=e,e=""),o.current={},v(r).forEach((function(t){var r=t.key,u=t.val,c=n.state,i=n.getters;if(e){var s=n.getModule(e);if(!s)return;c=s.$state,i=a(s)}o.current[r]=p("function"==typeof u?function(){return u(c,i)}:function(){return c[u]})}))),o.current},exports.useStore=f;
//# sourceMappingURL=vuex-adapter.min.js.map
