{"version":3,"file":"vue-adapter.min.js","sources":["../../../src/vue/lifecycle.ts","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/extends.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../../src/vue/vShow.ts","../../../src/vue/globalAPI.tsx","../../../src/vue/directive.tsx","../../../src/vue/condition.tsx","../../../src/vue/sfcAPI.tsx","../../../src/vue/helper.tsx","../../../src/vue/useScoped.ts","../../../src/vue/props.tsx","../../../src/vue/injectProvide.tsx","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../src/vue/keepAlive/context.ts","../../../src/vue/keepAlive/lifeCycleHooks.ts","../../../src/vue/keepAlive/keeper.tsx","../../../src/vue/keepAlive/keepAlive.tsx","../../../src/vue/dynamicComponent.tsx","../../../src/vue/keepAlivePro.tsx","../../../src/vue/semiControlledComponent.tsx"],"sourcesContent":["/*\n * Copyright (c) 2024 Huawei Technologies Co.,Ltd.\n *\n * openInula is licensed under Mulan PSL v2.\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\n * You may obtain a copy of Mulan PSL v2 at:\n *\n *          http://license.coscl.org.cn/MulanPSL2\n *\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n * See the Mulan PSL v2 for more details.\n */\nimport { useEffect, useLayoutEffect, useRef } from '@cloudsop/horizon';\nimport { FN } from './types';\n\n// 用于存储组件是否已挂载的状态\nexport const useIsMounted = () => {\n  const isMounted = useRef(false);\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return isMounted.current;\n};\n\nexport const onBeforeMount = (fn: FN) => {\n  const isMounted = useIsMounted();\n  if (!isMounted) {\n    fn?.();\n  }\n};\n\nexport function onMounted(fn: FN) {\n  useEffect(() => {\n    fn?.();\n  }, []);\n}\n\nexport function onBeforeUpdate(fn: FN) {\n  useEffect(() => {\n    fn?.();\n  });\n}\n\nexport function onUpdated(fn: FN) {\n  useEffect(() => {\n    fn?.();\n  });\n}\n\nexport const onBeforeUnmount = (fn: FN) => {\n  useLayoutEffect(() => {\n    return () => {\n      fn?.();\n    };\n  }, []);\n};\n\nexport function onUnmounted(fn: FN) {\n  useEffect(() => {\n    return () => {\n      fn?.();\n    };\n  }, []);\n}\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","/*\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\n *\n * openInula is licensed under Mulan PSL v2.\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\n * You may obtain a copy of Mulan PSL v2 at:\n *\n *          http://license.coscl.org.cn/MulanPSL2\n *\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n * See the Mulan PSL v2 for more details.\n */\n\nimport { Directive } from './directive';\n\nconst vShowOriginalDisplay = Symbol('_v_show_original_display');\n\nexport const vShow: Directive = {\n  beforeMount(el, { value }) {\n    el[vShowOriginalDisplay] = el.style.display === 'none' ? '' : el.style.display;\n\n    setDisplay(el, value);\n  },\n  updated(el, { value, oldValue }) {\n    if (!value === !oldValue) return;\n\n    setDisplay(el, value);\n  },\n  beforeUnmount(el, { value }) {\n    setDisplay(el, value);\n  },\n};\n\nfunction setDisplay(el: HTMLElement, value: unknown): void {\n  el.style.display = value ? el[vShowOriginalDisplay] : 'none';\n}\n","/*\r\n * Copyright (c) 2024 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport Horizon, {\r\n  createContext,\r\n  lazy,\r\n  render,\r\n  Suspense,\r\n  unmountComponentAtNode,\r\n  useContext,\r\n  vueReactive,\r\n} from '@cloudsop/horizon';\r\nimport { vShow } from './vShow';\r\n\r\nconst { useInstance } = vueReactive;\r\n\r\nexport interface AppContext {\r\n  app: App;\r\n  config: AppConfig;\r\n  components: Record<string, any>;\r\n  directives: Record<string, any>;\r\n  provides: Record<string | symbol, any>;\r\n}\r\n\r\nexport interface AppConfig {\r\n  globalProperties: Record<string, any>;\r\n}\r\n\r\nexport function createAppContext(): AppContext {\r\n  return {\r\n    app: null as any,\r\n    config: {\r\n      globalProperties: {},\r\n    },\r\n    components: {},\r\n    directives: {},\r\n    provides: Object.create(null),\r\n  };\r\n}\r\n\r\nexport interface App<HostElement = any> {\r\n  _container: HostElement | null;\r\n  _context: AppContext;\r\n\r\n  rootComponent: any;\r\n  version: string;\r\n  config: AppConfig;\r\n\r\n  use<Options extends unknown[]>(plugin: Plugin<Options>, ...options: Options): this;\r\n\r\n  use<Options>(plugin: Plugin<Options>, options: Options): this;\r\n\r\n  mixin(mixin: any): this;\r\n\r\n  component(name: string, component: any): this;\r\n\r\n  directive(name: string, directive: any): this;\r\n\r\n  mount(rootContainer: HostElement | string): any;\r\n\r\n  unmount(): void;\r\n\r\n  provide<T>(key: string, value: T): this;\r\n\r\n  runWithContext<T>(fn: () => T): T;\r\n}\r\n\r\ntype PluginInstallFunction<Options = any[]> = Options extends unknown[]\r\n  ? (app: App, ...options: Options) => any\r\n  : (app: App, options: Options) => any;\r\n\r\nexport type ObjectPlugin<Options = any[]> = {\r\n  install: PluginInstallFunction<Options>;\r\n};\r\nexport type FunctionPlugin<Options = any[]> = PluginInstallFunction<Options> & Partial<ObjectPlugin<Options>>;\r\n\r\nexport type Plugin<Options = any[]> = FunctionPlugin<Options> | ObjectPlugin<Options>;\r\n\r\nfunction AppWrapper(props) {\r\n  const AppContext = props.appContext;\r\n\r\n  return <AppContext.Provider value={props.value}>{props.root}</AppContext.Provider>;\r\n}\r\n\r\nconst DEFAULT_APP_KEY = 'DEFAULT_APP_KEY';\r\nconst appMap = new Map<string, App>();\r\nconst AppContext = createContext<App | null>(null);\r\n\r\nexport function createApp(rootComponent, id: string = DEFAULT_APP_KEY) {\r\n  const context = createAppContext();\r\n  const installedPlugins = new WeakSet();\r\n  let isMounted = false;\r\n\r\n  if (typeof rootComponent === 'function') {\r\n    rootComponent = Horizon.createElement(rootComponent, {});\r\n  }\r\n\r\n  const app: App = (context.app = {\r\n    _container: null,\r\n    _context: context,\r\n\r\n    rootComponent,\r\n    version: '1.0.0',\r\n\r\n    get config() {\r\n      return context.config;\r\n    },\r\n\r\n    set config(v) {},\r\n\r\n    use(plugin: Plugin, ...options: any[]) {\r\n      if (installedPlugins.has(plugin)) {\r\n        // 已经安装过了\r\n      } else if (plugin && typeof plugin.install === 'function') {\r\n        installedPlugins.add(plugin);\r\n        plugin.install(app, ...options);\r\n      } else if (typeof plugin === 'function') {\r\n        installedPlugins.add(plugin);\r\n        plugin(app, ...options);\r\n      }\r\n\r\n      return app;\r\n    },\r\n\r\n    mixin(mixin) {\r\n      // 不支持\r\n      console.log('Horizon中暂时不支持mixin，请用Hook方式进行改造代码。');\r\n      return app;\r\n    },\r\n\r\n    component(name, component) {\r\n      const ccName = kebabToCamelCase(name);\r\n      if (!component) {\r\n        return context.components[ccName];\r\n      }\r\n\r\n      context.components[ccName] = component;\r\n      return app;\r\n    },\r\n\r\n    directive(name, directive) {\r\n      if (!directive) {\r\n        return context.directives[name];\r\n      }\r\n\r\n      context.directives[name] = directive;\r\n      return app;\r\n    },\r\n\r\n    mount(rootContainer) {\r\n      if (!isMounted) {\r\n        if (typeof rootContainer === 'string') {\r\n          rootContainer = document.querySelector(rootContainer);\r\n        }\r\n\r\n        render(<AppWrapper root={app.rootComponent} appContext={AppContext} value={app} />, rootContainer);\r\n\r\n        isMounted = true;\r\n        app._container = rootContainer;\r\n      }\r\n    },\r\n\r\n    unmount() {\r\n      if (isMounted) {\r\n        unmountComponentAtNode(app._container);\r\n\r\n        delete app._container;\r\n      }\r\n    },\r\n\r\n    provide(key, value) {\r\n      context.provides[key as string | symbol] = value;\r\n\r\n      return app;\r\n    },\r\n\r\n    runWithContext(fn) {\r\n      // 不支持\r\n      console.log('Horizon中暂时不支持runWithContext，请手动修改相关的代码。');\r\n      return fn();\r\n    },\r\n  });\r\n\r\n  // 默认提供v-show指令\r\n  app.directive('show', vShow);\r\n\r\n  appMap.set(id, app);\r\n\r\n  return app;\r\n}\r\n\r\nexport function useGlobalProperties(): Record<string, any>;\r\nexport function useGlobalProperties(name: string): any;\r\nexport function useGlobalProperties(name?: string): any {\r\n  const app = useContext(AppContext);\r\n\r\n  if (name) {\r\n    return app!.config.globalProperties[name];\r\n  } else {\r\n    return app!.config.globalProperties;\r\n  }\r\n}\r\n\r\nexport function useProvide(name: string) {\r\n  const app = useContext(AppContext);\r\n  return app!._context.provides[name];\r\n}\r\n\r\nexport function registerComponent(name: string, component: any) {\r\n  const app = appMap.get(DEFAULT_APP_KEY);\r\n  app!.component(name, component);\r\n}\r\n\r\nfunction kebabToCamelCase(str: string) {\r\n  return str\r\n    .split('-')\r\n    .map(sub => {\r\n      return sub.charAt(0).toUpperCase() + sub.substr(1);\r\n    })\r\n    .join('');\r\n}\r\n\r\nexport function GlobalComponent({ componentName, ...otherProps }) {\r\n  const app = useContext(AppContext);\r\n  componentName = kebabToCamelCase(componentName);\r\n  const Comp = app!._context.components[componentName];\r\n\r\n  if (!Comp) {\r\n    throw new Error(`Component ${componentName} not found, please register it first.`);\r\n  }\r\n\r\n  return <Comp {...otherProps} />;\r\n}\r\n\r\nexport function registerDirective(name: string, directive: any) {\r\n  const app = appMap.get(DEFAULT_APP_KEY);\r\n  app!.directive(name, directive);\r\n}\r\n\r\nexport function useDirectives() {\r\n  const app = useContext(AppContext);\r\n  return app!._context.directives;\r\n}\r\n\r\nexport function defineAsyncComponent(loader: () => Promise<any>) {\r\n  const LazyComponent = lazy(loader);\r\n\r\n  return props => (\r\n    <Suspense fallback={null}>\r\n      <LazyComponent {...props} />\r\n    </Suspense>\r\n  );\r\n}\r\n\r\nexport function emit<T extends Record<string, any>>(props: T, eventName: keyof T, ...args: Parameters<any>): void {\r\n  let fn = props[eventName];\r\n\r\n  if (typeof fn !== 'function' && typeof eventName === 'string' && !eventName.startsWith('on')) {\r\n    const capitalizedEventName = eventName.charAt(0).toUpperCase() + eventName.slice(1);\r\n    const onEventName = `on${capitalizedEventName}` as keyof T;\r\n    fn = props[onEventName];\r\n  }\r\n\r\n  if (typeof fn === 'function') {\r\n    fn(...args);\r\n  } else {\r\n    console.warn(`Attempted to emit event '${String(eventName)}' but no handler was defined.`);\r\n  }\r\n}\r\n\r\nexport function getCurrentInstance(): any {\r\n  const instance = useInstance();\r\n  const app = useContext(AppContext);\r\n\r\n  return {\r\n    vnode: {\r\n      get el() {\r\n        return instance['$el'];\r\n      },\r\n    },\r\n    proxy: instance,\r\n    appContext: {\r\n      app,\r\n    },\r\n  };\r\n}\r\n","import Horizon, {\n  ComponentType,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  createElement,\n  vueReactive,\n} from '@cloudsop/horizon';\nimport { useDirectives } from './globalAPI';\n\nconst { useInstance } = vueReactive;\n\n/**\n * Vue写法：<div v-click-outside:foo.bar=\"closePopup\" v-focus class=\"popup\">\n * Horizon写法：\n * <DirectiveComponent\n *   componentName={'div'}\n *   directives={[\n *     {\n *       name: 'click-outside',\n *       arg: 'foo',\n *       modifiers: { bar: true },\n *       value: closePopup,\n *     },\n *     {\n *       name: 'focus',\n *     },\n *   ]}\n *   class=\"popup\"\n * >\n *   <div>child</div>\n * </DirectiveComponent>\n *\n * @param props 组件属性\n */\n\ninterface DirectiveBinding {\n  value?: any;\n  oldValue?: any;\n  arg?: string;\n  modifiers?: Record<string, boolean>;\n}\n\nexport interface Directive {\n  bind?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  inserted?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  update?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  componentUpdated?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  unbind?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  beforeMount?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  mounted?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  updated?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  beforeUnmount?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  unmounted?: (el: HTMLElement, binding: DirectiveBinding) => void;\n}\n\ninterface DirectiveComponentProps {\n  children?: any;\n  componentName: string | ComponentType<any>;\n  directives: {\n    name: string;\n    value?: any;\n    oldValue?: any;\n    arg?: string;\n    modifiers?: Record<string, boolean>;\n  }[];\n  registerDirectives?: Record<string, Directive>;\n\n  [key: string]: any;\n}\n\nexport function DirectiveComponent(props: DirectiveComponentProps) {\n  const { children, componentName, directives, registerDirectives, ...rest } = props;\n  const appDirectives = useDirectives();\n  const instance = useInstance();\n\n  useLayoutEffect(() => {\n    applyDirectives('beforeMount', directives);\n    applyDirectives('mounted', directives);\n    applyDirectives('bind', directives);\n    return () => {\n      applyDirectives('beforeUnmount', directives);\n      applyDirectives('unmounted', directives);\n      applyDirectives('unbind', directives);\n    };\n  }, []);\n\n  useEffect(() => {\n    applyDirectives('updated', directives);\n    applyDirectives('update', directives);\n    applyDirectives('componentUpdated', directives);\n  });\n\n  const prevDirectiveValues: Record<string, any> = useMemo(() => ({}), []);\n  const applyDirectives = useCallback((hook: keyof Directive, directives) => {\n    directives.forEach(directive => {\n      const { name, value, arg, modifiers } = directive;\n      const oldValue = prevDirectiveValues[name];\n      prevDirectiveValues[name] = value;\n\n      let directiveObj: Directive = {};\n      if (registerDirectives && registerDirectives[name]) {\n        directiveObj = registerDirectives[name];\n      } else {\n        directiveObj = appDirectives[name];\n      }\n\n      if (directiveObj && directiveObj[hook]) {\n        directiveObj[hook]!(instance['$el']!, { value, oldValue, arg, modifiers });\n      }\n    });\n  }, []);\n\n  return createElement(\n    componentName,\n    {\n      ...rest,\n    },\n    children\n  );\n}\n","/*\r\n * Copyright (c) 2024 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport Horizon, { isValidElement, Children, FC } from '@cloudsop/horizon';\r\n\r\ninterface ConditionalProps {\r\n  children?: any;\r\n  condition: boolean;\r\n}\r\n\r\nexport const If: FC<ConditionalProps> = ({ children, condition }) => {\r\n  return condition ? <>{children}</> : null;\r\n};\r\n\r\nexport const ElseIf: FC<ConditionalProps> = If;\r\n\r\nexport const Else: FC<Omit<ConditionalProps, 'condition'>> = ({ children }) => {\r\n  return <>{children}</>;\r\n};\r\n\r\ninterface ConditionalRendererProps {\r\n  children?: any;\r\n}\r\n\r\nexport const ConditionalRenderer: FC<ConditionalRendererProps> = ({ children }) => {\r\n  const childrenArray = Children.toArray(children);\r\n  const renderedChild = childrenArray.find(child => {\r\n    if (isValidElement(child)) {\r\n      if (child.type === If || child.type === ElseIf) {\r\n        return child.props.condition;\r\n      }\r\n      if (child.type === Else) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  });\r\n\r\n  return renderedChild ? <>{renderedChild}</> : null;\r\n};\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { InulaNode, vueReactive } from '@cloudsop/horizon';\r\nimport { emit } from './globalAPI';\r\n\r\nconst { useInstance } = vueReactive;\r\n\r\ntype AnyProps = Record<string, any>;\r\n\r\n/**\r\n * Custom Hook to simulate Vue's fallthrough attributes functionality\r\n * @param props Component props\r\n * @param excludeList Parameters declared as props do not fallthrough\r\n * @returns fallthrough attributes\r\n */\r\nexport function useAttrs<T extends AnyProps>(props: T, excludeList: (keyof T)[] = []): Omit<T, keyof T & string> {\r\n  const attrs = { ...props } as T;\r\n  excludeList.forEach(key => delete attrs[key]);\r\n  const instance = useInstance();\r\n  instance.$attrs = attrs;\r\n  return attrs;\r\n}\r\n\r\ntype Slots = {\r\n  [key: string]: SlotFunction | InulaNode;\r\n  default?: InulaNode;\r\n};\r\ntype SlotFunction = (props: any) => InulaNode;\r\n\r\n/**\r\n * Custom Hook to simulate Vue's useSlots functionality in React\r\n * @param props Component props\r\n * @returns An object containing all slots, including the default slot\r\n */\r\nexport function useSlots(props: AnyProps): Slots {\r\n  const slots: Slots = {};\r\n\r\n  // Extract template slots from props\r\n  Object.entries(props).forEach(([key, value]) => {\r\n    if (key.startsWith('template_')) {\r\n      const slotName = key.replace('template_', '');\r\n      slots[slotName] = value;\r\n    }\r\n  });\r\n\r\n  // Add default slot if children are provided\r\n  if (props.children) {\r\n    slots.default = props.children;\r\n  }\r\n\r\n  return slots;\r\n}\r\n\r\nexport function defineExpose<Exposed extends Record<string, any> = Record<string, any>>(exposed?: Exposed) {\r\n  const instance = useInstance();\r\n\r\n  if (instance) {\r\n    // 检查 exposed 是否是一个对象\r\n    if (typeof exposed === 'object' && exposed !== null) {\r\n      // 遍历 exposed 对象的所有属性\r\n      Object.keys(exposed).forEach(key => {\r\n        // 将每个属性赋值给 instance\r\n        instance[key] = exposed[key];\r\n      });\r\n    } else {\r\n      console.warn('defineExpose: Argument should be an object');\r\n    }\r\n  } else {\r\n    console.warn('defineExpose: No instance found. Make sure this is called inside a component setup function.');\r\n  }\r\n}\r\n\r\ntype ObjectEmitsOptions = Record<string, ((...args: any[]) => any) | null>;\r\ntype EmitsOptions = ObjectEmitsOptions | string[];\r\n\r\n// 新的 defineEmits 函数实现\r\nexport function defineEmits<T extends EmitsOptions>(emits: T, props: AnyProps) {\r\n  return function <K extends keyof T>(eventName: K, ...args: Parameters<any>) {\r\n    emit(props, eventName as string, ...args);\r\n  };\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\n/**\r\n * 将函数和属性设置到指定实例上\r\n * @param {Object} instance - 目标实例对象\r\n * @param {Array|Object} items - 要设置的函数或 [key, value] 键值对数组，或者包含方法的对象\r\n * @returns {Object} 返回修改后的实例（支持链式调用）\r\n */\r\nexport function setToInstance(instance, items) {\r\n  // 如果是对象类型，直接遍历对象的键值对\r\n  if (items && typeof items === 'object' && !Array.isArray(items)) {\r\n    Object.entries(items).forEach(([key, value]) => {\r\n      if (key) {\r\n        instance[key] = value;\r\n      } else {\r\n        console.warn('跳过没有键名的项:', value);\r\n      }\r\n    });\r\n    return instance;\r\n  }\r\n\r\n  // 处理数组类型的输入\r\n  if (Array.isArray(items)) {\r\n    items.forEach(item => {\r\n      // 处理数组类型的 [key, value] 键值对\r\n      if (Array.isArray(item)) {\r\n        const [key, value] = item;\r\n        if (key) {\r\n          instance[key] = value;\r\n        } else {\r\n          console.warn('跳过没有键名的数组项:', item);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // 处理函数类型\r\n      if (typeof item === 'function') {\r\n        const methodName = item.name;\r\n        if (methodName) {\r\n          instance[methodName] = item;\r\n        } else {\r\n          console.warn('跳过未命名的函数');\r\n        }\r\n        return;\r\n      }\r\n\r\n      // 处理无效的输入类型\r\n      console.warn('跳过无效的项:', item);\r\n    });\r\n  } else {\r\n    console.warn('无效的 items 类型:', items);\r\n  }\r\n\r\n  // 返回实例以支持链式调用\r\n  return instance;\r\n}\r\n\r\nexport function styles(...args) {\r\n  // 主处理逻辑：处理所有参数并合并结果\r\n  return args.reduce((acc, arg) => ({ ...acc, ...processArg(arg) }), {});\r\n}\r\n\r\n// 辅助函数：将破折号式命名转换为驼峰式命名\r\nconst toCamelCase = str => str.replace(/-([a-z])/g, g => g[1].toUpperCase());\r\n\r\n// 辅助函数：处理单个样式字符串\r\nconst processStyleString = styleString => {\r\n  const result = {};\r\n  styleString.split(';').forEach(item => {\r\n    const [key, value] = item.split(':').map(part => part.trim());\r\n    if (key && value) {\r\n      result[toCamelCase(key)] = value;\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\n// 辅助函数：处理样式对象\r\nconst processStyleObject = styleObject => {\r\n  const result = {};\r\n  for (let key in styleObject) {\r\n    const camelKey = toCamelCase(key);\r\n    let value = styleObject[key];\r\n    // 处理数字值\r\n    if (typeof value === 'number' && !isNaN(value)) {\r\n      // 某些属性不需要单位，如 zIndex, opacity 等\r\n      if (!['zIndex', 'opacity', 'fontWeight'].includes(camelKey)) {\r\n        value = `${value}px`;\r\n      }\r\n    }\r\n    result[camelKey] = value;\r\n  }\r\n  return result;\r\n};\r\n\r\n// 处理单个参数\r\nconst processArg = arg => {\r\n  if (typeof arg === 'string') {\r\n    return processStyleString(arg);\r\n  } else if (Array.isArray(arg)) {\r\n    return arg.reduce((acc, item) => ({ ...acc, ...processArg(item) }), {});\r\n  } else if (typeof arg === 'object' && arg !== null) {\r\n    return processStyleObject(arg);\r\n  } else {\r\n    return {}; // 处理无效输入\r\n  }\r\n};\r\n","import { vueReactive, useEffect, useRef } from '@cloudsop/horizon';\nimport type { VNode, Instance } from '@cloudsop/horizon';\nimport { styles } from './helper';\n\nconst { useInstance } = vueReactive;\n\n/**\n * 判断是否应该跳过为元素设置属性\n * 通过遍历虚拟节点树来确定是否需要跳过属性设置\n * @param vNode - 虚拟节点\n * @returns 如果应该跳过则返回 true，否则返回 false\n */\nfunction shouldSkipSetAttrToEl(vNode: VNode): boolean {\n  let node = vNode;\n\n  while (node.child) {\n    if (node.child.next) {\n      return true;\n    }\n    if (node.child.tag === 'DomComponent') {\n      break;\n    }\n    node = node.child;\n  }\n  return false;\n}\n\n\nfunction useScoped(): void {\n  const instance: Instance = useInstance();\n  const preClass = useRef<string | undefined>(instance.$props.className);\n\n  // 处理 className\n  useEffect(() => {\n    if (shouldSkipSetAttrToEl(instance.$vnode)) {\n      return;\n    }\n\n    const el = instance.$el as HTMLElement;\n    const currentClassName = instance.$props.className || '';\n\n    // 确保元素有初始的 className\n    if (!el.className) {\n      el.className = '';\n    }\n\n    // 如果存在之前的类名，则替换\n    if (preClass.current && el.className.includes(preClass.current)) {\n      el.className = el.className.replace(preClass.current, currentClassName).trim();\n    } else if (currentClassName) {\n      // 如果有新的类名要添加，且没有找到之前的类名，则追加\n      el.className = el.className ? `${el.className} ${currentClassName}`.trim() : currentClassName;\n    }\n\n    // 更新引用的类名\n    preClass.current = currentClassName;\n  }, [instance.$props.className]);\n\n  // 处理 style\n  useEffect(() => {\n    if (shouldSkipSetAttrToEl(instance.$vnode)) {\n      return;\n    }\n\n    const el = instance.$el as HTMLElement;\n\n    if (instance.$props.style) {\n      const styleToApply = styles(el.style.cssText, instance.$props.style);\n\n      Object.entries(styleToApply).forEach(([key, value]) => {\n        if (!key) return;\n        el.style[key.trim()] = typeof value === 'string' ? value.trim() : value;\n      });\n    }\n  }, [instance.$props.style]);\n\n  // 处理 data-v-hash\n  useEffect(() => {\n    if (shouldSkipSetAttrToEl(instance.$vnode)) {\n      return;\n    }\n\n    const el = instance.$el as HTMLElement;\n    const hashKeyLength = 15;\n    const key = Object.keys(instance.$props).find(key => key.startsWith('data-v-') && key.length === hashKeyLength);\n\n    if (key) {\n      el.setAttribute(key, instance.$props[key]);\n    }\n  }, []);\n}\n\nexport default useScoped;\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport Horizon, { vueReactive, useRef, ReactiveRet } from '@cloudsop/horizon';\r\nimport useScoped from './useScoped';\r\n\r\nconst { shallowReactive } = vueReactive;\r\n\r\ninterface Data {\r\n  [key: string]: any;\r\n}\r\n\r\ninterface Option {\r\n  default?: any | (() => any);\r\n  type?: any;\r\n}\r\n\r\ninterface Options {\r\n  [key: string]: Option;\r\n}\r\n\r\n/**\r\n * 自定义 Hook，用于处理响应式属性\r\n * @param rawProps 原始属性对象或 null\r\n * @param options 可选的配置对象，用于设置默认值\r\n * @returns 响应式处理后的属性对象\r\n */\r\nexport function useReactiveProps(rawProps: Data | null, options: Options = {}): ReactiveRet<Data> {\r\n  // 使用 useRef 来存储响应式对象，确保在重渲染时保持引用\r\n  const objRef = useRef<null | ReactiveRet<Data>>(null);\r\n\r\n  if (objRef.current === null) {\r\n    // 首次渲染时初始化属性\r\n    objRef.current = initProps(rawProps, options);\r\n  } else {\r\n    // 后续更新时更新属性\r\n    updateProps(objRef.current, rawProps, options);\r\n  }\r\n\r\n  useScoped();\r\n\r\n  return objRef.current;\r\n}\r\n\r\n/**\r\n * 初始化属性对象\r\n * @param rawProps 原始属性对象或 null\r\n * @param options 配置对象，包含默认值\r\n * @returns 响应式处理后的属性对象\r\n */\r\nexport function initProps(rawProps: Data | null, options: Options): ReactiveRet<Data> {\r\n  const props: Data = {};\r\n\r\n  // 设置完整的属性\r\n  setFullProps(rawProps, props, options);\r\n\r\n  return shallowReactive(props) as ReactiveRet<Data>;\r\n}\r\n\r\n/**\r\n * 设置完整的属性\r\n * @param rawProps 原始属性对象或 null\r\n * @param props 目标属性对象\r\n * @param options 属性配置对象，包含默认值等信息\r\n */\r\nfunction setFullProps(rawProps: Data | null, props: Data, options: Options): void {\r\n  if (rawProps) {\r\n    for (const key in rawProps) {\r\n      const value = rawProps[key];\r\n      props[key] = resolvePropValue(options, key, value);\r\n    }\r\n  }\r\n\r\n  // 设置默认值\r\n  for (const key in options) {\r\n    if (\r\n      Object.prototype.hasOwnProperty.call(options, key) &&\r\n      (!Object.prototype.hasOwnProperty.call(props, key) || props[key] === undefined)\r\n    ) {\r\n      props[key] = resolvePropValue(options, key, props[key]);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 更新属性对象\r\n * @param props 待更新的属性对象\r\n * @param rawProps 包含新值的原始属性对象或 null\r\n * @param options 属性配置对象，包含默认值等信息\r\n */\r\nexport function updateProps(props: Data, rawProps: Data | null, options: Options): void {\r\n  for (const key in rawProps) {\r\n    const value = rawProps![key];\r\n    props[key] = resolvePropValue(options, key, value);\r\n  }\r\n}\r\n\r\n/**\r\n * 解析属性值，考虑默认值\r\n * @param options 配置对象，包含默认值\r\n * @param key 属性键\r\n * @param value 当前属性值\r\n * @returns 解析后的属性值\r\n */\r\nfunction resolvePropValue(options: Options, key: string, value: unknown): unknown {\r\n  const opt = options[key];\r\n  if (opt != null) {\r\n    // 设置默认值\r\n    if (opt.default != null && value === undefined) {\r\n      const defaultValue = opt.default;\r\n      if (typeof defaultValue === 'function' && !(opt.type && opt.type === Function)) {\r\n        value = defaultValue();\r\n      } else {\r\n        value = defaultValue;\r\n      }\r\n    }\r\n  }\r\n  return value;\r\n}\r\n","import { createContext, useContext } from '@cloudsop/horizon';\r\n\r\n// Allows holding multiple variables and accessing them implicitly\r\nconst contextMap = new Map();\r\n\r\n// Stores context variable for current branch\r\nexport function provide(name, value) {\r\n  // If variable already exists, it stores its local value\r\n  if (contextMap.has(name)) {\r\n    const ctx = contextMap.get(name);\r\n    ctx.value = value;\r\n    // If variable does not exist yet, it creates new context in map\r\n  } else {\r\n    contextMap.set(name, createContext(value));\r\n  }\r\n}\r\n\r\nexport function inject(name, defaultValue?) {\r\n  // If variable exists, local value is returned\r\n  if (contextMap.has(name)) {\r\n    const ctx = contextMap.get(name);\r\n    return ctx.value;\r\n  }\r\n  // If there is no fallback value, error is thrown\r\n  if (!defaultValue) {\r\n    throw Error('Injected value is not provided. Make sure to provide it before use or add default value');\r\n  }\r\n  return defaultValue;\r\n}\r\n","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import { createContext } from '@cloudsop/horizon';\r\nimport { LifeCycleListener } from './lifeCycleHooks';\r\nexport const NodeKeeperLifeCycleContext = createContext<LifeCycleListener | null>(null);\r\n","import { useContext, useRef, useEffect } from '@cloudsop/horizon';\nimport { NodeKeeperLifeCycleContext } from './context';\n\nexport enum KEEP_ALIVE_LIFECYCLE {\n  ACTIVATE = 'componentDidActivate',\n  UNACTIVATE = 'componentWillUnactivate',\n}\n\nexport type LifeCycleFunc = () => unknown;\nconst useActivation = (lifeCycleName: KEEP_ALIVE_LIFECYCLE, func: LifeCycleFunc) => {\n  const keeperCtx = useContext(NodeKeeperLifeCycleContext);\n\n  // 未处于 KeepAlive 中\n  if (!keeperCtx) {\n    return;\n  }\n\n  const preCallback = useRef<LifeCycleFunc>(func);\n  useEffect(() => {\n    const preIndex = keeperCtx[lifeCycleName].indexOf(preCallback.current);\n    if (preIndex >= 0) {\n      keeperCtx[lifeCycleName].splice(preIndex, 1, func);\n    } else {\n      keeperCtx[lifeCycleName].push(func);\n    }\n    preCallback.current = func;\n  }, [func]);\n};\n\nexport const useActivatePro = useActivation.bind(null, KEEP_ALIVE_LIFECYCLE.ACTIVATE);\n\nexport const useUnActivatePro = useActivation.bind(null, KEEP_ALIVE_LIFECYCLE.UNACTIVATE);\n\nexport type LifeCycleListener = Record<KEEP_ALIVE_LIFECYCLE, Array<LifeCycleFunc>>;\n","import React, { useRef, useEffect } from '@cloudsop/horizon';\r\nimport { NodeKeeperLifeCycleContext } from './context';\r\nimport { KEEP_ALIVE_LIFECYCLE, LifeCycleFunc } from './lifeCycleHooks';\r\n\r\ninterface KeeperProps {\r\n  active: boolean;\r\n  key?: any;\r\n  children?: any;\r\n}\r\nconst Keeper = ({ children, active }: KeeperProps) => {\r\n  const wrapper = useRef<HTMLElement>(null);\r\n  const childrenNode = useRef<Element[]>([]);\r\n  const nodeKeeperLifeCycleValue = useRef({\r\n    [KEEP_ALIVE_LIFECYCLE.ACTIVATE]: [] as LifeCycleFunc[],\r\n    [KEEP_ALIVE_LIFECYCLE.UNACTIVATE]: [] as LifeCycleFunc[],\r\n  });\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      childrenNode.current.forEach(child => {\r\n        child.remove();\r\n      });\r\n      nodeKeeperLifeCycleValue.current[KEEP_ALIVE_LIFECYCLE.UNACTIVATE].forEach(callback => {\r\n        callback();\r\n      });\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (active) {\r\n      childrenNode.current = Array.from(wrapper.current?.children || []);\r\n      childrenNode.current.forEach(child => {\r\n        wrapper.current?.parentElement?.insertBefore(child, wrapper.current);\r\n      });\r\n      nodeKeeperLifeCycleValue.current[KEEP_ALIVE_LIFECYCLE.ACTIVATE].forEach(callback => {\r\n        callback();\r\n      });\r\n    } else {\r\n      childrenNode.current.forEach(child => {\r\n        wrapper.current?.appendChild(child);\r\n      });\r\n      nodeKeeperLifeCycleValue.current[KEEP_ALIVE_LIFECYCLE.UNACTIVATE].forEach(callback => {\r\n        callback();\r\n      });\r\n    }\r\n  }, [active]);\r\n\r\n  return (\r\n    <NodeKeeperLifeCycleContext.Provider value={nodeKeeperLifeCycleValue.current}>\r\n      {\r\n        <div style={{ display: 'none' }} ref={wrapper}>\r\n          {children}\r\n        </div>\r\n      }\r\n    </NodeKeeperLifeCycleContext.Provider>\r\n  );\r\n};\r\n\r\nexport default Keeper;\r\n","import React, { useRef, useEffect, useState, useMemo } from '@cloudsop/horizon';\nimport Keeper from './keeper';\n\ntype StringRegexList = string | RegExp | (string | RegExp)[];\ninterface KeepAliveProps {\n  include?: StringRegexList;\n  max?: number;\n  exclude?: StringRegexList;\n  children?: any;\n}\n\n// 更新缓存的children节点key数组\n// 当缓存的实例超过max时，移除最久没有使用的组件缓存, 并把最新的key插到尾部\nfunction updateCachedChildrenKeys(allKeys: string[], lastestKey: string, max: number) {\n  const index = allKeys.indexOf(lastestKey);\n  let needDeletedKey: string = '';\n  if (index >= 0) {\n    // 如果已经缓存过了，则刷新位置\n    allKeys.splice(index, 1);\n  } else if (allKeys.length >= max) {\n    // 如果没有缓存过，且已经达到最大缓存数量，则先把老的删了\n    needDeletedKey = allKeys.shift() as string;\n  }\n  allKeys.push(lastestKey);\n  return needDeletedKey;\n}\n\nfunction isKeyMatched(key: string, limit: StringRegexList) {\n  if (Array.isArray(limit)) {\n    return limit.find(limitItem => isKeyMatched(key, limitItem));\n  }\n  if (typeof limit === 'string') {\n    return limit.split(',').includes(key);\n  }\n  // instanceof 检查的是对象在当前执行环境下的原型链上是否存在该构造函数。\n  // 如果在不同的执行环境（例如不同的 iframe 或 window）中创建了正则表达式对象，instanceof 可能不会返回 true\n  if (Object.prototype.toString.call(limit) === '[object RegExp]') {\n    return limit.test(key);\n  }\n  return false;\n}\n\n// 获取组件的key\nfunction getComponentKey(children) {\n  const { ref, is } = children.props;\n\n  if (ref) return ref;\n\n  // 处理is属性\n  if (is) {\n    // 如果is是函数,获取函数名\n    if (typeof is === 'function') {\n      return is.name || is.displayName;\n    }\n    return is;\n  }\n\n  // fallback到组件名\n  return children?.type?.name;\n}\n\nexport default function KeepAlive({ children, exclude, include, max = Number.MAX_SAFE_INTEGER }: KeepAliveProps) {\n  const childrenMap = useRef(new Map()); // 缓存所有的组件节点\n  const cachedChildrenKeys = useRef<string[]>([]); // 已经缓存的所有children节点的key的数组，按照激活事件由老到新排序。主要用于处理max场景下，有些移除最久没用的组件缓存\n  const [currentChildrenKey, updateCurrentChildrenKey] = useState(null);\n\n  const needCache = useMemo(() => {\n    const key = getComponentKey(children);\n    const isInInclude = !include || isKeyMatched(key, include);\n    const isNotInExclude = !exclude || !isKeyMatched(key, exclude);\n    return isInInclude && isNotInExclude && max !== 0;\n  }, [children, include, exclude, max]);\n\n  useEffect(() => {\n    if (!children) {\n      updateCurrentChildrenKey(null);\n      return;\n    }\n\n    const key = getComponentKey(children);\n\n    if (needCache) {\n      if (key === currentChildrenKey) {\n        return;\n      }\n\n      childrenMap.current.set(key, {\n        key,\n        children: children,\n      });\n\n      const needDeletedKey = updateCachedChildrenKeys(cachedChildrenKeys.current, key, max);\n      if (needDeletedKey) {\n        childrenMap.current.delete(needDeletedKey);\n      }\n    } else {\n      childrenMap.current.delete(key);\n    }\n\n    updateCurrentChildrenKey(key);\n  }, [children]);\n\n  return (\n    <>\n      {Array.from(childrenMap.current.values()).map(({ children, key }) => {\n        return <Keeper children={children} key={key} active={key === currentChildrenKey} />;\n      })}\n      {/* 挂载当前组件的节点 */}\n      {needCache ? null : children}\n    </>\n  );\n}\n","/*\n * Copyright (c) 2024 Huawei Technologies Co.,Ltd.\n *\n * openInula is licensed under Mulan PSL v2.\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\n * You may obtain a copy of Mulan PSL v2 at:\n *\n *          http://license.coscl.org.cn/MulanPSL2\n *\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n * See the Mulan PSL v2 for more details.\n */\nimport Horizon, { ComponentType, InulaElement } from '@cloudsop/horizon';\nimport { getCurrentInstance } from './globalAPI';\n\n// 定义组件映射类型\ninterface ComponentsMap {\n  [key: string]: ComponentType<any>;\n}\n\n// DynamicComponent 的 props 类型\ninterface DynamicComponentProps {\n  is: string | ComponentType;\n  components?: ComponentsMap;\n\n  [key: string]: any; // 允许任意其他属性\n}\n\n/**\n * 对标Vue的动态组件，如：<component :is=\"Math.random() > 0.5 ? Foo : Bar\" />\n * @param is\n * @param components\n * @param componentProps\n * @constructor\n */\nexport function DynamicComponent({ is, components, ...componentProps }: DynamicComponentProps): InulaElement | null {\n  if (is === '') {\n    return null;\n  }\n\n  let Component: any = null;\n\n  if (typeof is === 'string') {\n    const pascalCaseName = toPascalCase(is);\n    // Look in local components first\n    Component = components && components[pascalCaseName];\n\n    // If not found, look in global components\n    if (!Component) {\n      const app = getCurrentInstance().appContext.app;\n      Component = app._context.components[pascalCaseName];\n    }\n  } else if (typeof is === 'function') {\n    // If 'is' is already a component, use it directly\n    Component = is;\n  }\n\n  if (!Component) {\n    Component = is;\n  }\n\n  return <Component {...componentProps} />;\n}\n\n// 把vue风格的组件命名转换为react风格的组件命名，如：my-component => MyComponent\nfunction toPascalCase(name: string): string {\n  // If the string doesn't contain hyphens, just capitalize the first letter\n  if (!name.includes('-')) {\n    return name.charAt(0).toUpperCase() + name.slice(1);\n  }\n\n  // For hyphenated strings, capitalize each word\n  return name\n    .split('-')\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n    .join('');\n}\n","import { ChildrenType, Component, Memo, useEffect, useRef } from '@cloudsop/horizon';\nimport { inject, provide } from './injectProvide';\n\ntype StringRegexList = String | RegExp | (String | RegExp)[];\n\ninterface KeepAliveProps {\n  children?: ChildrenType;\n  max?: number;\n  include?: StringRegexList;\n  exclude?: StringRegexList;\n}\n\ninterface ComponentData {\n  component: () => Component;\n  timestamp: number;\n}\n\nexport function onActivated(listener: () => void): () => void {\n  const listeners = inject('onActivatedListeners');\n  const key = inject('keep-alive-key');\n\n  if (!listeners.has(key)) {\n    listeners.set(key, new Set());\n  }\n\n  listeners.get(key).add(listener);\n\n  return () => {\n    const listeners = inject('onActivatedListeners');\n    const key = inject('keep-alive-key');\n\n    listeners.get(key).delete(listener);\n  };\n}\n\nexport function onDeactivated(listener: () => void): () => void {\n  const listeners = inject('onDeactivatedListeners');\n  const key = inject('keep-alive-key');\n\n  if (!listeners.has(key)) {\n    listeners.set(key, new Set());\n  }\n\n  listeners.get(key).add(listener);\n\n  return () => {\n    const listeners = inject('onDeactivatedListeners');\n    const key = inject('keep-alive-key');\n\n    listeners.get(key).delete(listener);\n  };\n}\n\nfunction checkInclude(name: string, whitelist?: StringRegexList, blacklist?: StringRegexList): boolean {\n  if (blacklist) {\n    if (!Array.isArray(blacklist)) {\n      blacklist = [blacklist];\n    }\n    for (let i = 0; i < blacklist.length; i++) {\n      if (typeof blacklist[i] === 'string') {\n        const keys = (blacklist[i] as string).split(/,\\s*/g);\n        for (let j = 0; j < keys.length; j++) {\n          if (name === keys[j]) return false;\n        }\n      } else if (blacklist[i] instanceof RegExp) {\n        if ((blacklist[i] as RegExp).exec(name)) return false;\n      }\n    }\n  }\n\n  if (whitelist) {\n    if (!Array.isArray(whitelist)) {\n      whitelist = [whitelist];\n    }\n    for (let i = 0; i < whitelist.length; i++) {\n      if (typeof whitelist[i] === 'string') {\n        const keys = (whitelist[i] as string).split(/,\\s*/g);\n        for (let j = 0; j < keys.length; j++) {\n          if (name === keys[j]) return true;\n        }\n      } else if (whitelist[i] instanceof RegExp) {\n        if ((whitelist[i] as RegExp).exec(name)) return true;\n      }\n    }\n    return false;\n  }\n\n  return true;\n}\n\nexport const KeepAlivePro = ({ children, max = Infinity, include, exclude }: KeepAliveProps) => {\n  let componentData, activeComponent;\n  const componentCache = useRef(new Map<string, ComponentData>());\n  let searchComponent = Array.isArray(children) ? children[0] : children;\n  const componentName = searchComponent.props.ref || searchComponent.props.is?.name;\n  const onActivatedListeners = useRef(new Map());\n  const onDeactivatedListeners = useRef(new Map<string, () => {}>());\n  provide('onActivatedListeners', onActivatedListeners.current);\n  provide('onDeactivatedListeners', onDeactivatedListeners.current);\n\n  useEffect(() => {\n    // deactivate active components\n    return () => {\n      Array.from(componentCache.current.entries()).forEach(([name, data]) => {\n        provide('keep-alive-key', name);\n        if (componentName === name) {\n          const listeners: Set<() => {}> = inject('onDeactivatedListeners').get(name);\n          if (!listeners) return;\n          Array.from(listeners).forEach(listener => {\n            listener();\n          });\n        }\n      });\n    };\n  });\n\n  const shouldInclude = checkInclude(componentName, include, exclude);\n\n  if (shouldInclude) {\n    if (componentCache.current.has(componentName)) {\n      componentData = componentCache.current.get(componentName);\n      activeComponent = componentData.component;\n      componentData.timestamp = Date.now();\n    } else {\n      if (componentCache.current.size >= max) {\n        let minKey = '';\n        let minTimestamp = Infinity;\n\n        for (let [key, value] of componentCache.current) {\n          if (value.timestamp < minTimestamp) {\n            minTimestamp = value.timestamp;\n            minKey = key;\n          }\n        }\n\n        if (minKey !== null) {\n          componentCache.current.delete(minKey);\n        }\n      }\n\n      componentCache.current.set(componentName, {\n        timestamp: Date.now(),\n        component: searchComponent,\n      });\n      activeComponent = componentCache.current.get(componentName);\n    }\n  }\n  return (\n    <>\n      {Array.from(componentCache.current.entries()).map(([name, data]) => {\n        provide('keep-alive-key', name);\n        if (componentName === name) {\n          setTimeout(() => {\n            const listeners: Set<() => {}> = inject('onActivatedListeners').get(name);\n            if (!listeners) return;\n            Array.from(listeners).forEach(listener => {\n              listener();\n            });\n          }, 1);\n        }\n        return <div style={componentName === name ? {} : { display: 'none' }}>{data.component}</div>;\n      })}\n      {shouldInclude ? [] : <div>{searchComponent}</div>}\n    </>\n  );\n};\n","/*\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\n *\n * openInula is licensed under Mulan PSL v2.\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\n * You may obtain a copy of Mulan PSL v2 at:\n *\n *          http://license.coscl.org.cn/MulanPSL2\n *\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n * See the Mulan PSL v2 for more details.\n */\n\nimport Horizon, { useState, useEffect, useRef, ChangeEvent, FC } from '@cloudsop/horizon';\n\n// 定义组件的属性接口\ninterface SemiControlledInputProps {\n  value?: { value: string }; // 值对象，包含一个 value 属性\n  onChange?: (event: ChangeEvent<HTMLInputElement>) => void; // 变更事件处理函数\n  [key: string]: any; // 允许传入任意其他属性\n}\n\n/**\n * SemiControlledInput 组件\n *\n * 这是一个半受控的输入框组件，结合了受控和非受控组件的特性。\n * 它允许直接操作 DOM 来设置输入值，同时也响应 props 的变化。\n *\n * @param {Object} props - 组件属性\n * @param {Object} props.valueObj - 包含输入值的对象，格式为 { value: string }，为了保证SemiControlledInput每次都刷新\n * @param {function} props.onChange - 输入值变化时的回调函数\n * @param {Object} props.[...otherProps] - 其他传递给 input 元素的属性\n *\n * @returns {JSX.Element} 返回一个 input 元素\n *\n * @example\n * <SemiControlledInput\n *   valueObj={{ value: 'initialValue' }}\n *   onChange={(e) => console.log('New value:', e.target.value)}\n *   placeholder=\"Enter text\"\n * />\n */\nexport const SemiControlledInput: FC<SemiControlledInputProps> = ({ value = { value: '' }, onChange, ...props }) => {\n  // 使用内部状态管理输入值，初始值为传入的 valueObj.value\n  const [internalValue, setInternalValue] = useState(value.value);\n\n  // 创建一个引用，用于直接访问 input 元素\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  // 当传入的 valueObj 变化时，同步更新内部状态\n  useEffect(() => {\n    if (value.value !== internalValue) {\n      setInternalValue(value.value);\n    }\n  }, [value]);\n\n  // 处理输入框值的直接修改（如通过 JavaScript 设置 value 属性）\n  useEffect(() => {\n    const input = inputRef.current;\n    if (!input) return;\n\n    const handlePropertyChange = () => {\n      const newValue = input.value;\n      if (newValue !== internalValue) {\n        setInternalValue(newValue);\n        if (onChange) {\n          // 触发 onChange 事件，模拟原生 input 事件\n          onChange({ target: { value: newValue } } as ChangeEvent<HTMLInputElement>);\n        }\n      }\n    };\n\n    // 获取 input 元素 'value' 属性的原始描述符\n    const descriptor = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, 'value');\n    if (!descriptor) return;\n\n    const originalSetter = descriptor.set;\n\n    // 重写 'value' 属性的 setter，以捕获直接对 value 的赋值操作\n    Object.defineProperty(input, 'value', {\n      get: descriptor.get,\n      set: function (val) {\n        originalSetter?.call(this, val);\n        handlePropertyChange();\n      },\n      configurable: true,\n    });\n\n    // 清理函数：组件卸载时恢复原始的 'value' 属性描述符\n    return () => {\n      Object.defineProperty(input, 'value', descriptor);\n    };\n  }, [onChange, internalValue]);\n\n  // 处理输入框的 onChange 事件\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value;\n    setInternalValue(newValue);\n    if (onChange) {\n      onChange(e);\n    }\n  };\n\n  // 渲染 input 元素\n  return (\n    <input\n      ref={inputRef} // 绑定 ref 到 input 元素\n      value={internalValue} // 使用内部状态作为输入框的值\n      onChange={handleChange} // 绑定 onChange 事件处理函数\n      {...props} // 展开其他传入的属性\n    />\n  );\n};\n"],"names":["useIsMounted","isMounted","useRef","useEffect","current","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","vShowOriginalDisplay","Symbol","vShow","beforeMount","el","_ref","value","style","display","setDisplay","updated","_ref2","oldValue","beforeUnmount","_ref3","useInstance","vueReactive","createAppContext","app","config","globalProperties","components","directives","provides","create","AppWrapper","props","AppContext","appContext","_jsx","jsx","Provider","children","root","appMap","Map","createContext","kebabToCamelCase","str","split","map","sub","charAt","toUpperCase","substr","join","useDirectives","useContext","_context","emit","eventName","fn","startsWith","capitalizedEventName","slice","onEventName","_len2","args","Array","_key2","console","warn","String","getCurrentInstance","instance","vnode","proxy","If","condition","_Fragment","ElseIf","Else","styles","_len","_key","reduce","acc","arg","processArg","toCamelCase","replace","g","result","forEach","item","_item$split$map","part","trim","isArray","styleObject","camelKey","isNaN","includes","processStyleObject","shouldSkipSetAttrToEl","vNode","node","child","next","tag","useScoped","preClass","$props","className","$vnode","$el","currentClassName","styleToApply","cssText","entries","find","setAttribute","shallowReactive","initProps","rawProps","options","resolvePropValue","undefined","setFullProps","updateProps","opt","default","defaultValue","type","Function","contextMap","provide","name","has","get","set","inject","Error","_typeof","o","iterator","constructor","toPropertyKey","t","r","e","toPrimitive","TypeError","Number","_defineProperty","obj","defineProperty","enumerable","configurable","writable","NodeKeeperLifeCycleContext","KEEP_ALIVE_LIFECYCLE","useActivation","lifeCycleName","func","keeperCtx","preCallback","preIndex","splice","push","useActivatePro","ACTIVATE","useUnActivatePro","UNACTIVATE","Keeper","_useRef","active","wrapper","childrenNode","nodeKeeperLifeCycleValue","remove","callback","_wrapper$current","from","_wrapper$current2","_wrapper$current2$par","parentElement","insertBefore","_wrapper$current3","appendChild","ref","isKeyMatched","limit","limitItem","toString","test","getComponentKey","_children$type","_children$props","is","displayName","renderedChild","Children","toArray","isValidElement","componentName","registerDirectives","rest","_excluded","appDirectives","useLayoutEffect","applyDirectives","prevDirectiveValues","useMemo","useCallback","hook","directive","modifiers","directiveObj","createElement","componentProps","Component","pascalCaseName","word","toPascalCase","otherProps","Comp","exclude","include","_ref$max","max","MAX_SAFE_INTEGER","childrenMap","cachedChildrenKeys","_useState","useState","currentChildrenKey","updateCurrentChildrenKey","needCache","isInInclude","isNotInExclude","needDeletedKey","allKeys","lastestKey","index","shift","updateCachedChildrenKeys","delete","_jsxs","values","_searchComponent$prop","componentData","Infinity","componentCache","searchComponent","onActivatedListeners","onDeactivatedListeners","listeners","listener","shouldInclude","whitelist","blacklist","j","RegExp","exec","checkInclude","component","timestamp","Date","now","size","_step","minKey","minTimestamp","_iterator","_createForOfIteratorHelper","s","n","done","_step$value","err","f","data","setTimeout","_ref$value","onChange","internalValue","setInternalValue","inputRef","input","descriptor","getOwnPropertyDescriptor","HTMLInputElement","originalSetter","val","newValue","rootComponent","id","context","installedPlugins","WeakSet","Horizon","_container","version","v","use","plugin","install","add","concat","mixin","log","ccName","mount","rootContainer","document","querySelector","render","unmount","unmountComponentAtNode","runWithContext","loader","LazyComponent","lazy","Suspense","fallback","emits","exposed","Set","items","methodName","excludeList","attrs","$attrs","objRef","slots","slotName"],"mappings":"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"}