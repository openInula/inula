{"version":3,"file":"vue-adapter.js","sources":["../../../src/vue/lifecycle.ts","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/extends.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../../src/vue/vShow.ts","../../../src/vue/globalAPI.tsx","../../../src/vue/directive.tsx","../../../src/vue/condition.tsx","../../../src/vue/dynamicComponent.tsx","../../../src/vue/sfcAPI.tsx","../../../src/vue/helper.tsx","../../../src/vue/useScoped.ts","../../../src/vue/props.tsx","../../../src/vue/semiControlledComponent.tsx","../../../src/vue/injectProvide.tsx","../../../src/vue/keepAlivePro.tsx","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../src/vue/keepAlive/context.ts","../../../src/vue/keepAlive/lifeCycleHooks.ts","../../../src/vue/keepAlive/keeper.tsx","../../../src/vue/keepAlive/keepAlive.tsx"],"sourcesContent":["/*\n * Copyright (c) 2024 Huawei Technologies Co.,Ltd.\n *\n * openInula is licensed under Mulan PSL v2.\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\n * You may obtain a copy of Mulan PSL v2 at:\n *\n *          http://license.coscl.org.cn/MulanPSL2\n *\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n * See the Mulan PSL v2 for more details.\n */\nimport { useEffect, useLayoutEffect, useRef } from '@cloudsop/horizon';\nimport { FN } from './types';\n\n// 用于存储组件是否已挂载的状态\nexport const useIsMounted = () => {\n  const isMounted = useRef(false);\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return isMounted.current;\n};\n\nexport const onBeforeMount = (fn: FN) => {\n  const isMounted = useIsMounted();\n  if (!isMounted) {\n    fn?.();\n  }\n};\n\nexport function onMounted(fn: FN) {\n  useEffect(() => {\n    fn?.();\n  }, []);\n}\n\nexport function onBeforeUpdate(fn: FN) {\n  useEffect(() => {\n    fn?.();\n  });\n}\n\nexport function onUpdated(fn: FN) {\n  useEffect(() => {\n    fn?.();\n  });\n}\n\nexport const onBeforeUnmount = (fn: FN) => {\n  useLayoutEffect(() => {\n    return () => {\n      fn?.();\n    };\n  }, []);\n};\n\nexport function onUnmounted(fn: FN) {\n  useEffect(() => {\n    return () => {\n      fn?.();\n    };\n  }, []);\n}\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","/*\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\n *\n * openInula is licensed under Mulan PSL v2.\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\n * You may obtain a copy of Mulan PSL v2 at:\n *\n *          http://license.coscl.org.cn/MulanPSL2\n *\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n * See the Mulan PSL v2 for more details.\n */\n\nimport { Directive } from './directive';\n\nconst vShowOriginalDisplay = Symbol('_v_show_original_display');\n\nexport const vShow: Directive = {\n  beforeMount(el, { value }) {\n    el[vShowOriginalDisplay] = el.style.display === 'none' ? '' : el.style.display;\n\n    setDisplay(el, value);\n  },\n  updated(el, { value, oldValue }) {\n    if (!value === !oldValue) return;\n\n    setDisplay(el, value);\n  },\n  beforeUnmount(el, { value }) {\n    setDisplay(el, value);\n  },\n};\n\nfunction setDisplay(el: HTMLElement, value: unknown): void {\n  el.style.display = value ? el[vShowOriginalDisplay] : 'none';\n}\n","/*\r\n * Copyright (c) 2024 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport Horizon, {\r\n  createContext,\r\n  lazy,\r\n  render,\r\n  Suspense,\r\n  unmountComponentAtNode,\r\n  useContext,\r\n  vueReactive,\r\n} from '@cloudsop/horizon';\r\nimport { vShow } from './vShow';\r\n\r\nconst { useInstance } = vueReactive;\r\n\r\nexport interface AppContext {\r\n  app: App;\r\n  config: AppConfig;\r\n  components: Record<string, any>;\r\n  directives: Record<string, any>;\r\n  provides: Record<string | symbol, any>;\r\n}\r\n\r\nexport interface AppConfig {\r\n  globalProperties: Record<string, any>;\r\n}\r\n\r\nexport function createAppContext(): AppContext {\r\n  return {\r\n    app: null as any,\r\n    config: {\r\n      globalProperties: {},\r\n    },\r\n    components: {},\r\n    directives: {},\r\n    provides: Object.create(null),\r\n  };\r\n}\r\n\r\nexport interface App<HostElement = any> {\r\n  _container: HostElement | null;\r\n  _context: AppContext;\r\n\r\n  rootComponent: any;\r\n  version: string;\r\n  config: AppConfig;\r\n\r\n  use<Options extends unknown[]>(plugin: Plugin<Options>, ...options: Options): this;\r\n\r\n  use<Options>(plugin: Plugin<Options>, options: Options): this;\r\n\r\n  mixin(mixin: any): this;\r\n\r\n  component(name: string, component: any): this;\r\n\r\n  directive(name: string, directive: any): this;\r\n\r\n  mount(rootContainer: HostElement | string): any;\r\n\r\n  unmount(): void;\r\n\r\n  provide<T>(key: string, value: T): this;\r\n\r\n  runWithContext<T>(fn: () => T): T;\r\n}\r\n\r\ntype PluginInstallFunction<Options = any[]> = Options extends unknown[]\r\n  ? (app: App, ...options: Options) => any\r\n  : (app: App, options: Options) => any;\r\n\r\nexport type ObjectPlugin<Options = any[]> = {\r\n  install: PluginInstallFunction<Options>;\r\n};\r\nexport type FunctionPlugin<Options = any[]> = PluginInstallFunction<Options> & Partial<ObjectPlugin<Options>>;\r\n\r\nexport type Plugin<Options = any[]> = FunctionPlugin<Options> | ObjectPlugin<Options>;\r\n\r\nfunction AppWrapper(props) {\r\n  const AppContext = props.appContext;\r\n\r\n  return <AppContext.Provider value={props.value}>{props.root}</AppContext.Provider>;\r\n}\r\n\r\nconst DEFAULT_APP_KEY = 'DEFAULT_APP_KEY';\r\nconst appMap = new Map<string, App>();\r\nconst AppContext = createContext<App | null>(null);\r\n\r\nexport function createApp(rootComponent, id: string = DEFAULT_APP_KEY) {\r\n  const context = createAppContext();\r\n  const installedPlugins = new WeakSet();\r\n  let isMounted = false;\r\n\r\n  if (typeof rootComponent === 'function') {\r\n    rootComponent = Horizon.createElement(rootComponent, {});\r\n  }\r\n\r\n  const app: App = (context.app = {\r\n    _container: null,\r\n    _context: context,\r\n\r\n    rootComponent,\r\n    version: '1.0.0',\r\n\r\n    get config() {\r\n      return context.config;\r\n    },\r\n\r\n    set config(v) {},\r\n\r\n    use(plugin: Plugin, ...options: any[]) {\r\n      if (installedPlugins.has(plugin)) {\r\n        // 已经安装过了\r\n      } else if (plugin && typeof plugin.install === 'function') {\r\n        installedPlugins.add(plugin);\r\n        plugin.install(app, ...options);\r\n      } else if (typeof plugin === 'function') {\r\n        installedPlugins.add(plugin);\r\n        plugin(app, ...options);\r\n      }\r\n\r\n      return app;\r\n    },\r\n\r\n    mixin(mixin) {\r\n      // 不支持\r\n      console.log('Horizon中暂时不支持mixin，请用Hook方式进行改造代码。');\r\n      return app;\r\n    },\r\n\r\n    component(name, component) {\r\n      const ccName = kebabToCamelCase(name);\r\n      if (!component) {\r\n        return context.components[ccName];\r\n      }\r\n\r\n      context.components[ccName] = component;\r\n      return app;\r\n    },\r\n\r\n    directive(name, directive) {\r\n      if (!directive) {\r\n        return context.directives[name];\r\n      }\r\n\r\n      context.directives[name] = directive;\r\n      return app;\r\n    },\r\n\r\n    mount(rootContainer) {\r\n      if (!isMounted) {\r\n        if (typeof rootContainer === 'string') {\r\n          rootContainer = document.querySelector(rootContainer);\r\n        }\r\n\r\n        render(<AppWrapper root={app.rootComponent} appContext={AppContext} value={app} />, rootContainer);\r\n\r\n        isMounted = true;\r\n        app._container = rootContainer;\r\n      }\r\n    },\r\n\r\n    unmount() {\r\n      if (isMounted) {\r\n        unmountComponentAtNode(app._container);\r\n\r\n        delete app._container;\r\n      }\r\n    },\r\n\r\n    provide(key, value) {\r\n      context.provides[key as string | symbol] = value;\r\n\r\n      return app;\r\n    },\r\n\r\n    runWithContext(fn) {\r\n      // 不支持\r\n      console.log('Horizon中暂时不支持runWithContext，请手动修改相关的代码。');\r\n      return fn();\r\n    },\r\n  });\r\n\r\n  // 默认提供v-show指令\r\n  app.directive('show', vShow);\r\n\r\n  appMap.set(id, app);\r\n\r\n  return app;\r\n}\r\n\r\nexport function useGlobalProperties(): Record<string, any>;\r\nexport function useGlobalProperties(name: string): any;\r\nexport function useGlobalProperties(name?: string): any {\r\n  const app = useContext(AppContext);\r\n\r\n  if (name) {\r\n    return app!.config.globalProperties[name];\r\n  } else {\r\n    return app!.config.globalProperties;\r\n  }\r\n}\r\n\r\nexport function useProvide(name: string) {\r\n  const app = useContext(AppContext);\r\n  return app!._context.provides[name];\r\n}\r\n\r\nexport function registerComponent(name: string, component: any) {\r\n  const app = appMap.get(DEFAULT_APP_KEY);\r\n  app!.component(name, component);\r\n}\r\n\r\nfunction kebabToCamelCase(str: string) {\r\n  return str\r\n    .split('-')\r\n    .map(sub => {\r\n      return sub.charAt(0).toUpperCase() + sub.substr(1);\r\n    })\r\n    .join('');\r\n}\r\n\r\nexport function GlobalComponent({ componentName, ...otherProps }) {\r\n  const app = useContext(AppContext);\r\n  componentName = kebabToCamelCase(componentName);\r\n  const Comp = app!._context.components[componentName];\r\n\r\n  if (!Comp) {\r\n    throw new Error(`Component ${componentName} not found, please register it first.`);\r\n  }\r\n\r\n  return <Comp {...otherProps} />;\r\n}\r\n\r\nexport function registerDirective(name: string, directive: any) {\r\n  const app = appMap.get(DEFAULT_APP_KEY);\r\n  app!.directive(name, directive);\r\n}\r\n\r\nexport function useDirectives() {\r\n  const app = useContext(AppContext);\r\n  return app!._context.directives;\r\n}\r\n\r\nexport function defineAsyncComponent(loader: () => Promise<any>) {\r\n  const LazyComponent = lazy(loader);\r\n\r\n  return props => (\r\n    <Suspense fallback={null}>\r\n      <LazyComponent {...props} />\r\n    </Suspense>\r\n  );\r\n}\r\n\r\nexport function emit<T extends Record<string, any>>(props: T, eventName: keyof T, ...args: Parameters<any>): void {\r\n  let fn = props[eventName];\r\n\r\n  if (typeof fn !== 'function' && typeof eventName === 'string' && !eventName.startsWith('on')) {\r\n    const capitalizedEventName = eventName.charAt(0).toUpperCase() + eventName.slice(1);\r\n    const onEventName = `on${capitalizedEventName}` as keyof T;\r\n    fn = props[onEventName];\r\n  }\r\n\r\n  if (typeof fn === 'function') {\r\n    fn(...args);\r\n  } else {\r\n    console.warn(`Attempted to emit event '${String(eventName)}' but no handler was defined.`);\r\n  }\r\n}\r\n\r\nexport function getCurrentInstance(): any {\r\n  const instance = useInstance();\r\n  const app = useContext(AppContext);\r\n\r\n  return {\r\n    vnode: {\r\n      get el() {\r\n        return instance['$el'];\r\n      },\r\n    },\r\n    proxy: instance,\r\n    appContext: {\r\n      app,\r\n    },\r\n  };\r\n}\r\n","import Horizon, {\n  ComponentType,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  createElement,\n  vueReactive,\n} from '@cloudsop/horizon';\nimport { useDirectives } from './globalAPI';\n\nconst { useInstance } = vueReactive;\n\n/**\n * Vue写法：<div v-click-outside:foo.bar=\"closePopup\" v-focus class=\"popup\">\n * Horizon写法：\n * <DirectiveComponent\n *   componentName={'div'}\n *   directives={[\n *     {\n *       name: 'click-outside',\n *       arg: 'foo',\n *       modifiers: { bar: true },\n *       value: closePopup,\n *     },\n *     {\n *       name: 'focus',\n *     },\n *   ]}\n *   class=\"popup\"\n * >\n *   <div>child</div>\n * </DirectiveComponent>\n *\n * @param props 组件属性\n */\n\ninterface DirectiveBinding {\n  value?: any;\n  oldValue?: any;\n  arg?: string;\n  modifiers?: Record<string, boolean>;\n}\n\nexport interface Directive {\n  bind?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  inserted?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  update?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  componentUpdated?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  unbind?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  beforeMount?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  mounted?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  updated?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  beforeUnmount?: (el: HTMLElement, binding: DirectiveBinding) => void;\n  unmounted?: (el: HTMLElement, binding: DirectiveBinding) => void;\n}\n\ninterface DirectiveComponentProps {\n  children?: any;\n  componentName: string | ComponentType<any>;\n  directives: {\n    name: string;\n    value?: any;\n    oldValue?: any;\n    arg?: string;\n    modifiers?: Record<string, boolean>;\n  }[];\n  registerDirectives?: Record<string, Directive>;\n\n  [key: string]: any;\n}\n\nexport function DirectiveComponent(props: DirectiveComponentProps) {\n  const { children, componentName, directives, registerDirectives, ...rest } = props;\n  const appDirectives = useDirectives();\n  const instance = useInstance();\n\n  useLayoutEffect(() => {\n    applyDirectives('beforeMount', directives);\n    applyDirectives('mounted', directives);\n    applyDirectives('bind', directives);\n    return () => {\n      applyDirectives('beforeUnmount', directives);\n      applyDirectives('unmounted', directives);\n      applyDirectives('unbind', directives);\n    };\n  }, []);\n\n  useEffect(() => {\n    applyDirectives('updated', directives);\n    applyDirectives('update', directives);\n    applyDirectives('componentUpdated', directives);\n  });\n\n  const prevDirectiveValues: Record<string, any> = useMemo(() => ({}), []);\n  const applyDirectives = useCallback((hook: keyof Directive, directives) => {\n    directives.forEach(directive => {\n      const { name, value, arg, modifiers } = directive;\n      const oldValue = prevDirectiveValues[name];\n      prevDirectiveValues[name] = value;\n\n      let directiveObj: Directive = {};\n      if (registerDirectives && registerDirectives[name]) {\n        directiveObj = registerDirectives[name];\n      } else {\n        directiveObj = appDirectives[name];\n      }\n\n      if (directiveObj && directiveObj[hook]) {\n        directiveObj[hook]!(instance['$el']!, { value, oldValue, arg, modifiers });\n      }\n    });\n  }, []);\n\n  return createElement(\n    componentName,\n    {\n      ...rest,\n    },\n    children\n  );\n}\n","/*\r\n * Copyright (c) 2024 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport Horizon, { isValidElement, Children, FC } from '@cloudsop/horizon';\r\n\r\ninterface ConditionalProps {\r\n  children?: any;\r\n  condition: boolean;\r\n}\r\n\r\nexport const If: FC<ConditionalProps> = ({ children, condition }) => {\r\n  return condition ? <>{children}</> : null;\r\n};\r\n\r\nexport const ElseIf: FC<ConditionalProps> = If;\r\n\r\nexport const Else: FC<Omit<ConditionalProps, 'condition'>> = ({ children }) => {\r\n  return <>{children}</>;\r\n};\r\n\r\ninterface ConditionalRendererProps {\r\n  children?: any;\r\n}\r\n\r\nexport const ConditionalRenderer: FC<ConditionalRendererProps> = ({ children }) => {\r\n  const childrenArray = Children.toArray(children);\r\n  const renderedChild = childrenArray.find(child => {\r\n    if (isValidElement(child)) {\r\n      if (child.type === If || child.type === ElseIf) {\r\n        return child.props.condition;\r\n      }\r\n      if (child.type === Else) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  });\r\n\r\n  return renderedChild ? <>{renderedChild}</> : null;\r\n};\r\n","/*\n * Copyright (c) 2024 Huawei Technologies Co.,Ltd.\n *\n * openInula is licensed under Mulan PSL v2.\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\n * You may obtain a copy of Mulan PSL v2 at:\n *\n *          http://license.coscl.org.cn/MulanPSL2\n *\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n * See the Mulan PSL v2 for more details.\n */\nimport Horizon, { ComponentType, InulaElement } from '@cloudsop/horizon';\nimport { getCurrentInstance } from './globalAPI';\n\n// 定义组件映射类型\ninterface ComponentsMap {\n  [key: string]: ComponentType<any>;\n}\n\n// DynamicComponent 的 props 类型\ninterface DynamicComponentProps {\n  is: string | ComponentType;\n  components?: ComponentsMap;\n\n  [key: string]: any; // 允许任意其他属性\n}\n\n/**\n * 对标Vue的动态组件，如：<component :is=\"Math.random() > 0.5 ? Foo : Bar\" />\n * @param is\n * @param components\n * @param componentProps\n * @constructor\n */\nexport function DynamicComponent({ is, components, ...componentProps }: DynamicComponentProps): InulaElement | null {\n  if (is === '') {\n    return null;\n  }\n\n  let Component: any = null;\n\n  if (typeof is === 'string') {\n    const pascalCaseName = toPascalCase(is);\n    // Look in local components first\n    Component = components && components[pascalCaseName];\n\n    // If not found, look in global components\n    if (!Component) {\n      const app = getCurrentInstance().appContext.app;\n      Component = app._context.components[pascalCaseName];\n    }\n  } else if (typeof is === 'function') {\n    // If 'is' is already a component, use it directly\n    Component = is;\n  }\n\n  if (!Component) {\n    Component = is;\n  }\n\n  return <Component {...componentProps} />;\n}\n\n// 把vue风格的组件命名转换为react风格的组件命名，如：my-component => MyComponent\nfunction toPascalCase(name: string): string {\n  // If the string doesn't contain hyphens, just capitalize the first letter\n  if (!name.includes('-')) {\n    return name.charAt(0).toUpperCase() + name.slice(1);\n  }\n\n  // For hyphenated strings, capitalize each word\n  return name\n    .split('-')\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n    .join('');\n}\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { InulaNode, vueReactive } from '@cloudsop/horizon';\r\nimport { emit } from './globalAPI';\r\n\r\nconst { useInstance } = vueReactive;\r\n\r\ntype AnyProps = Record<string, any>;\r\n\r\n/**\r\n * Custom Hook to simulate Vue's fallthrough attributes functionality\r\n * @param props Component props\r\n * @param excludeList Parameters declared as props do not fallthrough\r\n * @returns fallthrough attributes\r\n */\r\nexport function useAttrs<T extends AnyProps>(props: T, excludeList: (keyof T)[] = []): Omit<T, keyof T & string> {\r\n  const attrs = { ...props } as T;\r\n  excludeList.forEach(key => delete attrs[key]);\r\n  const instance = useInstance();\r\n  instance.$attrs = attrs;\r\n  return attrs;\r\n}\r\n\r\ntype Slots = {\r\n  [key: string]: SlotFunction | InulaNode;\r\n  default?: InulaNode;\r\n};\r\ntype SlotFunction = (props: any) => InulaNode;\r\n\r\n/**\r\n * Custom Hook to simulate Vue's useSlots functionality in React\r\n * @param props Component props\r\n * @returns An object containing all slots, including the default slot\r\n */\r\nexport function useSlots(props: AnyProps): Slots {\r\n  const slots: Slots = {};\r\n\r\n  // Extract template slots from props\r\n  Object.entries(props).forEach(([key, value]) => {\r\n    if (key.startsWith('template_')) {\r\n      const slotName = key.replace('template_', '');\r\n      slots[slotName] = value;\r\n    }\r\n  });\r\n\r\n  // Add default slot if children are provided\r\n  if (props.children) {\r\n    slots.default = props.children;\r\n  }\r\n\r\n  return slots;\r\n}\r\n\r\nexport function defineExpose<Exposed extends Record<string, any> = Record<string, any>>(exposed?: Exposed) {\r\n  const instance = useInstance();\r\n\r\n  if (instance) {\r\n    // 检查 exposed 是否是一个对象\r\n    if (typeof exposed === 'object' && exposed !== null) {\r\n      // 遍历 exposed 对象的所有属性\r\n      Object.keys(exposed).forEach(key => {\r\n        // 将每个属性赋值给 instance\r\n        instance[key] = exposed[key];\r\n      });\r\n    } else {\r\n      console.warn('defineExpose: Argument should be an object');\r\n    }\r\n  } else {\r\n    console.warn('defineExpose: No instance found. Make sure this is called inside a component setup function.');\r\n  }\r\n}\r\n\r\ntype ObjectEmitsOptions = Record<string, ((...args: any[]) => any) | null>;\r\ntype EmitsOptions = ObjectEmitsOptions | string[];\r\n\r\n// 新的 defineEmits 函数实现\r\nexport function defineEmits<T extends EmitsOptions>(emits: T, props: AnyProps) {\r\n  return function <K extends keyof T>(eventName: K, ...args: Parameters<any>) {\r\n    emit(props, eventName as string, ...args);\r\n  };\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\n/**\r\n * 将函数和属性设置到指定实例上\r\n * @param {Object} instance - 目标实例对象\r\n * @param {Array|Object} items - 要设置的函数或 [key, value] 键值对数组，或者包含方法的对象\r\n * @returns {Object} 返回修改后的实例（支持链式调用）\r\n */\r\nexport function setToInstance(instance, items) {\r\n  // 如果是对象类型，直接遍历对象的键值对\r\n  if (items && typeof items === 'object' && !Array.isArray(items)) {\r\n    Object.entries(items).forEach(([key, value]) => {\r\n      if (key) {\r\n        instance[key] = value;\r\n      } else {\r\n        console.warn('跳过没有键名的项:', value);\r\n      }\r\n    });\r\n    return instance;\r\n  }\r\n\r\n  // 处理数组类型的输入\r\n  if (Array.isArray(items)) {\r\n    items.forEach(item => {\r\n      // 处理数组类型的 [key, value] 键值对\r\n      if (Array.isArray(item)) {\r\n        const [key, value] = item;\r\n        if (key) {\r\n          instance[key] = value;\r\n        } else {\r\n          console.warn('跳过没有键名的数组项:', item);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // 处理函数类型\r\n      if (typeof item === 'function') {\r\n        const methodName = item.name;\r\n        if (methodName) {\r\n          instance[methodName] = item;\r\n        } else {\r\n          console.warn('跳过未命名的函数');\r\n        }\r\n        return;\r\n      }\r\n\r\n      // 处理无效的输入类型\r\n      console.warn('跳过无效的项:', item);\r\n    });\r\n  } else {\r\n    console.warn('无效的 items 类型:', items);\r\n  }\r\n\r\n  // 返回实例以支持链式调用\r\n  return instance;\r\n}\r\n\r\nexport function styles(...args) {\r\n  // 主处理逻辑：处理所有参数并合并结果\r\n  return args.reduce((acc, arg) => ({ ...acc, ...processArg(arg) }), {});\r\n}\r\n\r\n// 辅助函数：将破折号式命名转换为驼峰式命名\r\nconst toCamelCase = str => str.replace(/-([a-z])/g, g => g[1].toUpperCase());\r\n\r\n// 辅助函数：处理单个样式字符串\r\nconst processStyleString = styleString => {\r\n  const result = {};\r\n  styleString.split(';').forEach(item => {\r\n    const [key, value] = item.split(':').map(part => part.trim());\r\n    if (key && value) {\r\n      result[toCamelCase(key)] = value;\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\n// 辅助函数：处理样式对象\r\nconst processStyleObject = styleObject => {\r\n  const result = {};\r\n  for (let key in styleObject) {\r\n    const camelKey = toCamelCase(key);\r\n    let value = styleObject[key];\r\n    // 处理数字值\r\n    if (typeof value === 'number' && !isNaN(value)) {\r\n      // 某些属性不需要单位，如 zIndex, opacity 等\r\n      if (!['zIndex', 'opacity', 'fontWeight'].includes(camelKey)) {\r\n        value = `${value}px`;\r\n      }\r\n    }\r\n    result[camelKey] = value;\r\n  }\r\n  return result;\r\n};\r\n\r\n// 处理单个参数\r\nconst processArg = arg => {\r\n  if (typeof arg === 'string') {\r\n    return processStyleString(arg);\r\n  } else if (Array.isArray(arg)) {\r\n    return arg.reduce((acc, item) => ({ ...acc, ...processArg(item) }), {});\r\n  } else if (typeof arg === 'object' && arg !== null) {\r\n    return processStyleObject(arg);\r\n  } else {\r\n    return {}; // 处理无效输入\r\n  }\r\n};\r\n","import { vueReactive, useEffect, useRef } from '@cloudsop/horizon';\nimport type { VNode, Instance } from '@cloudsop/horizon';\nimport { styles } from './helper';\n\nconst { useInstance } = vueReactive;\n\n/**\n * 判断是否应该跳过为元素设置属性\n * 通过遍历虚拟节点树来确定是否需要跳过属性设置\n * @param vNode - 虚拟节点\n * @returns 如果应该跳过则返回 true，否则返回 false\n */\nfunction shouldSkipSetAttrToEl(vNode: VNode): boolean {\n  let node = vNode;\n\n  while (node.child) {\n    if (node.child.next) {\n      return true;\n    }\n    if (node.child.tag === 'DomComponent') {\n      break;\n    }\n    node = node.child;\n  }\n  return false;\n}\n\n\nfunction useScoped(): void {\n  const instance: Instance = useInstance();\n  const preClass = useRef<string | undefined>(instance.$props.className);\n\n  // 处理 className\n  useEffect(() => {\n    if (shouldSkipSetAttrToEl(instance.$vnode)) {\n      return;\n    }\n\n    const el = instance.$el as HTMLElement;\n    const currentClassName = instance.$props.className || '';\n\n    // 确保元素有初始的 className\n    if (!el.className) {\n      el.className = '';\n    }\n\n    // 如果存在之前的类名，则替换\n    if (preClass.current && el.className.includes(preClass.current)) {\n      el.className = el.className.replace(preClass.current, currentClassName).trim();\n    } else if (currentClassName) {\n      // 如果有新的类名要添加，且没有找到之前的类名，则追加\n      el.className = el.className ? `${el.className} ${currentClassName}`.trim() : currentClassName;\n    }\n\n    // 更新引用的类名\n    preClass.current = currentClassName;\n  }, [instance.$props.className]);\n\n  // 处理 style\n  useEffect(() => {\n    if (shouldSkipSetAttrToEl(instance.$vnode)) {\n      return;\n    }\n\n    const el = instance.$el as HTMLElement;\n\n    if (instance.$props.style) {\n      const styleToApply = styles(el.style.cssText, instance.$props.style);\n\n      Object.entries(styleToApply).forEach(([key, value]) => {\n        if (!key) return;\n        el.style[key.trim()] = typeof value === 'string' ? value.trim() : value;\n      });\n    }\n  }, [instance.$props.style]);\n\n  // 处理 data-v-hash\n  useEffect(() => {\n    if (shouldSkipSetAttrToEl(instance.$vnode)) {\n      return;\n    }\n\n    const el = instance.$el as HTMLElement;\n    const hashKeyLength = 15;\n    const key = Object.keys(instance.$props).find(key => key.startsWith('data-v-') && key.length === hashKeyLength);\n\n    if (key) {\n      el.setAttribute(key, instance.$props[key]);\n    }\n  }, []);\n}\n\nexport default useScoped;\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport Horizon, { vueReactive, useRef, ReactiveRet } from '@cloudsop/horizon';\r\nimport useScoped from './useScoped';\r\n\r\nconst { shallowReactive } = vueReactive;\r\n\r\ninterface Data {\r\n  [key: string]: any;\r\n}\r\n\r\ninterface Option {\r\n  default?: any | (() => any);\r\n  type?: any;\r\n}\r\n\r\ninterface Options {\r\n  [key: string]: Option;\r\n}\r\n\r\n/**\r\n * 自定义 Hook，用于处理响应式属性\r\n * @param rawProps 原始属性对象或 null\r\n * @param options 可选的配置对象，用于设置默认值\r\n * @returns 响应式处理后的属性对象\r\n */\r\nexport function useReactiveProps(rawProps: Data | null, options: Options = {}): ReactiveRet<Data> {\r\n  // 使用 useRef 来存储响应式对象，确保在重渲染时保持引用\r\n  const objRef = useRef<null | ReactiveRet<Data>>(null);\r\n\r\n  if (objRef.current === null) {\r\n    // 首次渲染时初始化属性\r\n    objRef.current = initProps(rawProps, options);\r\n  } else {\r\n    // 后续更新时更新属性\r\n    updateProps(objRef.current, rawProps, options);\r\n  }\r\n\r\n  useScoped();\r\n\r\n  return objRef.current;\r\n}\r\n\r\n/**\r\n * 初始化属性对象\r\n * @param rawProps 原始属性对象或 null\r\n * @param options 配置对象，包含默认值\r\n * @returns 响应式处理后的属性对象\r\n */\r\nexport function initProps(rawProps: Data | null, options: Options): ReactiveRet<Data> {\r\n  const props: Data = {};\r\n\r\n  // 设置完整的属性\r\n  setFullProps(rawProps, props, options);\r\n\r\n  return shallowReactive(props) as ReactiveRet<Data>;\r\n}\r\n\r\n/**\r\n * 设置完整的属性\r\n * @param rawProps 原始属性对象或 null\r\n * @param props 目标属性对象\r\n * @param options 属性配置对象，包含默认值等信息\r\n */\r\nfunction setFullProps(rawProps: Data | null, props: Data, options: Options): void {\r\n  if (rawProps) {\r\n    for (const key in rawProps) {\r\n      const value = rawProps[key];\r\n      props[key] = resolvePropValue(options, key, value);\r\n    }\r\n  }\r\n\r\n  // 设置默认值\r\n  for (const key in options) {\r\n    if (\r\n      Object.prototype.hasOwnProperty.call(options, key) &&\r\n      (!Object.prototype.hasOwnProperty.call(props, key) || props[key] === undefined)\r\n    ) {\r\n      props[key] = resolvePropValue(options, key, props[key]);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 更新属性对象\r\n * @param props 待更新的属性对象\r\n * @param rawProps 包含新值的原始属性对象或 null\r\n * @param options 属性配置对象，包含默认值等信息\r\n */\r\nexport function updateProps(props: Data, rawProps: Data | null, options: Options): void {\r\n  for (const key in rawProps) {\r\n    const value = rawProps![key];\r\n    props[key] = resolvePropValue(options, key, value);\r\n  }\r\n}\r\n\r\n/**\r\n * 解析属性值，考虑默认值\r\n * @param options 配置对象，包含默认值\r\n * @param key 属性键\r\n * @param value 当前属性值\r\n * @returns 解析后的属性值\r\n */\r\nfunction resolvePropValue(options: Options, key: string, value: unknown): unknown {\r\n  const opt = options[key];\r\n  if (opt != null) {\r\n    // 设置默认值\r\n    if (opt.default != null && value === undefined) {\r\n      const defaultValue = opt.default;\r\n      if (typeof defaultValue === 'function' && !(opt.type && opt.type === Function)) {\r\n        value = defaultValue();\r\n      } else {\r\n        value = defaultValue;\r\n      }\r\n    }\r\n  }\r\n  return value;\r\n}\r\n","/*\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\n *\n * openInula is licensed under Mulan PSL v2.\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\n * You may obtain a copy of Mulan PSL v2 at:\n *\n *          http://license.coscl.org.cn/MulanPSL2\n *\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\n * See the Mulan PSL v2 for more details.\n */\n\nimport Horizon, { useState, useEffect, useRef, ChangeEvent, FC } from '@cloudsop/horizon';\n\n// 定义组件的属性接口\ninterface SemiControlledInputProps {\n  value?: { value: string }; // 值对象，包含一个 value 属性\n  onChange?: (event: ChangeEvent<HTMLInputElement>) => void; // 变更事件处理函数\n  [key: string]: any; // 允许传入任意其他属性\n}\n\n/**\n * SemiControlledInput 组件\n *\n * 这是一个半受控的输入框组件，结合了受控和非受控组件的特性。\n * 它允许直接操作 DOM 来设置输入值，同时也响应 props 的变化。\n *\n * @param {Object} props - 组件属性\n * @param {Object} props.valueObj - 包含输入值的对象，格式为 { value: string }，为了保证SemiControlledInput每次都刷新\n * @param {function} props.onChange - 输入值变化时的回调函数\n * @param {Object} props.[...otherProps] - 其他传递给 input 元素的属性\n *\n * @returns {JSX.Element} 返回一个 input 元素\n *\n * @example\n * <SemiControlledInput\n *   valueObj={{ value: 'initialValue' }}\n *   onChange={(e) => console.log('New value:', e.target.value)}\n *   placeholder=\"Enter text\"\n * />\n */\nexport const SemiControlledInput: FC<SemiControlledInputProps> = ({ value = { value: '' }, onChange, ...props }) => {\n  // 使用内部状态管理输入值，初始值为传入的 valueObj.value\n  const [internalValue, setInternalValue] = useState(value.value);\n\n  // 创建一个引用，用于直接访问 input 元素\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  // 当传入的 valueObj 变化时，同步更新内部状态\n  useEffect(() => {\n    if (value.value !== internalValue) {\n      setInternalValue(value.value);\n    }\n  }, [value]);\n\n  // 处理输入框值的直接修改（如通过 JavaScript 设置 value 属性）\n  useEffect(() => {\n    const input = inputRef.current;\n    if (!input) return;\n\n    const handlePropertyChange = () => {\n      const newValue = input.value;\n      if (newValue !== internalValue) {\n        setInternalValue(newValue);\n        if (onChange) {\n          // 触发 onChange 事件，模拟原生 input 事件\n          onChange({ target: { value: newValue } } as ChangeEvent<HTMLInputElement>);\n        }\n      }\n    };\n\n    // 获取 input 元素 'value' 属性的原始描述符\n    const descriptor = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, 'value');\n    if (!descriptor) return;\n\n    const originalSetter = descriptor.set;\n\n    // 重写 'value' 属性的 setter，以捕获直接对 value 的赋值操作\n    Object.defineProperty(input, 'value', {\n      get: descriptor.get,\n      set: function (val) {\n        originalSetter?.call(this, val);\n        handlePropertyChange();\n      },\n      configurable: true,\n    });\n\n    // 清理函数：组件卸载时恢复原始的 'value' 属性描述符\n    return () => {\n      Object.defineProperty(input, 'value', descriptor);\n    };\n  }, [onChange, internalValue]);\n\n  // 处理输入框的 onChange 事件\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value;\n    setInternalValue(newValue);\n    if (onChange) {\n      onChange(e);\n    }\n  };\n\n  // 渲染 input 元素\n  return (\n    <input\n      ref={inputRef} // 绑定 ref 到 input 元素\n      value={internalValue} // 使用内部状态作为输入框的值\n      onChange={handleChange} // 绑定 onChange 事件处理函数\n      {...props} // 展开其他传入的属性\n    />\n  );\n};\n","import { createContext, useContext } from '@cloudsop/horizon';\r\n\r\n// Allows holding multiple variables and accessing them implicitly\r\nconst contextMap = new Map();\r\n\r\n// Stores context variable for current branch\r\nexport function provide(name, value) {\r\n  // If variable already exists, it stores its local value\r\n  if (contextMap.has(name)) {\r\n    const ctx = contextMap.get(name);\r\n    ctx.value = value;\r\n    // If variable does not exist yet, it creates new context in map\r\n  } else {\r\n    contextMap.set(name, createContext(value));\r\n  }\r\n}\r\n\r\nexport function inject(name, defaultValue?) {\r\n  // If variable exists, local value is returned\r\n  if (contextMap.has(name)) {\r\n    const ctx = contextMap.get(name);\r\n    return ctx.value;\r\n  }\r\n  // If there is no fallback value, error is thrown\r\n  if (!defaultValue) {\r\n    throw Error('Injected value is not provided. Make sure to provide it before use or add default value');\r\n  }\r\n  return defaultValue;\r\n}\r\n","import { ChildrenType, Component, Memo, useEffect, useRef } from '@cloudsop/horizon';\nimport { inject, provide } from './injectProvide';\n\ntype StringRegexList = String | RegExp | (String | RegExp)[];\n\ninterface KeepAliveProps {\n  children?: ChildrenType;\n  max?: number;\n  include?: StringRegexList;\n  exclude?: StringRegexList;\n}\n\ninterface ComponentData {\n  component: () => Component;\n  timestamp: number;\n}\n\nexport function onActivated(listener: () => void): () => void {\n  const listeners = inject('onActivatedListeners');\n  const key = inject('keep-alive-key');\n\n  if (!listeners.has(key)) {\n    listeners.set(key, new Set());\n  }\n\n  listeners.get(key).add(listener);\n\n  return () => {\n    const listeners = inject('onActivatedListeners');\n    const key = inject('keep-alive-key');\n\n    listeners.get(key).delete(listener);\n  };\n}\n\nexport function onDeactivated(listener: () => void): () => void {\n  const listeners = inject('onDeactivatedListeners');\n  const key = inject('keep-alive-key');\n\n  if (!listeners.has(key)) {\n    listeners.set(key, new Set());\n  }\n\n  listeners.get(key).add(listener);\n\n  return () => {\n    const listeners = inject('onDeactivatedListeners');\n    const key = inject('keep-alive-key');\n\n    listeners.get(key).delete(listener);\n  };\n}\n\nfunction checkInclude(name: string, whitelist?: StringRegexList, blacklist?: StringRegexList): boolean {\n  if (blacklist) {\n    if (!Array.isArray(blacklist)) {\n      blacklist = [blacklist];\n    }\n    for (let i = 0; i < blacklist.length; i++) {\n      if (typeof blacklist[i] === 'string') {\n        const keys = (blacklist[i] as string).split(/,\\s*/g);\n        for (let j = 0; j < keys.length; j++) {\n          if (name === keys[j]) return false;\n        }\n      } else if (blacklist[i] instanceof RegExp) {\n        if ((blacklist[i] as RegExp).exec(name)) return false;\n      }\n    }\n  }\n\n  if (whitelist) {\n    if (!Array.isArray(whitelist)) {\n      whitelist = [whitelist];\n    }\n    for (let i = 0; i < whitelist.length; i++) {\n      if (typeof whitelist[i] === 'string') {\n        const keys = (whitelist[i] as string).split(/,\\s*/g);\n        for (let j = 0; j < keys.length; j++) {\n          if (name === keys[j]) return true;\n        }\n      } else if (whitelist[i] instanceof RegExp) {\n        if ((whitelist[i] as RegExp).exec(name)) return true;\n      }\n    }\n    return false;\n  }\n\n  return true;\n}\n\nexport const KeepAlivePro = ({ children, max = Infinity, include, exclude }: KeepAliveProps) => {\n  let componentData, activeComponent;\n  const componentCache = useRef(new Map<string, ComponentData>());\n  let searchComponent = Array.isArray(children) ? children[0] : children;\n  const componentName = searchComponent.props.ref || searchComponent.props.is?.name;\n  const onActivatedListeners = useRef(new Map());\n  const onDeactivatedListeners = useRef(new Map<string, () => {}>());\n  provide('onActivatedListeners', onActivatedListeners.current);\n  provide('onDeactivatedListeners', onDeactivatedListeners.current);\n\n  useEffect(() => {\n    // deactivate active components\n    return () => {\n      Array.from(componentCache.current.entries()).forEach(([name, data]) => {\n        provide('keep-alive-key', name);\n        if (componentName === name) {\n          const listeners: Set<() => {}> = inject('onDeactivatedListeners').get(name);\n          if (!listeners) return;\n          Array.from(listeners).forEach(listener => {\n            listener();\n          });\n        }\n      });\n    };\n  });\n\n  const shouldInclude = checkInclude(componentName, include, exclude);\n\n  if (shouldInclude) {\n    if (componentCache.current.has(componentName)) {\n      componentData = componentCache.current.get(componentName);\n      activeComponent = componentData.component;\n      componentData.timestamp = Date.now();\n    } else {\n      if (componentCache.current.size >= max) {\n        let minKey = '';\n        let minTimestamp = Infinity;\n\n        for (let [key, value] of componentCache.current) {\n          if (value.timestamp < minTimestamp) {\n            minTimestamp = value.timestamp;\n            minKey = key;\n          }\n        }\n\n        if (minKey !== null) {\n          componentCache.current.delete(minKey);\n        }\n      }\n\n      componentCache.current.set(componentName, {\n        timestamp: Date.now(),\n        component: searchComponent,\n      });\n      activeComponent = componentCache.current.get(componentName);\n    }\n  }\n  return (\n    <>\n      {Array.from(componentCache.current.entries()).map(([name, data]) => {\n        provide('keep-alive-key', name);\n        if (componentName === name) {\n          setTimeout(() => {\n            const listeners: Set<() => {}> = inject('onActivatedListeners').get(name);\n            if (!listeners) return;\n            Array.from(listeners).forEach(listener => {\n              listener();\n            });\n          }, 1);\n        }\n        return <div style={componentName === name ? {} : { display: 'none' }}>{data.component}</div>;\n      })}\n      {shouldInclude ? [] : <div>{searchComponent}</div>}\n    </>\n  );\n};\n","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import { createContext } from '@cloudsop/horizon';\r\nimport { LifeCycleListener } from './lifeCycleHooks';\r\nexport const NodeKeeperLifeCycleContext = createContext<LifeCycleListener | null>(null);\r\n","import { useContext, useRef, useEffect } from '@cloudsop/horizon';\nimport { NodeKeeperLifeCycleContext } from './context';\n\nexport enum KEEP_ALIVE_LIFECYCLE {\n  ACTIVATE = 'componentDidActivate',\n  UNACTIVATE = 'componentWillUnactivate',\n}\n\nexport type LifeCycleFunc = () => unknown;\nconst useActivation = (lifeCycleName: KEEP_ALIVE_LIFECYCLE, func: LifeCycleFunc) => {\n  const keeperCtx = useContext(NodeKeeperLifeCycleContext);\n\n  // 未处于 KeepAlive 中\n  if (!keeperCtx) {\n    return;\n  }\n\n  const preCallback = useRef<LifeCycleFunc>(func);\n  useEffect(() => {\n    const preIndex = keeperCtx[lifeCycleName].indexOf(preCallback.current);\n    if (preIndex >= 0) {\n      keeperCtx[lifeCycleName].splice(preIndex, 1, func);\n    } else {\n      keeperCtx[lifeCycleName].push(func);\n    }\n    preCallback.current = func;\n  }, [func]);\n};\n\nexport const useActivatePro = useActivation.bind(null, KEEP_ALIVE_LIFECYCLE.ACTIVATE);\n\nexport const useUnActivatePro = useActivation.bind(null, KEEP_ALIVE_LIFECYCLE.UNACTIVATE);\n\nexport type LifeCycleListener = Record<KEEP_ALIVE_LIFECYCLE, Array<LifeCycleFunc>>;\n","import React, { useRef, useEffect } from '@cloudsop/horizon';\r\nimport { NodeKeeperLifeCycleContext } from './context';\r\nimport { KEEP_ALIVE_LIFECYCLE, LifeCycleFunc } from './lifeCycleHooks';\r\n\r\ninterface KeeperProps {\r\n  active: boolean;\r\n  key?: any;\r\n  children?: any;\r\n}\r\nconst Keeper = ({ children, active }: KeeperProps) => {\r\n  const wrapper = useRef<HTMLElement>(null);\r\n  const childrenNode = useRef<Element[]>([]);\r\n  const nodeKeeperLifeCycleValue = useRef({\r\n    [KEEP_ALIVE_LIFECYCLE.ACTIVATE]: [] as LifeCycleFunc[],\r\n    [KEEP_ALIVE_LIFECYCLE.UNACTIVATE]: [] as LifeCycleFunc[],\r\n  });\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      childrenNode.current.forEach(child => {\r\n        child.remove();\r\n      });\r\n      nodeKeeperLifeCycleValue.current[KEEP_ALIVE_LIFECYCLE.UNACTIVATE].forEach(callback => {\r\n        callback();\r\n      });\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (active) {\r\n      childrenNode.current = Array.from(wrapper.current?.children || []);\r\n      childrenNode.current.forEach(child => {\r\n        wrapper.current?.parentElement?.insertBefore(child, wrapper.current);\r\n      });\r\n      nodeKeeperLifeCycleValue.current[KEEP_ALIVE_LIFECYCLE.ACTIVATE].forEach(callback => {\r\n        callback();\r\n      });\r\n    } else {\r\n      childrenNode.current.forEach(child => {\r\n        wrapper.current?.appendChild(child);\r\n      });\r\n      nodeKeeperLifeCycleValue.current[KEEP_ALIVE_LIFECYCLE.UNACTIVATE].forEach(callback => {\r\n        callback();\r\n      });\r\n    }\r\n  }, [active]);\r\n\r\n  return (\r\n    <NodeKeeperLifeCycleContext.Provider value={nodeKeeperLifeCycleValue.current}>\r\n      {\r\n        <div style={{ display: 'none' }} ref={wrapper}>\r\n          {children}\r\n        </div>\r\n      }\r\n    </NodeKeeperLifeCycleContext.Provider>\r\n  );\r\n};\r\n\r\nexport default Keeper;\r\n","import React, { useRef, useEffect, useState, useMemo } from '@cloudsop/horizon';\nimport Keeper from './keeper';\n\ntype StringRegexList = string | RegExp | (string | RegExp)[];\ninterface KeepAliveProps {\n  include?: StringRegexList;\n  max?: number;\n  exclude?: StringRegexList;\n  children?: any;\n}\n\n// 更新缓存的children节点key数组\n// 当缓存的实例超过max时，移除最久没有使用的组件缓存, 并把最新的key插到尾部\nfunction updateCachedChildrenKeys(allKeys: string[], lastestKey: string, max: number) {\n  const index = allKeys.indexOf(lastestKey);\n  let needDeletedKey: string = '';\n  if (index >= 0) {\n    // 如果已经缓存过了，则刷新位置\n    allKeys.splice(index, 1);\n  } else if (allKeys.length >= max) {\n    // 如果没有缓存过，且已经达到最大缓存数量，则先把老的删了\n    needDeletedKey = allKeys.shift() as string;\n  }\n  allKeys.push(lastestKey);\n  return needDeletedKey;\n}\n\nfunction isKeyMatched(key: string, limit: StringRegexList) {\n  if (Array.isArray(limit)) {\n    return limit.find(limitItem => isKeyMatched(key, limitItem));\n  }\n  if (typeof limit === 'string') {\n    return limit.split(',').includes(key);\n  }\n  // instanceof 检查的是对象在当前执行环境下的原型链上是否存在该构造函数。\n  // 如果在不同的执行环境（例如不同的 iframe 或 window）中创建了正则表达式对象，instanceof 可能不会返回 true\n  if (Object.prototype.toString.call(limit) === '[object RegExp]') {\n    return limit.test(key);\n  }\n  return false;\n}\n\n// 获取组件的key\nfunction getComponentKey(children) {\n  const { ref, is } = children.props;\n\n  if (ref) return ref;\n\n  // 处理is属性\n  if (is) {\n    // 如果is是函数,获取函数名\n    if (typeof is === 'function') {\n      return is.name || is.displayName;\n    }\n    return is;\n  }\n\n  // fallback到组件名\n  return children?.type?.name;\n}\n\nexport default function KeepAlive({ children, exclude, include, max = Number.MAX_SAFE_INTEGER }: KeepAliveProps) {\n  const childrenMap = useRef(new Map()); // 缓存所有的组件节点\n  const cachedChildrenKeys = useRef<string[]>([]); // 已经缓存的所有children节点的key的数组，按照激活事件由老到新排序。主要用于处理max场景下，有些移除最久没用的组件缓存\n  const [currentChildrenKey, updateCurrentChildrenKey] = useState(null);\n\n  const needCache = useMemo(() => {\n    const key = getComponentKey(children);\n    const isInInclude = !include || isKeyMatched(key, include);\n    const isNotInExclude = !exclude || !isKeyMatched(key, exclude);\n    return isInInclude && isNotInExclude && max !== 0;\n  }, [children, include, exclude, max]);\n\n  useEffect(() => {\n    if (!children) {\n      updateCurrentChildrenKey(null);\n      return;\n    }\n\n    const key = getComponentKey(children);\n\n    if (needCache) {\n      if (key === currentChildrenKey) {\n        return;\n      }\n\n      childrenMap.current.set(key, {\n        key,\n        children: children,\n      });\n\n      const needDeletedKey = updateCachedChildrenKeys(cachedChildrenKeys.current, key, max);\n      if (needDeletedKey) {\n        childrenMap.current.delete(needDeletedKey);\n      }\n    } else {\n      childrenMap.current.delete(key);\n    }\n\n    updateCurrentChildrenKey(key);\n  }, [children]);\n\n  return (\n    <>\n      {Array.from(childrenMap.current.values()).map(({ children, key }) => {\n        return <Keeper children={children} key={key} active={key === currentChildrenKey} />;\n      })}\n      {/* 挂载当前组件的节点 */}\n      {needCache ? null : children}\n    </>\n  );\n}\n"],"names":["useIsMounted","isMounted","useRef","useEffect","current","onBeforeMount","fn","onMounted","onBeforeUpdate","onUpdated","onBeforeUnmount","useLayoutEffect","onUnmounted","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","vShowOriginalDisplay","Symbol","vShow","beforeMount","el","_ref","value","style","display","setDisplay","updated","_ref2","oldValue","beforeUnmount","_ref3","useInstance","vueReactive","createAppContext","app","config","globalProperties","components","directives","provides","create","AppWrapper","props","AppContext","appContext","_jsx","Provider","children","root","DEFAULT_APP_KEY","appMap","Map","createContext","createApp","rootComponent","id","undefined","context","installedPlugins","WeakSet","Horizon","createElement","_container","_context","version","v","use","plugin","_len","options","Array","_key","has","install","add","concat","mixin","console","log","component","name","ccName","kebabToCamelCase","directive","mount","rootContainer","document","querySelector","render","unmount","unmountComponentAtNode","provide","runWithContext","set","useGlobalProperties","useContext","useProvide","registerComponent","get","str","split","map","sub","charAt","toUpperCase","substr","join","GlobalComponent","componentName","otherProps","_excluded","Comp","Error","registerDirective","useDirectives","defineAsyncComponent","loader","LazyComponent","lazy","Suspense","fallback","emit","eventName","startsWith","capitalizedEventName","slice","onEventName","_len2","args","_key2","warn","String","getCurrentInstance","instance","vnode","proxy","DirectiveComponent","registerDirectives","rest","appDirectives","applyDirectives","prevDirectiveValues","useMemo","useCallback","hook","forEach","arg","modifiers","directiveObj","If","condition","_Fragment","ElseIf","Else","ConditionalRenderer","childrenArray","Children","toArray","renderedChild","find","child","isValidElement","type","DynamicComponent","is","componentProps","Component","pascalCaseName","toPascalCase","includes","word","useAttrs","excludeList","attrs","$attrs","useSlots","slots","entries","slotName","replace","default","defineExpose","exposed","defineEmits","emits","setToInstance","items","isArray","item","methodName","styles","reduce","acc","processArg","toCamelCase","g","processStyleString","styleString","result","_item$split$map","part","trim","processStyleObject","styleObject","camelKey","isNaN","shouldSkipSetAttrToEl","vNode","node","next","tag","useScoped","preClass","$props","className","$vnode","$el","currentClassName","styleToApply","cssText","hashKeyLength","setAttribute","shallowReactive","useReactiveProps","rawProps","objRef","initProps","updateProps","setFullProps","resolvePropValue","opt","defaultValue","Function","SemiControlledInput","_ref$value","onChange","_useState","useState","internalValue","setInternalValue","inputRef","input","handlePropertyChange","newValue","descriptor","getOwnPropertyDescriptor","HTMLInputElement","originalSetter","defineProperty","val","configurable","handleChange","e","ref","contextMap","ctx","inject","onActivated","listener","listeners","Set","delete","onDeactivated","checkInclude","whitelist","blacklist","j","RegExp","exec","KeepAlivePro","_searchComponent$prop","_ref$max","max","Infinity","include","exclude","componentData","componentCache","searchComponent","onActivatedListeners","onDeactivatedListeners","from","data","shouldInclude","timestamp","Date","now","size","minKey","minTimestamp","_iterator","_createForOfIteratorHelper","_step","s","n","done","_step$value","err","f","_jsxs","setTimeout","_typeof","o","iterator","constructor","toPrimitive","t","r","TypeError","Number","toPropertyKey","_defineProperty","obj","enumerable","writable","NodeKeeperLifeCycleContext","KEEP_ALIVE_LIFECYCLE","useActivation","lifeCycleName","func","keeperCtx","preCallback","preIndex","splice","push","useActivatePro","ACTIVATE","useUnActivatePro","UNACTIVATE","Keeper","_useRef","active","wrapper","childrenNode","nodeKeeperLifeCycleValue","remove","callback","_wrapper$current","_wrapper$current2","_wrapper$current2$par","parentElement","insertBefore","_wrapper$current3","appendChild","updateCachedChildrenKeys","allKeys","lastestKey","index","needDeletedKey","shift","isKeyMatched","limit","limitItem","toString","test","getComponentKey","_children$type","_children$props","displayName","KeepAlive","MAX_SAFE_INTEGER","childrenMap","cachedChildrenKeys","currentChildrenKey","updateCurrentChildrenKey","needCache","isInInclude","isNotInExclude","values"],"mappings":"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"}