{"version":3,"file":"intl.min.js","sources":["../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/createClass.js","../../../src/intl/format/cache/cache.ts","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/extends.js","../../../src/intl/utils/parseRuleUtils.ts","../../../src/intl/parser/Lexer.ts","../../../src/intl/parser/mappingRule.ts","../../../src/intl/constants/index.ts","../../../src/intl/parser/parseMappingRule.ts","../../../src/intl/parser/parser.ts","../../../src/intl/utils/getTokenAST.ts","../../../src/intl/utils/utils.ts","../../../src/intl/format/fomatters/DateTimeFormatter.ts","../../../src/intl/format/fomatters/NumberFormatter.ts","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/inherits.js","../../../src/intl/utils/eventListener.ts","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../../src/intl/format/fomatters/PluralFormatter.ts","../../../src/intl/format/fomatters/SelectFormatter.ts","../../../src/intl/format/Translation.ts","../../../src/intl/format/generateFormatters.ts","../../../src/intl/utils/formatElements.ts","../../../src/intl/core/I18n.ts","../../../src/intl/format/getFormatMessage.ts","../../../src/intl/core/components/FormattedMessage.tsx","../../../src/intl/utils/copyStaticProps.ts","../../../src/intl/core/components/InjectI18n.tsx","../../../src/intl/core/components/I18nProvider.tsx","../../../src/intl/core/hook/useIntl.ts","../../../src/intl/core/createIntl.ts","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/get.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../src/vueI18n/constants/index.ts","../../../src/vueI18n/utils/utils.ts","../../../src/vueI18n/utils/parseMsgParamUtils.ts","../../../src/vueI18n/VueI18n.ts","../../../src/vueI18n/hooks/useI18n.ts","../../../src/intl/index.ts","../../../src/vueI18n/index.ts","../../../src/vueI18n/hooks/createI18n.ts","../../../src/vueI18n/hooks/useLocalMessage.ts"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { I18nCache } from '../../types/interfaces';\r\n\r\n/**\r\n * 缓存机制\r\n */\r\nfunction creatI18nCache(): I18nCache {\r\n  return {\r\n    dateTimeFormat: {},\r\n    numberFormat: {},\r\n    plurals: {},\r\n    select: {},\r\n    octothorpe: {},\r\n  };\r\n}\r\n\r\nexport default creatI18nCache;\r\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nfunction getType(input: any): string {\r\n  const str: string = Object.prototype.toString.call(input);\r\n  return str.slice(8, -1).toLowerCase();\r\n}\r\n\r\n// 类型检查器\r\nconst createTypeChecker = (type: string) => {\r\n  return (input: any) => {\r\n    return getType(input) === type.toLowerCase();\r\n  };\r\n};\r\n\r\nconst checkObject = (input: any) => input !== null && typeof input === 'object';\r\n\r\nconst checkRegExp = createTypeChecker('RegExp');\r\n\r\n// 使用正则表达式，如果对象存在则访问该属性，用来判断当前环境是否支持正则表达式sticky属性。\r\nconst checkSticky = () => typeof new RegExp('')?.sticky === 'boolean';\r\n\r\n// 转义正则表达式中的特殊字符\r\nfunction transferReg(str: string): string {\r\n  // eslint-disable-next-line\r\n  return str.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\r\n}\r\n\r\n// 计算正则表达式中捕获组的数量，用以匹配（）\r\nfunction getRegGroups(str: string): number {\r\n  const regExp = new RegExp('|' + str);\r\n  // eslint-disable-next-line\r\n  return regExp.exec('')?.length! - 1;\r\n}\r\n\r\n// 创建一个捕获组的正则表达式模式\r\nfunction getRegCapture(str: string): string {\r\n  return '(' + str + ')';\r\n}\r\n\r\n// 将正则表达式合并为一个联合的正则表达式模式\r\nfunction getRegUnion(regexps: string[]): string {\r\n  if (!regexps.length) {\r\n    return '(?!)';\r\n  }\r\n  const source = regexps.map(str => '(?:' + str + ')').join('|');\r\n  return '(?:' + source + ')';\r\n}\r\n\r\nfunction getReg(input: string | Record<string, any>): string {\r\n  if (typeof input === 'string') {\r\n    return '(?:' + transferReg(input) + ')';\r\n  } else if (checkRegExp(input) || checkObject(input)) {\r\n    if (input.ignoreCase) {\r\n      throw new Error('/i prohibition sign');\r\n    }\r\n    if (input.global) {\r\n      throw new Error('/g prohibition sign');\r\n    }\r\n    if (input.sticky) {\r\n      throw new Error('/y prohibition sign');\r\n    }\r\n    if (input.multiline) {\r\n      throw new Error('/m prohibition sign');\r\n    }\r\n    return input.source;\r\n  } else {\r\n    throw new Error(`${input}Non-conformance to specifications!`);\r\n  }\r\n}\r\n\r\nfunction getRulesByObject(object: Record<string, any>) {\r\n  const keys = Object.getOwnPropertyNames(object);\r\n\r\n  // 存储最终的规则数组\r\n  const result: any[] = [];\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    const thing = object[key];\r\n\r\n    // 将属性值转换为规则数组\r\n    const rules = [].concat(thing);\r\n\r\n    // 如果属性名为 'include'，表示需要包含其他规则\r\n    if (key === 'include') {\r\n      for (let j = 0; j < rules.length; j++) {\r\n        result.push({ include: rules[j] });\r\n      }\r\n      continue;\r\n    }\r\n\r\n    // 用于保存当前规则的匹配模式\r\n    let match = [];\r\n    rules.forEach(function (rule) {\r\n      if (checkObject(rule)) {\r\n        // 如果规则是一个对象，表示具有选项设置，添加该规则到结果数组中，并重置匹配模式数组\r\n        if (match.length) result.push(getRuleOptions(key, match));\r\n        result.push(getRuleOptions(key, rule));\r\n        match = [];\r\n      } else {\r\n        match.push(rule);\r\n      }\r\n    });\r\n\r\n    // 如果匹配模式数组中还有剩余的匹配模式，创建规则对象并添加到结果数组中\r\n    if (match.length) result.push(getRuleOptions(key, match));\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction getRulesByArray(array: any[]) {\r\n  const result: any[] = [];\r\n\r\n  for (let i = 0; i < array.length; i++) {\r\n    const obj = array[i];\r\n\r\n    // 如果元素具有 'include' 属性，表示需要包含其他规则\r\n    if (obj.include) {\r\n      const include = [].concat(obj.include);\r\n      for (let j = 0; j < include.length; j++) {\r\n        result.push({ include: include[j] });\r\n      }\r\n      continue;\r\n    }\r\n\r\n    if (!obj.type) {\r\n      throw new Error('The rule does not have the type attribute.');\r\n    }\r\n    result.push(getRuleOptions(obj.type, obj));\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nfunction getRuleOptions(type: any, obj: any) {\r\n  // 如果 obj 不是一个对象，则将其转换为包含 'match' 属性的对象\r\n  if (!checkObject(obj)) {\r\n    obj = { match: obj };\r\n  }\r\n\r\n  // 如果 obj 包含 'include' 属性，则抛出错误，因为匹配规则不能包含状态\r\n  if (obj.include) {\r\n    throw new Error('The matching rule cannot contain the status!');\r\n  }\r\n\r\n  // 创建默认的选项对象，初始化各个选项属性\r\n  const options: Record<string, any> = {\r\n    defaultType: type,\r\n    lineBreaks: !!obj.error || !!obj.fallback,\r\n    pop: false,\r\n    next: null,\r\n    push: null,\r\n    error: false,\r\n    fallback: false,\r\n    value: null,\r\n    type: null,\r\n    shouldThrow: false,\r\n  };\r\n\r\n  Object.assign(options, obj);\r\n\r\n  if (typeof options.type === 'string' && type !== options.type) {\r\n    throw new Error('The type attribute cannot be a string.');\r\n  }\r\n\r\n  const match = options.match;\r\n  if (Array.isArray(match)) {\r\n    options.match = match;\r\n  } else if (match) {\r\n    options.match = [match];\r\n  } else {\r\n    options.match = [];\r\n  }\r\n  options.match.sort((str1: string, str2: string) => {\r\n    // 根据规则的类型进行排序，确保正则表达式排在最前面，长度较长的规则排在前面\r\n    if (checkRegExp(str1) && checkRegExp(str2)) {\r\n      return 0;\r\n    } else if (checkRegExp(str2)) {\r\n      return -1;\r\n    } else if (checkRegExp(str1)) {\r\n      return +1;\r\n    } else {\r\n      return str2.length - str1.length;\r\n    }\r\n  });\r\n\r\n  return options;\r\n}\r\n\r\nfunction getRules(spec: any) {\r\n  return Array.isArray(spec) ? getRulesByArray(spec) : getRulesByObject(spec);\r\n}\r\n\r\nconst ruleUtils = {\r\n  checkObject,\r\n  checkRegExp,\r\n  transferReg,\r\n  checkSticky,\r\n  getRegGroups,\r\n  getRegCapture,\r\n  getRegUnion,\r\n  getReg,\r\n  getRulesByObject,\r\n  getRulesByArray,\r\n  getRuleOptions,\r\n  getRules,\r\n};\r\n\r\nexport default ruleUtils;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport ruleUtils from '../utils/parseRuleUtils';\r\nimport { LexerInterface } from '../types/interfaces';\r\n\r\n/**\r\n * 词法解析器，主要根据设计的规则对message进行处理成Token\r\n */\r\nclass Lexer<T> implements LexerInterface<T> {\r\n  readonly startState: string;\r\n  readonly unionReg: Record<string, any>;\r\n  private buffer = '';\r\n  private stack: string[] = [];\r\n  private index = 0;\r\n  private line = 1;\r\n  private col = 1;\r\n  private queuedText = '';\r\n  private state = '';\r\n  private groups: string[] = [];\r\n  private error: Record<string, any> | undefined;\r\n  private regexp: any;\r\n  private fast: Record<string, unknown> = {};\r\n  private queuedGroup: string | null = '';\r\n  private value = '';\r\n\r\n  constructor(unionReg: Record<string, any>, startState: string) {\r\n    this.startState = startState;\r\n    this.unionReg = unionReg;\r\n    this.buffer = '';\r\n    this.stack = [];\r\n    this.reset();\r\n  }\r\n\r\n  /**\r\n   *  根据新的消息重置解析器\r\n   * @param data 消息数据\r\n   */\r\n  public reset(data?: string) {\r\n    this.buffer = data || '';\r\n    this.index = 0;\r\n    this.line = 1;\r\n    this.col = 1;\r\n    this.queuedText = '';\r\n    this.setState(this.startState);\r\n    this.stack = [];\r\n    return this;\r\n  }\r\n\r\n  private setState(state: string) {\r\n    if (!state || this.state === state) {\r\n      return;\r\n    }\r\n    this.state = state;\r\n    const info = this.unionReg[state];\r\n    this.groups = info.groups;\r\n    this.error = info.error;\r\n    this.regexp = info.regexp;\r\n    this.fast = info.fast;\r\n  }\r\n\r\n  private popState() {\r\n    this.setState(<string>this.stack.pop());\r\n  }\r\n\r\n  private pushState(state: string) {\r\n    this.stack.push(this.state);\r\n    this.setState(state);\r\n  }\r\n\r\n  private getGroup(match: Record<string, object>) {\r\n    const groupCount = this.groups.length;\r\n    for (let i = 0; i < groupCount; i++) {\r\n      if (match[i + 1] !== undefined) {\r\n        return this.groups[i];\r\n      }\r\n    }\r\n    throw new Error('No token type found matching text!');\r\n  }\r\n\r\n  private tokenToString() {\r\n    return this.value;\r\n  }\r\n\r\n  /**\r\n   * 迭代获取下一个 token\r\n   */\r\n  public next() {\r\n    const index = this.index;\r\n\r\n    if (this.queuedGroup) {\r\n      const token = this.getToken(this.queuedGroup, this.queuedText, index);\r\n      this.queuedGroup = null;\r\n      this.queuedText = '';\r\n      return token;\r\n    }\r\n\r\n    const buffer = this.buffer;\r\n    if (index === buffer.length) {\r\n      return;\r\n    }\r\n\r\n    const fastGroup = this.fast[buffer.charCodeAt(index)];\r\n    if (fastGroup) {\r\n      return this.getToken(fastGroup, buffer.charAt(index), index);\r\n    }\r\n\r\n    // 如果没有快速匹配，那么使用预先编译的正则表达式进行匹配操作\r\n    const regexp = this.regexp;\r\n    regexp.lastIndex = index;\r\n    const match = getMatch(regexp, buffer);\r\n    const error = this.error;\r\n    if (match == null) {\r\n      return this.getToken(error, buffer.slice(index, buffer.length), index);\r\n    }\r\n\r\n    const group = this.getGroup(match);\r\n    const text = match[0];\r\n\r\n    if (error?.fallback && match.index !== index) {\r\n      this.queuedGroup = group;\r\n      this.queuedText = text;\r\n      return this.getToken(error, buffer.slice(index, match.index), index);\r\n    }\r\n\r\n    return this.getToken(group, text, index);\r\n  }\r\n\r\n  /**\r\n   * 获取Token\r\n   * @param group 解析模板后获得的属性值\r\n   * @param text 文本属性的信息\r\n   * @param offset 偏移量\r\n   * @private\r\n   */\r\n  private getToken(group: any, text: string, offset: number) {\r\n    let lineNum = 0;\r\n    let last = 1; // 最后一个换行符的索引位置\r\n    if (group.lineBreaks) {\r\n      const matchNL = /\\n/g;\r\n      if (text === '\\n') {\r\n        lineNum = 1;\r\n      } else {\r\n        while (matchNL.exec(text)) {\r\n          lineNum++;\r\n          last = matchNL.lastIndex;\r\n        }\r\n      }\r\n    }\r\n\r\n    const token = {\r\n      type: (typeof group.type === 'function' && group.type(text)) || group.defaultType,\r\n      value: typeof group.value === 'function' ? group.value(text) : text,\r\n      text: text,\r\n      toString: this.tokenToString,\r\n      offset: offset, // 标记在输入 buffer 中的偏移量\r\n      lineBreaks: lineNum,\r\n      line: this.line, // token 所在的行号\r\n      col: this.col, // token 所在的列号\r\n    };\r\n\r\n    const size = text.length;\r\n    this.index += size;\r\n    this.line += lineNum;\r\n    if (lineNum !== 0) {\r\n      this.col = size - last + 1;\r\n    } else {\r\n      this.col += size;\r\n    }\r\n\r\n    if (group.shouldThrow) {\r\n      throw new Error('Invalid Syntax!');\r\n    }\r\n\r\n    if (group.pop) {\r\n      this.popState();\r\n    } else if (group.push) {\r\n      this.pushState(group.push);\r\n    } else if (group.next) {\r\n      this.setState(group.next);\r\n    }\r\n\r\n    return token;\r\n  }\r\n\r\n  // 增加迭代器，允许逐个访问集合中的元素方法\r\n  [Symbol.iterator]() {\r\n    return {\r\n      next: (): IteratorResult<T> => {\r\n        const token = this.next();\r\n        return { value: token, done: !token } as IteratorResult<T>;\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * 根据正则表达式，获取匹配到message的值\r\n * 索引为 0 的元素是完整的匹配结果。\r\n * 索引为 1、2、3 等的元素是正则表达式中指定的捕获组的匹配结果。\r\n */\r\nconst getMatch = ruleUtils.checkSticky()\r\n  ? // 正则表达式具有 sticky 标志\r\n    (regexp: any, buffer: string) => regexp.exec(buffer)\r\n  : // 正则表达式具有 global 标志,匹配的字符串长度为 0，则表示匹配失败\r\n    (regexp: any, buffer: string) => (regexp.exec(buffer)[0].length === 0 ? null : regexp.exec(buffer));\r\n\r\nexport default Lexer;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nconst body: Record<string, any> = {\r\n  doubleapos: {\r\n    match: \"''\",\r\n    value: () => \"'\",\r\n  },\r\n  quoted: {\r\n    lineBreaks: true,\r\n    match: /'[{}#](?:[^]*?[^'])?'(?!')/u, // 用以匹配单引号、花括号{}以及井号# 如'Hello' 、{name}、{}#\r\n    value: (src: string) => src.slice(1, -1).replace(/''/g, \"'\"),\r\n  },\r\n  argument: {\r\n    lineBreaks: true,\r\n\r\n    // 用于匹配{name、{Hello{World，匹配{ }花括号中有任何Unicode字符，如空格、制表符等\r\n    match: /\\{\\s*[^\\p{Pat_Syn}\\p{Pat_WS}]+\\s*/u,\r\n    push: 'arg',\r\n    value: (src: string) => src.substring(1).trim(),\r\n  },\r\n  octothorpe: '#',\r\n  end: {\r\n    match: '}',\r\n    pop: 1,\r\n  },\r\n  content: {\r\n    lineBreaks: true,\r\n    match: /[^][^{}#]*/u, // 主要匹配不包含[]任何字符（除了换行符）、不包含{}、#的任何个字符\r\n  },\r\n};\r\n\r\nconst arg: Record<string, any> = {\r\n  select: {\r\n    lineBreaks: true,\r\n    match: /,\\s*(?:plural|select|selectordinal)\\s*,\\s*/u, // 匹配内容包含 plural、select 或 selectordinal\r\n    next: 'select', // 继续解析下一个参数\r\n    value: (src: string) => src.split(',')[1].trim(), // 提取第二个参数，并处理收尾空格\r\n  },\r\n  'func-args': {\r\n    // 匹配是否包含其他非特殊字符的参数,匹配结果包含特殊字符，如param1, param2, param3\r\n    lineBreaks: true,\r\n    match: /,\\s*[^\\p{Pat_Syn}\\p{Pat_WS}]+\\s*,/u,\r\n    next: 'body',\r\n    value: (src: string) => src.split(',')[1].trim(), // 参数字符串去除逗号并去除首尾空格\r\n  },\r\n  'func-simple': {\r\n    // 匹配是否包含其他简单参数，匹配结果不包含标点符号：param1 param2 param3\r\n    lineBreaks: true,\r\n    match: /,\\s*[^\\p{Pat_Syn}\\p{Pat_WS}]+\\s*/u,\r\n    value: (src: string) => src.substring(1).trim(),\r\n  },\r\n  end: {\r\n    match: '}',\r\n    pop: 1,\r\n  },\r\n};\r\n\r\nconst select: Record<string, any> = {\r\n  offset: {\r\n    lineBreaks: true,\r\n    match: /\\s*offset\\s*:\\s*\\d+\\s*/u, // 匹配message中是否包含偏移量offest信息\r\n    value: (src: string) => src.split(':')[1].trim(),\r\n  },\r\n  case: {\r\n    // 检查匹配该行是否包含分支信息。\r\n    lineBreaks: true,\r\n\r\n    // 设置规则匹配以左大括号 { 结尾的字符串，以等号 = 后跟数字开头的字符串，或者以非特殊符号和非空白字符开头的字符串，如 '=1 {'\r\n    match: /\\s*(?:=\\d+|[^\\p{Pat_Syn}\\p{Pat_WS}]+)\\s*\\{/u,\r\n    push: 'body', // 匹配成功，则会push到body栈中\r\n    value: (src: string) => src.substring(0, src.indexOf('{')).trim(),\r\n  },\r\n  end: {\r\n    match: /\\s*\\}/u,\r\n    pop: 1,\r\n  },\r\n};\r\n\r\nexport const mappingRule: Record<string, any> = {\r\n  body,\r\n  arg,\r\n  select,\r\n};\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\n/**\r\n * \\\\(?:u\\{[a-fA-F0-9]+}) 匹配形如 \\u{0020} 的 Unicode 转义字符。\r\n * \\\\x[a-fA-F0-9]{2} 匹配形如 \\x0A 的十六进制转义字符。\r\n * [nrtf'\"] 匹配常见的转义字符：\\n（换行符）、\\r（回车符）、\\t（制表符）、\\f（换页符）、\\'（单引号）和 \\\"（双引号）。\r\n */\r\nexport const UNICODE_REG: RegExp = /\\\\(?:u\\{[a-fA-F0-9]+}|x[a-fA-F0-9]{2}|[nrtf'\"])/g;\r\nexport const STICKY_FLAG: string = 'ym';\r\nexport const GLOBAL_FLAG: string = 'gm';\r\n\r\nexport const VERTICAL_LINE: string = '|';\r\nexport const UNICODE_FLAG: string = 'u';\r\nexport const STATE_GROUP_START_INDEX: number = 1;\r\n// Inula 需要被保留静态常量\r\nexport const INULA_STATICS = {\r\n  childContextTypes: true,\r\n  contextType: true,\r\n  contextTypes: true,\r\n  defaultProps: true,\r\n  displayName: true,\r\n  getDefaultProps: true,\r\n  getDerivedStateFromError: true,\r\n  getDerivedStateFromProps: true,\r\n  mixins: true,\r\n  propTypes: true,\r\n  type: true,\r\n};\r\n\r\n// JavaScript 需要被保留原生静态属性\r\nexport const NATIVE_STATICS = {\r\n  name: true,\r\n  length: true,\r\n  prototype: true,\r\n  caller: true,\r\n  callee: true,\r\n  arguments: true,\r\n  arity: true,\r\n};\r\n\r\n// Inula ForwardRef 组件的静态属性需要被保留\r\nexport const INULA_FORWARD_REF_STATICS = {\r\n  vtype: true,\r\n  render: true,\r\n  defaultProps: true,\r\n  key: true,\r\n  type: true,\r\n};\r\n\r\n// React ForwardRef 组件的静态属性需要被保留\r\nexport const REACT_FORWARD_REF_STATICS = {\r\n  $$typeof: true, // inula 'vtype': true\r\n  render: true, // render\r\n  defaultProps: true, // props\r\n  displayName: true,\r\n  propTypes: true, // type: type,\r\n};\r\n\r\nexport const FORWARD_REF_STATICS = { ...INULA_FORWARD_REF_STATICS, ...REACT_FORWARD_REF_STATICS };\r\n\r\n// Inula Memo 组件的静态属性需要被保留\r\nexport const INULA_MEMO_STATICS = {\r\n  vtype: true, // inula 'vtype': true\r\n  compare: true,\r\n  defaultProps: true,\r\n  type: true,\r\n};\r\n\r\n// 默认复数规则\r\nexport const DEFAULT_PLURAL_KEYS = ['zero', 'one', 'two', 'few', 'many', 'other'];\r\n\r\nexport const voidElementTags = [\r\n  'area',\r\n  'base',\r\n  'br',\r\n  'col',\r\n  'embed',\r\n  'hr',\r\n  'img',\r\n  'input',\r\n  'keygen',\r\n  'link',\r\n  'meta',\r\n  'param',\r\n  'source',\r\n  'track',\r\n  'wbr',\r\n  'menuitem',\r\n];\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport Lexer from './Lexer';\r\nimport { mappingRule } from './mappingRule';\r\nimport ruleUtils from '../utils/parseRuleUtils';\r\nimport { RawToken } from '../types/types';\r\nimport { STATE_GROUP_START_INDEX, GLOBAL_FLAG, STICKY_FLAG, UNICODE_FLAG, VERTICAL_LINE } from '../constants';\r\n\r\nconst defaultErrorRule = ruleUtils.getRuleOptions('error', { lineBreaks: true, shouldThrow: true });\r\n\r\n// 解析规则并生成词法分析器所需的数据结构，以便进行词法分析操作\r\nfunction parseRules(rules: Record<string, any>, hasStates: boolean): Record<string, object> {\r\n  let errorRule: Record<string, object> | null = null;\r\n  const fast: Record<string, unknown> = {};\r\n  let enableFast = true;\r\n  let unicodeFlag: boolean | null = null;\r\n  const groups: Record<string, any>[] = [];\r\n  const parts: string[] = [];\r\n\r\n  // 检查是否存在 fallback 规则，若存在则禁用快速匹配\r\n  enableFast = isExistsFallback(rules, enableFast);\r\n\r\n  for (let i = 0; i < rules.length; i++) {\r\n    const options = rules[i];\r\n    if (options.include) {\r\n      throw new Error('Inheritance is not allowed in stateless lexers!');\r\n    }\r\n\r\n    errorRule = isOptionsErrorOrFallback(options, errorRule);\r\n\r\n    const match = options.match.slice();\r\n    if (enableFast) {\r\n      // 如果快速匹配允许，则将单字符的规则存入 fast 对象\r\n      processFast(match, fast, options);\r\n    }\r\n\r\n    // 检查规则中是否存在不适当的状态切换选项\r\n    if (options.pop || options.push || options.next) {\r\n      checkStateOptions(hasStates, options);\r\n    }\r\n    // 只有具有 .match 的规则才会被包含在正则表达式中\r\n    if (match.length === 0) {\r\n      continue;\r\n    }\r\n    enableFast = false;\r\n\r\n    groups.push(options);\r\n\r\n    // 检查是否所有规则都使用了unicode，或者都未使用\r\n    unicodeFlag = checkUnicode(match, unicodeFlag, options);\r\n\r\n    const pat = ruleUtils.getRegUnion(match.map(ruleUtils.getReg));\r\n    const regexp = new RegExp(pat);\r\n    if (regexp.test('')) {\r\n      throw new Error('The regex matched the empty string!');\r\n    }\r\n    const groupCount = ruleUtils.getRegGroups(pat);\r\n    if (groupCount > 0) {\r\n      throw new Error('The regular expression uses capture groups, use (?: … ) instead!');\r\n    }\r\n\r\n    // 检测规则是否匹配换行符\r\n    if (!options.lineBreaks && regexp.test('\\n')) {\r\n      throw new Error('The matching rule must contain lineBreaks.');\r\n    }\r\n\r\n    parts.push(ruleUtils.getRegCapture(pat));\r\n  }\r\n\r\n  // 如果没有 fallback 规则，则使用 sticky 标志，只在当前索引位置寻找匹配项，如果不支持 sticky 标志，则使用无法被否定的空模式来模拟\r\n  const fallbackRule = errorRule && errorRule.fallback;\r\n  let flags = ruleUtils.checkSticky() && !fallbackRule ? STICKY_FLAG : GLOBAL_FLAG;\r\n  const suffix = ruleUtils.checkSticky() || fallbackRule ? '' : VERTICAL_LINE;\r\n\r\n  if (unicodeFlag === true) {\r\n    flags += UNICODE_FLAG;\r\n  }\r\n  const combined = new RegExp(ruleUtils.getRegUnion(parts) + suffix, flags);\r\n\r\n  return {\r\n    regexp: combined,\r\n    groups: groups,\r\n    fast: fast,\r\n    error: errorRule || defaultErrorRule,\r\n  };\r\n}\r\n\r\nexport function checkStateGroup(group: Record<string, any>, name: string, mappingRules: Record<string, object>) {\r\n  const state = group && (group.push || group.next);\r\n  if (state && !mappingRules[state]) {\r\n    throw new Error('The state is missing.');\r\n  }\r\n  if (group && group.pop && +group.pop !== STATE_GROUP_START_INDEX) {\r\n    throw new Error('The value of pop must be 1.');\r\n  }\r\n}\r\n\r\n// 将国际化解析规则注入分词器中\r\nfunction parseMappingRule(mappingRule: Record<string, object>, startState?: string): Lexer<RawToken> {\r\n  const keys = Object.getOwnPropertyNames(mappingRule);\r\n\r\n  if (!startState) {\r\n    startState = keys[0];\r\n  }\r\n\r\n  // 将每个状态的规则解析为规则数组，并存储在 ruleMap 对象中\r\n  const ruleMap = keys.reduce((map, key) => {\r\n    map[key] = ruleUtils.getRules(mappingRule[key]);\r\n    return map;\r\n  }, {});\r\n\r\n  // 处理规则中的 include 声明，将被包含的规则添加到相应的状态中\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    const rules = ruleMap[key];\r\n    const included = {};\r\n\r\n    for (let j = 0; j < rules.length; j++) {\r\n      const rule = rules[j];\r\n      if (!rule.include) {\r\n        continue;\r\n      }\r\n\r\n      const splice = [j, STATE_GROUP_START_INDEX];\r\n      if (rule.include !== key && !included[rule.include]) {\r\n        included[rule.include] = true;\r\n        const newRules = ruleMap[rule.include];\r\n\r\n        if (!newRules) {\r\n          throw new Error('Cannot contain a state that does not exist!');\r\n        }\r\n\r\n        newRules.forEach(newRule => {\r\n          if (!rules.includes(newRule)) {\r\n            splice.push(newRule);\r\n          }\r\n        });\r\n      }\r\n      // eslint-disable-next-line\r\n      rules.splice.apply(rules, splice);\r\n      j--;\r\n    }\r\n  }\r\n\r\n  const mappingAllRules = {};\r\n\r\n  // 将规则映射为词法分析器数据结构，并存储在 mappingAllRules 对象中\r\n  keys.forEach(key => {\r\n    mappingAllRules[key] = parseRules(ruleMap[key], true);\r\n  });\r\n\r\n  // 检查状态组中的规则是否正确引用了其他状态\r\n  keys.forEach(name => {\r\n    const state = mappingAllRules[name];\r\n    const groups = state.groups;\r\n    groups.forEach(group => {\r\n      checkStateGroup(group, name, mappingAllRules);\r\n    });\r\n    const fastKeys = Object.getOwnPropertyNames(state.fast);\r\n    fastKeys.forEach(fastKey => {\r\n      checkStateGroup(state.fast[fastKey], name, mappingAllRules);\r\n    });\r\n  });\r\n\r\n  // 将规则注入到词法解析器\r\n  return new Lexer(mappingAllRules, startState);\r\n}\r\n\r\n/**\r\n * 快速匹配模式\r\n * @param match\r\n * @param fast\r\n * @param options\r\n */\r\nfunction processFast(match: Record<string, any>, fast: Record<string, unknown> = {}, options: Record<string, object>) {\r\n  while (match.length && typeof match[0] === 'string' && match[0].length === 1) {\r\n    // 获取到数组的第一个元素\r\n    const word = match.shift();\r\n    fast[word.charCodeAt(0)] = options;\r\n  }\r\n}\r\n\r\n/**\r\n *  用以处理错误逻辑\r\n * @param options 操作属性\r\n * @param errorRule 错误规则\r\n */\r\nfunction handleErrorRule(options: Record<string, object>, errorRule: Record<string, object>) {\r\n  if (!options.fallback === !errorRule.fallback) {\r\n    throw new Error('errorRule can only set one!');\r\n  } else {\r\n    throw new Error('fallback and error cannot be set at the same time!');\r\n  }\r\n}\r\n\r\n/**\r\n * 用以检查message中是否包含Unicode\r\n * @param match 匹配到的message\r\n * @param unicodeFlag Unicode标志\r\n * @param options 操作属性\r\n */\r\nfunction checkUnicode(match: Record<string, any>, unicodeFlag: boolean | null, options: Record<string, any>) {\r\n  for (let j = 0; j < match.length; j++) {\r\n    const obj = match[j];\r\n    if (!ruleUtils.checkRegExp(obj)) {\r\n      continue;\r\n    }\r\n\r\n    if (unicodeFlag === null) {\r\n      unicodeFlag = obj.unicode;\r\n    } else {\r\n      if (unicodeFlag !== obj.unicode && options.fallback === false) {\r\n        throw new Error('If the /u flag is used, all!');\r\n      }\r\n    }\r\n  }\r\n  return unicodeFlag;\r\n}\r\n\r\nfunction checkStateOptions(hasStates: boolean, options: Record<string, any>) {\r\n  if (!hasStates) {\r\n    throw new Error('State toggle options are not allowed in stateless tokenizers!');\r\n  }\r\n  if (options.fallback) {\r\n    throw new Error('State toggle options are not allowed on fallback tokens!');\r\n  }\r\n}\r\n\r\n/**\r\n * 检查是否存在fallback属性，用以来判断快速匹配规则\r\n * @param rules\r\n * @param enableFast\r\n */\r\nfunction isExistsFallback(rules: Record<string, any>, enableFast: boolean) {\r\n  for (let i = 0; i < rules.length; i++) {\r\n    if (rules[i].fallback) {\r\n      enableFast = false;\r\n    }\r\n  }\r\n  return enableFast;\r\n}\r\n\r\nfunction isOptionsErrorOrFallback(options: Record<string, object>, errorRule: Record<string, object> | null) {\r\n  if (options.error || options.fallback) {\r\n    // 只能设置一个 errorRule\r\n    if (errorRule) {\r\n      handleErrorRule(options, errorRule);\r\n    }\r\n    errorRule = options;\r\n  }\r\n  return errorRule;\r\n}\r\n\r\nexport const lexer = parseMappingRule(mappingRule);\r\n\r\nexport default parseMappingRule;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { lexer } from './parseMappingRule';\r\nimport { RawToken } from '../types/types';\r\nimport { DEFAULT_PLURAL_KEYS } from '../constants';\r\nimport { Content, FunctionArg, PlainArg, Select, TokenContext } from '../types/interfaces';\r\n\r\n/**\r\n *  语法解析器，根据Token,获得具备上下文的AST\r\n */\r\nclass Parser {\r\n  cardinalKeys: string[] = DEFAULT_PLURAL_KEYS;\r\n  ordinalKeys: string[] = DEFAULT_PLURAL_KEYS;\r\n\r\n  constructor(message: string) {\r\n    lexer.reset(message);\r\n  }\r\n\r\n  isSelectKeyValid(type: Select['type'], value: string) {\r\n    if (value[0] === '=') {\r\n      if (type === 'select') {\r\n        throw new Error('The key value of the select type is invalid.');\r\n      }\r\n    } else if (type !== 'select') {\r\n      const values = type === 'plural' ? this.cardinalKeys : this.ordinalKeys;\r\n      if (values.length > 0 && !values.includes(value)) {\r\n        throw new Error(`${type} type key value is invalid.`);\r\n      }\r\n    }\r\n  }\r\n\r\n  processSelect({ value: arg }: any, isPlural: boolean, context: TokenContext, type: Select['type']): Select {\r\n    const select: Select = { type, arg, cases: [], ctx: context };\r\n\r\n    if (type === 'plural' || type === 'selectordinal') {\r\n      isPlural = true;\r\n    }\r\n\r\n    for (const token of lexer) {\r\n      switch (token.type) {\r\n        case 'offset': {\r\n          if (type === 'select') {\r\n            throw new Error('The complex offset of the select type is incorrect.');\r\n          }\r\n          if (select.cases.length > 0) {\r\n            throw new Error('The complex offset must be set before cases.');\r\n          }\r\n\r\n          select.offset = Number(token.value);\r\n          context.text += token.text;\r\n          context.lineNum += token.lineBreaks;\r\n          break;\r\n        }\r\n        case 'case': {\r\n          this.isSelectKeyValid(type, token.value);\r\n          select.cases.push({\r\n            key: token.value.replace(/=/g, ''),\r\n            tokens: this.parse(isPlural),\r\n            ctx: getContext(token),\r\n          });\r\n          break;\r\n        }\r\n        case 'end': {\r\n          return select;\r\n        }\r\n        default: {\r\n          throw new Error(`Unrecognized analyzer token: ${token.type}`);\r\n        }\r\n      }\r\n    }\r\n    throw new Error('The message end position is invalid.');\r\n  }\r\n\r\n  /**\r\n   * 解析获得的Token\r\n   * @param token\r\n   * @param isPlural\r\n   */\r\n  parseToken(token: RawToken, isPlural: boolean): PlainArg | FunctionArg | Select {\r\n    const context = getContext(token);\r\n    const nextToken = lexer.next();\r\n\r\n    if (!nextToken) {\r\n      throw new Error('The message end position is invalid.');\r\n    }\r\n\r\n    context.text += nextToken.text;\r\n    context.lineNum += nextToken.lineBreaks;\r\n\r\n    switch (nextToken.type) {\r\n      case 'end': {\r\n        return { type: 'argument', arg: token.value, ctx: context };\r\n      }\r\n      case 'func-simple': {\r\n        const end = lexer.next();\r\n        if (!end) {\r\n          throw new Error('The message end position is invalid.');\r\n        }\r\n        if (end.type !== 'end') {\r\n          throw new Error(`Unrecognized analyzer token: ${end.type}`);\r\n        }\r\n        context.text += end.text;\r\n        if (checkSelectType(nextToken.value.toLowerCase())) {\r\n          throw new Error(`Invalid parameter type: ${nextToken.value}`);\r\n        }\r\n        return {\r\n          type: 'function',\r\n          arg: token.value,\r\n          key: nextToken.value,\r\n          ctx: context,\r\n        };\r\n      }\r\n      case 'func-args': {\r\n        if (checkSelectType(nextToken.value.toLowerCase())) {\r\n          throw new Error(`Invalid parameter type: ${nextToken.value}`);\r\n        }\r\n        const param = this.parse(isPlural);\r\n\r\n        return {\r\n          type: 'function',\r\n          arg: token.value,\r\n          key: nextToken.value,\r\n          param,\r\n          ctx: context,\r\n        };\r\n      }\r\n      case 'select':\r\n        if (checkSelectType(nextToken.value)) {\r\n          return this.processSelect(token, isPlural, context, nextToken.value);\r\n        } else {\r\n          throw new Error(`Invalid select type: ${nextToken.value}`);\r\n        }\r\n      default:\r\n        throw new Error(`Unrecognized analyzer token: ${nextToken.type}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 解析方法入口\r\n   * 在根级别解析时，遇到结束符号即结束解析并返回结果；而在非根级别解析时，遇到结束符号会被视为不合法的结束位置，抛出错误\r\n   * @param isPlural  标记复数\r\n   * @param isRoot  标记根节点\r\n   */\r\n  parse(isPlural: boolean, isRoot?: boolean): Array<Content | PlainArg | FunctionArg | Select> {\r\n    const tokens: any[] = [];\r\n    let content: string | Content | null = null;\r\n\r\n    for (const token of lexer) {\r\n      if (token.type === 'argument') {\r\n        if (content) {\r\n          content = null;\r\n        }\r\n        tokens.push(this.parseToken(token, isPlural));\r\n      } else if (token.type === 'octothorpe' && isPlural) {\r\n        if (content) {\r\n          content = null;\r\n        }\r\n        tokens.push({ type: 'octothorpe' });\r\n      } else if (token.type === 'end' && !isRoot) {\r\n        return tokens;\r\n      } else if (token.type === 'doubleapos') {\r\n        tokens.push(token.value);\r\n      } else if (token.type === 'quoted') {\r\n        tokens.push(token.value);\r\n      } else if (token.type === 'content') {\r\n        tokens.push(token.value);\r\n      } else {\r\n        let value = token.value;\r\n        if (!isPlural && token.type === 'quoted' && value[0] === '#') {\r\n          if (value.includes('{')) {\r\n            throw new Error(`Invalid template: ${value}`);\r\n          }\r\n          value = token.text;\r\n        }\r\n        if (content) {\r\n          content = value;\r\n        } else {\r\n          content = value;\r\n          tokens.push(content);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (isRoot) {\r\n      return tokens;\r\n    }\r\n    throw new Error('The message end position is invalid.');\r\n  }\r\n}\r\n\r\n/**\r\n * 获得 Token 的上下文\r\n * @param Token Token\r\n */\r\nconst getContext = (Token: RawToken): TokenContext => ({\r\n  offset: Token.offset,\r\n  line: Token.line,\r\n  col: Token.col,\r\n  text: Token.text,\r\n  lineNum: Token.lineBreaks,\r\n});\r\n\r\n// 用以检查select规则中的类型\r\nexport const checkSelectType = (value: string): boolean => {\r\n  return value === 'plural' || value === 'select' || value === 'selectordinal';\r\n};\r\n\r\nexport default function parse(message: string): Array<Content | PlainArg | FunctionArg | Select> {\r\n  const parser = new Parser(message);\r\n  return parser.parse(false, true);\r\n}\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\n/**\r\n * 将parse后的Token数组针对不同的匀速类型进行处理\r\n */\r\nenum TokenType {\r\n  octothorpe = 'OCTOTHORPE',\r\n  argument = 'ARGUMENT',\r\n  function = 'FUNCTION',\r\n}\r\n\r\nconst processToken = token => {\r\n  if (typeof token === 'string') {\r\n    return token;\r\n  } else if (TokenType[token.type] === 'OCTOTHORPE') {\r\n    // token为符号\r\n    return '#';\r\n  } else if (TokenType[token.type] === 'ARGUMENT') {\r\n    // token为变量\r\n    return [token.arg];\r\n  } else if (TokenType[token.type] === 'FUNCTION') {\r\n    // token为函数方法\r\n    const _param = token.param && token.param.tokens[0];\r\n    const param = typeof _param === 'string' ? _param.trim() : _param;\r\n    return [token.arg, token.key, param].filter(Boolean);\r\n  }\r\n\r\n  const offset = token.offset ? parseInt(token.offset) : undefined;\r\n\r\n  const tempFormatProps = {};\r\n  token.cases.forEach(item => {\r\n    tempFormatProps[item.key] = getTokenAST(item.tokens);\r\n  });\r\n\r\n  const mergedProps = Object.assign({}, { offset }, tempFormatProps);\r\n\r\n  return [token.arg, token.type, mergedProps];\r\n};\r\n\r\nfunction getTokenAST(tokens) {\r\n  if (!Array.isArray(tokens)) {\r\n    return tokens.join('');\r\n  }\r\n  return tokens.map(token => processToken(token));\r\n}\r\n\r\nexport default getTokenAST;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { CompiledMessage } from '../types/types';\r\nimport parse from '../parser/parser';\r\nimport getTokenAST from './getTokenAST';\r\nimport I18n from '../core/I18n';\r\n\r\nexport function isVariantI18n(i18n?: I18n) {\r\n  if (!i18n) {\r\n    throw new Error('I18n object is not found!');\r\n  }\r\n}\r\n\r\nfunction generateKey<T>(locales?: string | string[], options?: T, valueKey?: string | undefined) {\r\n  const localeKey = Array.isArray(locales) ? locales.sort().join('-') : locales;\r\n  return `${localeKey}:${JSON.stringify(options ?? {})}_${valueKey ?? ''}`;\r\n}\r\n\r\nfunction compile(message: string): CompiledMessage {\r\n  try {\r\n    return getTokenAST(parse(message));\r\n  } catch (e) {\r\n    console.error(`Message cannot be parse due to syntax errors: ${message},cause by ${e}`);\r\n    return message;\r\n  }\r\n}\r\n\r\nconst utils = {\r\n  isVariantI18n,\r\n  generateKey,\r\n  compile,\r\n};\r\n\r\nexport function createI18nProps(source) {\r\n  return {\r\n    intl: source,\r\n    locale: source.locale,\r\n    messages: source.messages,\r\n    defaultLocale: source.defaultLocale,\r\n    timeZone: source.timeZone,\r\n    onError: source.onError,\r\n    formatMessage: source.formatMessage.bind(source),\r\n    formatDate: source.formatDate ? source.formatDate.bind(source) : source.DateTimeFormat,\r\n    formatNumber: source.formatNumber ? source.formatNumber.bind(source) : source.NumberFormat,\r\n    $t: source.$t || source.formatMessage.bind(source),\r\n  };\r\n}\r\n\r\nexport default utils;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport creatI18nCache from '../cache/cache';\r\nimport utils from '../../utils/utils';\r\nimport { DatePool, Locales } from '../../types/types';\r\nimport { I18nCache } from '../../types/interfaces';\r\n\r\n/**\r\n * 时间格式化\r\n */\r\nclass DateTimeFormatter {\r\n  private readonly locales: Locales;\r\n  private readonly formatOptions: Intl.DateTimeFormatOptions;\r\n  // 创建一个缓存对象，用于存储DateTimeFormat的对象\r\n  private readonly cache?: I18nCache;\r\n  private readonly valueKey?: string;\r\n\r\n  constructor(locales: Locales, formatOptions?: Intl.DateTimeFormatOptions, cache?: I18nCache, valueKey?: string) {\r\n    this.locales = locales;\r\n    this.formatOptions = formatOptions ?? {};\r\n    this.cache = cache ?? creatI18nCache();\r\n    this.valueKey = valueKey ?? '';\r\n  }\r\n\r\n  dateTimeFormat(value: DatePool, formatOptions?: Intl.DateTimeFormatOptions): string {\r\n    const options = formatOptions ?? this.formatOptions;\r\n    const formatter = new Intl.DateTimeFormat(this.locales, options);\r\n    // 将传输的字符串转变为日期对象\r\n    if (typeof value === 'string') {\r\n      value = new Date(value);\r\n    }\r\n\r\n    // 如果启用了记忆化且已经有对应的数字格式化器缓存，则直接返回缓存中的格式化结果。否则创建新的格式化数据，并进行缓存\r\n    if (this.cache?.dateTimeFormat) {\r\n      // 造缓存的key，key包含区域设置和日期时间格式选项\r\n      const cacheKey = utils.generateKey<Intl.DateTimeFormatOptions>(this.locales, options, this.valueKey);\r\n\r\n      if (this.cache.dateTimeFormat[cacheKey]) {\r\n        return this.cache.dateTimeFormat[cacheKey].format(value);\r\n      }\r\n\r\n      // 查询缓存中的key， 若无key则创建新key\r\n      this.cache.dateTimeFormat[cacheKey] = formatter;\r\n      return formatter.format(value);\r\n    }\r\n\r\n    // 返回格式化后的时间\r\n\r\n    return formatter.format(value);\r\n  }\r\n}\r\n\r\nexport default DateTimeFormatter;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport creatI18nCache from '../cache/cache';\r\nimport { Locales } from '../../types/types';\r\nimport utils from '../../utils/utils';\r\nimport { I18nCache } from '../../types/interfaces';\r\n\r\n/**\r\n * 数字格式化\r\n */\r\nclass NumberFormatter {\r\n  private readonly locales: Locales;\r\n  private readonly formatOption?: Intl.NumberFormatOptions;\r\n  private cache?: I18nCache; // 创建一个缓存对象，用于缓存已经创建的数字格式化器\r\n  private readonly valueKey?: string;\r\n\r\n  constructor(locales: Locales, formatOption?: Intl.NumberFormatOptions, cache?: I18nCache, valueKey?: string) {\r\n    this.locales = locales;\r\n    this.formatOption = formatOption ?? {};\r\n    this.cache = cache ?? creatI18nCache();\r\n    this.valueKey = valueKey ?? '';\r\n  }\r\n\r\n  numberFormat(value: number, formatOption?: Intl.NumberFormatOptions): string {\r\n    const options = formatOption ?? this.formatOption;\r\n    const formatter = new Intl.NumberFormat(this.locales, options);\r\n\r\n    // 如果启用了记忆化且已经有对应的数字格式化器缓存，则直接返回缓存中的格式化结果。否则创建新的格式化数据，并进行缓存\r\n    if (this.cache?.numberFormat) {\r\n      // 造缓存的key，key包含区域设置数字格式选项\r\n      const cacheKey = utils.generateKey<Intl.NumberFormatOptions>(this.locales, options, this.valueKey);\r\n\r\n      if (this.cache.numberFormat[cacheKey]) {\r\n        return this.cache.numberFormat[cacheKey].format(value);\r\n      }\r\n\r\n      this.cache.numberFormat[cacheKey] = formatter;\r\n      return formatter.format(value);\r\n    }\r\n    return formatter.format(value);\r\n  }\r\n}\r\n\r\nexport default NumberFormatter;\r\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { EventCallback } from '../types/types';\r\n\r\n/**\r\n * 定义一个时间触发器类，使用泛型实现动态时间的监听\r\n */\r\nclass EventDispatcher<E extends Record<string, EventCallback>> {\r\n  // 声明_events，用于存储事件和对应的监听器\r\n  private _events: Map<keyof E, Set<EventCallback>>;\r\n\r\n  constructor() {\r\n    this._events = new Map();\r\n  }\r\n\r\n  /**\r\n   * on 方法，向指定的事件添加监听器，并返回一个用于移除该监听器的函数\r\n   * @param event\r\n   * @param listener\r\n   */\r\n  on(event: keyof E, listener: E[keyof E]): () => void {\r\n    if (!this._events.has(event)) {\r\n      this._events.set(event, new Set());\r\n    }\r\n    const listeners = this._events.get(event)!;\r\n    listeners.add(listener);\r\n\r\n    return () => {\r\n      this.removeListener(event, listener);\r\n    };\r\n  }\r\n\r\n  /**\r\n   * removeListener 方法，移除指定事件的监听器\r\n   * @param event\r\n   * @param listener\r\n   */\r\n  removeListener(event: keyof E, listener: E[keyof E]): void {\r\n    if (!this._events.has(event)) {\r\n      return;\r\n    }\r\n    const listeners = this._events.get(event)!;\r\n    listeners.delete(listener);\r\n    if (listeners.size === 0) {\r\n      this._events.delete(event);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * emit 方法，触发指定事件，并按照监听器注册顺序执行监听器\r\n   * @param event\r\n   * @param args\r\n   */\r\n  emit(event: keyof E, ...args: Parameters<E[keyof E]>): void {\r\n    if (!this._events.has(event)) {\r\n      return;\r\n    }\r\n\r\n    // 获取该事件对应的监听器集合，并按照注册顺序执行每个监听器\r\n    const listeners = this._events.get(event)!;\r\n    for (const listener of listeners) {\r\n      listener.apply(this, args);\r\n    }\r\n  }\r\n}\r\n\r\nexport default EventDispatcher;\r\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport utils from '../../utils/utils';\r\nimport NumberFormatter from './NumberFormatter';\r\nimport { Locale, Locales } from '../../types/types';\r\nimport { I18nCache } from '../../types/interfaces';\r\nimport creatI18nCache from '../cache/cache';\r\n\r\n/**\r\n * 复数格式化\r\n */\r\nclass PluralFormatter {\r\n  private readonly locale: Locale;\r\n  private readonly locales: Locales;\r\n  private readonly value: number;\r\n  private readonly message: any;\r\n  constructor(locale: Locale, locales: Locales, value: any, message: any) {\r\n    this.locale = locale;\r\n    this.locales = locales;\r\n    this.value = value;\r\n    this.message = message;\r\n  }\r\n\r\n  // 将 message中的“#”替换为指定数字value，并返回新的字符串或者字符串数组\r\n  replaceSymbol(ctx: any) {\r\n    const msg = typeof this.message === 'function' ? this.message(ctx) : this.message;\r\n    const messages = Array.isArray(msg) ? msg : [msg];\r\n\r\n    const numberFormatter = new NumberFormatter(this.locales);\r\n    const valueStr = numberFormatter.numberFormat(this.value);\r\n\r\n    return messages.map(msg => (typeof msg === 'string' ? msg.replace('#', valueStr) : msg));\r\n  }\r\n}\r\n\r\nexport default PluralFormatter;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport utils from '../../utils/utils';\r\nimport { Locale, SelectPool } from '../../types/types';\r\nimport { I18nCache } from '../../types/interfaces';\r\n\r\n/**\r\n * 规则选择器\r\n * eg : 输入选择语句 female {She} other {They}} ，表示'female'和'other'是两种可能的值，它们分别对应着'She'和'They'两个输出结果。\r\n * 如果调用select（{ value: 'female' }）则表示，输出 she\r\n */\r\nclass SelectFormatter {\r\n  private readonly locale: Locale;\r\n\r\n  constructor(locale: Locale) {\r\n    this.locale = locale;\r\n  }\r\n\r\n  getRule(value: SelectPool, rules: any) {\r\n    return rules[value] || rules.other;\r\n  }\r\n}\r\n\r\nexport default SelectFormatter;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { CompiledMessage, Locale, LocaleConfig, Locales } from '../types/types';\r\nimport generateFormatters from './generateFormatters';\r\nimport { FormatOptions, I18nCache } from '../types/interfaces';\r\nimport creatI18nCache from './cache/cache';\r\n\r\n/**\r\n * 获取翻译结果\r\n */\r\nclass Translation {\r\n  private readonly compiledMessage: CompiledMessage;\r\n  private readonly locale: Locale;\r\n  private readonly locales: Locales;\r\n  private readonly localeConfig: Record<string, any>;\r\n  private readonly cache: I18nCache;\r\n\r\n  constructor(\r\n    compiledMessage: CompiledMessage,\r\n    locale: Locale,\r\n    locales: Locales,\r\n    localeConfig: LocaleConfig,\r\n    cache?: I18nCache\r\n  ) {\r\n    this.compiledMessage = compiledMessage;\r\n    this.locale = locale;\r\n    this.locales = locales;\r\n    this.localeConfig = localeConfig;\r\n    this.cache = cache ?? creatI18nCache();\r\n  }\r\n\r\n  /**\r\n   * @param values 需要替换文本占位符的值\r\n   * @param formatOptions 需要格式化选项\r\n   */\r\n  translate(values: Record<string, unknown>, formatOptions: FormatOptions = {}): string {\r\n    const createTextFormatter = (\r\n      locale: Locale,\r\n      locales: Locales,\r\n      values: Record<string, unknown>,\r\n      formatOptions: FormatOptions,\r\n      localeConfig: LocaleConfig\r\n    ) => {\r\n      const textFormatter = (valueKey: string, type: string, format: any) => {\r\n        const formatters = generateFormatters(locale, locales, localeConfig, formatOptions, this.cache, valueKey);\r\n        const value = values[valueKey];\r\n        const formatter = formatters[type](value, format);\r\n\r\n        let message: any;\r\n        if (typeof formatter === 'function') {\r\n          message = formatter(textFormatter); // 递归调用\r\n        } else {\r\n          message = formatter; // 获得变量值 formatted: \"Fred\"\r\n        }\r\n\r\n        return Array.isArray(message) ? message.join('') : message;\r\n      };\r\n\r\n      return textFormatter;\r\n    };\r\n\r\n    const textFormatter = createTextFormatter(this.locale, this.locales, values, formatOptions, this.localeConfig);\r\n    // 通过递归方法formatCore进行格式化处理\r\n    return this.formatMessage(this.compiledMessage, textFormatter); // 返回要格式化的结果\r\n  }\r\n\r\n  formatMessage(compiledMessage: CompiledMessage, textFormatter: (...args: any[]) => any) {\r\n    if (!Array.isArray(compiledMessage)) {\r\n      return compiledMessage;\r\n    }\r\n\r\n    return compiledMessage\r\n      .map(token => {\r\n        if (typeof token === 'string') {\r\n          return token;\r\n        }\r\n\r\n        const [name, type, format] = token;\r\n\r\n        let replaceValueFormat = format;\r\n\r\n        // 如果 format 是对象，函数将递归地对它的每个值调用 formatMessage 后保存，否则直接保存\r\n        if (format && typeof format !== 'string') {\r\n          replaceValueFormat = Object.keys(replaceValueFormat).reduce((text, key) => {\r\n            text[key] = this.formatMessage(format[key], textFormatter);\r\n            return text;\r\n          }, {});\r\n        }\r\n        //调用 getContent 函数来获取给定 name、type 和 interpolateFormat 的值\r\n        const value = textFormatter(name, type, replaceValueFormat);\r\n        return value ?? `{${name}}`;\r\n      })\r\n      .join('');\r\n  }\r\n}\r\n\r\nexport default Translation;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport DateTimeFormatter from './fomatters/DateTimeFormatter';\r\nimport NumberFormatter from './fomatters/NumberFormatter';\r\nimport { DatePool, Locale, Locales, SelectPool } from '../types/types';\r\nimport PluralFormatter from './fomatters/PluralFormatter';\r\nimport SelectFormatter from './fomatters/SelectFormatter';\r\nimport { FormatOptions, I18nCache, IntlMessageFormat } from '../types/interfaces';\r\n\r\n/**\r\n * 默认格式化接口\r\n */\r\nconst generateFormatters = (\r\n  locale: Locale,\r\n  locales: Locales,\r\n  localeConfig: Record<string, any> = { plurals: undefined },\r\n  formatOptions: FormatOptions = {}, // 自定义格式对象\r\n  cache: I18nCache,\r\n  valueKey: string\r\n): IntlMessageFormat => {\r\n  const { plurals } = localeConfig;\r\n  /**\r\n   *  样式函数 ，根据格式获取格式样式， 如货币百分比， 返回相应的格式的对象，如果没有设定格式，则返回一个空对象\r\n   * @param formatOption\r\n   */\r\n  const getStyleOption = (formatOption: string | number) => {\r\n    if (typeof formatOption === 'string') {\r\n      return formatOptions[formatOption] || { option: formatOption };\r\n    } else {\r\n      return formatOption;\r\n    }\r\n  };\r\n\r\n  return {\r\n    // 复数规则\r\n    plural: (value: number, { offset = 0, ...rules }) => {\r\n      const pluralFormatter = new PluralFormatter(\r\n        locale,\r\n        locales,\r\n        value - offset,\r\n        rules[value] || rules[(plurals as any)?.(value - offset)] || rules.other\r\n      );\r\n      return pluralFormatter.replaceSymbol.bind(pluralFormatter);\r\n    },\r\n\r\n    selectordinal: (value: number, { offset = 0, ...rules }) => {\r\n      const message = rules[value] || rules[(plurals as any)?.(value - offset, true)] || rules.other;\r\n      const pluralFormatter = new PluralFormatter(locale, locales, value - offset, message);\r\n      return pluralFormatter.replaceSymbol.bind(pluralFormatter);\r\n    },\r\n\r\n    // 选择规则，如果规则对象中包含与该值相对应的属性，则返回该属性的值；否则，返回 \"other\" 属性的值。\r\n    select: (value: SelectPool, formatRules: any) => {\r\n      const selectFormatter = new SelectFormatter(locale);\r\n      return selectFormatter.getRule(value, formatRules);\r\n    },\r\n\r\n    // 用于将数字格式化为字符串，接受一个数字和一个格式化规则。它会根据规则返回格式化后的字符串。\r\n    numberFormat: (value: number, formatOption) => {\r\n      return new NumberFormatter(locales, getStyleOption(formatOption), cache, valueKey).numberFormat(value);\r\n    },\r\n\r\n    /**\r\n     * 用于将日期格式化为字符串，接受一个日期对象和一个格式化规则。它会根据规则返回格式化后的字符串。\r\n     * eg: { year: 'numeric', month: 'long', day: 'numeric' } 是一个用于指定DateTimeFormatter如何将日期对象转换为字符串的参数。\r\n     *      \\year: 'numeric' 表示年份的表示方式是数字形式（比如2023）。\r\n     *       month: 'long' 表示月份的表示方式是全名（比如January）。\r\n     *       day: 'numeric' 表示日期的表示方式是数字形式（比如1号）。\r\n     * @param value\r\n     * @param formatOption { year: 'numeric', month: 'long', day: 'numeric' }\r\n     */\r\n    dateTimeFormat: (value: DatePool, formatOption: any) => {\r\n      return new DateTimeFormatter(locales, getStyleOption(formatOption), cache, valueKey).dateTimeFormat(\r\n        value,\r\n        formatOption\r\n      );\r\n    },\r\n\r\n    // 用于处理未定义的值，接受一个值并直接返回它。\r\n    undefined: value => value,\r\n  };\r\n};\r\n\r\nexport default generateFormatters;\r\n","/*\r\n * Copyright (c) 2024 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { cloneElement, createElement, Fragment, InulaElement } from '@cloudsop/horizon';\r\nimport { voidElementTags } from '../constants';\r\n\r\n// 用于匹配标签的正则表达式\r\nconst tagReg = /<(\\d+)>(.*?)<\\/\\1>|<(\\d+)\\/>/;\r\n\r\n// 用于匹配换行符的正则表达式\r\nconst nlReg = /(?:\\r\\n|\\r|\\n)/g;\r\n\r\nexport function formatElements(\r\n  value: string,\r\n  elements: { [key: string]: InulaElement<any> } = {}\r\n): string | Array<any> {\r\n  const elementKeyID = getElementIndex(0, '$Inula');\r\n\r\n  //  value：This is a rich text with a custom component: <1/>\r\n  const arrays = value.replace(nlReg, '').split(tagReg);\r\n\r\n  // 若无InulaNode元素，则返回\r\n  if (arrays.length === 1) return value;\r\n\r\n  const result: any = [];\r\n\r\n  const before = arrays.shift();\r\n  if (before) {\r\n    result.push(before);\r\n  }\r\n\r\n  for (const [index, children, after] of getElements(arrays)) {\r\n    let element = elements[index];\r\n\r\n    if (!element || (voidElementTags[element.type as string] && children)) {\r\n      const errorMessage = !element\r\n        ? `Index not declared as ${index} in original translation`\r\n        : `${element.type} , No child element exists. Please check.`;\r\n      console.error(errorMessage);\r\n\r\n      // 对于异常元素，通过创建<></>来代替，并继续解析现有的子元素和之后的元素，并保证在构建数组时，不会因为缺少元素而导致索引错位。\r\n      element = createElement(Fragment, {});\r\n    }\r\n\r\n    // 如果存在子元素，则进行递归处理\r\n    const formattedChildren = children ? formatElements(children, elements) : element.props.children;\r\n\r\n    // 更新element 的属性和子元素\r\n    const clonedElement = cloneElement(element, { key: elementKeyID() }, formattedChildren);\r\n    result.push(clonedElement);\r\n\r\n    if (after) {\r\n      result.push(after);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\n/**\r\n *  从arrays数组中解析出标签元素和其子元素\r\n * @param arrays\r\n */\r\nfunction getElements(arrays: string[]) {\r\n  // 如果 arrays 数组为空，则返回空数组\r\n  if (!arrays.length) return [];\r\n\r\n  /**\r\n   * pairedIndex: 第一个元素表示配对标签的内容，即 <1>...</1> 形式的标签。\r\n   * children: 第二个元素表示配对标签内的子元素内容。\r\n   * unpairedIndex: 第三个元素表示自闭合标签的内容，即 <1/> 形式的标签。\r\n   * textAfter: 第四个元素表示标签之后的文本内容，即标签后紧跟着的文本。\r\n   * eg: [undefined,undefined,1,\"\"]\r\n   */\r\n  const [pairedIndex, children, unpairedIndex, textAfter] = arrays.splice(0, 4);\r\n\r\n  // 解析当前标签元素和它的子元素，返回一个包含标签索引、子元素和后续文本的数组\r\n  const currentElement: [number, string, string] = [\r\n    parseInt(pairedIndex || unpairedIndex), // 解析标签索引，如果是自闭合标签，则使用 unpaired\r\n    children || '',\r\n    textAfter || '',\r\n  ];\r\n\r\n  // 递归调用 getElements 函数，处理剩余的 arrays 数组\r\n  const remainingElements = getElements(arrays);\r\n\r\n  // 将当前元素和递归处理后的元素数组合并并返回\r\n  return [currentElement, ...remainingElements];\r\n}\r\n\r\n// 对传入富文本元素的位置标志索引\r\nfunction getElementIndex(count = 0, prefix = '') {\r\n  return function () {\r\n    return `${prefix}_${count++}`;\r\n  };\r\n}\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport EventDispatcher from '../utils/eventListener';\r\nimport DateTimeFormatter from '../format/fomatters/DateTimeFormatter';\r\nimport NumberFormatter from '../format/fomatters/NumberFormatter';\r\nimport { getFormatMessage } from '../format/getFormatMessage';\r\nimport { I18nCache, I18nProps, MessageDescriptor, MessageOptions } from '../types/interfaces';\r\nimport {\r\n  Locale,\r\n  Locales,\r\n  Messages,\r\n  AllLocaleConfig,\r\n  AllMessages,\r\n  LocaleConfig,\r\n  Error,\r\n  Events,\r\n  InulaNode,\r\n} from '../types/types';\r\nimport creatI18nCache from '../format/cache/cache';\r\nimport { isValidElement } from '@cloudsop/horizon';\r\n\r\nexport class I18n extends EventDispatcher<Events> {\r\n  public locale: Locale;\r\n  public locales: Locales;\r\n  public defaultLocale?: Locale;\r\n  public timeZone?: string;\r\n  public allMessages: AllMessages;\r\n  private readonly _localeConfig: AllLocaleConfig;\r\n  public readonly onError?: Error;\r\n  public readonly cache?: I18nCache;\r\n  public $t: (\r\n    id: MessageDescriptor | string,\r\n    values?: Record<string, unknown> | undefined,\r\n    { messages, context, formatOptions }?: MessageOptions\r\n  ) => string | any[];\r\n\r\n  constructor(props: I18nProps) {\r\n    super();\r\n    this.defaultLocale = 'en';\r\n    this.locale = this.defaultLocale;\r\n    this.locales = this.locale || '';\r\n    this.allMessages = {};\r\n    this._localeConfig = {};\r\n    this.onError = props.onError;\r\n    this.timeZone = '';\r\n\r\n    this.loadMessage(props.messages);\r\n\r\n    if (props.localeConfig) {\r\n      this.loadLocaleConfig(props.localeConfig);\r\n    }\r\n    if (props.messages) {\r\n      this.changeMessage(props.messages);\r\n    }\r\n\r\n    if (props.locale || props.locales) {\r\n      this.changeLanguage(props.locale!, props.locales);\r\n    }\r\n    this.$t = this.formatMessage.bind(this);\r\n    this.formatMessage = this.formatMessage.bind(this);\r\n    this.formatDate = this.formatDate.bind(this);\r\n    this.formatNumber = this.formatNumber.bind(this);\r\n\r\n    this.cache = props.cache ?? creatI18nCache();\r\n  }\r\n\r\n  get messages(): string | Messages | AllMessages {\r\n    if (this.locale in this.allMessages) {\r\n      return this.allMessages[this.locale] ?? {};\r\n    } else {\r\n      return this.allMessages ?? {};\r\n    }\r\n  }\r\n\r\n  get localeConfig(): LocaleConfig {\r\n    return this._localeConfig[this.locale] ?? {};\r\n  }\r\n\r\n  setLocaleConfig(locale: Locale, localeData: LocaleConfig) {\r\n    if (this._localeConfig[locale]) {\r\n      Object.assign(this._localeConfig, localeData);\r\n    } else {\r\n      this._localeConfig[locale] = localeData;\r\n    }\r\n  }\r\n\r\n  // 将热语言环境的本地化数据加载\r\n  loadLocaleConfig(localeOrAllData: Locale | AllLocaleConfig, localeConfig?: LocaleConfig) {\r\n    if (localeConfig) {\r\n      this.setLocaleConfig(localeOrAllData as Locale, localeConfig);\r\n    } else {\r\n      Object.keys(localeOrAllData).forEach(locale => {\r\n        this.setLocaleConfig(locale, localeOrAllData[locale]);\r\n      });\r\n    }\r\n    this.emit('change');\r\n  }\r\n\r\n  setMessage(locale: Locale, messages: Messages) {\r\n    if (this.allMessages[locale]) {\r\n      this.allMessages[locale] = Object.assign({}, this.allMessages[locale], messages);\r\n    } else {\r\n      this.allMessages[locale] = messages;\r\n    }\r\n  }\r\n\r\n  changeMessage(messages: AllMessages) {\r\n    this.allMessages = messages;\r\n    this.emit('change');\r\n  }\r\n\r\n  // 加载messages\r\n  loadMessage(localeOrMessages: Locale | AllMessages | undefined, messages?: Messages) {\r\n    if (messages) {\r\n      //当 message 为空的时候，加载单一的message信息\r\n      this.setMessage(localeOrMessages as string, messages);\r\n    } else {\r\n      // 加载多对locale-message信息\r\n      localeOrMessages &&\r\n        Object.keys(localeOrMessages!).forEach(locale => this.setMessage(locale, localeOrMessages![locale]));\r\n    }\r\n    this.emit('change');\r\n  }\r\n\r\n  // 改变当前的语言环境\r\n  changeLanguage(locale: Locale, locales?: Locales) {\r\n    this.locale = locale;\r\n    if (locales) {\r\n      this.locales = locales;\r\n    }\r\n    this.emit('change', { locale, id: '' });\r\n  }\r\n\r\n  formatMessage(\r\n    id: MessageDescriptor | string,\r\n    values: Record<string, unknown> | undefined = {},\r\n    { messages, context, formatOptions }: MessageOptions = {}\r\n  ) {\r\n    // 在多次渲染时，保证存储component不丢失\r\n    const components: { [key: string]: InulaNode } = {};\r\n    const tempValues: Record<string, unknown> = { ...values };\r\n    if (tempValues) {\r\n      Object.keys(tempValues).forEach((key, index) => {\r\n        const value = tempValues[key];\r\n        if (!isValidElement(value)) return;\r\n        // 将inula元素暂存\r\n        components[index] = value;\r\n        tempValues[key] = `<${index}/>`;\r\n      });\r\n    }\r\n    return getFormatMessage(this, id, tempValues, { messages, context, formatOptions }, components!);\r\n  }\r\n\r\n  formatDate(value: string | Date, formatOptions?: Intl.DateTimeFormatOptions): string {\r\n    const dateTimeFormatter = new DateTimeFormatter(this.locale || this.locales, formatOptions, this.cache);\r\n    return dateTimeFormatter.dateTimeFormat(value);\r\n  }\r\n\r\n  formatNumber(value: number, formatOptions?: Intl.NumberFormatOptions): string {\r\n    const numberFormatter = new NumberFormatter(this.locale || this.locales, formatOptions, this.cache);\r\n    return numberFormatter.numberFormat(value);\r\n  }\r\n}\r\n\r\nexport default I18n;\r\n\r\nexport function createI18nInstance(i18nProps: I18nProps = {}): I18n {\r\n  return new I18n(i18nProps);\r\n}\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport utils from '../utils/utils';\r\nimport Translation from './Translation';\r\nimport I18n from '../core/I18n';\r\nimport { MessageDescriptor, MessageOptions } from '../types/interfaces';\r\nimport { CompiledMessage } from '../types/types';\r\nimport creatI18nCache from './cache/cache';\r\nimport { formatElements } from '../utils/formatElements';\r\n\r\nexport function getFormatMessage(\r\n  i18n: I18n,\r\n  id: MessageDescriptor | string,\r\n  values: Record<string, unknown> | undefined = {},\r\n  options: MessageOptions = {},\r\n  components: any\r\n) {\r\n  let { messages, context } = options;\r\n  const { formatOptions } = options;\r\n  const cache = i18n.cache ?? creatI18nCache();\r\n  if (typeof id !== 'string') {\r\n    values = values || id.defaultValues;\r\n    messages = id.messages || id.defaultMessage;\r\n    context = id.context;\r\n    id = id.id;\r\n  }\r\n\r\n  // 对messages进行判空处理\r\n  const isMissingMessage = !context && !i18n.messages[id];\r\n  const isMissingContextMessage = context && !i18n.messages[context][id];\r\n  const messageUnavailable = isMissingContextMessage || isMissingMessage;\r\n\r\n  // 对错误消息进行处理\r\n  const messageError = i18n.onError;\r\n  if (messageError && messageUnavailable) {\r\n    if (typeof messageError === 'function') {\r\n      return messageError(i18n.locale, id, context);\r\n    } else {\r\n      return messageError;\r\n    }\r\n  }\r\n\r\n  let compliedMessage: CompiledMessage;\r\n  if (context) {\r\n    compliedMessage = i18n.messages[context][id] || messages || id;\r\n  } else {\r\n    compliedMessage = i18n.messages[id] || messages || id;\r\n  }\r\n\r\n  // 对解析的message进行parse解析，并输出解析后的Token\r\n  compliedMessage = typeof compliedMessage === 'string' ? utils.compile(compliedMessage) : compliedMessage;\r\n\r\n  const translation = new Translation(compliedMessage, i18n.locale, i18n.locales, i18n.localeConfig, cache);\r\n  const formatResult = translation.translate(values, formatOptions);\r\n\r\n  // 如果存在inula元素，则返回包含格式化的Inula元素的数组\r\n  return formatElements(formatResult, components);\r\n}\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { Children, Fragment } from '@cloudsop/horizon';\r\nimport { FormattedMessageProps } from '../../types/interfaces';\r\nimport { useIntl } from '../../index';\r\n\r\n/**\r\n * FormattedMessage组件,接收一个消息键作为属性，并根据当前选择的语言环境，从对应的翻译资源中获取相应的消息文本，并可选地对文本进行格式化。\r\n * @param props\r\n * @constructor\r\n */\r\nfunction FormattedMessage(props: FormattedMessageProps) {\r\n  const { formatMessage } = useIntl();\r\n  const { id, values, messages, formatOptions, context, tagName: TagName = Fragment, children, comment }: any = props;\r\n\r\n  const formatMessageOptions = {\r\n    comment,\r\n    messages,\r\n    context,\r\n    formatOptions,\r\n  };\r\n\r\n  const formattedMessage = formatMessage(id, values, formatMessageOptions);\r\n\r\n  if (typeof children === 'function') {\r\n    const childNodes = Array.isArray(formattedMessage) ? formattedMessage : [formattedMessage];\r\n    return children(childNodes);\r\n  }\r\n\r\n  if (TagName) {\r\n    return <TagName>{Children.toArray(formattedMessage)}</TagName>;\r\n  }\r\n\r\n  return <>{formattedMessage}</>;\r\n}\r\n\r\nexport default FormattedMessage;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { isMemo, ForwardRef } from '@cloudsop/horizon';\r\nimport { INULA_FORWARD_REF_STATICS, INULA_MEMO_STATICS, INULA_STATICS, NATIVE_STATICS } from '../constants';\r\n\r\nconst staticsMap = new Map();\r\nstaticsMap.set(ForwardRef, INULA_FORWARD_REF_STATICS);\r\n\r\n// 确定给定的组件是否为Memo组件，并返回相应的静态属性\r\nfunction getStatics(component) {\r\n  if (isMemo(component)) {\r\n    return INULA_MEMO_STATICS;\r\n  }\r\n\r\n  if (staticsMap.has(component['vtype'])) {\r\n    return staticsMap.get(component['vtype']) || INULA_STATICS;\r\n  }\r\n}\r\n\r\n/**\r\n * 判断给定的对象属性描述是否有效\r\n * @param sourceComponent\r\n * @param key\r\n */\r\nfunction isDescriptorValid<U>(sourceComponent: U, key: string | symbol) {\r\n  const descriptor = Object.getOwnPropertyDescriptor(sourceComponent, key);\r\n  return descriptor && (!descriptor.get || descriptor.get.prototype);\r\n}\r\n\r\n// 将一个对象的非react静态属性复制到另一个对象上，并返回马目标对象\r\nfunction copyStaticProps<T, U>(targetComponent: T, sourceComponent: U): T {\r\n  if (typeof sourceComponent === 'string') {\r\n    return targetComponent;\r\n  }\r\n  // 递归拷贝静态属性\r\n  const inheritedComponent = Object.getPrototypeOf(sourceComponent);\r\n  if (inheritedComponent && inheritedComponent !== Object.prototype) {\r\n    copyStaticProps(targetComponent, inheritedComponent);\r\n  }\r\n\r\n  // 获取源组件的属性列表\r\n  const keys: (string | symbol)[] = [\r\n    //获取指定对象自身的所有属性的名称（包括不可枚举属性）\r\n    ...Object.getOwnPropertyNames(sourceComponent),\r\n\r\n    //获取指定对象自身的所有 Symbol 类型的属性的名称（包括不可枚举属性）\r\n    ...Object.getOwnPropertySymbols(sourceComponent),\r\n  ];\r\n\r\n  // 获取目标组件和源组件的静态属性\r\n  const targetStatics = getStatics(targetComponent);\r\n  const sourceStatics = getStatics(sourceComponent);\r\n\r\n  keys.forEach(key => {\r\n    if (\r\n      !NATIVE_STATICS[key] &&\r\n      !(targetStatics && targetStatics[key]) &&\r\n      !(sourceStatics && sourceStatics[key]) &&\r\n      isDescriptorValid(sourceComponent, key)\r\n    ) {\r\n      try {\r\n        // 在一个已有的targetComponent对象上增加sourceComponent的属性\r\n        Object.defineProperty(targetComponent, key, Object.getOwnPropertyDescriptor(sourceComponent, key)!);\r\n      } catch (e) {\r\n        console.log('Error occurred while copying static props:', e);\r\n      }\r\n    }\r\n  });\r\n\r\n  return targetComponent;\r\n}\r\n\r\nexport default copyStaticProps;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { createContext, forwardRef } from '@cloudsop/horizon';\r\nimport { isVariantI18n } from '../../utils/utils';\r\nimport copyStaticProps from '../../utils/copyStaticProps';\r\nimport { InjectOptions } from '../../types/interfaces';\r\nimport I18n from '../I18n';\r\nimport VueI18n from '../../vueI18n-adapter/VueI18n';\r\n\r\n// 创建国际化组件对象上下文\r\nexport const I18nContext: any = createContext<I18n | VueI18n>(null as any);\r\nconst { Consumer, Provider } = I18nContext;\r\nexport const InjectProvider = Provider;\r\n\r\n/**\r\n * 用于实现国际化的高阶组件，将国际化功能注入到组件中，使组件能够使用国际化的本文格式化功能\r\n * @param Component\r\n * @param options\r\n */\r\nfunction injectI18n(Component, options?: InjectOptions): any {\r\n  const {\r\n    isUsingForwardRef = false, // 默认不使用\r\n    ensureContext = false,\r\n  } = options || {};\r\n\r\n  // 定义一个名为 WrappedI18n 的函数组件，接收传入组件的 props 和 forwardedRef，返回传入组件并注入 i18n\r\n  const WrappedI18n = props => (\r\n    <Consumer>\r\n      {context => {\r\n        if (ensureContext) {\r\n          isVariantI18n(context.i18nInstance);\r\n        }\r\n\r\n        const i18nProps = { intl: context.i18nInstance };\r\n        return <Component {...props} {...i18nProps} ref={isUsingForwardRef ? props.forwardedRef : null} />;\r\n      }}\r\n    </Consumer>\r\n  );\r\n\r\n  WrappedI18n.WrappedComponent = Component;\r\n\r\n  // 通过copyStatics方法，复制组件中的静态属性\r\n  return copyStaticProps(\r\n    isUsingForwardRef ? forwardRef((props, ref) => <WrappedI18n {...props} forwardedRef={ref} />) : WrappedI18n,\r\n    Component\r\n  );\r\n}\r\n\r\nexport default injectI18n;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { useCallback, useEffect, useMemo, useState } from '@cloudsop/horizon';\r\nimport { InjectProvider } from './InjectI18n';\r\nimport { createI18nInstance, I18n } from '../I18n';\r\nimport { I18nProviderProps } from '../../types/types';\r\nimport VueI18n from '../../vueI18n-adapter/VueI18n';\r\n\r\n/**\r\n * 用于为应用程序提供国际化的格式化功能，管理程序中的语言文本信息和本地化资源信息\r\n * @param props\r\n * @constructor\r\n */\r\nconst I18nProvider = (props: I18nProviderProps) => {\r\n  // 使用 useMemo 创建或获取 i18n 实例\r\n  const { locale, messages, i18n, children } = props;\r\n  const i18nInstance = useMemo(() => {\r\n    return i18n || createI18nInstance({ locale, messages });\r\n  }, [i18n, locale, messages]);\r\n\r\n  // 监听message和locale的变化\r\n  const { currentLocale, currentMessages } = useI18nSync(i18nInstance);\r\n\r\n  // 创建一个 memoized 的 context 值\r\n  const contextValue = useMemo(\r\n    () => ({\r\n      ...i18nInstance,\r\n      i18nInstance,\r\n      locale: currentLocale,\r\n      messages: currentMessages,\r\n      changeLanguage: i18nInstance.changeLanguage,\r\n      changeMessage: i18nInstance.changeMessage,\r\n    }),\r\n    [i18nInstance, currentLocale, currentMessages]\r\n  );\r\n  // 提供一个 Provider 组件\r\n  return <InjectProvider value={contextValue}>{children}</InjectProvider>;\r\n};\r\n\r\nexport const useI18nSync = (i18nInstance: VueI18n | I18n) => {\r\n  const [currentLocale, setCurrentLocale] = useState(i18nInstance.locale);\r\n  const [currentMessages, setCurrentMessages] = useState(i18nInstance.messages);\r\n\r\n  const handleChange = useCallback(() => {\r\n    if (currentLocale !== i18nInstance.locale) {\r\n      setCurrentLocale(i18nInstance.locale);\r\n    }\r\n    if (currentMessages !== i18nInstance.messages) {\r\n      setCurrentMessages(i18nInstance.messages);\r\n    }\r\n  }, [i18nInstance, currentLocale, currentMessages]);\r\n\r\n  useEffect(() => {\r\n    // 清理函数\r\n    return i18nInstance.on('change', handleChange);\r\n  }, [i18nInstance, handleChange]);\r\n\r\n  return { currentLocale, currentMessages };\r\n};\r\n\r\nexport default I18nProvider;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { useContext, useMemo } from '@cloudsop/horizon';\r\nimport utils, { createI18nProps, isVariantI18n } from '../../utils/utils';\r\nimport { I18nContext } from '../components/InjectI18n';\r\nimport I18n from '../I18n';\r\n\r\n/**\r\n *  useI18n hook，与 Inula 组件一起使用。\r\n *  使用 useI18n 钩子函数可以更方便地在函数组件中进行国际化操作\r\n */\r\nfunction useIntl(): any {\r\n  const ContextI18n = useContext<any>(I18nContext);\r\n\r\n  isVariantI18n(ContextI18n);\r\n\r\n  // 用于兼容通过createI18n对象直接创建一个I18n实例.\r\n  const i18nInstance = ContextI18n.i18nInstance ? ContextI18n.i18nInstance : ContextI18n;\r\n  utils.isVariantI18n(i18nInstance);\r\n  return useMemo(() => {\r\n    return createI18nProps(i18nInstance);\r\n  }, [i18nInstance]);\r\n}\r\n\r\nexport default useIntl;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { configProps, I18nCache } from '../types/interfaces';\r\nimport { createI18nInstance } from './I18n';\r\nimport creatI18nCache from '../format/cache/cache';\r\nimport { IntlType } from '../types/types';\r\nimport { createI18nProps } from '../utils/utils';\r\n\r\n/**\r\n * createIntl hook函数，用于创建国际化i8n实例，以进行相关的数据操作\r\n */\r\n\r\nexport const createIntl = (config: configProps, cache?: I18nCache): any => {\r\n  const { locale, defaultLocale, messages } = config;\r\n  const i18nInstance = createI18nInstance({\r\n    locale: locale || defaultLocale || 'en',\r\n    messages: messages,\r\n    cache: cache ?? creatI18nCache(),\r\n  });\r\n  return createI18nProps(i18nInstance);\r\n};\r\n\r\nexport default createIntl;\r\n","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\n// 动作常量\r\nexport const APPEND = 0;\r\nexport const PUSH = 1;\r\nexport const INC_SUB_PATH_DEPTH = 2;\r\nexport const PUSH_SUB_PATH = 3;\r\n\r\n// 状态常量\r\nexport const BEFORE_PATH = 0;\r\nexport const IN_PATH = 1;\r\nexport const BEFORE_IDENT = 2;\r\nexport const IN_IDENT = 3;\r\nexport const IN_SUB_PATH = 4;\r\nexport const IN_SINGLE_QUOTE = 5;\r\nexport const IN_DOUBLE_QUOTE = 6;\r\nexport const AFTER_PATH = 7;\r\nexport const ERROR = 8;\r\n\r\nexport const pathStateMachine: any = {\r\n  [BEFORE_PATH]: {\r\n    ws: [BEFORE_PATH],\r\n    ident: [IN_IDENT, APPEND],\r\n    '[': [IN_SUB_PATH],\r\n    eof: [AFTER_PATH],\r\n  },\r\n  [IN_PATH]: {\r\n    ws: [IN_PATH],\r\n    '.': [BEFORE_IDENT],\r\n    '[': [IN_SUB_PATH],\r\n    eof: [AFTER_PATH],\r\n  },\r\n  [BEFORE_IDENT]: {\r\n    ws: [BEFORE_IDENT],\r\n    ident: [IN_IDENT, APPEND],\r\n    '0': [IN_IDENT, APPEND],\r\n    number: [IN_IDENT, APPEND],\r\n  },\r\n  [IN_IDENT]: {\r\n    ident: [IN_IDENT, APPEND],\r\n    '0': [IN_IDENT, APPEND],\r\n    number: [IN_IDENT, APPEND],\r\n    ws: [IN_PATH, PUSH],\r\n    '.': [BEFORE_IDENT, PUSH],\r\n    '[': [IN_SUB_PATH, PUSH],\r\n    eof: [AFTER_PATH, PUSH],\r\n  },\r\n  [IN_SUB_PATH]: {\r\n    \"'\": [IN_SINGLE_QUOTE, APPEND],\r\n    '\"': [IN_DOUBLE_QUOTE, APPEND],\r\n    '[': [IN_SUB_PATH, INC_SUB_PATH_DEPTH],\r\n    ']': [IN_PATH, PUSH_SUB_PATH],\r\n    eof: ERROR,\r\n    else: [IN_SUB_PATH, APPEND],\r\n  },\r\n  [IN_SINGLE_QUOTE]: {\r\n    \"'\": [IN_SUB_PATH, APPEND],\r\n    eof: ERROR,\r\n    else: [IN_SINGLE_QUOTE, APPEND],\r\n  },\r\n  [IN_DOUBLE_QUOTE]: {\r\n    '\"': [IN_SUB_PATH, APPEND],\r\n    eof: ERROR,\r\n    else: [IN_DOUBLE_QUOTE, APPEND],\r\n  },\r\n};\r\n\r\nexport const numberFormatKeys = [\r\n  'compactDisplay',\r\n  'currency',\r\n  'currencyDisplay',\r\n  'currencySign',\r\n  'localeMatcher',\r\n  'notation',\r\n  'numberingSystem',\r\n  'signDisplay',\r\n  'style',\r\n  'unit',\r\n  'unitDisplay',\r\n  'useGrouping',\r\n  'minimumIntegerDigits',\r\n  'minimumFractionDigits',\r\n  'maximumFractionDigits',\r\n  'minimumSignificantDigits',\r\n  'maximumSignificantDigits',\r\n];\r\n\r\nexport const dateTimeFormatKeys = [\r\n  'dateStyle',\r\n  'timeStyle',\r\n  'calendar',\r\n  'localeMatcher',\r\n  'hour12',\r\n  'hourCycle',\r\n  'timeZone',\r\n  'formatMatcher',\r\n  'weekday',\r\n  'era',\r\n  'year',\r\n  'month',\r\n  'day',\r\n  'hour',\r\n  'minute',\r\n  'second',\r\n  'timeZoneName',\r\n];\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { AllMessages, Locale, Messages } from '../../intl/types/types';\r\nimport I18nPath from './parseMsgParamUtils';\r\n\r\nexport function includes(arr: Array<any>, item: any): boolean {\r\n  return !!~arr.indexOf(item);\r\n}\r\n\r\nexport function dealNumberOrTimesArgs(args: any[], numericOrTimeConstansArr: string[]) {\r\n  let locale: Locale = 'en';\r\n  let key: string;\r\n  let options: object = {};\r\n\r\n  if (args.length === 1) {\r\n    if (typeof args[0] == 'string') {\r\n      key = args[0];\r\n    } else if (typeof args[0] == 'object') {\r\n      if (args[0].locale) {\r\n        locale = args[0].locale;\r\n      }\r\n      if (args[0].key) {\r\n        key = args[0].key;\r\n      }\r\n      options = Object.keys(args[0]).reduce((acc, key) => {\r\n        if (includes(numericOrTimeConstansArr, key)) {\r\n          return Object.assign({}, acc, { [key]: args[0][key] });\r\n        }\r\n        return acc;\r\n      }, {});\r\n    }\r\n  } else if (args.length === 2) {\r\n    if (typeof args[0] == 'string') {\r\n      key = args[0];\r\n    }\r\n    if (typeof args[1] == 'string') {\r\n      locale = args[1];\r\n    }\r\n  }\r\n\r\n  const dealLocale = locale.substring(0, 2);\r\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n  // @ts-expect-error\r\n  return { dealLocale, key, options };\r\n}\r\n\r\nexport function isObject(obj: string | Messages | AllMessages): boolean {\r\n  return obj !== null && typeof obj === 'object';\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nconst toString: Function = Object.prototype.toString;\r\nconst OBJECT_STRING: string = '[object Object]';\r\n\r\nexport function isPlainObject(obj: any): boolean {\r\n  return toString.call(obj) === OBJECT_STRING;\r\n}\r\n\r\nexport function isString(val: any): boolean {\r\n  return typeof val === 'string';\r\n}\r\n\r\nexport const isArray = Array.isArray;\r\n\r\nexport function isNull(val: any): boolean {\r\n  return val === null || val === undefined;\r\n}\r\n\r\nexport function isFunction(val: any): boolean {\r\n  return typeof val === 'function';\r\n}\r\n\r\nexport function dealMsgArgs(pathRet, message, key) {\r\n  if (isArray(pathRet) || isPlainObject(pathRet)) {\r\n    return pathRet;\r\n  }\r\n\r\n  let ret: any;\r\n  if (isNull(pathRet)) {\r\n    /* istanbul ignore else */\r\n    if (isPlainObject(message)) {\r\n      ret = message[key];\r\n      if (!(isString(ret) || isFunction(ret))) {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          console.warn(`Value of key '${key}' is not a string or function !`);\r\n        }\r\n        return null;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  } else {\r\n    /* istanbul ignore else */\r\n    if (isString(pathRet) || isFunction(pathRet)) {\r\n      ret = pathRet;\r\n    } else {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        console.warn(`Value of key '${key}' is not a string or function!`);\r\n      }\r\n      return null;\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { AllMessages, Messages } from '../../intl/types/types';\r\nimport { isNull, isObject } from './utils';\r\nimport {\r\n  AFTER_PATH,\r\n  APPEND,\r\n  BEFORE_PATH,\r\n  ERROR,\r\n  IN_DOUBLE_QUOTE,\r\n  IN_SINGLE_QUOTE,\r\n  IN_SUB_PATH,\r\n  INC_SUB_PATH_DEPTH,\r\n  pathStateMachine,\r\n  PUSH,\r\n  PUSH_SUB_PATH,\r\n} from '../constants';\r\nimport { PathStateMachine, PathValue } from '../type/types';\r\n\r\nexport default class I18nPath {\r\n  // 使用严格类型的缓存对象\r\n  private _cache: Record<string, string[]> = Object.create(null);\r\n\r\n  /**\r\n   * External parse that check for a cache hit first\r\n   */\r\n  parsePath(path: string): string[] {\r\n    let hit: string[] = this._cache[path];\r\n    if (!hit) {\r\n      hit = parse(path);\r\n      if (hit) {\r\n        this._cache[path] = hit;\r\n      }\r\n    }\r\n    return hit || [];\r\n  }\r\n\r\n  getPathValue(obj: string | Messages | AllMessages, id: string): PathValue {\r\n    // 如果传入的不是对象，则返回null\r\n    if (!isObject(obj)) {\r\n      return null;\r\n    }\r\n    // 解析路径\r\n    const paths: string[] = this.parsePath(id);\r\n\r\n    if (paths.length === 0) {\r\n      return null;\r\n    } else {\r\n      let last: any = obj;\r\n      for (const path of paths) {\r\n        const value: any = last[path];\r\n        // 如果路径对应的值为undefined或null，则返回null\r\n        if (value === undefined || value === null) {\r\n          return null;\r\n        }\r\n        last = value;\r\n      }\r\n      return last;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Parse a string path into an array of segments\r\n */\r\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n// @ts-expect-error\r\nfunction parse(path: string): string[] {\r\n  const keys: string[] = [];\r\n  let index: number = -1;\r\n  let mode: number = BEFORE_PATH;\r\n  let subPathDepth: number = 0;\r\n  let c: string | undefined;\r\n  let key: any;\r\n  let newChar: string;\r\n  let type: string;\r\n  let transition: any;\r\n  let action: () => void | boolean;\r\n  let typeMap: PathStateMachine;\r\n  const actions: Array<() => void | boolean> = [];\r\n\r\n  actions[PUSH] = function () {\r\n    if (key !== undefined) {\r\n      keys.push(key);\r\n      key = undefined;\r\n    }\r\n  };\r\n\r\n  actions[APPEND] = function () {\r\n    if (key === undefined) {\r\n      key = newChar;\r\n    } else {\r\n      key += newChar;\r\n    }\r\n  };\r\n\r\n  actions[INC_SUB_PATH_DEPTH] = function () {\r\n    actions[APPEND]();\r\n    subPathDepth++;\r\n  };\r\n\r\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n  // @ts-expect-error\r\n  actions[PUSH_SUB_PATH] = function () {\r\n    if (subPathDepth > 0) {\r\n      subPathDepth--;\r\n      mode = IN_SUB_PATH;\r\n      actions[APPEND]();\r\n    } else {\r\n      subPathDepth = 0;\r\n      if (key === undefined) {\r\n        return false;\r\n      }\r\n      key = formatSubPath(key);\r\n      if (key === false) {\r\n        return false;\r\n      } else {\r\n        actions[PUSH]();\r\n      }\r\n    }\r\n  };\r\n\r\n  function maybeUnescapeQuote(): boolean | void {\r\n    const nextChar: string = path[index + 1];\r\n    if ((mode === IN_SINGLE_QUOTE && nextChar === \"'\") || (mode === IN_DOUBLE_QUOTE && nextChar === '\"')) {\r\n      index++;\r\n      newChar = '\\\\' + nextChar;\r\n      actions[APPEND]();\r\n      return true;\r\n    }\r\n  }\r\n\r\n  while (mode !== null) {\r\n    index++;\r\n    c = path[index];\r\n\r\n    if (c === '\\\\' && maybeUnescapeQuote()) {\r\n      continue;\r\n    }\r\n\r\n    type = getPathCharType(c);\r\n\r\n    //  根据不同的字符串，进行匹配对应的状态模式\r\n    typeMap = pathStateMachine[mode];\r\n    transition = typeMap[type] || typeMap['else'] || ERROR;\r\n\r\n    if (transition === ERROR) {\r\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n      // @ts-expect-error\r\n      return; // parse error\r\n    }\r\n\r\n    mode = transition[0];\r\n    action = actions[transition[1]];\r\n    if (action) {\r\n      newChar = transition[2];\r\n      newChar = newChar === undefined ? c : newChar;\r\n      if (action() === false) {\r\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n        // @ts-expect-error\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (mode === AFTER_PATH) {\r\n      return keys;\r\n    }\r\n  }\r\n}\r\n\r\n// 格式化子路径\r\nfunction formatSubPath(path: string): boolean | string {\r\n  const trimmed: string = path.trim();\r\n  if (path.charAt(0) === '0' && isNaN(Number(path))) {\r\n    return false;\r\n  }\r\n\r\n  return isLiteral(trimmed) ? stripQuotes(trimmed) : '*' + trimmed;\r\n}\r\n\r\nconst literalValueRE: RegExp = /^\\s?(?:true|false|-?[\\d.]+|'[^']*'|\"[^\"]*\")\\s?$/;\r\n\r\nfunction isLiteral(exp: string): boolean {\r\n  return literalValueRE.test(exp);\r\n}\r\n\r\n/**\r\n * 剥离引号\r\n */\r\nfunction stripQuotes(str: string): string | boolean {\r\n  const a: number = str.charCodeAt(0);\r\n  const b: number = str.charCodeAt(str.length - 1);\r\n  return a === b && (a === 0x22 || a === 0x27) ? str.slice(1, -1) : str;\r\n}\r\n\r\nfunction getPathCharType(ch: string): string {\r\n  if (ch === undefined || ch === null) {\r\n    return 'eof';\r\n  }\r\n\r\n  const code: number = ch.charCodeAt(0);\r\n\r\n  switch (code) {\r\n    case 0x5b: // [\r\n    case 0x5d: // ]\r\n    case 0x2e: // .\r\n    case 0x22: // \"\r\n    case 0x27: // '\r\n      return ch;\r\n\r\n    case 0x5f: // _\r\n    case 0x24: // $\r\n    case 0x2d: // -\r\n      return 'ident';\r\n\r\n    case 0x09: // Tab\r\n    case 0x0a: // Newline\r\n    case 0x0d: // Return\r\n    case 0xa0: // No-break space\r\n    case 0xfeff: // Byte Order Mark\r\n    case 0x2028: // Line Separator\r\n    case 0x2029: // Paragraph Separator\r\n      return 'ws';\r\n  }\r\n\r\n  return 'ident';\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { I18nOptions } from './type/types';\r\nimport { dateTimeFormatKeys, numberFormatKeys } from './constants';\r\nimport { dealMsgArgs, dealNumberOrTimesArgs } from './utils/utils';\r\nimport { I18n } from '../intl';\r\nimport { AllMessages, DatePool, Locale, Messages } from '../intl/types/types';\r\nimport I18nPath from './utils/parseMsgParamUtils';\r\n\r\nclass VueI18n extends I18n {\r\n  public locale: Locale;\r\n  public localMessages: Map<string, AllMessages>;\r\n  public dateTimeFormats?: NonNullable<unknown>;\r\n  public datetimeFormats?: NonNullable<unknown>;\r\n  public numberFormats?: NonNullable<unknown>;\r\n  public vueMessages: string | AllMessages;\r\n  public path?: I18nPath;\r\n  public listeners?: any;\r\n\r\n  constructor(options: I18nOptions) {\r\n    super(options);\r\n    this.locale = options.locale || 'en';\r\n    this.localMessages = new Map();\r\n    this.vueMessages = options.messages || {};\r\n    this.numberFormats = options.numberFormats || {};\r\n    this.dateTimeFormats = options.dateTimeFormats || {};\r\n    this.datetimeFormats = options.datetimeFormats || {};\r\n    this.path = new I18nPath();\r\n    this.listeners = new Set();\r\n    this.loadMessage(this.vueMessages);\r\n  }\r\n\r\n  // 重写 messages getter\r\n  get messages(): string | Messages | AllMessages {\r\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n    // @ts-expect-error\r\n    if (this.locale in this.vueMessages) {\r\n      return this.vueMessages[this.locale] ?? {};\r\n    } else {\r\n      return this.vueMessages ?? {};\r\n    }\r\n  }\r\n\r\n  // 重写 loadMessage 方法以支持加载局部消息\r\n  loadMessage = (localeOrMessages: Locale | AllMessages | undefined, messages?: Messages) => {\r\n    super.loadMessage(localeOrMessages, messages);\r\n    this.emit('change');\r\n  };\r\n\r\n  changeLanguage = (locale: Locale) => {\r\n    this.locale = locale;\r\n    super.changeLanguage(locale);\r\n  };\r\n\r\n  changeMessage = (messages: AllMessages) => {\r\n    super.changeMessage(messages);\r\n  };\r\n\r\n  $t = (msgKey: string, values?: any) => {\r\n    const { messages } = this;\r\n    const pathRet = this.path!.getPathValue(messages, msgKey);\r\n    const msgId = pathRet !== null ? dealMsgArgs(pathRet, messages, msgKey) : msgKey;\r\n    return super.formatMessage(msgId, values);\r\n  };\r\n\r\n  $n = (value: number, ...args: any) => {\r\n    const { dealLocale, key, options } = dealNumberOrTimesArgs(args, numberFormatKeys);\r\n    // 如果自己传入新的语言，则更新\r\n    super.changeLanguage(dealLocale ? dealLocale : 'en');\r\n\r\n    if (key) {\r\n      const formatOptions = this.numberFormats![dealLocale][key]!;\r\n      return super.formatNumber(value, formatOptions);\r\n    }\r\n\r\n    return super.formatNumber(value, options);\r\n  };\r\n\r\n  $d = (value: DatePool, ...args: any) => {\r\n    const { dealLocale, key, options } = dealNumberOrTimesArgs(args, dateTimeFormatKeys);\r\n    super.changeLanguage(dealLocale ? dealLocale : 'en');\r\n\r\n    if (key) {\r\n      const formatOptions = this.dateTimeFormats![dealLocale][key];\r\n      return super.formatDate(value, formatOptions);\r\n    }\r\n    return super.formatDate(value, options);\r\n  };\r\n}\r\n\r\nexport function createVueI18nInstance(i18nProps: I18nOptions = {}): VueI18n {\r\n  return new VueI18n(i18nProps);\r\n}\r\nexport default VueI18n;\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { UseI18nOptions } from '../type/types';\r\nimport VueI18n from '../VueI18n';\r\nimport { useContext, useEffect } from '@cloudsop/horizon';\r\nimport { I18nContext } from '../../intl/core/components/InjectI18n';\r\n\r\nexport const useI18n = (options?: UseI18nOptions): any => {\r\n  const contextI18n = useContext<VueI18n | null>(I18nContext);\r\n\r\n  if (contextI18n && !options) {\r\n    return i18nInstance(contextI18n);\r\n  }\r\n\r\n  if (!options) {\r\n    throw new Error('I18nProvider is not used and options are not provided');\r\n  }\r\n\r\n  if (options.messages) {\r\n    Object.entries(options.messages).forEach(([locale, messages]) => {\r\n      contextI18n?.i18nInstance?.loadMessage({\r\n        [locale]: {\r\n          ...contextI18n.messages[locale],\r\n          ...messages,\r\n        },\r\n      });\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (options?.locale) {\r\n      contextI18n?.changeLanguage(options.locale);\r\n    }\r\n    if (options?.messages) {\r\n      contextI18n?.loadMessage(options.messages);\r\n    }\r\n  }, [options?.locale, options?.messages]);\r\n\r\n  return i18nInstance(contextI18n);\r\n};\r\n\r\nfunction i18nInstance(i18nContext: any): any {\r\n  const i18nInstance = i18nContext.i18nInstance ? i18nContext.i18nInstance : i18nContext;\r\n  return {\r\n    ...i18nInstance,\r\n    on: i18nInstance.on.bind(i18nInstance),\r\n    n: i18nInstance.$n.bind(i18nInstance),\r\n    d: i18nInstance.$d.bind(i18nInstance),\r\n    t: i18nInstance.$t.bind(i18nInstance),\r\n  };\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport DateTimeFormatter from './format/fomatters/DateTimeFormatter';\r\nimport NumberFormatter from './format/fomatters/NumberFormatter';\r\nimport I18n from './core/I18n';\r\nimport createI18nCache from './format/cache/cache';\r\nimport FormattedMessage from './core/components/FormattedMessage';\r\nimport I18nProvider from './core/components/I18nProvider';\r\nimport injectIntl, { I18nContext, InjectProvider } from './core/components/InjectI18n';\r\nimport useIntl from './core/hook/useIntl';\r\nimport createIntl from './core/createIntl';\r\nimport { MessageDescriptor } from './types/interfaces';\r\nimport VueI18n, { createI18n, useI18n, useLocalMessage } from '../vueI18n';\r\n\r\n// 函数API\r\nexport {\r\n  I18n,\r\n  createI18nCache as createIntlCache,\r\n  createIntl,\r\n  DateTimeFormatter,\r\n  NumberFormatter,\r\n  useIntl,\r\n  I18nProvider,\r\n  createI18n,\r\n  useI18n,\r\n  useLocalMessage,\r\n};\r\n\r\n// 组件\r\nexport {\r\n  FormattedMessage,\r\n  I18nContext as IntlContext,\r\n  I18nProvider as IntlProvider,\r\n  injectIntl as injectIntl,\r\n  InjectProvider as RawIntlProvider,\r\n};\r\n\r\nexport default {\r\n  I18n,\r\n  createIntlCache: createI18nCache,\r\n  createIntl,\r\n  DateTimeFormatter,\r\n  NumberFormatter,\r\n  useIntl,\r\n  FormattedMessage,\r\n  I18nContext,\r\n  IntlProvider: I18nProvider,\r\n  injectIntl: injectIntl,\r\n  RawIntlProvider: InjectProvider,\r\n  VueI18n,\r\n};\r\n\r\n// 用于定义文本\r\nexport function defineMessages<K extends keyof any, T = MessageDescriptor, U = Record<K, T>>(msgs: U): U {\r\n  return msgs;\r\n}\r\n\r\nexport function defineMessage<T>(msg: T): T {\r\n  return msg;\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n// type for $api\r\nimport VueI18n from './VueI18n';\r\nimport { createI18n } from './hooks/createI18n';\r\nimport { useI18n } from './hooks/useI18n';\r\nimport { useLocalMessage } from './hooks/useLocalMessage';\r\n\r\ndeclare global {\r\n  interface Window {\r\n    $i18n: VueI18n;\r\n  }\r\n}\r\n\r\nexport default {\r\n  VueI18n,\r\n};\r\n\r\nexport { createI18n, useI18n, useLocalMessage };\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport I18nProvider from '../../intl/core/components/I18nProvider';\r\nimport { I18nOptions, App } from '../type/types';\r\nimport { createVueI18nInstance } from '../VueI18n';\r\nimport { createElement } from '@cloudsop/horizon';\r\n\r\nexport function createI18n(options: I18nOptions): any {\r\n  const { locale, messages } = options;\r\n  const i18nInstance = createVueI18nInstance({\r\n    locale: locale || 'en',\r\n    messages: messages,\r\n  });\r\n  return {\r\n    global: {\r\n      ...i18nInstance,\r\n\r\n      // 这里需要手动把on属性带上，因为on来自i18nInstance的原型链上，...展开会丢失\r\n      on: i18nInstance.on.bind(i18nInstance),\r\n      t: i18nInstance.$t.bind(i18nInstance),\r\n      messages: i18nInstance.allMessages,\r\n    },\r\n\r\n    // 用于注册到全局国际化插件\r\n    install: (app: App) => {\r\n      // 将 vueIi18n 实例提供给I18nProvider\r\n      app.rootComponent = createElement(I18nProvider, { i18n: i18nInstance }, app.rootComponent);\r\n    },\r\n  };\r\n}\r\n","import { useMemo, useRef } from '@cloudsop/horizon';\r\nimport { AllMessages } from '../../intl/types/types';\r\nimport { useI18n } from './useI18n';\r\nimport { dealMsgArgs } from '../utils/utils';\r\n\r\nexport const useLocalMessage = (messages: AllMessages): any => {\r\n  const instance = useI18n();\r\n  const { t, formatMessage, path, on, locale } = instance;\r\n  const currentLocale = useRef(locale);\r\n  useMemo(() => {\r\n    on('change', ({ locale }) => {\r\n      currentLocale.current = locale;\r\n    });\r\n  }, []);\r\n  const $t = (msgKey: string, values?: any) => {\r\n    const currentMessages = messages[currentLocale.current] || {};\r\n    const pathRet = path.getPathValue(currentMessages, msgKey);\r\n    if (pathRet || currentMessages[msgKey]) {\r\n      const msgId = pathRet !== null ? dealMsgArgs(pathRet, currentMessages, msgKey) : currentMessages[msgKey];\r\n      return formatMessage(msgId, values);\r\n    }\r\n    return t(msgKey, values);\r\n  };\r\n  return { $t, t: $t };\r\n};\r\n"],"names":["_classCallCheck","instance","Constructor","TypeError","_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","r","e","toPrimitive","call","String","Number","_defineProperties","target","props","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","creatI18nCache","dateTimeFormat","numberFormat","plurals","select","octothorpe","_extends","assign","bind","arguments","source","hasOwnProperty","apply","this","type","checkObject","input","checkRegExp","toString","slice","toLowerCase","getType","transferReg","str","replace","getRulesByObject","object","keys","getOwnPropertyNames","result","_loop","thing","rules","concat","j","push","include","match","forEach","rule","getRuleOptions","getRulesByArray","array","obj","Error","options","defaultType","lineBreaks","error","fallback","pop","next","value","shouldThrow","Array","isArray","sort","str1","str2","ruleUtils","checkSticky","_RegExp","RegExp","sticky","getRegGroups","_regExp$exec","exec","getRegCapture","getRegUnion","regexps","map","join","getReg","ignoreCase","global","multiline","getRules","spec","Lexer","unionReg","startState","buffer","stack","index","line","col","queuedText","state","groups","regexp","fast","queuedGroup","reset","data","setState","info","groupCount","undefined","token","getToken","fastGroup","charCodeAt","charAt","lastIndex","getMatch","group","getGroup","text","offset","lineNum","last","matchNL","tokenToString","size","popState","pushState","_this","done","mappingRule","body","doubleapos","quoted","src","argument","substring","trim","end","content","arg","split","case","indexOf","INULA_STATICS","childContextTypes","contextType","contextTypes","defaultProps","displayName","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","mixins","propTypes","NATIVE_STATICS","name","caller","callee","arity","INULA_FORWARD_REF_STATICS","vtype","render","$$typeof","INULA_MEMO_STATICS","compare","DEFAULT_PLURAL_KEYS","voidElementTags","defaultErrorRule","checkStateGroup","mappingRules","processFast","shift","checkUnicode","unicodeFlag","unicode","checkStateOptions","hasStates","isOptionsErrorOrFallback","errorRule","handleErrorRule","lexer","ruleMap","reduce","included","_loop2","_j","splice","newRules","newRule","includes","mappingAllRules","enableFast","parts","isExistsFallback","pat","test","fallbackRule","flags","suffix","parseRules","fastKey","parseMappingRule","Parser","message","cardinalKeys","ordinalKeys","values","_ref","isPlural","context","cases","ctx","_step","_iterator","_createForOfIteratorHelper","s","n","isSelectKeyValid","tokens","parse","getContext","err","f","nextToken","checkSelectType","param","processSelect","isRoot","_step2","_iterator2","parseToken","Token","TokenType","getTokenAST","_param","filter","Boolean","parseInt","tempFormatProps","item","mergedProps","processToken","isVariantI18n","i18n","utils","generateKey","locales","valueKey","JSON","stringify","compile","console","createI18nProps","intl","locale","messages","defaultLocale","timeZone","onError","formatMessage","formatDate","DateTimeFormat","formatNumber","NumberFormat","$t","DateTimeFormatter","formatOptions","cache","_this$cache","formatter","Intl","Date","cacheKey","format","NumberFormatter","formatOption","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","assertThisInitialized","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","_inherits","subClass","superClass","create","EventDispatcher","_events","Map","event","listener","has","set","Set","get","add","removeListener","listeners","delete","_len","args","_key","_objectWithoutPropertiesLoose","excluded","sourceKeys","PluralFormatter","msg","valueStr","SelectFormatter","other","Translation","compiledMessage","localeConfig","textFormatter","formatters","getStyleOption","option","plural","_ref$offset","_excluded","pluralFormatter","replaceSymbol","selectordinal","_ref2","_ref2$offset","_excluded2","formatRules","getRule","generateFormatters","createTextFormatter","_this2","replaceValueFormat","tagReg","nlReg","formatElements","elements","elementKeyID","count","prefix","getElementIndex","arrays","before","getElements","_step$value","children","after","element","errorMessage","createElement","Fragment","formattedChildren","clonedElement","cloneElement","_arrays$splice","pairedIndex","unpairedIndex","textAfter","currentElement","remainingElements","I18n","_props$cache","allMessages","_localeConfig","loadMessage","loadLocaleConfig","changeMessage","changeLanguage","_this$allMessages$thi","_this$allMessages","_this$_localeConfig$t","localeData","localeOrAllData","setLocaleConfig","emit","localeOrMessages","_this3","setMessage","id","components","tempValues","isValidElement","_i18n$cache","defaultValues","defaultMessage","compliedMessage","isMissingMessage","messageUnavailable","messageError","translate","getFormatMessage","createI18nInstance","FormattedMessage","useIntl","_props$tagName","tagName","TagName","formattedMessage","comment","_jsx","Children","toArray","_Fragment","staticsMap","getStatics","component","isMemo","copyStaticProps","targetComponent","sourceComponent","inheritedComponent","getOwnPropertySymbols","targetStatics","sourceStatics","getOwnPropertyDescriptor","isDescriptorValid","log","ForwardRef","I18nContext","createContext","Consumer","InjectProvider","Provider","injectI18n","Component","_ref$isUsingForwardRe","isUsingForwardRef","_ref$ensureContext","ensureContext","WrappedI18n","i18nInstance","i18nProps","ref","forwardedRef","WrappedComponent","forwardRef","jsx","I18nProvider","useMemo","_useI18nSync","useI18nSync","currentLocale","currentMessages","contextValue","_useState","useState","setCurrentLocale","_useState2","setCurrentMessages","handleChange","useCallback","useEffect","on","ContextI18n","useContext","createIntl","config","_get","Reflect","property","receiver","base","superPropBase","desc","_defineProperty","pathStateMachine","ws","ident","eof","number","else","numberFormatKeys","dateTimeFormatKeys","dealNumberOrTimesArgs","numericOrTimeConstansArr","acc","dealLocale","isPlainObject","isString","val","isFunction","dealMsgArgs","pathRet","ret","process","env","NODE_ENV","warn","I18nPath","_cache","path","hit","c","newChar","transition","action","typeMap","mode","subPathDepth","actions","maybeUnescapeQuote","nextChar","trimmed","isNaN","exp","literalValueRE","a","b","formatSubPath","getPathCharType","isObject","paths","parsePath","ch","VueI18n","localMessages","dateTimeFormats","datetimeFormats","numberFormats","vueMessages","_superPropGet","msgKey","getPathValue","msgId","$n","_dealNumberOrTimesArg","$d","_len2","_key2","_dealNumberOrTimesArg2","_this$vueMessages$thi","_this$vueMessages","useI18n","contextI18n","entries","_contextI18n$i18nInst","i18nContext","d","createIntlCache","createI18nCache","IntlProvider","injectIntl","RawIntlProvider","createVueI18nInstance","install","app","rootComponent","msgs","useRef","current"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,6,17,18,19,20,21,23,37,38,39]}