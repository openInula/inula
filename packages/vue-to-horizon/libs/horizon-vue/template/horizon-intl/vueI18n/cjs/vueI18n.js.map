{"version":3,"file":"vueI18n.js","sources":["../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/createClass.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/inherits.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/get.js","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../src/vueI18n/constants/index.ts","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/extends.js","../../../src/vueI18n/utils/utils.ts","../../../src/intl/format/cache/cache.ts","../../../src/intl/utils/parseRuleUtils.ts","../../../src/intl/parser/Lexer.ts","../../../src/intl/parser/mappingRule.ts","../../../src/intl/constants/index.ts","../../../src/intl/parser/parseMappingRule.ts","../../../src/intl/parser/parser.ts","../../../src/intl/utils/getTokenAST.ts","../../../src/intl/utils/utils.ts","../../../src/intl/format/fomatters/DateTimeFormatter.ts","../../../src/intl/format/fomatters/NumberFormatter.ts","../../../src/intl/utils/eventListener.ts","../../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../../src/intl/format/fomatters/PluralFormatter.ts","../../../src/intl/format/fomatters/SelectFormatter.ts","../../../src/intl/format/generateFormatters.ts","../../../src/intl/format/Translation.ts","../../../src/intl/utils/formatElements.ts","../../../src/intl/format/getFormatMessage.ts","../../../src/intl/core/I18n.ts","../../../src/intl/utils/copyStaticProps.ts","../../../src/intl/core/components/InjectI18n.tsx","../../../src/intl/core/components/I18nProvider.tsx","../../../src/vueI18n/utils/parseMsgParamUtils.ts","../../../src/vueI18n/VueI18n.ts","../../../src/vueI18n/hooks/createI18n.ts","../../../src/vueI18n/hooks/useI18n.ts","../../../src/vueI18n/hooks/useLocalMessage.ts","../../../src/vueI18n/index.ts"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\n// 动作常量\r\nexport const APPEND = 0;\r\nexport const PUSH = 1;\r\nexport const INC_SUB_PATH_DEPTH = 2;\r\nexport const PUSH_SUB_PATH = 3;\r\n\r\n// 状态常量\r\nexport const BEFORE_PATH = 0;\r\nexport const IN_PATH = 1;\r\nexport const BEFORE_IDENT = 2;\r\nexport const IN_IDENT = 3;\r\nexport const IN_SUB_PATH = 4;\r\nexport const IN_SINGLE_QUOTE = 5;\r\nexport const IN_DOUBLE_QUOTE = 6;\r\nexport const AFTER_PATH = 7;\r\nexport const ERROR = 8;\r\n\r\nexport const pathStateMachine: any = {\r\n  [BEFORE_PATH]: {\r\n    ws: [BEFORE_PATH],\r\n    ident: [IN_IDENT, APPEND],\r\n    '[': [IN_SUB_PATH],\r\n    eof: [AFTER_PATH],\r\n  },\r\n  [IN_PATH]: {\r\n    ws: [IN_PATH],\r\n    '.': [BEFORE_IDENT],\r\n    '[': [IN_SUB_PATH],\r\n    eof: [AFTER_PATH],\r\n  },\r\n  [BEFORE_IDENT]: {\r\n    ws: [BEFORE_IDENT],\r\n    ident: [IN_IDENT, APPEND],\r\n    '0': [IN_IDENT, APPEND],\r\n    number: [IN_IDENT, APPEND],\r\n  },\r\n  [IN_IDENT]: {\r\n    ident: [IN_IDENT, APPEND],\r\n    '0': [IN_IDENT, APPEND],\r\n    number: [IN_IDENT, APPEND],\r\n    ws: [IN_PATH, PUSH],\r\n    '.': [BEFORE_IDENT, PUSH],\r\n    '[': [IN_SUB_PATH, PUSH],\r\n    eof: [AFTER_PATH, PUSH],\r\n  },\r\n  [IN_SUB_PATH]: {\r\n    \"'\": [IN_SINGLE_QUOTE, APPEND],\r\n    '\"': [IN_DOUBLE_QUOTE, APPEND],\r\n    '[': [IN_SUB_PATH, INC_SUB_PATH_DEPTH],\r\n    ']': [IN_PATH, PUSH_SUB_PATH],\r\n    eof: ERROR,\r\n    else: [IN_SUB_PATH, APPEND],\r\n  },\r\n  [IN_SINGLE_QUOTE]: {\r\n    \"'\": [IN_SUB_PATH, APPEND],\r\n    eof: ERROR,\r\n    else: [IN_SINGLE_QUOTE, APPEND],\r\n  },\r\n  [IN_DOUBLE_QUOTE]: {\r\n    '\"': [IN_SUB_PATH, APPEND],\r\n    eof: ERROR,\r\n    else: [IN_DOUBLE_QUOTE, APPEND],\r\n  },\r\n};\r\n\r\nexport const numberFormatKeys = [\r\n  'compactDisplay',\r\n  'currency',\r\n  'currencyDisplay',\r\n  'currencySign',\r\n  'localeMatcher',\r\n  'notation',\r\n  'numberingSystem',\r\n  'signDisplay',\r\n  'style',\r\n  'unit',\r\n  'unitDisplay',\r\n  'useGrouping',\r\n  'minimumIntegerDigits',\r\n  'minimumFractionDigits',\r\n  'maximumFractionDigits',\r\n  'minimumSignificantDigits',\r\n  'maximumSignificantDigits',\r\n];\r\n\r\nexport const dateTimeFormatKeys = [\r\n  'dateStyle',\r\n  'timeStyle',\r\n  'calendar',\r\n  'localeMatcher',\r\n  'hour12',\r\n  'hourCycle',\r\n  'timeZone',\r\n  'formatMatcher',\r\n  'weekday',\r\n  'era',\r\n  'year',\r\n  'month',\r\n  'day',\r\n  'hour',\r\n  'minute',\r\n  'second',\r\n  'timeZoneName',\r\n];\r\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { AllMessages, Locale, Messages } from '../../intl/types/types';\r\nimport I18nPath from './parseMsgParamUtils';\r\n\r\nexport function includes(arr: Array<any>, item: any): boolean {\r\n  return !!~arr.indexOf(item);\r\n}\r\n\r\nexport function dealNumberOrTimesArgs(args: any[], numericOrTimeConstansArr: string[]) {\r\n  let locale: Locale = 'en';\r\n  let key: string;\r\n  let options: object = {};\r\n\r\n  if (args.length === 1) {\r\n    if (typeof args[0] == 'string') {\r\n      key = args[0];\r\n    } else if (typeof args[0] == 'object') {\r\n      if (args[0].locale) {\r\n        locale = args[0].locale;\r\n      }\r\n      if (args[0].key) {\r\n        key = args[0].key;\r\n      }\r\n      options = Object.keys(args[0]).reduce((acc, key) => {\r\n        if (includes(numericOrTimeConstansArr, key)) {\r\n          return Object.assign({}, acc, { [key]: args[0][key] });\r\n        }\r\n        return acc;\r\n      }, {});\r\n    }\r\n  } else if (args.length === 2) {\r\n    if (typeof args[0] == 'string') {\r\n      key = args[0];\r\n    }\r\n    if (typeof args[1] == 'string') {\r\n      locale = args[1];\r\n    }\r\n  }\r\n\r\n  const dealLocale = locale.substring(0, 2);\r\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n  // @ts-expect-error\r\n  return { dealLocale, key, options };\r\n}\r\n\r\nexport function isObject(obj: string | Messages | AllMessages): boolean {\r\n  return obj !== null && typeof obj === 'object';\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nconst toString: Function = Object.prototype.toString;\r\nconst OBJECT_STRING: string = '[object Object]';\r\n\r\nexport function isPlainObject(obj: any): boolean {\r\n  return toString.call(obj) === OBJECT_STRING;\r\n}\r\n\r\nexport function isString(val: any): boolean {\r\n  return typeof val === 'string';\r\n}\r\n\r\nexport const isArray = Array.isArray;\r\n\r\nexport function isNull(val: any): boolean {\r\n  return val === null || val === undefined;\r\n}\r\n\r\nexport function isFunction(val: any): boolean {\r\n  return typeof val === 'function';\r\n}\r\n\r\nexport function dealMsgArgs(pathRet, message, key) {\r\n  if (isArray(pathRet) || isPlainObject(pathRet)) {\r\n    return pathRet;\r\n  }\r\n\r\n  let ret: any;\r\n  if (isNull(pathRet)) {\r\n    /* istanbul ignore else */\r\n    if (isPlainObject(message)) {\r\n      ret = message[key];\r\n      if (!(isString(ret) || isFunction(ret))) {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n          console.warn(`Value of key '${key}' is not a string or function !`);\r\n        }\r\n        return null;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  } else {\r\n    /* istanbul ignore else */\r\n    if (isString(pathRet) || isFunction(pathRet)) {\r\n      ret = pathRet;\r\n    } else {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        console.warn(`Value of key '${key}' is not a string or function!`);\r\n      }\r\n      return null;\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { I18nCache } from '../../types/interfaces';\r\n\r\n/**\r\n * 缓存机制\r\n */\r\nfunction creatI18nCache(): I18nCache {\r\n  return {\r\n    dateTimeFormat: {},\r\n    numberFormat: {},\r\n    plurals: {},\r\n    select: {},\r\n    octothorpe: {},\r\n  };\r\n}\r\n\r\nexport default creatI18nCache;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nfunction getType(input: any): string {\r\n  const str: string = Object.prototype.toString.call(input);\r\n  return str.slice(8, -1).toLowerCase();\r\n}\r\n\r\n// 类型检查器\r\nconst createTypeChecker = (type: string) => {\r\n  return (input: any) => {\r\n    return getType(input) === type.toLowerCase();\r\n  };\r\n};\r\n\r\nconst checkObject = (input: any) => input !== null && typeof input === 'object';\r\n\r\nconst checkRegExp = createTypeChecker('RegExp');\r\n\r\n// 使用正则表达式，如果对象存在则访问该属性，用来判断当前环境是否支持正则表达式sticky属性。\r\nconst checkSticky = () => typeof new RegExp('')?.sticky === 'boolean';\r\n\r\n// 转义正则表达式中的特殊字符\r\nfunction transferReg(str: string): string {\r\n  // eslint-disable-next-line\r\n  return str.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\r\n}\r\n\r\n// 计算正则表达式中捕获组的数量，用以匹配（）\r\nfunction getRegGroups(str: string): number {\r\n  const regExp = new RegExp('|' + str);\r\n  // eslint-disable-next-line\r\n  return regExp.exec('')?.length! - 1;\r\n}\r\n\r\n// 创建一个捕获组的正则表达式模式\r\nfunction getRegCapture(str: string): string {\r\n  return '(' + str + ')';\r\n}\r\n\r\n// 将正则表达式合并为一个联合的正则表达式模式\r\nfunction getRegUnion(regexps: string[]): string {\r\n  if (!regexps.length) {\r\n    return '(?!)';\r\n  }\r\n  const source = regexps.map(str => '(?:' + str + ')').join('|');\r\n  return '(?:' + source + ')';\r\n}\r\n\r\nfunction getReg(input: string | Record<string, any>): string {\r\n  if (typeof input === 'string') {\r\n    return '(?:' + transferReg(input) + ')';\r\n  } else if (checkRegExp(input) || checkObject(input)) {\r\n    if (input.ignoreCase) {\r\n      throw new Error('/i prohibition sign');\r\n    }\r\n    if (input.global) {\r\n      throw new Error('/g prohibition sign');\r\n    }\r\n    if (input.sticky) {\r\n      throw new Error('/y prohibition sign');\r\n    }\r\n    if (input.multiline) {\r\n      throw new Error('/m prohibition sign');\r\n    }\r\n    return input.source;\r\n  } else {\r\n    throw new Error(`${input}Non-conformance to specifications!`);\r\n  }\r\n}\r\n\r\nfunction getRulesByObject(object: Record<string, any>) {\r\n  const keys = Object.getOwnPropertyNames(object);\r\n\r\n  // 存储最终的规则数组\r\n  const result: any[] = [];\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    const thing = object[key];\r\n\r\n    // 将属性值转换为规则数组\r\n    const rules = [].concat(thing);\r\n\r\n    // 如果属性名为 'include'，表示需要包含其他规则\r\n    if (key === 'include') {\r\n      for (let j = 0; j < rules.length; j++) {\r\n        result.push({ include: rules[j] });\r\n      }\r\n      continue;\r\n    }\r\n\r\n    // 用于保存当前规则的匹配模式\r\n    let match = [];\r\n    rules.forEach(function (rule) {\r\n      if (checkObject(rule)) {\r\n        // 如果规则是一个对象，表示具有选项设置，添加该规则到结果数组中，并重置匹配模式数组\r\n        if (match.length) result.push(getRuleOptions(key, match));\r\n        result.push(getRuleOptions(key, rule));\r\n        match = [];\r\n      } else {\r\n        match.push(rule);\r\n      }\r\n    });\r\n\r\n    // 如果匹配模式数组中还有剩余的匹配模式，创建规则对象并添加到结果数组中\r\n    if (match.length) result.push(getRuleOptions(key, match));\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction getRulesByArray(array: any[]) {\r\n  const result: any[] = [];\r\n\r\n  for (let i = 0; i < array.length; i++) {\r\n    const obj = array[i];\r\n\r\n    // 如果元素具有 'include' 属性，表示需要包含其他规则\r\n    if (obj.include) {\r\n      const include = [].concat(obj.include);\r\n      for (let j = 0; j < include.length; j++) {\r\n        result.push({ include: include[j] });\r\n      }\r\n      continue;\r\n    }\r\n\r\n    if (!obj.type) {\r\n      throw new Error('The rule does not have the type attribute.');\r\n    }\r\n    result.push(getRuleOptions(obj.type, obj));\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nfunction getRuleOptions(type: any, obj: any) {\r\n  // 如果 obj 不是一个对象，则将其转换为包含 'match' 属性的对象\r\n  if (!checkObject(obj)) {\r\n    obj = { match: obj };\r\n  }\r\n\r\n  // 如果 obj 包含 'include' 属性，则抛出错误，因为匹配规则不能包含状态\r\n  if (obj.include) {\r\n    throw new Error('The matching rule cannot contain the status!');\r\n  }\r\n\r\n  // 创建默认的选项对象，初始化各个选项属性\r\n  const options: Record<string, any> = {\r\n    defaultType: type,\r\n    lineBreaks: !!obj.error || !!obj.fallback,\r\n    pop: false,\r\n    next: null,\r\n    push: null,\r\n    error: false,\r\n    fallback: false,\r\n    value: null,\r\n    type: null,\r\n    shouldThrow: false,\r\n  };\r\n\r\n  Object.assign(options, obj);\r\n\r\n  if (typeof options.type === 'string' && type !== options.type) {\r\n    throw new Error('The type attribute cannot be a string.');\r\n  }\r\n\r\n  const match = options.match;\r\n  if (Array.isArray(match)) {\r\n    options.match = match;\r\n  } else if (match) {\r\n    options.match = [match];\r\n  } else {\r\n    options.match = [];\r\n  }\r\n  options.match.sort((str1: string, str2: string) => {\r\n    // 根据规则的类型进行排序，确保正则表达式排在最前面，长度较长的规则排在前面\r\n    if (checkRegExp(str1) && checkRegExp(str2)) {\r\n      return 0;\r\n    } else if (checkRegExp(str2)) {\r\n      return -1;\r\n    } else if (checkRegExp(str1)) {\r\n      return +1;\r\n    } else {\r\n      return str2.length - str1.length;\r\n    }\r\n  });\r\n\r\n  return options;\r\n}\r\n\r\nfunction getRules(spec: any) {\r\n  return Array.isArray(spec) ? getRulesByArray(spec) : getRulesByObject(spec);\r\n}\r\n\r\nconst ruleUtils = {\r\n  checkObject,\r\n  checkRegExp,\r\n  transferReg,\r\n  checkSticky,\r\n  getRegGroups,\r\n  getRegCapture,\r\n  getRegUnion,\r\n  getReg,\r\n  getRulesByObject,\r\n  getRulesByArray,\r\n  getRuleOptions,\r\n  getRules,\r\n};\r\n\r\nexport default ruleUtils;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport ruleUtils from '../utils/parseRuleUtils';\r\nimport { LexerInterface } from '../types/interfaces';\r\n\r\n/**\r\n * 词法解析器，主要根据设计的规则对message进行处理成Token\r\n */\r\nclass Lexer<T> implements LexerInterface<T> {\r\n  readonly startState: string;\r\n  readonly unionReg: Record<string, any>;\r\n  private buffer = '';\r\n  private stack: string[] = [];\r\n  private index = 0;\r\n  private line = 1;\r\n  private col = 1;\r\n  private queuedText = '';\r\n  private state = '';\r\n  private groups: string[] = [];\r\n  private error: Record<string, any> | undefined;\r\n  private regexp: any;\r\n  private fast: Record<string, unknown> = {};\r\n  private queuedGroup: string | null = '';\r\n  private value = '';\r\n\r\n  constructor(unionReg: Record<string, any>, startState: string) {\r\n    this.startState = startState;\r\n    this.unionReg = unionReg;\r\n    this.buffer = '';\r\n    this.stack = [];\r\n    this.reset();\r\n  }\r\n\r\n  /**\r\n   *  根据新的消息重置解析器\r\n   * @param data 消息数据\r\n   */\r\n  public reset(data?: string) {\r\n    this.buffer = data || '';\r\n    this.index = 0;\r\n    this.line = 1;\r\n    this.col = 1;\r\n    this.queuedText = '';\r\n    this.setState(this.startState);\r\n    this.stack = [];\r\n    return this;\r\n  }\r\n\r\n  private setState(state: string) {\r\n    if (!state || this.state === state) {\r\n      return;\r\n    }\r\n    this.state = state;\r\n    const info = this.unionReg[state];\r\n    this.groups = info.groups;\r\n    this.error = info.error;\r\n    this.regexp = info.regexp;\r\n    this.fast = info.fast;\r\n  }\r\n\r\n  private popState() {\r\n    this.setState(<string>this.stack.pop());\r\n  }\r\n\r\n  private pushState(state: string) {\r\n    this.stack.push(this.state);\r\n    this.setState(state);\r\n  }\r\n\r\n  private getGroup(match: Record<string, object>) {\r\n    const groupCount = this.groups.length;\r\n    for (let i = 0; i < groupCount; i++) {\r\n      if (match[i + 1] !== undefined) {\r\n        return this.groups[i];\r\n      }\r\n    }\r\n    throw new Error('No token type found matching text!');\r\n  }\r\n\r\n  private tokenToString() {\r\n    return this.value;\r\n  }\r\n\r\n  /**\r\n   * 迭代获取下一个 token\r\n   */\r\n  public next() {\r\n    const index = this.index;\r\n\r\n    if (this.queuedGroup) {\r\n      const token = this.getToken(this.queuedGroup, this.queuedText, index);\r\n      this.queuedGroup = null;\r\n      this.queuedText = '';\r\n      return token;\r\n    }\r\n\r\n    const buffer = this.buffer;\r\n    if (index === buffer.length) {\r\n      return;\r\n    }\r\n\r\n    const fastGroup = this.fast[buffer.charCodeAt(index)];\r\n    if (fastGroup) {\r\n      return this.getToken(fastGroup, buffer.charAt(index), index);\r\n    }\r\n\r\n    // 如果没有快速匹配，那么使用预先编译的正则表达式进行匹配操作\r\n    const regexp = this.regexp;\r\n    regexp.lastIndex = index;\r\n    const match = getMatch(regexp, buffer);\r\n    const error = this.error;\r\n    if (match == null) {\r\n      return this.getToken(error, buffer.slice(index, buffer.length), index);\r\n    }\r\n\r\n    const group = this.getGroup(match);\r\n    const text = match[0];\r\n\r\n    if (error?.fallback && match.index !== index) {\r\n      this.queuedGroup = group;\r\n      this.queuedText = text;\r\n      return this.getToken(error, buffer.slice(index, match.index), index);\r\n    }\r\n\r\n    return this.getToken(group, text, index);\r\n  }\r\n\r\n  /**\r\n   * 获取Token\r\n   * @param group 解析模板后获得的属性值\r\n   * @param text 文本属性的信息\r\n   * @param offset 偏移量\r\n   * @private\r\n   */\r\n  private getToken(group: any, text: string, offset: number) {\r\n    let lineNum = 0;\r\n    let last = 1; // 最后一个换行符的索引位置\r\n    if (group.lineBreaks) {\r\n      const matchNL = /\\n/g;\r\n      if (text === '\\n') {\r\n        lineNum = 1;\r\n      } else {\r\n        while (matchNL.exec(text)) {\r\n          lineNum++;\r\n          last = matchNL.lastIndex;\r\n        }\r\n      }\r\n    }\r\n\r\n    const token = {\r\n      type: (typeof group.type === 'function' && group.type(text)) || group.defaultType,\r\n      value: typeof group.value === 'function' ? group.value(text) : text,\r\n      text: text,\r\n      toString: this.tokenToString,\r\n      offset: offset, // 标记在输入 buffer 中的偏移量\r\n      lineBreaks: lineNum,\r\n      line: this.line, // token 所在的行号\r\n      col: this.col, // token 所在的列号\r\n    };\r\n\r\n    const size = text.length;\r\n    this.index += size;\r\n    this.line += lineNum;\r\n    if (lineNum !== 0) {\r\n      this.col = size - last + 1;\r\n    } else {\r\n      this.col += size;\r\n    }\r\n\r\n    if (group.shouldThrow) {\r\n      throw new Error('Invalid Syntax!');\r\n    }\r\n\r\n    if (group.pop) {\r\n      this.popState();\r\n    } else if (group.push) {\r\n      this.pushState(group.push);\r\n    } else if (group.next) {\r\n      this.setState(group.next);\r\n    }\r\n\r\n    return token;\r\n  }\r\n\r\n  // 增加迭代器，允许逐个访问集合中的元素方法\r\n  [Symbol.iterator]() {\r\n    return {\r\n      next: (): IteratorResult<T> => {\r\n        const token = this.next();\r\n        return { value: token, done: !token } as IteratorResult<T>;\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * 根据正则表达式，获取匹配到message的值\r\n * 索引为 0 的元素是完整的匹配结果。\r\n * 索引为 1、2、3 等的元素是正则表达式中指定的捕获组的匹配结果。\r\n */\r\nconst getMatch = ruleUtils.checkSticky()\r\n  ? // 正则表达式具有 sticky 标志\r\n    (regexp: any, buffer: string) => regexp.exec(buffer)\r\n  : // 正则表达式具有 global 标志,匹配的字符串长度为 0，则表示匹配失败\r\n    (regexp: any, buffer: string) => (regexp.exec(buffer)[0].length === 0 ? null : regexp.exec(buffer));\r\n\r\nexport default Lexer;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nconst body: Record<string, any> = {\r\n  doubleapos: {\r\n    match: \"''\",\r\n    value: () => \"'\",\r\n  },\r\n  quoted: {\r\n    lineBreaks: true,\r\n    match: /'[{}#](?:[^]*?[^'])?'(?!')/u, // 用以匹配单引号、花括号{}以及井号# 如'Hello' 、{name}、{}#\r\n    value: (src: string) => src.slice(1, -1).replace(/''/g, \"'\"),\r\n  },\r\n  argument: {\r\n    lineBreaks: true,\r\n\r\n    // 用于匹配{name、{Hello{World，匹配{ }花括号中有任何Unicode字符，如空格、制表符等\r\n    match: /\\{\\s*[^\\p{Pat_Syn}\\p{Pat_WS}]+\\s*/u,\r\n    push: 'arg',\r\n    value: (src: string) => src.substring(1).trim(),\r\n  },\r\n  octothorpe: '#',\r\n  end: {\r\n    match: '}',\r\n    pop: 1,\r\n  },\r\n  content: {\r\n    lineBreaks: true,\r\n    match: /[^][^{}#]*/u, // 主要匹配不包含[]任何字符（除了换行符）、不包含{}、#的任何个字符\r\n  },\r\n};\r\n\r\nconst arg: Record<string, any> = {\r\n  select: {\r\n    lineBreaks: true,\r\n    match: /,\\s*(?:plural|select|selectordinal)\\s*,\\s*/u, // 匹配内容包含 plural、select 或 selectordinal\r\n    next: 'select', // 继续解析下一个参数\r\n    value: (src: string) => src.split(',')[1].trim(), // 提取第二个参数，并处理收尾空格\r\n  },\r\n  'func-args': {\r\n    // 匹配是否包含其他非特殊字符的参数,匹配结果包含特殊字符，如param1, param2, param3\r\n    lineBreaks: true,\r\n    match: /,\\s*[^\\p{Pat_Syn}\\p{Pat_WS}]+\\s*,/u,\r\n    next: 'body',\r\n    value: (src: string) => src.split(',')[1].trim(), // 参数字符串去除逗号并去除首尾空格\r\n  },\r\n  'func-simple': {\r\n    // 匹配是否包含其他简单参数，匹配结果不包含标点符号：param1 param2 param3\r\n    lineBreaks: true,\r\n    match: /,\\s*[^\\p{Pat_Syn}\\p{Pat_WS}]+\\s*/u,\r\n    value: (src: string) => src.substring(1).trim(),\r\n  },\r\n  end: {\r\n    match: '}',\r\n    pop: 1,\r\n  },\r\n};\r\n\r\nconst select: Record<string, any> = {\r\n  offset: {\r\n    lineBreaks: true,\r\n    match: /\\s*offset\\s*:\\s*\\d+\\s*/u, // 匹配message中是否包含偏移量offest信息\r\n    value: (src: string) => src.split(':')[1].trim(),\r\n  },\r\n  case: {\r\n    // 检查匹配该行是否包含分支信息。\r\n    lineBreaks: true,\r\n\r\n    // 设置规则匹配以左大括号 { 结尾的字符串，以等号 = 后跟数字开头的字符串，或者以非特殊符号和非空白字符开头的字符串，如 '=1 {'\r\n    match: /\\s*(?:=\\d+|[^\\p{Pat_Syn}\\p{Pat_WS}]+)\\s*\\{/u,\r\n    push: 'body', // 匹配成功，则会push到body栈中\r\n    value: (src: string) => src.substring(0, src.indexOf('{')).trim(),\r\n  },\r\n  end: {\r\n    match: /\\s*\\}/u,\r\n    pop: 1,\r\n  },\r\n};\r\n\r\nexport const mappingRule: Record<string, any> = {\r\n  body,\r\n  arg,\r\n  select,\r\n};\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\n/**\r\n * \\\\(?:u\\{[a-fA-F0-9]+}) 匹配形如 \\u{0020} 的 Unicode 转义字符。\r\n * \\\\x[a-fA-F0-9]{2} 匹配形如 \\x0A 的十六进制转义字符。\r\n * [nrtf'\"] 匹配常见的转义字符：\\n（换行符）、\\r（回车符）、\\t（制表符）、\\f（换页符）、\\'（单引号）和 \\\"（双引号）。\r\n */\r\nexport const UNICODE_REG: RegExp = /\\\\(?:u\\{[a-fA-F0-9]+}|x[a-fA-F0-9]{2}|[nrtf'\"])/g;\r\nexport const STICKY_FLAG: string = 'ym';\r\nexport const GLOBAL_FLAG: string = 'gm';\r\n\r\nexport const VERTICAL_LINE: string = '|';\r\nexport const UNICODE_FLAG: string = 'u';\r\nexport const STATE_GROUP_START_INDEX: number = 1;\r\n// Inula 需要被保留静态常量\r\nexport const INULA_STATICS = {\r\n  childContextTypes: true,\r\n  contextType: true,\r\n  contextTypes: true,\r\n  defaultProps: true,\r\n  displayName: true,\r\n  getDefaultProps: true,\r\n  getDerivedStateFromError: true,\r\n  getDerivedStateFromProps: true,\r\n  mixins: true,\r\n  propTypes: true,\r\n  type: true,\r\n};\r\n\r\n// JavaScript 需要被保留原生静态属性\r\nexport const NATIVE_STATICS = {\r\n  name: true,\r\n  length: true,\r\n  prototype: true,\r\n  caller: true,\r\n  callee: true,\r\n  arguments: true,\r\n  arity: true,\r\n};\r\n\r\n// Inula ForwardRef 组件的静态属性需要被保留\r\nexport const INULA_FORWARD_REF_STATICS = {\r\n  vtype: true,\r\n  render: true,\r\n  defaultProps: true,\r\n  key: true,\r\n  type: true,\r\n};\r\n\r\n// React ForwardRef 组件的静态属性需要被保留\r\nexport const REACT_FORWARD_REF_STATICS = {\r\n  $$typeof: true, // inula 'vtype': true\r\n  render: true, // render\r\n  defaultProps: true, // props\r\n  displayName: true,\r\n  propTypes: true, // type: type,\r\n};\r\n\r\nexport const FORWARD_REF_STATICS = { ...INULA_FORWARD_REF_STATICS, ...REACT_FORWARD_REF_STATICS };\r\n\r\n// Inula Memo 组件的静态属性需要被保留\r\nexport const INULA_MEMO_STATICS = {\r\n  vtype: true, // inula 'vtype': true\r\n  compare: true,\r\n  defaultProps: true,\r\n  type: true,\r\n};\r\n\r\n// 默认复数规则\r\nexport const DEFAULT_PLURAL_KEYS = ['zero', 'one', 'two', 'few', 'many', 'other'];\r\n\r\nexport const voidElementTags = [\r\n  'area',\r\n  'base',\r\n  'br',\r\n  'col',\r\n  'embed',\r\n  'hr',\r\n  'img',\r\n  'input',\r\n  'keygen',\r\n  'link',\r\n  'meta',\r\n  'param',\r\n  'source',\r\n  'track',\r\n  'wbr',\r\n  'menuitem',\r\n];\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport Lexer from './Lexer';\r\nimport { mappingRule } from './mappingRule';\r\nimport ruleUtils from '../utils/parseRuleUtils';\r\nimport { RawToken } from '../types/types';\r\nimport { STATE_GROUP_START_INDEX, GLOBAL_FLAG, STICKY_FLAG, UNICODE_FLAG, VERTICAL_LINE } from '../constants';\r\n\r\nconst defaultErrorRule = ruleUtils.getRuleOptions('error', { lineBreaks: true, shouldThrow: true });\r\n\r\n// 解析规则并生成词法分析器所需的数据结构，以便进行词法分析操作\r\nfunction parseRules(rules: Record<string, any>, hasStates: boolean): Record<string, object> {\r\n  let errorRule: Record<string, object> | null = null;\r\n  const fast: Record<string, unknown> = {};\r\n  let enableFast = true;\r\n  let unicodeFlag: boolean | null = null;\r\n  const groups: Record<string, any>[] = [];\r\n  const parts: string[] = [];\r\n\r\n  // 检查是否存在 fallback 规则，若存在则禁用快速匹配\r\n  enableFast = isExistsFallback(rules, enableFast);\r\n\r\n  for (let i = 0; i < rules.length; i++) {\r\n    const options = rules[i];\r\n    if (options.include) {\r\n      throw new Error('Inheritance is not allowed in stateless lexers!');\r\n    }\r\n\r\n    errorRule = isOptionsErrorOrFallback(options, errorRule);\r\n\r\n    const match = options.match.slice();\r\n    if (enableFast) {\r\n      // 如果快速匹配允许，则将单字符的规则存入 fast 对象\r\n      processFast(match, fast, options);\r\n    }\r\n\r\n    // 检查规则中是否存在不适当的状态切换选项\r\n    if (options.pop || options.push || options.next) {\r\n      checkStateOptions(hasStates, options);\r\n    }\r\n    // 只有具有 .match 的规则才会被包含在正则表达式中\r\n    if (match.length === 0) {\r\n      continue;\r\n    }\r\n    enableFast = false;\r\n\r\n    groups.push(options);\r\n\r\n    // 检查是否所有规则都使用了unicode，或者都未使用\r\n    unicodeFlag = checkUnicode(match, unicodeFlag, options);\r\n\r\n    const pat = ruleUtils.getRegUnion(match.map(ruleUtils.getReg));\r\n    const regexp = new RegExp(pat);\r\n    if (regexp.test('')) {\r\n      throw new Error('The regex matched the empty string!');\r\n    }\r\n    const groupCount = ruleUtils.getRegGroups(pat);\r\n    if (groupCount > 0) {\r\n      throw new Error('The regular expression uses capture groups, use (?: … ) instead!');\r\n    }\r\n\r\n    // 检测规则是否匹配换行符\r\n    if (!options.lineBreaks && regexp.test('\\n')) {\r\n      throw new Error('The matching rule must contain lineBreaks.');\r\n    }\r\n\r\n    parts.push(ruleUtils.getRegCapture(pat));\r\n  }\r\n\r\n  // 如果没有 fallback 规则，则使用 sticky 标志，只在当前索引位置寻找匹配项，如果不支持 sticky 标志，则使用无法被否定的空模式来模拟\r\n  const fallbackRule = errorRule && errorRule.fallback;\r\n  let flags = ruleUtils.checkSticky() && !fallbackRule ? STICKY_FLAG : GLOBAL_FLAG;\r\n  const suffix = ruleUtils.checkSticky() || fallbackRule ? '' : VERTICAL_LINE;\r\n\r\n  if (unicodeFlag === true) {\r\n    flags += UNICODE_FLAG;\r\n  }\r\n  const combined = new RegExp(ruleUtils.getRegUnion(parts) + suffix, flags);\r\n\r\n  return {\r\n    regexp: combined,\r\n    groups: groups,\r\n    fast: fast,\r\n    error: errorRule || defaultErrorRule,\r\n  };\r\n}\r\n\r\nexport function checkStateGroup(group: Record<string, any>, name: string, mappingRules: Record<string, object>) {\r\n  const state = group && (group.push || group.next);\r\n  if (state && !mappingRules[state]) {\r\n    throw new Error('The state is missing.');\r\n  }\r\n  if (group && group.pop && +group.pop !== STATE_GROUP_START_INDEX) {\r\n    throw new Error('The value of pop must be 1.');\r\n  }\r\n}\r\n\r\n// 将国际化解析规则注入分词器中\r\nfunction parseMappingRule(mappingRule: Record<string, object>, startState?: string): Lexer<RawToken> {\r\n  const keys = Object.getOwnPropertyNames(mappingRule);\r\n\r\n  if (!startState) {\r\n    startState = keys[0];\r\n  }\r\n\r\n  // 将每个状态的规则解析为规则数组，并存储在 ruleMap 对象中\r\n  const ruleMap = keys.reduce((map, key) => {\r\n    map[key] = ruleUtils.getRules(mappingRule[key]);\r\n    return map;\r\n  }, {});\r\n\r\n  // 处理规则中的 include 声明，将被包含的规则添加到相应的状态中\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    const rules = ruleMap[key];\r\n    const included = {};\r\n\r\n    for (let j = 0; j < rules.length; j++) {\r\n      const rule = rules[j];\r\n      if (!rule.include) {\r\n        continue;\r\n      }\r\n\r\n      const splice = [j, STATE_GROUP_START_INDEX];\r\n      if (rule.include !== key && !included[rule.include]) {\r\n        included[rule.include] = true;\r\n        const newRules = ruleMap[rule.include];\r\n\r\n        if (!newRules) {\r\n          throw new Error('Cannot contain a state that does not exist!');\r\n        }\r\n\r\n        newRules.forEach(newRule => {\r\n          if (!rules.includes(newRule)) {\r\n            splice.push(newRule);\r\n          }\r\n        });\r\n      }\r\n      // eslint-disable-next-line\r\n      rules.splice.apply(rules, splice);\r\n      j--;\r\n    }\r\n  }\r\n\r\n  const mappingAllRules = {};\r\n\r\n  // 将规则映射为词法分析器数据结构，并存储在 mappingAllRules 对象中\r\n  keys.forEach(key => {\r\n    mappingAllRules[key] = parseRules(ruleMap[key], true);\r\n  });\r\n\r\n  // 检查状态组中的规则是否正确引用了其他状态\r\n  keys.forEach(name => {\r\n    const state = mappingAllRules[name];\r\n    const groups = state.groups;\r\n    groups.forEach(group => {\r\n      checkStateGroup(group, name, mappingAllRules);\r\n    });\r\n    const fastKeys = Object.getOwnPropertyNames(state.fast);\r\n    fastKeys.forEach(fastKey => {\r\n      checkStateGroup(state.fast[fastKey], name, mappingAllRules);\r\n    });\r\n  });\r\n\r\n  // 将规则注入到词法解析器\r\n  return new Lexer(mappingAllRules, startState);\r\n}\r\n\r\n/**\r\n * 快速匹配模式\r\n * @param match\r\n * @param fast\r\n * @param options\r\n */\r\nfunction processFast(match: Record<string, any>, fast: Record<string, unknown> = {}, options: Record<string, object>) {\r\n  while (match.length && typeof match[0] === 'string' && match[0].length === 1) {\r\n    // 获取到数组的第一个元素\r\n    const word = match.shift();\r\n    fast[word.charCodeAt(0)] = options;\r\n  }\r\n}\r\n\r\n/**\r\n *  用以处理错误逻辑\r\n * @param options 操作属性\r\n * @param errorRule 错误规则\r\n */\r\nfunction handleErrorRule(options: Record<string, object>, errorRule: Record<string, object>) {\r\n  if (!options.fallback === !errorRule.fallback) {\r\n    throw new Error('errorRule can only set one!');\r\n  } else {\r\n    throw new Error('fallback and error cannot be set at the same time!');\r\n  }\r\n}\r\n\r\n/**\r\n * 用以检查message中是否包含Unicode\r\n * @param match 匹配到的message\r\n * @param unicodeFlag Unicode标志\r\n * @param options 操作属性\r\n */\r\nfunction checkUnicode(match: Record<string, any>, unicodeFlag: boolean | null, options: Record<string, any>) {\r\n  for (let j = 0; j < match.length; j++) {\r\n    const obj = match[j];\r\n    if (!ruleUtils.checkRegExp(obj)) {\r\n      continue;\r\n    }\r\n\r\n    if (unicodeFlag === null) {\r\n      unicodeFlag = obj.unicode;\r\n    } else {\r\n      if (unicodeFlag !== obj.unicode && options.fallback === false) {\r\n        throw new Error('If the /u flag is used, all!');\r\n      }\r\n    }\r\n  }\r\n  return unicodeFlag;\r\n}\r\n\r\nfunction checkStateOptions(hasStates: boolean, options: Record<string, any>) {\r\n  if (!hasStates) {\r\n    throw new Error('State toggle options are not allowed in stateless tokenizers!');\r\n  }\r\n  if (options.fallback) {\r\n    throw new Error('State toggle options are not allowed on fallback tokens!');\r\n  }\r\n}\r\n\r\n/**\r\n * 检查是否存在fallback属性，用以来判断快速匹配规则\r\n * @param rules\r\n * @param enableFast\r\n */\r\nfunction isExistsFallback(rules: Record<string, any>, enableFast: boolean) {\r\n  for (let i = 0; i < rules.length; i++) {\r\n    if (rules[i].fallback) {\r\n      enableFast = false;\r\n    }\r\n  }\r\n  return enableFast;\r\n}\r\n\r\nfunction isOptionsErrorOrFallback(options: Record<string, object>, errorRule: Record<string, object> | null) {\r\n  if (options.error || options.fallback) {\r\n    // 只能设置一个 errorRule\r\n    if (errorRule) {\r\n      handleErrorRule(options, errorRule);\r\n    }\r\n    errorRule = options;\r\n  }\r\n  return errorRule;\r\n}\r\n\r\nexport const lexer = parseMappingRule(mappingRule);\r\n\r\nexport default parseMappingRule;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { lexer } from './parseMappingRule';\r\nimport { RawToken } from '../types/types';\r\nimport { DEFAULT_PLURAL_KEYS } from '../constants';\r\nimport { Content, FunctionArg, PlainArg, Select, TokenContext } from '../types/interfaces';\r\n\r\n/**\r\n *  语法解析器，根据Token,获得具备上下文的AST\r\n */\r\nclass Parser {\r\n  cardinalKeys: string[] = DEFAULT_PLURAL_KEYS;\r\n  ordinalKeys: string[] = DEFAULT_PLURAL_KEYS;\r\n\r\n  constructor(message: string) {\r\n    lexer.reset(message);\r\n  }\r\n\r\n  isSelectKeyValid(type: Select['type'], value: string) {\r\n    if (value[0] === '=') {\r\n      if (type === 'select') {\r\n        throw new Error('The key value of the select type is invalid.');\r\n      }\r\n    } else if (type !== 'select') {\r\n      const values = type === 'plural' ? this.cardinalKeys : this.ordinalKeys;\r\n      if (values.length > 0 && !values.includes(value)) {\r\n        throw new Error(`${type} type key value is invalid.`);\r\n      }\r\n    }\r\n  }\r\n\r\n  processSelect({ value: arg }: any, isPlural: boolean, context: TokenContext, type: Select['type']): Select {\r\n    const select: Select = { type, arg, cases: [], ctx: context };\r\n\r\n    if (type === 'plural' || type === 'selectordinal') {\r\n      isPlural = true;\r\n    }\r\n\r\n    for (const token of lexer) {\r\n      switch (token.type) {\r\n        case 'offset': {\r\n          if (type === 'select') {\r\n            throw new Error('The complex offset of the select type is incorrect.');\r\n          }\r\n          if (select.cases.length > 0) {\r\n            throw new Error('The complex offset must be set before cases.');\r\n          }\r\n\r\n          select.offset = Number(token.value);\r\n          context.text += token.text;\r\n          context.lineNum += token.lineBreaks;\r\n          break;\r\n        }\r\n        case 'case': {\r\n          this.isSelectKeyValid(type, token.value);\r\n          select.cases.push({\r\n            key: token.value.replace(/=/g, ''),\r\n            tokens: this.parse(isPlural),\r\n            ctx: getContext(token),\r\n          });\r\n          break;\r\n        }\r\n        case 'end': {\r\n          return select;\r\n        }\r\n        default: {\r\n          throw new Error(`Unrecognized analyzer token: ${token.type}`);\r\n        }\r\n      }\r\n    }\r\n    throw new Error('The message end position is invalid.');\r\n  }\r\n\r\n  /**\r\n   * 解析获得的Token\r\n   * @param token\r\n   * @param isPlural\r\n   */\r\n  parseToken(token: RawToken, isPlural: boolean): PlainArg | FunctionArg | Select {\r\n    const context = getContext(token);\r\n    const nextToken = lexer.next();\r\n\r\n    if (!nextToken) {\r\n      throw new Error('The message end position is invalid.');\r\n    }\r\n\r\n    context.text += nextToken.text;\r\n    context.lineNum += nextToken.lineBreaks;\r\n\r\n    switch (nextToken.type) {\r\n      case 'end': {\r\n        return { type: 'argument', arg: token.value, ctx: context };\r\n      }\r\n      case 'func-simple': {\r\n        const end = lexer.next();\r\n        if (!end) {\r\n          throw new Error('The message end position is invalid.');\r\n        }\r\n        if (end.type !== 'end') {\r\n          throw new Error(`Unrecognized analyzer token: ${end.type}`);\r\n        }\r\n        context.text += end.text;\r\n        if (checkSelectType(nextToken.value.toLowerCase())) {\r\n          throw new Error(`Invalid parameter type: ${nextToken.value}`);\r\n        }\r\n        return {\r\n          type: 'function',\r\n          arg: token.value,\r\n          key: nextToken.value,\r\n          ctx: context,\r\n        };\r\n      }\r\n      case 'func-args': {\r\n        if (checkSelectType(nextToken.value.toLowerCase())) {\r\n          throw new Error(`Invalid parameter type: ${nextToken.value}`);\r\n        }\r\n        const param = this.parse(isPlural);\r\n\r\n        return {\r\n          type: 'function',\r\n          arg: token.value,\r\n          key: nextToken.value,\r\n          param,\r\n          ctx: context,\r\n        };\r\n      }\r\n      case 'select':\r\n        if (checkSelectType(nextToken.value)) {\r\n          return this.processSelect(token, isPlural, context, nextToken.value);\r\n        } else {\r\n          throw new Error(`Invalid select type: ${nextToken.value}`);\r\n        }\r\n      default:\r\n        throw new Error(`Unrecognized analyzer token: ${nextToken.type}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 解析方法入口\r\n   * 在根级别解析时，遇到结束符号即结束解析并返回结果；而在非根级别解析时，遇到结束符号会被视为不合法的结束位置，抛出错误\r\n   * @param isPlural  标记复数\r\n   * @param isRoot  标记根节点\r\n   */\r\n  parse(isPlural: boolean, isRoot?: boolean): Array<Content | PlainArg | FunctionArg | Select> {\r\n    const tokens: any[] = [];\r\n    let content: string | Content | null = null;\r\n\r\n    for (const token of lexer) {\r\n      if (token.type === 'argument') {\r\n        if (content) {\r\n          content = null;\r\n        }\r\n        tokens.push(this.parseToken(token, isPlural));\r\n      } else if (token.type === 'octothorpe' && isPlural) {\r\n        if (content) {\r\n          content = null;\r\n        }\r\n        tokens.push({ type: 'octothorpe' });\r\n      } else if (token.type === 'end' && !isRoot) {\r\n        return tokens;\r\n      } else if (token.type === 'doubleapos') {\r\n        tokens.push(token.value);\r\n      } else if (token.type === 'quoted') {\r\n        tokens.push(token.value);\r\n      } else if (token.type === 'content') {\r\n        tokens.push(token.value);\r\n      } else {\r\n        let value = token.value;\r\n        if (!isPlural && token.type === 'quoted' && value[0] === '#') {\r\n          if (value.includes('{')) {\r\n            throw new Error(`Invalid template: ${value}`);\r\n          }\r\n          value = token.text;\r\n        }\r\n        if (content) {\r\n          content = value;\r\n        } else {\r\n          content = value;\r\n          tokens.push(content);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (isRoot) {\r\n      return tokens;\r\n    }\r\n    throw new Error('The message end position is invalid.');\r\n  }\r\n}\r\n\r\n/**\r\n * 获得 Token 的上下文\r\n * @param Token Token\r\n */\r\nconst getContext = (Token: RawToken): TokenContext => ({\r\n  offset: Token.offset,\r\n  line: Token.line,\r\n  col: Token.col,\r\n  text: Token.text,\r\n  lineNum: Token.lineBreaks,\r\n});\r\n\r\n// 用以检查select规则中的类型\r\nexport const checkSelectType = (value: string): boolean => {\r\n  return value === 'plural' || value === 'select' || value === 'selectordinal';\r\n};\r\n\r\nexport default function parse(message: string): Array<Content | PlainArg | FunctionArg | Select> {\r\n  const parser = new Parser(message);\r\n  return parser.parse(false, true);\r\n}\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\n/**\r\n * 将parse后的Token数组针对不同的匀速类型进行处理\r\n */\r\nenum TokenType {\r\n  octothorpe = 'OCTOTHORPE',\r\n  argument = 'ARGUMENT',\r\n  function = 'FUNCTION',\r\n}\r\n\r\nconst processToken = token => {\r\n  if (typeof token === 'string') {\r\n    return token;\r\n  } else if (TokenType[token.type] === 'OCTOTHORPE') {\r\n    // token为符号\r\n    return '#';\r\n  } else if (TokenType[token.type] === 'ARGUMENT') {\r\n    // token为变量\r\n    return [token.arg];\r\n  } else if (TokenType[token.type] === 'FUNCTION') {\r\n    // token为函数方法\r\n    const _param = token.param && token.param.tokens[0];\r\n    const param = typeof _param === 'string' ? _param.trim() : _param;\r\n    return [token.arg, token.key, param].filter(Boolean);\r\n  }\r\n\r\n  const offset = token.offset ? parseInt(token.offset) : undefined;\r\n\r\n  const tempFormatProps = {};\r\n  token.cases.forEach(item => {\r\n    tempFormatProps[item.key] = getTokenAST(item.tokens);\r\n  });\r\n\r\n  const mergedProps = Object.assign({}, { offset }, tempFormatProps);\r\n\r\n  return [token.arg, token.type, mergedProps];\r\n};\r\n\r\nfunction getTokenAST(tokens) {\r\n  if (!Array.isArray(tokens)) {\r\n    return tokens.join('');\r\n  }\r\n  return tokens.map(token => processToken(token));\r\n}\r\n\r\nexport default getTokenAST;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { CompiledMessage } from '../types/types';\r\nimport parse from '../parser/parser';\r\nimport getTokenAST from './getTokenAST';\r\nimport I18n from '../core/I18n';\r\n\r\nexport function isVariantI18n(i18n?: I18n) {\r\n  if (!i18n) {\r\n    throw new Error('I18n object is not found!');\r\n  }\r\n}\r\n\r\nfunction generateKey<T>(locales?: string | string[], options?: T, valueKey?: string | undefined) {\r\n  const localeKey = Array.isArray(locales) ? locales.sort().join('-') : locales;\r\n  return `${localeKey}:${JSON.stringify(options ?? {})}_${valueKey ?? ''}`;\r\n}\r\n\r\nfunction compile(message: string): CompiledMessage {\r\n  try {\r\n    return getTokenAST(parse(message));\r\n  } catch (e) {\r\n    console.error(`Message cannot be parse due to syntax errors: ${message},cause by ${e}`);\r\n    return message;\r\n  }\r\n}\r\n\r\nconst utils = {\r\n  isVariantI18n,\r\n  generateKey,\r\n  compile,\r\n};\r\n\r\nexport function createI18nProps(source) {\r\n  return {\r\n    intl: source,\r\n    locale: source.locale,\r\n    messages: source.messages,\r\n    defaultLocale: source.defaultLocale,\r\n    timeZone: source.timeZone,\r\n    onError: source.onError,\r\n    formatMessage: source.formatMessage.bind(source),\r\n    formatDate: source.formatDate ? source.formatDate.bind(source) : source.DateTimeFormat,\r\n    formatNumber: source.formatNumber ? source.formatNumber.bind(source) : source.NumberFormat,\r\n    $t: source.$t || source.formatMessage.bind(source),\r\n  };\r\n}\r\n\r\nexport default utils;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport creatI18nCache from '../cache/cache';\r\nimport utils from '../../utils/utils';\r\nimport { DatePool, Locales } from '../../types/types';\r\nimport { I18nCache } from '../../types/interfaces';\r\n\r\n/**\r\n * 时间格式化\r\n */\r\nclass DateTimeFormatter {\r\n  private readonly locales: Locales;\r\n  private readonly formatOptions: Intl.DateTimeFormatOptions;\r\n  // 创建一个缓存对象，用于存储DateTimeFormat的对象\r\n  private readonly cache?: I18nCache;\r\n  private readonly valueKey?: string;\r\n\r\n  constructor(locales: Locales, formatOptions?: Intl.DateTimeFormatOptions, cache?: I18nCache, valueKey?: string) {\r\n    this.locales = locales;\r\n    this.formatOptions = formatOptions ?? {};\r\n    this.cache = cache ?? creatI18nCache();\r\n    this.valueKey = valueKey ?? '';\r\n  }\r\n\r\n  dateTimeFormat(value: DatePool, formatOptions?: Intl.DateTimeFormatOptions): string {\r\n    const options = formatOptions ?? this.formatOptions;\r\n    const formatter = new Intl.DateTimeFormat(this.locales, options);\r\n    // 将传输的字符串转变为日期对象\r\n    if (typeof value === 'string') {\r\n      value = new Date(value);\r\n    }\r\n\r\n    // 如果启用了记忆化且已经有对应的数字格式化器缓存，则直接返回缓存中的格式化结果。否则创建新的格式化数据，并进行缓存\r\n    if (this.cache?.dateTimeFormat) {\r\n      // 造缓存的key，key包含区域设置和日期时间格式选项\r\n      const cacheKey = utils.generateKey<Intl.DateTimeFormatOptions>(this.locales, options, this.valueKey);\r\n\r\n      if (this.cache.dateTimeFormat[cacheKey]) {\r\n        return this.cache.dateTimeFormat[cacheKey].format(value);\r\n      }\r\n\r\n      // 查询缓存中的key， 若无key则创建新key\r\n      this.cache.dateTimeFormat[cacheKey] = formatter;\r\n      return formatter.format(value);\r\n    }\r\n\r\n    // 返回格式化后的时间\r\n\r\n    return formatter.format(value);\r\n  }\r\n}\r\n\r\nexport default DateTimeFormatter;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport creatI18nCache from '../cache/cache';\r\nimport { Locales } from '../../types/types';\r\nimport utils from '../../utils/utils';\r\nimport { I18nCache } from '../../types/interfaces';\r\n\r\n/**\r\n * 数字格式化\r\n */\r\nclass NumberFormatter {\r\n  private readonly locales: Locales;\r\n  private readonly formatOption?: Intl.NumberFormatOptions;\r\n  private cache?: I18nCache; // 创建一个缓存对象，用于缓存已经创建的数字格式化器\r\n  private readonly valueKey?: string;\r\n\r\n  constructor(locales: Locales, formatOption?: Intl.NumberFormatOptions, cache?: I18nCache, valueKey?: string) {\r\n    this.locales = locales;\r\n    this.formatOption = formatOption ?? {};\r\n    this.cache = cache ?? creatI18nCache();\r\n    this.valueKey = valueKey ?? '';\r\n  }\r\n\r\n  numberFormat(value: number, formatOption?: Intl.NumberFormatOptions): string {\r\n    const options = formatOption ?? this.formatOption;\r\n    const formatter = new Intl.NumberFormat(this.locales, options);\r\n\r\n    // 如果启用了记忆化且已经有对应的数字格式化器缓存，则直接返回缓存中的格式化结果。否则创建新的格式化数据，并进行缓存\r\n    if (this.cache?.numberFormat) {\r\n      // 造缓存的key，key包含区域设置数字格式选项\r\n      const cacheKey = utils.generateKey<Intl.NumberFormatOptions>(this.locales, options, this.valueKey);\r\n\r\n      if (this.cache.numberFormat[cacheKey]) {\r\n        return this.cache.numberFormat[cacheKey].format(value);\r\n      }\r\n\r\n      this.cache.numberFormat[cacheKey] = formatter;\r\n      return formatter.format(value);\r\n    }\r\n    return formatter.format(value);\r\n  }\r\n}\r\n\r\nexport default NumberFormatter;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { EventCallback } from '../types/types';\r\n\r\n/**\r\n * 定义一个时间触发器类，使用泛型实现动态时间的监听\r\n */\r\nclass EventDispatcher<E extends Record<string, EventCallback>> {\r\n  // 声明_events，用于存储事件和对应的监听器\r\n  private _events: Map<keyof E, Set<EventCallback>>;\r\n\r\n  constructor() {\r\n    this._events = new Map();\r\n  }\r\n\r\n  /**\r\n   * on 方法，向指定的事件添加监听器，并返回一个用于移除该监听器的函数\r\n   * @param event\r\n   * @param listener\r\n   */\r\n  on(event: keyof E, listener: E[keyof E]): () => void {\r\n    if (!this._events.has(event)) {\r\n      this._events.set(event, new Set());\r\n    }\r\n    const listeners = this._events.get(event)!;\r\n    listeners.add(listener);\r\n\r\n    return () => {\r\n      this.removeListener(event, listener);\r\n    };\r\n  }\r\n\r\n  /**\r\n   * removeListener 方法，移除指定事件的监听器\r\n   * @param event\r\n   * @param listener\r\n   */\r\n  removeListener(event: keyof E, listener: E[keyof E]): void {\r\n    if (!this._events.has(event)) {\r\n      return;\r\n    }\r\n    const listeners = this._events.get(event)!;\r\n    listeners.delete(listener);\r\n    if (listeners.size === 0) {\r\n      this._events.delete(event);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * emit 方法，触发指定事件，并按照监听器注册顺序执行监听器\r\n   * @param event\r\n   * @param args\r\n   */\r\n  emit(event: keyof E, ...args: Parameters<E[keyof E]>): void {\r\n    if (!this._events.has(event)) {\r\n      return;\r\n    }\r\n\r\n    // 获取该事件对应的监听器集合，并按照注册顺序执行每个监听器\r\n    const listeners = this._events.get(event)!;\r\n    for (const listener of listeners) {\r\n      listener.apply(this, args);\r\n    }\r\n  }\r\n}\r\n\r\nexport default EventDispatcher;\r\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport utils from '../../utils/utils';\r\nimport NumberFormatter from './NumberFormatter';\r\nimport { Locale, Locales } from '../../types/types';\r\nimport { I18nCache } from '../../types/interfaces';\r\nimport creatI18nCache from '../cache/cache';\r\n\r\n/**\r\n * 复数格式化\r\n */\r\nclass PluralFormatter {\r\n  private readonly locale: Locale;\r\n  private readonly locales: Locales;\r\n  private readonly value: number;\r\n  private readonly message: any;\r\n  constructor(locale: Locale, locales: Locales, value: any, message: any) {\r\n    this.locale = locale;\r\n    this.locales = locales;\r\n    this.value = value;\r\n    this.message = message;\r\n  }\r\n\r\n  // 将 message中的“#”替换为指定数字value，并返回新的字符串或者字符串数组\r\n  replaceSymbol(ctx: any) {\r\n    const msg = typeof this.message === 'function' ? this.message(ctx) : this.message;\r\n    const messages = Array.isArray(msg) ? msg : [msg];\r\n\r\n    const numberFormatter = new NumberFormatter(this.locales);\r\n    const valueStr = numberFormatter.numberFormat(this.value);\r\n\r\n    return messages.map(msg => (typeof msg === 'string' ? msg.replace('#', valueStr) : msg));\r\n  }\r\n}\r\n\r\nexport default PluralFormatter;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport utils from '../../utils/utils';\r\nimport { Locale, SelectPool } from '../../types/types';\r\nimport { I18nCache } from '../../types/interfaces';\r\n\r\n/**\r\n * 规则选择器\r\n * eg : 输入选择语句 female {She} other {They}} ，表示'female'和'other'是两种可能的值，它们分别对应着'She'和'They'两个输出结果。\r\n * 如果调用select（{ value: 'female' }）则表示，输出 she\r\n */\r\nclass SelectFormatter {\r\n  private readonly locale: Locale;\r\n\r\n  constructor(locale: Locale) {\r\n    this.locale = locale;\r\n  }\r\n\r\n  getRule(value: SelectPool, rules: any) {\r\n    return rules[value] || rules.other;\r\n  }\r\n}\r\n\r\nexport default SelectFormatter;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport DateTimeFormatter from './fomatters/DateTimeFormatter';\r\nimport NumberFormatter from './fomatters/NumberFormatter';\r\nimport { DatePool, Locale, Locales, SelectPool } from '../types/types';\r\nimport PluralFormatter from './fomatters/PluralFormatter';\r\nimport SelectFormatter from './fomatters/SelectFormatter';\r\nimport { FormatOptions, I18nCache, IntlMessageFormat } from '../types/interfaces';\r\n\r\n/**\r\n * 默认格式化接口\r\n */\r\nconst generateFormatters = (\r\n  locale: Locale,\r\n  locales: Locales,\r\n  localeConfig: Record<string, any> = { plurals: undefined },\r\n  formatOptions: FormatOptions = {}, // 自定义格式对象\r\n  cache: I18nCache,\r\n  valueKey: string\r\n): IntlMessageFormat => {\r\n  const { plurals } = localeConfig;\r\n  /**\r\n   *  样式函数 ，根据格式获取格式样式， 如货币百分比， 返回相应的格式的对象，如果没有设定格式，则返回一个空对象\r\n   * @param formatOption\r\n   */\r\n  const getStyleOption = (formatOption: string | number) => {\r\n    if (typeof formatOption === 'string') {\r\n      return formatOptions[formatOption] || { option: formatOption };\r\n    } else {\r\n      return formatOption;\r\n    }\r\n  };\r\n\r\n  return {\r\n    // 复数规则\r\n    plural: (value: number, { offset = 0, ...rules }) => {\r\n      const pluralFormatter = new PluralFormatter(\r\n        locale,\r\n        locales,\r\n        value - offset,\r\n        rules[value] || rules[(plurals as any)?.(value - offset)] || rules.other\r\n      );\r\n      return pluralFormatter.replaceSymbol.bind(pluralFormatter);\r\n    },\r\n\r\n    selectordinal: (value: number, { offset = 0, ...rules }) => {\r\n      const message = rules[value] || rules[(plurals as any)?.(value - offset, true)] || rules.other;\r\n      const pluralFormatter = new PluralFormatter(locale, locales, value - offset, message);\r\n      return pluralFormatter.replaceSymbol.bind(pluralFormatter);\r\n    },\r\n\r\n    // 选择规则，如果规则对象中包含与该值相对应的属性，则返回该属性的值；否则，返回 \"other\" 属性的值。\r\n    select: (value: SelectPool, formatRules: any) => {\r\n      const selectFormatter = new SelectFormatter(locale);\r\n      return selectFormatter.getRule(value, formatRules);\r\n    },\r\n\r\n    // 用于将数字格式化为字符串，接受一个数字和一个格式化规则。它会根据规则返回格式化后的字符串。\r\n    numberFormat: (value: number, formatOption) => {\r\n      return new NumberFormatter(locales, getStyleOption(formatOption), cache, valueKey).numberFormat(value);\r\n    },\r\n\r\n    /**\r\n     * 用于将日期格式化为字符串，接受一个日期对象和一个格式化规则。它会根据规则返回格式化后的字符串。\r\n     * eg: { year: 'numeric', month: 'long', day: 'numeric' } 是一个用于指定DateTimeFormatter如何将日期对象转换为字符串的参数。\r\n     *      \\year: 'numeric' 表示年份的表示方式是数字形式（比如2023）。\r\n     *       month: 'long' 表示月份的表示方式是全名（比如January）。\r\n     *       day: 'numeric' 表示日期的表示方式是数字形式（比如1号）。\r\n     * @param value\r\n     * @param formatOption { year: 'numeric', month: 'long', day: 'numeric' }\r\n     */\r\n    dateTimeFormat: (value: DatePool, formatOption: any) => {\r\n      return new DateTimeFormatter(locales, getStyleOption(formatOption), cache, valueKey).dateTimeFormat(\r\n        value,\r\n        formatOption\r\n      );\r\n    },\r\n\r\n    // 用于处理未定义的值，接受一个值并直接返回它。\r\n    undefined: value => value,\r\n  };\r\n};\r\n\r\nexport default generateFormatters;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { CompiledMessage, Locale, LocaleConfig, Locales } from '../types/types';\r\nimport generateFormatters from './generateFormatters';\r\nimport { FormatOptions, I18nCache } from '../types/interfaces';\r\nimport creatI18nCache from './cache/cache';\r\n\r\n/**\r\n * 获取翻译结果\r\n */\r\nclass Translation {\r\n  private readonly compiledMessage: CompiledMessage;\r\n  private readonly locale: Locale;\r\n  private readonly locales: Locales;\r\n  private readonly localeConfig: Record<string, any>;\r\n  private readonly cache: I18nCache;\r\n\r\n  constructor(\r\n    compiledMessage: CompiledMessage,\r\n    locale: Locale,\r\n    locales: Locales,\r\n    localeConfig: LocaleConfig,\r\n    cache?: I18nCache\r\n  ) {\r\n    this.compiledMessage = compiledMessage;\r\n    this.locale = locale;\r\n    this.locales = locales;\r\n    this.localeConfig = localeConfig;\r\n    this.cache = cache ?? creatI18nCache();\r\n  }\r\n\r\n  /**\r\n   * @param values 需要替换文本占位符的值\r\n   * @param formatOptions 需要格式化选项\r\n   */\r\n  translate(values: Record<string, unknown>, formatOptions: FormatOptions = {}): string {\r\n    const createTextFormatter = (\r\n      locale: Locale,\r\n      locales: Locales,\r\n      values: Record<string, unknown>,\r\n      formatOptions: FormatOptions,\r\n      localeConfig: LocaleConfig\r\n    ) => {\r\n      const textFormatter = (valueKey: string, type: string, format: any) => {\r\n        const formatters = generateFormatters(locale, locales, localeConfig, formatOptions, this.cache, valueKey);\r\n        const value = values[valueKey];\r\n        const formatter = formatters[type](value, format);\r\n\r\n        let message: any;\r\n        if (typeof formatter === 'function') {\r\n          message = formatter(textFormatter); // 递归调用\r\n        } else {\r\n          message = formatter; // 获得变量值 formatted: \"Fred\"\r\n        }\r\n\r\n        return Array.isArray(message) ? message.join('') : message;\r\n      };\r\n\r\n      return textFormatter;\r\n    };\r\n\r\n    const textFormatter = createTextFormatter(this.locale, this.locales, values, formatOptions, this.localeConfig);\r\n    // 通过递归方法formatCore进行格式化处理\r\n    return this.formatMessage(this.compiledMessage, textFormatter); // 返回要格式化的结果\r\n  }\r\n\r\n  formatMessage(compiledMessage: CompiledMessage, textFormatter: (...args: any[]) => any) {\r\n    if (!Array.isArray(compiledMessage)) {\r\n      return compiledMessage;\r\n    }\r\n\r\n    return compiledMessage\r\n      .map(token => {\r\n        if (typeof token === 'string') {\r\n          return token;\r\n        }\r\n\r\n        const [name, type, format] = token;\r\n\r\n        let replaceValueFormat = format;\r\n\r\n        // 如果 format 是对象，函数将递归地对它的每个值调用 formatMessage 后保存，否则直接保存\r\n        if (format && typeof format !== 'string') {\r\n          replaceValueFormat = Object.keys(replaceValueFormat).reduce((text, key) => {\r\n            text[key] = this.formatMessage(format[key], textFormatter);\r\n            return text;\r\n          }, {});\r\n        }\r\n        //调用 getContent 函数来获取给定 name、type 和 interpolateFormat 的值\r\n        const value = textFormatter(name, type, replaceValueFormat);\r\n        return value ?? `{${name}}`;\r\n      })\r\n      .join('');\r\n  }\r\n}\r\n\r\nexport default Translation;\r\n","/*\r\n * Copyright (c) 2024 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { cloneElement, createElement, Fragment, InulaElement } from '@cloudsop/horizon';\r\nimport { voidElementTags } from '../constants';\r\n\r\n// 用于匹配标签的正则表达式\r\nconst tagReg = /<(\\d+)>(.*?)<\\/\\1>|<(\\d+)\\/>/;\r\n\r\n// 用于匹配换行符的正则表达式\r\nconst nlReg = /(?:\\r\\n|\\r|\\n)/g;\r\n\r\nexport function formatElements(\r\n  value: string,\r\n  elements: { [key: string]: InulaElement<any> } = {}\r\n): string | Array<any> {\r\n  const elementKeyID = getElementIndex(0, '$Inula');\r\n\r\n  //  value：This is a rich text with a custom component: <1/>\r\n  const arrays = value.replace(nlReg, '').split(tagReg);\r\n\r\n  // 若无InulaNode元素，则返回\r\n  if (arrays.length === 1) return value;\r\n\r\n  const result: any = [];\r\n\r\n  const before = arrays.shift();\r\n  if (before) {\r\n    result.push(before);\r\n  }\r\n\r\n  for (const [index, children, after] of getElements(arrays)) {\r\n    let element = elements[index];\r\n\r\n    if (!element || (voidElementTags[element.type as string] && children)) {\r\n      const errorMessage = !element\r\n        ? `Index not declared as ${index} in original translation`\r\n        : `${element.type} , No child element exists. Please check.`;\r\n      console.error(errorMessage);\r\n\r\n      // 对于异常元素，通过创建<></>来代替，并继续解析现有的子元素和之后的元素，并保证在构建数组时，不会因为缺少元素而导致索引错位。\r\n      element = createElement(Fragment, {});\r\n    }\r\n\r\n    // 如果存在子元素，则进行递归处理\r\n    const formattedChildren = children ? formatElements(children, elements) : element.props.children;\r\n\r\n    // 更新element 的属性和子元素\r\n    const clonedElement = cloneElement(element, { key: elementKeyID() }, formattedChildren);\r\n    result.push(clonedElement);\r\n\r\n    if (after) {\r\n      result.push(after);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\n/**\r\n *  从arrays数组中解析出标签元素和其子元素\r\n * @param arrays\r\n */\r\nfunction getElements(arrays: string[]) {\r\n  // 如果 arrays 数组为空，则返回空数组\r\n  if (!arrays.length) return [];\r\n\r\n  /**\r\n   * pairedIndex: 第一个元素表示配对标签的内容，即 <1>...</1> 形式的标签。\r\n   * children: 第二个元素表示配对标签内的子元素内容。\r\n   * unpairedIndex: 第三个元素表示自闭合标签的内容，即 <1/> 形式的标签。\r\n   * textAfter: 第四个元素表示标签之后的文本内容，即标签后紧跟着的文本。\r\n   * eg: [undefined,undefined,1,\"\"]\r\n   */\r\n  const [pairedIndex, children, unpairedIndex, textAfter] = arrays.splice(0, 4);\r\n\r\n  // 解析当前标签元素和它的子元素，返回一个包含标签索引、子元素和后续文本的数组\r\n  const currentElement: [number, string, string] = [\r\n    parseInt(pairedIndex || unpairedIndex), // 解析标签索引，如果是自闭合标签，则使用 unpaired\r\n    children || '',\r\n    textAfter || '',\r\n  ];\r\n\r\n  // 递归调用 getElements 函数，处理剩余的 arrays 数组\r\n  const remainingElements = getElements(arrays);\r\n\r\n  // 将当前元素和递归处理后的元素数组合并并返回\r\n  return [currentElement, ...remainingElements];\r\n}\r\n\r\n// 对传入富文本元素的位置标志索引\r\nfunction getElementIndex(count = 0, prefix = '') {\r\n  return function () {\r\n    return `${prefix}_${count++}`;\r\n  };\r\n}\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport utils from '../utils/utils';\r\nimport Translation from './Translation';\r\nimport I18n from '../core/I18n';\r\nimport { MessageDescriptor, MessageOptions } from '../types/interfaces';\r\nimport { CompiledMessage } from '../types/types';\r\nimport creatI18nCache from './cache/cache';\r\nimport { formatElements } from '../utils/formatElements';\r\n\r\nexport function getFormatMessage(\r\n  i18n: I18n,\r\n  id: MessageDescriptor | string,\r\n  values: Record<string, unknown> | undefined = {},\r\n  options: MessageOptions = {},\r\n  components: any\r\n) {\r\n  let { messages, context } = options;\r\n  const { formatOptions } = options;\r\n  const cache = i18n.cache ?? creatI18nCache();\r\n  if (typeof id !== 'string') {\r\n    values = values || id.defaultValues;\r\n    messages = id.messages || id.defaultMessage;\r\n    context = id.context;\r\n    id = id.id;\r\n  }\r\n\r\n  // 对messages进行判空处理\r\n  const isMissingMessage = !context && !i18n.messages[id];\r\n  const isMissingContextMessage = context && !i18n.messages[context][id];\r\n  const messageUnavailable = isMissingContextMessage || isMissingMessage;\r\n\r\n  // 对错误消息进行处理\r\n  const messageError = i18n.onError;\r\n  if (messageError && messageUnavailable) {\r\n    if (typeof messageError === 'function') {\r\n      return messageError(i18n.locale, id, context);\r\n    } else {\r\n      return messageError;\r\n    }\r\n  }\r\n\r\n  let compliedMessage: CompiledMessage;\r\n  if (context) {\r\n    compliedMessage = i18n.messages[context][id] || messages || id;\r\n  } else {\r\n    compliedMessage = i18n.messages[id] || messages || id;\r\n  }\r\n\r\n  // 对解析的message进行parse解析，并输出解析后的Token\r\n  compliedMessage = typeof compliedMessage === 'string' ? utils.compile(compliedMessage) : compliedMessage;\r\n\r\n  const translation = new Translation(compliedMessage, i18n.locale, i18n.locales, i18n.localeConfig, cache);\r\n  const formatResult = translation.translate(values, formatOptions);\r\n\r\n  // 如果存在inula元素，则返回包含格式化的Inula元素的数组\r\n  return formatElements(formatResult, components);\r\n}\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport EventDispatcher from '../utils/eventListener';\r\nimport DateTimeFormatter from '../format/fomatters/DateTimeFormatter';\r\nimport NumberFormatter from '../format/fomatters/NumberFormatter';\r\nimport { getFormatMessage } from '../format/getFormatMessage';\r\nimport { I18nCache, I18nProps, MessageDescriptor, MessageOptions } from '../types/interfaces';\r\nimport {\r\n  Locale,\r\n  Locales,\r\n  Messages,\r\n  AllLocaleConfig,\r\n  AllMessages,\r\n  LocaleConfig,\r\n  Error,\r\n  Events,\r\n  InulaNode,\r\n} from '../types/types';\r\nimport creatI18nCache from '../format/cache/cache';\r\nimport { isValidElement } from '@cloudsop/horizon';\r\n\r\nexport class I18n extends EventDispatcher<Events> {\r\n  public locale: Locale;\r\n  public locales: Locales;\r\n  public defaultLocale?: Locale;\r\n  public timeZone?: string;\r\n  public allMessages: AllMessages;\r\n  private readonly _localeConfig: AllLocaleConfig;\r\n  public readonly onError?: Error;\r\n  public readonly cache?: I18nCache;\r\n  public $t: (\r\n    id: MessageDescriptor | string,\r\n    values?: Record<string, unknown> | undefined,\r\n    { messages, context, formatOptions }?: MessageOptions\r\n  ) => string | any[];\r\n\r\n  constructor(props: I18nProps) {\r\n    super();\r\n    this.defaultLocale = 'en';\r\n    this.locale = this.defaultLocale;\r\n    this.locales = this.locale || '';\r\n    this.allMessages = {};\r\n    this._localeConfig = {};\r\n    this.onError = props.onError;\r\n    this.timeZone = '';\r\n\r\n    this.loadMessage(props.messages);\r\n\r\n    if (props.localeConfig) {\r\n      this.loadLocaleConfig(props.localeConfig);\r\n    }\r\n    if (props.messages) {\r\n      this.changeMessage(props.messages);\r\n    }\r\n\r\n    if (props.locale || props.locales) {\r\n      this.changeLanguage(props.locale!, props.locales);\r\n    }\r\n    this.$t = this.formatMessage.bind(this);\r\n    this.formatMessage = this.formatMessage.bind(this);\r\n    this.formatDate = this.formatDate.bind(this);\r\n    this.formatNumber = this.formatNumber.bind(this);\r\n\r\n    this.cache = props.cache ?? creatI18nCache();\r\n  }\r\n\r\n  get messages(): string | Messages | AllMessages {\r\n    if (this.locale in this.allMessages) {\r\n      return this.allMessages[this.locale] ?? {};\r\n    } else {\r\n      return this.allMessages ?? {};\r\n    }\r\n  }\r\n\r\n  get localeConfig(): LocaleConfig {\r\n    return this._localeConfig[this.locale] ?? {};\r\n  }\r\n\r\n  setLocaleConfig(locale: Locale, localeData: LocaleConfig) {\r\n    if (this._localeConfig[locale]) {\r\n      Object.assign(this._localeConfig, localeData);\r\n    } else {\r\n      this._localeConfig[locale] = localeData;\r\n    }\r\n  }\r\n\r\n  // 将热语言环境的本地化数据加载\r\n  loadLocaleConfig(localeOrAllData: Locale | AllLocaleConfig, localeConfig?: LocaleConfig) {\r\n    if (localeConfig) {\r\n      this.setLocaleConfig(localeOrAllData as Locale, localeConfig);\r\n    } else {\r\n      Object.keys(localeOrAllData).forEach(locale => {\r\n        this.setLocaleConfig(locale, localeOrAllData[locale]);\r\n      });\r\n    }\r\n    this.emit('change');\r\n  }\r\n\r\n  setMessage(locale: Locale, messages: Messages) {\r\n    if (this.allMessages[locale]) {\r\n      this.allMessages[locale] = Object.assign({}, this.allMessages[locale], messages);\r\n    } else {\r\n      this.allMessages[locale] = messages;\r\n    }\r\n  }\r\n\r\n  changeMessage(messages: AllMessages) {\r\n    this.allMessages = messages;\r\n    this.emit('change');\r\n  }\r\n\r\n  // 加载messages\r\n  loadMessage(localeOrMessages: Locale | AllMessages | undefined, messages?: Messages) {\r\n    if (messages) {\r\n      //当 message 为空的时候，加载单一的message信息\r\n      this.setMessage(localeOrMessages as string, messages);\r\n    } else {\r\n      // 加载多对locale-message信息\r\n      localeOrMessages &&\r\n        Object.keys(localeOrMessages!).forEach(locale => this.setMessage(locale, localeOrMessages![locale]));\r\n    }\r\n    this.emit('change');\r\n  }\r\n\r\n  // 改变当前的语言环境\r\n  changeLanguage(locale: Locale, locales?: Locales) {\r\n    this.locale = locale;\r\n    if (locales) {\r\n      this.locales = locales;\r\n    }\r\n    this.emit('change', { locale, id: '' });\r\n  }\r\n\r\n  formatMessage(\r\n    id: MessageDescriptor | string,\r\n    values: Record<string, unknown> | undefined = {},\r\n    { messages, context, formatOptions }: MessageOptions = {}\r\n  ) {\r\n    // 在多次渲染时，保证存储component不丢失\r\n    const components: { [key: string]: InulaNode } = {};\r\n    const tempValues: Record<string, unknown> = { ...values };\r\n    if (tempValues) {\r\n      Object.keys(tempValues).forEach((key, index) => {\r\n        const value = tempValues[key];\r\n        if (!isValidElement(value)) return;\r\n        // 将inula元素暂存\r\n        components[index] = value;\r\n        tempValues[key] = `<${index}/>`;\r\n      });\r\n    }\r\n    return getFormatMessage(this, id, tempValues, { messages, context, formatOptions }, components!);\r\n  }\r\n\r\n  formatDate(value: string | Date, formatOptions?: Intl.DateTimeFormatOptions): string {\r\n    const dateTimeFormatter = new DateTimeFormatter(this.locale || this.locales, formatOptions, this.cache);\r\n    return dateTimeFormatter.dateTimeFormat(value);\r\n  }\r\n\r\n  formatNumber(value: number, formatOptions?: Intl.NumberFormatOptions): string {\r\n    const numberFormatter = new NumberFormatter(this.locale || this.locales, formatOptions, this.cache);\r\n    return numberFormatter.numberFormat(value);\r\n  }\r\n}\r\n\r\nexport default I18n;\r\n\r\nexport function createI18nInstance(i18nProps: I18nProps = {}): I18n {\r\n  return new I18n(i18nProps);\r\n}\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { isMemo, ForwardRef } from '@cloudsop/horizon';\r\nimport { INULA_FORWARD_REF_STATICS, INULA_MEMO_STATICS, INULA_STATICS, NATIVE_STATICS } from '../constants';\r\n\r\nconst staticsMap = new Map();\r\nstaticsMap.set(ForwardRef, INULA_FORWARD_REF_STATICS);\r\n\r\n// 确定给定的组件是否为Memo组件，并返回相应的静态属性\r\nfunction getStatics(component) {\r\n  if (isMemo(component)) {\r\n    return INULA_MEMO_STATICS;\r\n  }\r\n\r\n  if (staticsMap.has(component['vtype'])) {\r\n    return staticsMap.get(component['vtype']) || INULA_STATICS;\r\n  }\r\n}\r\n\r\n/**\r\n * 判断给定的对象属性描述是否有效\r\n * @param sourceComponent\r\n * @param key\r\n */\r\nfunction isDescriptorValid<U>(sourceComponent: U, key: string | symbol) {\r\n  const descriptor = Object.getOwnPropertyDescriptor(sourceComponent, key);\r\n  return descriptor && (!descriptor.get || descriptor.get.prototype);\r\n}\r\n\r\n// 将一个对象的非react静态属性复制到另一个对象上，并返回马目标对象\r\nfunction copyStaticProps<T, U>(targetComponent: T, sourceComponent: U): T {\r\n  if (typeof sourceComponent === 'string') {\r\n    return targetComponent;\r\n  }\r\n  // 递归拷贝静态属性\r\n  const inheritedComponent = Object.getPrototypeOf(sourceComponent);\r\n  if (inheritedComponent && inheritedComponent !== Object.prototype) {\r\n    copyStaticProps(targetComponent, inheritedComponent);\r\n  }\r\n\r\n  // 获取源组件的属性列表\r\n  const keys: (string | symbol)[] = [\r\n    //获取指定对象自身的所有属性的名称（包括不可枚举属性）\r\n    ...Object.getOwnPropertyNames(sourceComponent),\r\n\r\n    //获取指定对象自身的所有 Symbol 类型的属性的名称（包括不可枚举属性）\r\n    ...Object.getOwnPropertySymbols(sourceComponent),\r\n  ];\r\n\r\n  // 获取目标组件和源组件的静态属性\r\n  const targetStatics = getStatics(targetComponent);\r\n  const sourceStatics = getStatics(sourceComponent);\r\n\r\n  keys.forEach(key => {\r\n    if (\r\n      !NATIVE_STATICS[key] &&\r\n      !(targetStatics && targetStatics[key]) &&\r\n      !(sourceStatics && sourceStatics[key]) &&\r\n      isDescriptorValid(sourceComponent, key)\r\n    ) {\r\n      try {\r\n        // 在一个已有的targetComponent对象上增加sourceComponent的属性\r\n        Object.defineProperty(targetComponent, key, Object.getOwnPropertyDescriptor(sourceComponent, key)!);\r\n      } catch (e) {\r\n        console.log('Error occurred while copying static props:', e);\r\n      }\r\n    }\r\n  });\r\n\r\n  return targetComponent;\r\n}\r\n\r\nexport default copyStaticProps;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { createContext, forwardRef } from '@cloudsop/horizon';\r\nimport { isVariantI18n } from '../../utils/utils';\r\nimport copyStaticProps from '../../utils/copyStaticProps';\r\nimport { InjectOptions } from '../../types/interfaces';\r\nimport I18n from '../I18n';\r\nimport VueI18n from '../../vueI18n-adapter/VueI18n';\r\n\r\n// 创建国际化组件对象上下文\r\nexport const I18nContext: any = createContext<I18n | VueI18n>(null as any);\r\nconst { Consumer, Provider } = I18nContext;\r\nexport const InjectProvider = Provider;\r\n\r\n/**\r\n * 用于实现国际化的高阶组件，将国际化功能注入到组件中，使组件能够使用国际化的本文格式化功能\r\n * @param Component\r\n * @param options\r\n */\r\nfunction injectI18n(Component, options?: InjectOptions): any {\r\n  const {\r\n    isUsingForwardRef = false, // 默认不使用\r\n    ensureContext = false,\r\n  } = options || {};\r\n\r\n  // 定义一个名为 WrappedI18n 的函数组件，接收传入组件的 props 和 forwardedRef，返回传入组件并注入 i18n\r\n  const WrappedI18n = props => (\r\n    <Consumer>\r\n      {context => {\r\n        if (ensureContext) {\r\n          isVariantI18n(context.i18nInstance);\r\n        }\r\n\r\n        const i18nProps = { intl: context.i18nInstance };\r\n        return <Component {...props} {...i18nProps} ref={isUsingForwardRef ? props.forwardedRef : null} />;\r\n      }}\r\n    </Consumer>\r\n  );\r\n\r\n  WrappedI18n.WrappedComponent = Component;\r\n\r\n  // 通过copyStatics方法，复制组件中的静态属性\r\n  return copyStaticProps(\r\n    isUsingForwardRef ? forwardRef((props, ref) => <WrappedI18n {...props} forwardedRef={ref} />) : WrappedI18n,\r\n    Component\r\n  );\r\n}\r\n\r\nexport default injectI18n;\r\n","/*\r\n * Copyright (c) 2023 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { useCallback, useEffect, useMemo, useState } from '@cloudsop/horizon';\r\nimport { InjectProvider } from './InjectI18n';\r\nimport { createI18nInstance, I18n } from '../I18n';\r\nimport { I18nProviderProps } from '../../types/types';\r\nimport VueI18n from '../../vueI18n-adapter/VueI18n';\r\n\r\n/**\r\n * 用于为应用程序提供国际化的格式化功能，管理程序中的语言文本信息和本地化资源信息\r\n * @param props\r\n * @constructor\r\n */\r\nconst I18nProvider = (props: I18nProviderProps) => {\r\n  // 使用 useMemo 创建或获取 i18n 实例\r\n  const { locale, messages, i18n, children } = props;\r\n  const i18nInstance = useMemo(() => {\r\n    return i18n || createI18nInstance({ locale, messages });\r\n  }, [i18n, locale, messages]);\r\n\r\n  // 监听message和locale的变化\r\n  const { currentLocale, currentMessages } = useI18nSync(i18nInstance);\r\n\r\n  // 创建一个 memoized 的 context 值\r\n  const contextValue = useMemo(\r\n    () => ({\r\n      ...i18nInstance,\r\n      i18nInstance,\r\n      locale: currentLocale,\r\n      messages: currentMessages,\r\n      changeLanguage: i18nInstance.changeLanguage,\r\n      changeMessage: i18nInstance.changeMessage,\r\n    }),\r\n    [i18nInstance, currentLocale, currentMessages]\r\n  );\r\n  // 提供一个 Provider 组件\r\n  return <InjectProvider value={contextValue}>{children}</InjectProvider>;\r\n};\r\n\r\nexport const useI18nSync = (i18nInstance: VueI18n | I18n) => {\r\n  const [currentLocale, setCurrentLocale] = useState(i18nInstance.locale);\r\n  const [currentMessages, setCurrentMessages] = useState(i18nInstance.messages);\r\n\r\n  const handleChange = useCallback(() => {\r\n    if (currentLocale !== i18nInstance.locale) {\r\n      setCurrentLocale(i18nInstance.locale);\r\n    }\r\n    if (currentMessages !== i18nInstance.messages) {\r\n      setCurrentMessages(i18nInstance.messages);\r\n    }\r\n  }, [i18nInstance, currentLocale, currentMessages]);\r\n\r\n  useEffect(() => {\r\n    // 清理函数\r\n    return i18nInstance.on('change', handleChange);\r\n  }, [i18nInstance, handleChange]);\r\n\r\n  return { currentLocale, currentMessages };\r\n};\r\n\r\nexport default I18nProvider;\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { AllMessages, Messages } from '../../intl/types/types';\r\nimport { isNull, isObject } from './utils';\r\nimport {\r\n  AFTER_PATH,\r\n  APPEND,\r\n  BEFORE_PATH,\r\n  ERROR,\r\n  IN_DOUBLE_QUOTE,\r\n  IN_SINGLE_QUOTE,\r\n  IN_SUB_PATH,\r\n  INC_SUB_PATH_DEPTH,\r\n  pathStateMachine,\r\n  PUSH,\r\n  PUSH_SUB_PATH,\r\n} from '../constants';\r\nimport { PathStateMachine, PathValue } from '../type/types';\r\n\r\nexport default class I18nPath {\r\n  // 使用严格类型的缓存对象\r\n  private _cache: Record<string, string[]> = Object.create(null);\r\n\r\n  /**\r\n   * External parse that check for a cache hit first\r\n   */\r\n  parsePath(path: string): string[] {\r\n    let hit: string[] = this._cache[path];\r\n    if (!hit) {\r\n      hit = parse(path);\r\n      if (hit) {\r\n        this._cache[path] = hit;\r\n      }\r\n    }\r\n    return hit || [];\r\n  }\r\n\r\n  getPathValue(obj: string | Messages | AllMessages, id: string): PathValue {\r\n    // 如果传入的不是对象，则返回null\r\n    if (!isObject(obj)) {\r\n      return null;\r\n    }\r\n    // 解析路径\r\n    const paths: string[] = this.parsePath(id);\r\n\r\n    if (paths.length === 0) {\r\n      return null;\r\n    } else {\r\n      let last: any = obj;\r\n      for (const path of paths) {\r\n        const value: any = last[path];\r\n        // 如果路径对应的值为undefined或null，则返回null\r\n        if (value === undefined || value === null) {\r\n          return null;\r\n        }\r\n        last = value;\r\n      }\r\n      return last;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Parse a string path into an array of segments\r\n */\r\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n// @ts-expect-error\r\nfunction parse(path: string): string[] {\r\n  const keys: string[] = [];\r\n  let index: number = -1;\r\n  let mode: number = BEFORE_PATH;\r\n  let subPathDepth: number = 0;\r\n  let c: string | undefined;\r\n  let key: any;\r\n  let newChar: string;\r\n  let type: string;\r\n  let transition: any;\r\n  let action: () => void | boolean;\r\n  let typeMap: PathStateMachine;\r\n  const actions: Array<() => void | boolean> = [];\r\n\r\n  actions[PUSH] = function () {\r\n    if (key !== undefined) {\r\n      keys.push(key);\r\n      key = undefined;\r\n    }\r\n  };\r\n\r\n  actions[APPEND] = function () {\r\n    if (key === undefined) {\r\n      key = newChar;\r\n    } else {\r\n      key += newChar;\r\n    }\r\n  };\r\n\r\n  actions[INC_SUB_PATH_DEPTH] = function () {\r\n    actions[APPEND]();\r\n    subPathDepth++;\r\n  };\r\n\r\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n  // @ts-expect-error\r\n  actions[PUSH_SUB_PATH] = function () {\r\n    if (subPathDepth > 0) {\r\n      subPathDepth--;\r\n      mode = IN_SUB_PATH;\r\n      actions[APPEND]();\r\n    } else {\r\n      subPathDepth = 0;\r\n      if (key === undefined) {\r\n        return false;\r\n      }\r\n      key = formatSubPath(key);\r\n      if (key === false) {\r\n        return false;\r\n      } else {\r\n        actions[PUSH]();\r\n      }\r\n    }\r\n  };\r\n\r\n  function maybeUnescapeQuote(): boolean | void {\r\n    const nextChar: string = path[index + 1];\r\n    if ((mode === IN_SINGLE_QUOTE && nextChar === \"'\") || (mode === IN_DOUBLE_QUOTE && nextChar === '\"')) {\r\n      index++;\r\n      newChar = '\\\\' + nextChar;\r\n      actions[APPEND]();\r\n      return true;\r\n    }\r\n  }\r\n\r\n  while (mode !== null) {\r\n    index++;\r\n    c = path[index];\r\n\r\n    if (c === '\\\\' && maybeUnescapeQuote()) {\r\n      continue;\r\n    }\r\n\r\n    type = getPathCharType(c);\r\n\r\n    //  根据不同的字符串，进行匹配对应的状态模式\r\n    typeMap = pathStateMachine[mode];\r\n    transition = typeMap[type] || typeMap['else'] || ERROR;\r\n\r\n    if (transition === ERROR) {\r\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n      // @ts-expect-error\r\n      return; // parse error\r\n    }\r\n\r\n    mode = transition[0];\r\n    action = actions[transition[1]];\r\n    if (action) {\r\n      newChar = transition[2];\r\n      newChar = newChar === undefined ? c : newChar;\r\n      if (action() === false) {\r\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n        // @ts-expect-error\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (mode === AFTER_PATH) {\r\n      return keys;\r\n    }\r\n  }\r\n}\r\n\r\n// 格式化子路径\r\nfunction formatSubPath(path: string): boolean | string {\r\n  const trimmed: string = path.trim();\r\n  if (path.charAt(0) === '0' && isNaN(Number(path))) {\r\n    return false;\r\n  }\r\n\r\n  return isLiteral(trimmed) ? stripQuotes(trimmed) : '*' + trimmed;\r\n}\r\n\r\nconst literalValueRE: RegExp = /^\\s?(?:true|false|-?[\\d.]+|'[^']*'|\"[^\"]*\")\\s?$/;\r\n\r\nfunction isLiteral(exp: string): boolean {\r\n  return literalValueRE.test(exp);\r\n}\r\n\r\n/**\r\n * 剥离引号\r\n */\r\nfunction stripQuotes(str: string): string | boolean {\r\n  const a: number = str.charCodeAt(0);\r\n  const b: number = str.charCodeAt(str.length - 1);\r\n  return a === b && (a === 0x22 || a === 0x27) ? str.slice(1, -1) : str;\r\n}\r\n\r\nfunction getPathCharType(ch: string): string {\r\n  if (ch === undefined || ch === null) {\r\n    return 'eof';\r\n  }\r\n\r\n  const code: number = ch.charCodeAt(0);\r\n\r\n  switch (code) {\r\n    case 0x5b: // [\r\n    case 0x5d: // ]\r\n    case 0x2e: // .\r\n    case 0x22: // \"\r\n    case 0x27: // '\r\n      return ch;\r\n\r\n    case 0x5f: // _\r\n    case 0x24: // $\r\n    case 0x2d: // -\r\n      return 'ident';\r\n\r\n    case 0x09: // Tab\r\n    case 0x0a: // Newline\r\n    case 0x0d: // Return\r\n    case 0xa0: // No-break space\r\n    case 0xfeff: // Byte Order Mark\r\n    case 0x2028: // Line Separator\r\n    case 0x2029: // Paragraph Separator\r\n      return 'ws';\r\n  }\r\n\r\n  return 'ident';\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\nimport { I18nOptions } from './type/types';\r\nimport { dateTimeFormatKeys, numberFormatKeys } from './constants';\r\nimport { dealMsgArgs, dealNumberOrTimesArgs } from './utils/utils';\r\nimport { I18n } from '../intl';\r\nimport { AllMessages, DatePool, Locale, Messages } from '../intl/types/types';\r\nimport I18nPath from './utils/parseMsgParamUtils';\r\n\r\nclass VueI18n extends I18n {\r\n  public locale: Locale;\r\n  public localMessages: Map<string, AllMessages>;\r\n  public dateTimeFormats?: NonNullable<unknown>;\r\n  public datetimeFormats?: NonNullable<unknown>;\r\n  public numberFormats?: NonNullable<unknown>;\r\n  public vueMessages: string | AllMessages;\r\n  public path?: I18nPath;\r\n  public listeners?: any;\r\n\r\n  constructor(options: I18nOptions) {\r\n    super(options);\r\n    this.locale = options.locale || 'en';\r\n    this.localMessages = new Map();\r\n    this.vueMessages = options.messages || {};\r\n    this.numberFormats = options.numberFormats || {};\r\n    this.dateTimeFormats = options.dateTimeFormats || {};\r\n    this.datetimeFormats = options.datetimeFormats || {};\r\n    this.path = new I18nPath();\r\n    this.listeners = new Set();\r\n    this.loadMessage(this.vueMessages);\r\n  }\r\n\r\n  // 重写 messages getter\r\n  get messages(): string | Messages | AllMessages {\r\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n    // @ts-expect-error\r\n    if (this.locale in this.vueMessages) {\r\n      return this.vueMessages[this.locale] ?? {};\r\n    } else {\r\n      return this.vueMessages ?? {};\r\n    }\r\n  }\r\n\r\n  // 重写 loadMessage 方法以支持加载局部消息\r\n  loadMessage = (localeOrMessages: Locale | AllMessages | undefined, messages?: Messages) => {\r\n    super.loadMessage(localeOrMessages, messages);\r\n    this.emit('change');\r\n  };\r\n\r\n  changeLanguage = (locale: Locale) => {\r\n    this.locale = locale;\r\n    super.changeLanguage(locale);\r\n  };\r\n\r\n  changeMessage = (messages: AllMessages) => {\r\n    super.changeMessage(messages);\r\n  };\r\n\r\n  $t = (msgKey: string, values?: any) => {\r\n    const { messages } = this;\r\n    const pathRet = this.path!.getPathValue(messages, msgKey);\r\n    const msgId = pathRet !== null ? dealMsgArgs(pathRet, messages, msgKey) : msgKey;\r\n    return super.formatMessage(msgId, values);\r\n  };\r\n\r\n  $n = (value: number, ...args: any) => {\r\n    const { dealLocale, key, options } = dealNumberOrTimesArgs(args, numberFormatKeys);\r\n    // 如果自己传入新的语言，则更新\r\n    super.changeLanguage(dealLocale ? dealLocale : 'en');\r\n\r\n    if (key) {\r\n      const formatOptions = this.numberFormats![dealLocale][key]!;\r\n      return super.formatNumber(value, formatOptions);\r\n    }\r\n\r\n    return super.formatNumber(value, options);\r\n  };\r\n\r\n  $d = (value: DatePool, ...args: any) => {\r\n    const { dealLocale, key, options } = dealNumberOrTimesArgs(args, dateTimeFormatKeys);\r\n    super.changeLanguage(dealLocale ? dealLocale : 'en');\r\n\r\n    if (key) {\r\n      const formatOptions = this.dateTimeFormats![dealLocale][key];\r\n      return super.formatDate(value, formatOptions);\r\n    }\r\n    return super.formatDate(value, options);\r\n  };\r\n}\r\n\r\nexport function createVueI18nInstance(i18nProps: I18nOptions = {}): VueI18n {\r\n  return new VueI18n(i18nProps);\r\n}\r\nexport default VueI18n;\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport I18nProvider from '../../intl/core/components/I18nProvider';\r\nimport { I18nOptions, App } from '../type/types';\r\nimport { createVueI18nInstance } from '../VueI18n';\r\nimport { createElement } from '@cloudsop/horizon';\r\n\r\nexport function createI18n(options: I18nOptions): any {\r\n  const { locale, messages } = options;\r\n  const i18nInstance = createVueI18nInstance({\r\n    locale: locale || 'en',\r\n    messages: messages,\r\n  });\r\n  return {\r\n    global: {\r\n      ...i18nInstance,\r\n\r\n      // 这里需要手动把on属性带上，因为on来自i18nInstance的原型链上，...展开会丢失\r\n      on: i18nInstance.on.bind(i18nInstance),\r\n      t: i18nInstance.$t.bind(i18nInstance),\r\n      messages: i18nInstance.allMessages,\r\n    },\r\n\r\n    // 用于注册到全局国际化插件\r\n    install: (app: App) => {\r\n      // 将 vueIi18n 实例提供给I18nProvider\r\n      app.rootComponent = createElement(I18nProvider, { i18n: i18nInstance }, app.rootComponent);\r\n    },\r\n  };\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { UseI18nOptions } from '../type/types';\r\nimport VueI18n from '../VueI18n';\r\nimport { useContext, useEffect } from '@cloudsop/horizon';\r\nimport { I18nContext } from '../../intl/core/components/InjectI18n';\r\n\r\nexport const useI18n = (options?: UseI18nOptions): any => {\r\n  const contextI18n = useContext<VueI18n | null>(I18nContext);\r\n\r\n  if (contextI18n && !options) {\r\n    return i18nInstance(contextI18n);\r\n  }\r\n\r\n  if (!options) {\r\n    throw new Error('I18nProvider is not used and options are not provided');\r\n  }\r\n\r\n  if (options.messages) {\r\n    Object.entries(options.messages).forEach(([locale, messages]) => {\r\n      contextI18n?.i18nInstance?.loadMessage({\r\n        [locale]: {\r\n          ...contextI18n.messages[locale],\r\n          ...messages,\r\n        },\r\n      });\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (options?.locale) {\r\n      contextI18n?.changeLanguage(options.locale);\r\n    }\r\n    if (options?.messages) {\r\n      contextI18n?.loadMessage(options.messages);\r\n    }\r\n  }, [options?.locale, options?.messages]);\r\n\r\n  return i18nInstance(contextI18n);\r\n};\r\n\r\nfunction i18nInstance(i18nContext: any): any {\r\n  const i18nInstance = i18nContext.i18nInstance ? i18nContext.i18nInstance : i18nContext;\r\n  return {\r\n    ...i18nInstance,\r\n    on: i18nInstance.on.bind(i18nInstance),\r\n    n: i18nInstance.$n.bind(i18nInstance),\r\n    d: i18nInstance.$d.bind(i18nInstance),\r\n    t: i18nInstance.$t.bind(i18nInstance),\r\n  };\r\n}\r\n","import { useMemo, useRef } from '@cloudsop/horizon';\r\nimport { AllMessages } from '../../intl/types/types';\r\nimport { useI18n } from './useI18n';\r\nimport { dealMsgArgs } from '../utils/utils';\r\n\r\nexport const useLocalMessage = (messages: AllMessages): any => {\r\n  const instance = useI18n();\r\n  const { t, formatMessage, path, on, locale } = instance;\r\n  const currentLocale = useRef(locale);\r\n  useMemo(() => {\r\n    on('change', ({ locale }) => {\r\n      currentLocale.current = locale;\r\n    });\r\n  }, []);\r\n  const $t = (msgKey: string, values?: any) => {\r\n    const currentMessages = messages[currentLocale.current] || {};\r\n    const pathRet = path.getPathValue(currentMessages, msgKey);\r\n    if (pathRet || currentMessages[msgKey]) {\r\n      const msgId = pathRet !== null ? dealMsgArgs(pathRet, currentMessages, msgKey) : currentMessages[msgKey];\r\n      return formatMessage(msgId, values);\r\n    }\r\n    return t(msgKey, values);\r\n  };\r\n  return { $t, t: $t };\r\n};\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n// type for $api\r\nimport VueI18n from './VueI18n';\r\nimport { createI18n } from './hooks/createI18n';\r\nimport { useI18n } from './hooks/useI18n';\r\nimport { useLocalMessage } from './hooks/useLocalMessage';\r\n\r\ndeclare global {\r\n  interface Window {\r\n    $i18n: VueI18n;\r\n  }\r\n}\r\n\r\nexport default {\r\n  VueI18n,\r\n};\r\n\r\nexport { createI18n, useI18n, useLocalMessage };\r\n"],"names":["_classCallCheck","instance","Constructor","TypeError","_typeof","o","Symbol","iterator","constructor","prototype","toPrimitive","t","r","e","i","call","String","Number","toPropertyKey","_defineProperties","target","props","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","assertThisInitialized","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inherits","subClass","superClass","create","value","_getPrototypeOf","getPrototypeOf","_superPropBase","object","property","hasOwnProperty","_get","Reflect","get","receiver","base","superPropBase","desc","getOwnPropertyDescriptor","arguments","apply","_defineProperty","obj","APPEND","PUSH","INC_SUB_PATH_DEPTH","PUSH_SUB_PATH","BEFORE_PATH","IN_PATH","BEFORE_IDENT","IN_IDENT","IN_SUB_PATH","IN_SINGLE_QUOTE","IN_DOUBLE_QUOTE","AFTER_PATH","ERROR","pathStateMachine","ws","ident","eof","number","else","numberFormatKeys","dateTimeFormatKeys","_extends","assign","source","includes","arr","item","indexOf","dealNumberOrTimesArgs","args","numericOrTimeConstansArr","locale","options","keys","reduce","acc","dealLocale","substring","isObject","toString","OBJECT_STRING","isPlainObject","isString","val","isArray","Array","isNull","undefined","isFunction","dealMsgArgs","pathRet","message","ret","process","env","NODE_ENV","console","warn","creatI18nCache","dateTimeFormat","numberFormat","plurals","select","octothorpe","getType","input","str","slice","toLowerCase","createTypeChecker","type","checkObject","checkRegExp","checkSticky","_RegExp","RegExp","sticky","transferReg","replace","getRegGroups","_regExp$exec","regExp","exec","getRegCapture","getRegUnion","regexps","map","join","getReg","ignoreCase","Error","global","multiline","getRulesByObject","getOwnPropertyNames","result","_loop","thing","rules","concat","j","push","include","match","forEach","rule","getRuleOptions","getRulesByArray","array","defaultType","lineBreaks","error","fallback","pop","next","shouldThrow","sort","str1","str2","getRules","spec","ruleUtils","Lexer","unionReg","startState","buffer","stack","index","line","col","queuedText","state","groups","regexp","fast","queuedGroup","reset","data","setState","info","popState","pushState","getGroup","groupCount","tokenToString","token","getToken","fastGroup","charCodeAt","charAt","lastIndex","getMatch","group","text","offset","lineNum","last","matchNL","size","_this","done","body","doubleapos","quoted","src","argument","trim","end","content","arg","split","case","mappingRule","STICKY_FLAG","GLOBAL_FLAG","VERTICAL_LINE","UNICODE_FLAG","STATE_GROUP_START_INDEX","INULA_FORWARD_REF_STATICS","vtype","render","defaultProps","REACT_FORWARD_REF_STATICS","$$typeof","displayName","propTypes","DEFAULT_PLURAL_KEYS","voidElementTags","defaultErrorRule","parseRules","hasStates","errorRule","enableFast","unicodeFlag","parts","isExistsFallback","isOptionsErrorOrFallback","processFast","checkStateOptions","checkUnicode","pat","test","fallbackRule","flags","suffix","combined","checkStateGroup","name","mappingRules","parseMappingRule","ruleMap","included","_loop2","_j","splice","newRules","newRule","mappingAllRules","fastKeys","fastKey","word","shift","handleErrorRule","unicode","lexer","Parser","cardinalKeys","ordinalKeys","isSelectKeyValid","values","processSelect","_ref","isPlural","context","cases","ctx","_iterator","_createForOfIteratorHelper","_step","s","n","tokens","parse","getContext","err","f","parseToken","nextToken","checkSelectType","param","isRoot","_iterator2","_step2","Token","parser","TokenType","processToken","_param","filter","Boolean","parseInt","tempFormatProps","getTokenAST","mergedProps","isVariantI18n","i18n","generateKey","locales","valueKey","localeKey","JSON","stringify","compile","utils","DateTimeFormatter","formatOptions","cache","_this$cache","formatter","Intl","DateTimeFormat","Date","cacheKey","format","NumberFormatter","formatOption","NumberFormat","EventDispatcher","_events","Map","on","event","listener","has","set","Set","listeners","add","removeListener","delete","emit","_len","_key","_objectWithoutPropertiesLoose","excluded","sourceKeys","PluralFormatter","replaceSymbol","msg","messages","numberFormatter","valueStr","SelectFormatter","getRule","other","generateFormatters","localeConfig","getStyleOption","option","plural","_ref$offset","_excluded","pluralFormatter","selectordinal","_ref2","_ref2$offset","_excluded2","formatRules","selectFormatter","Translation","compiledMessage","translate","createTextFormatter","textFormatter","formatters","formatMessage","_this2","replaceValueFormat","tagReg","nlReg","formatElements","elements","elementKeyID","getElementIndex","arrays","before","getElements","_step$value","children","after","element","errorMessage","createElement","Fragment","formattedChildren","clonedElement","cloneElement","_arrays$splice","pairedIndex","unpairedIndex","textAfter","currentElement","remainingElements","count","prefix","getFormatMessage","id","_i18n$cache","components","defaultValues","defaultMessage","isMissingMessage","isMissingContextMessage","messageUnavailable","messageError","onError","compliedMessage","translation","formatResult","I18n","_EventDispatcher","_props$cache","_callSuper","defaultLocale","timeZone","allMessages","_localeConfig","$t","loadMessage","loadLocaleConfig","changeMessage","changeLanguage","formatDate","formatNumber","_this$allMessages$thi","_this$allMessages","_this$_localeConfig$t","setLocaleConfig","localeData","localeOrAllData","setMessage","localeOrMessages","_this3","tempValues","isValidElement","dateTimeFormatter","createI18nInstance","i18nProps","staticsMap","ForwardRef","I18nContext","createContext","Consumer","Provider","InjectProvider","I18nProvider","i18nInstance","useMemo","_useI18nSync","useI18nSync","currentLocale","currentMessages","contextValue","_jsx","_useState","useState","setCurrentLocale","_useState2","setCurrentMessages","handleChange","useCallback","useEffect","I18nPath","_cache","parsePath","path","hit","getPathValue","paths","mode","subPathDepth","c","newChar","transition","action","typeMap","actions","formatSubPath","maybeUnescapeQuote","nextChar","getPathCharType","trimmed","isNaN","isLiteral","stripQuotes","literalValueRE","exp","a","b","ch","code","VueI18n","_I18n","localMessages","dateTimeFormats","datetimeFormats","numberFormats","vueMessages","_superPropGet","msgKey","_assertThisInitialize","msgId","$n","_dealNumberOrTimesArg","$d","_len2","_key2","_dealNumberOrTimesArg2","_this$vueMessages$thi","_this$vueMessages","createVueI18nInstance","createI18n","install","app","rootComponent","useI18n","contextI18n","useContext","entries","_contextI18n$i18nInst","i18nContext","d","useLocalMessage","useRef","current"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,14,28]}