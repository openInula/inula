!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@cloudsop/horizon"),require("react-redux"),require("@cloudsop/horizon/jsx-runtime")):"function"==typeof define&&define.amd?define(["exports","@cloudsop/horizon","react-redux","@cloudsop/horizon/jsx-runtime"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).HorizonRouter={},t.Inula,t.reactRedux,t.jsxRuntime)}(this,(function(t,n,e,r){"use strict";function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=o(n);function i(){return i=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},i.apply(this,arguments)}var u=function(t){return t.LOCATION_CHANGE="$inula-router/LOCATION_CHANGE",t.CALL_HISTORY_METHOD="$inula-router/CALL_HISTORY_METHOD",t}({}),c=function(t){return function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return{type:u.CALL_HISTORY_METHOD,payload:{method:t,args:e}}}},s=c("push"),l=c("replace"),f=c("go");function h(t){if(t&&t.query)return t;var n=t&&t.search;if(!n)return i({},t,{query:{}});var e={};return new URLSearchParams(n).forEach((function(t,n){return e[n]=t})),i({},t,{query:e})}function p(t,n){if(null==t)return{};var e,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)e=a[r],n.indexOf(e)>=0||(o[e]=t[e]);return o}function d(t,n){n(window.confirm(t))}function v(){return"undefined"!=typeof window&&window.document&&"function"==typeof window.document.createElement&&window.history&&"pushState"in window.history}function m(){return-1===window.navigator.userAgent.indexOf("Trident")}var y=function(t){return t.pop="POP",t.push="PUSH",t.replace="REPLACE",t}({}),g=function(t){return t.PopState="popstate",t.HashChange="hashchange",t}({}),w=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function b(t){var n=t.search,e=t.hash,r=t.pathname||"/";return n&&"?"!==n&&(r+=n.startsWith("?")?n:"?"+n),e&&"#"!==e&&(r+=e.startsWith("#")?e:"#"+e),r}function x(t){var n=t||"/",e={search:"",hash:""},r=t.indexOf("#");if(r>-1){var o=t.substring(r);e.hash="#"===o?"":o,n=n.substring(0,r)}var a=t.indexOf("?");if(a>-1){var i=t.substring(a);e.search="?"===i?"":i,n=n.substring(0,a)}return e.pathname=n,e}function C(t,n,e,r){var o,a="string"==typeof t?t:t.pathname,u="string"==typeof n?x(n):n,c=(o=6+2,function(){return Math.random().toString(18).substring(2,o)}),s=i({pathname:a,search:"",hash:"",state:e,key:"string"==typeof r?r:c()},u);return s.pathname?s.pathname.startsWith("/")||(s.pathname=function(t,n){if(t.startsWith("/"))return t;var e=n.split("/"),r=t.split("/"),o=r[r.length-1];".."!==o&&"."!==o||r.push("");var a,i=e.length-1,u=0;for(;u<r.length;)if("."!==(a=r[u])){if(".."!==a)break;i>1&&i--,u++}return e.slice(0,i).join("/")+"/"+r.slice(u).join("/")}(s.pathname,a)):s.pathname=a||"/",s.search&&"?"!==s.search[0]&&(s.search="?"+s.search),s.hash&&"#"!==s.hash[0]&&(s.hash="#"+s.hash),s}function R(t,n){return t.pathname===n.pathname&&t.search===n.search&&t.hash===n.hash}function S(t){return"/"===t[0]?t:"/"+t}function k(t){return"/"===t[0]?t.substring(1):t}function A(t){var n=S(t);return"/"===n[n.length-1]?n.substring(0,n.length-1):n}function L(t,n){return function(t,n){return 0===t.toLowerCase().indexOf(n.toLowerCase())&&["/","?","#",""].includes(t.charAt(n.length))}(t,n)?t.substring(n.length):t}function O(t,n){var e=[n(t)];return{getDelta:function(t,r){var o=e.lastIndexOf(n(t));-1===o&&(o=0);var a=e.lastIndexOf(n(r));return-1===a&&(a=0),o-a},addRecord:function(t,r,o){var a=n(t),i=n(r);if(o===y.push){var u=e.lastIndexOf(a),c=e.slice(0,u+1);c.push(i),e=c}if(o===y.replace){var s=e.lastIndexOf(a);-1!==s&&(e[s]=i)}}}}function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function E(t){var n=function(t,n){if("object"!=j(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==j(n)?n:String(n)}function H(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E(r.key),r)}}var P=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.prompt=void 0,this.prompt=null}var n,e,r;return n=t,(e=[{key:"setPrompt",value:function(t){var n=this;return this.prompt=t,function(){n.prompt===t&&(n.prompt=null)}}},{key:"confirmJumpTo",value:function(t,n,e,r){if(null!==this.prompt){var o="function"==typeof this.prompt?this.prompt(t,n):this.prompt;"string"==typeof o?"function"==typeof e?e(o,r):r(!0):r(!1!==o)}else r(!0)}}])&&H(n.prototype,e),r&&H(n,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function T(t,n){t&&console&&"function"==typeof console.warn&&console.warn(n)}function I(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return M(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?M(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(u)throw a}}}}function M(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function U(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser",n=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,r=0,o=m(),a=[],u=[],c=window.history,s=!1;function l(n){null===n?r=0:r+=n,1===r&&1===n?"browser"===t&&o?addEventListener(g.PopState,e):addEventListener(g.HashChange,e):0===r&&("browser"===t&&o?removeEventListener(g.PopState,e):removeEventListener(g.HashChange,e))}var f=!1;return{go:function(t){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(s=!0),c.go(t)},addListener:function(t){var n=!0,e={type:t.type,trigger:function(e){n&&("common"===t.type&&"action"in e?t.listener(e):"pop"===t.type&&"to"in e&&t.listener(e.to,e.from,e.information))}};a.push(e),l(1);var r=function(){n=!1,l(-1),a=a.filter((function(t){return t!==e}))};return u.push(r),r},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=n.setPrompt(t);return f||(l(1),f=!0),function(){f&&(f=!1,l(-1)),e()}},destroy:function(){var t,n=I(u);try{for(n.s();!(t=n.n()).done;){(0,t.value)()}}catch(t){n.e(t)}finally{n.f()}u.length=0,l(null)},getUpdateStateFunc:function(t){return function(n){var e=b(t.location);n&&i(t,n);var r=c.length-t.length;t.length=c.length;for(var o=i({},t.location),u={location:o,action:t.action},l={to:b(o),from:e,information:{delta:r,direction:r>0?w.forward:w.back,type:y.pop}},f=0;f<a.length&&!s;f++){var h=a[f];"common"===h.type?h.trigger(u):"pop"===h.type&&t.action===y.pop&&h.trigger(l)}s=!1}}}}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=v(),e=m(),r=window.history,o=t.forceRefresh,a=void 0!==o&&o,i=t.getUserConfirmation,u=void 0===i?d:i,c=t.basename?A(t.basename):"",s=H(E()),l=O(s,(function(t){return t.key})),f=new P,h=U("browser",f,(function(n){var r=e&&M(n)?n.state:E();!function(t){if(I)I=!1,j(void 0);else{var n=y.pop,e=function(e){var r,o,a;e?j({action:n,location:t}):(r=t,o=k.location,0!==(a=l.getDelta(o,r))&&(p(a),I=!0))};f.confirmJumpTo(t,n,u,e)}}((t.locationHandler?t.locationHandler:H)(r))})),p=h.go,w=h.addListener,x=h.block,R=h.destroy,S=h.getUpdateStateFunc,k={action:y.pop,length:r.length,location:s,go:p,goBack:function(){return p(-1)},goForward:function(){return p(-1)},listen:function(t){return w({type:"common",listener:t})},addListener:w,block:x,push:function(t,e){var o=y.push,i=C(k.location,t,e,void 0);f.confirmJumpTo(i,o,u,(function(t){if(t){var e=_(i),u=i.key,c=i.state;n?a?window.location.href=e:(r.pushState({key:u,state:c},"",e),l.addRecord(k.location,i,o),j({action:o,location:i})):(T(void 0!==c,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=e)}}))},replace:function(t,e){var o=y.replace,i=C(k.location,t,e,void 0);f.confirmJumpTo(i,o,u,(function(t){if(t){var e=_(i),u=i.key,c=i.state;n?a?window.location.replace(e):(r.replaceState({key:u,state:c},"",e),l.addRecord(k.location,i,o),j({action:o,location:i})):(T(void 0!==c,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.replace(e))}}))},destroy:R,createHref:_},j=S(k);function E(){return n?window.history.state:{}}function H(t){var n=window.location,e=n.search,r=n.hash,o=t||{},a=o.key,i=o.state,u=window.location.pathname;return C("",{pathname:u=c?L(u,c):u,search:e,hash:r},i,a)}var I=!1;var M=function(t){return t.type===g.PopState};function _(n){return(t.baseHandler?t.baseHandler():c)+b(n)}return k}function N(t){var n=t.indexOf("#");return-1===n?t:t.substring(0,n)}function D(t){var n=t.indexOf("#");return-1===n?"":t.substring(n+1)}function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=window.history,e=t.hashType,r=void 0===e?"slash":e,o=t.getUserConfirmation,a=void 0===o?d:o,i=t.basename?A(t.basename):"",u=S,c="slash"===r?S:k,s=D(window.location.href),l=c(s);function f(){var t=u(D(window.location.hash));return i&&(t=L(t,i)),C("",t,void 0,"default")}s!==l&&window.location.replace(N(window.location.href)+"#"+l);var h=f(),p=O(h,b),v=new P;var m=!1,g=null,w=U("hash",v,(function(){var t=D(window.location.href),n=c(t);if(t!==n)window.location.replace(N(window.location.href)+"#"+n);else{var e=f(),r=M.location;if(!m&&R(e,r))return;if(g===b(e))return;g=null,function(t){if(m)m=!1,_(void 0);else{var n=y.pop,e=function(e){var r,o,a;e?_({action:n,location:t}):(r=t,o=M.location,0!==(a=p.getDelta(o,r))&&(x(a),m=!0))};v.confirmJumpTo(t,n,a,e)}}(e)}})),x=w.go,j=w.addListener,E=w.block,H=w.destroy,I=w.getUpdateStateFunc,M={action:y.pop,length:n.length,location:h,go:x,goBack:function(){return x(-1)},goForward:function(){return x(1)},push:function(t,n){T(void 0!==n,"Hash history does not support state, it will be ignored");var e=y.push,r=C(M.location,t,n,"");v.confirmJumpTo(r,e,a,(function(t){if(t){var n=b(r),o=c(i+n);D(window.location.href)!==o?(g=o,window.location.hash=o,p.addRecord(M.location,r,e),_({action:e,location:r})):_(void 0)}}))},replace:function(t,n){T(void 0!==n,"Hash history does not support state, it will be ignored");var e=y.replace,r=C(M.location,t,n,"");v.confirmJumpTo(r,e,a,(function(t){if(t){var n=b(r),o=c(i+n);D(window.location.href)!==o&&(g=n,window.location.replace(N(window.location.href)+"#"+o)),p.addRecord(M.location,r,e),_({action:e,location:r})}}))},listen:function(t){return j({type:"common",listener:t})},addListener:j,block:E,destroy:H,createHref:function(t){var n=document.querySelector("base");return(n&&n.getAttribute("href")?N(window.location.href):"")+"#"+c(i+b(t))}},_=I(M);return M}var B,W,F,q=(B="Router",W={},(F=n.createContext(W)).displayName=B,F),J=function(t){return t.Delimiter="delimiter",t.Static="static",t.Param="param",t.WildCard="wildcard",t.LBracket="(",t.RBracket=")",t.Pattern="pattern",t}({});function z(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}var G=/[^/:()*?$^+]/;function K(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return Y(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Y(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(u)throw a}}}}function Y(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}var X=function(t){return t[t.static=10]="static",t[t.param=6]="param",t[t.wildcard=3]="wildcard",t[t.placeholder=-1]="placeholder",t}(X||{}),V={caseSensitive:!1,strictMode:!1,exact:!1},Q=/[.+*?^${}()[\]/\\]/g,Z="[^/]+",tt="/#?";function nt(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,e=n.caseSensitive,r=void 0===e?V.caseSensitive:e,o=n.strictMode,a=void 0===o?V.strictMode:o,i=n.exact,u=void 0===i?V.exact:i,c="^",s=[],l=[],f=function(t){var n=[];if(!t)return n;var e=function(t){return t.replace(/\/+/g,"/")}(t);if("*"!==e&&!e.startsWith("/"))throw new Error('Url must start with "/".');for(var r=function(){for(var t="";a<e.length&&G.test(e[a]);)t+=e[a],o(1);return t},o=function(t){a+=t},a=0;a<e.length;){var i=e[a],u=e[a-1];"/"!==i?"/"!==u||":"!==i?"/"!==u&&void 0!==u||"*"!==i?"/"===u&&G.test(i)?n.push({type:J.Static,value:r()}):"("!==i?")"!==i?["*","?","$","^","+"].includes(i)?(n.push({type:J.Pattern,value:i}),o(1)):G.test(i)?n.push({type:J.Pattern,value:r()}):o(1):(n.push({type:J.RBracket,value:")"}),o(1)):(n.push({type:J.LBracket,value:"("}),o(1)):(n.push({type:J.WildCard,value:e[a]}),o(1)):(o(1),n.push({type:J.Param,value:r()})):(n.push({type:J.Delimiter,value:e[a]}),o(1))}return n}(t),h=1===f.length&&f[0].type===J.WildCard,p=f.length,d=f[p-1],v=0,m=function(t){for(var n=!1;t<f.length&&f[t].type!==J.Delimiter;)"?"!==f[t].value&&"*"!==f[t].value||(n=!0),t++;return n},y=0;y<p;y++){var g=f[y],w=f[y+1];switch(g.type){case J.Delimiter:c+="/"+(m(y+1)||void 0===w&&!a?"?":"");break;case J.Static:c+=g.value.replace(Q,"\\$&"),w&&w.type===J.Pattern&&(c+="(."+w.value+")",s.push(String(v)),v++),l.push(X.static);break;case J.Param:var b="";if(w)switch(w.type){case J.LBracket:for(y+=2;f[y].type!==J.RBracket;)b+=f[y].value,y++;b="("+b+")";break;case J.Pattern:y++,b+="("+("*"===w.value?".*":Z)+")"+w.value}c+=b?"(?:"+b+")":"([^/]+)",s.push(g.value),l.push(X.param);break;case J.WildCard:s.push(g.value),c+="((?:[^/]+)"+(h?"?":"")+"(?:/(?:"+Z+"))*)",l.push(h?X.wildcard:X.placeholder)}}d.type===J.WildCard||u?c+=a?"$":"["+z(tt)+"]?$":(a||(c+="(?:["+z(tt)+"](?=$))?"),d.type!==J.Delimiter&&(c+="(?=["+z(tt)+"]|$)"));var x=new RegExp(c,r?"":"i");return{regexp:x,keys:s,score:l,compile:function(t){var n,e="",r=K(f);try{for(r.s();!(n=r.n()).done;){var o=n.value;switch(o.type){case J.Static:e+=o.value;break;case J.Param:if(!t[o.value])throw new Error("Param is invalid.");e+=t[o.value];break;case J.WildCard:var a=t["*"];e+=a instanceof Array?a.join("/"):a;break;case J.Delimiter:e+=o.value}}}catch(t){r.e(t)}finally{r.f()}return e},parse:function(n){var e=n.match(x);if(!e)return null;for(var r=e[0],o={},a=Array.from(l),i=1;i<e.length;i++){var u=e[i],c=s[i-1];if("*"===c&&u){var f,h=u.split("/");if(Array.isArray(o["*"]))(f=o["*"]).push.apply(f,h);else o["*"]=h;a.splice.apply(a,[l.indexOf(X.placeholder),1].concat(new Array(h.length).fill(X.wildcard)))}else o[c]=u||void 0}return{isExact:n===r,path:t,url:"/"===n&&""===r?"/":r,score:a,params:o}}}}function et(t,n,e){var r,o=[],a=K(Array.isArray(n)?[].concat(n):[n]);try{for(a.s();!(r=a.n()).done;){var i=nt(r.value,e).parse(t);i&&o.push(i)}}catch(t){a.e(t)}finally{a.f()}return o.length?o.sort((function(t,n){return function(t,n){for(var e=t.length,r=n.length,o=Math.min(e,r),a=0;a<o;a++){var i=n[a]-t[a];if(0!==i)return i}return e===r?0:e>r?-1:1}(t.score,n.score)}))[0]:null}function rt(){return n.useContext(q).location}function ot(t){var e=t.history,o=t.children,a=void 0===o?null:o,i=n.useState(t.history.location),u=i[0],c=i[1],s=n.useRef(null),l=n.useRef(null),f=n.useRef(!1);null===l.current&&(l.current=e.listen((function(t){s.current=t.location}))),n.useLayoutEffect((function(){return f.current=!0,l.current&&l.current(),l.current=e.listen((function(t){f.current&&c(t.location)})),s.current&&c(s.current),function(){l.current&&(f.current=!1,l.current(),l.current=null,s.current=null)}}),[]);var h=n.useMemo((function(){return{history:e,location:u,match:{isExact:"/"===u.pathname,params:{},path:"/",score:[],url:"/"}}}),[u]);return r.jsx(q.Provider,{value:h,children:a})}function at(t){var e=n.useRef(null),r=n.useRef(!1),o=t.onMount,a=t.onUpdate,i=t.onUnmount;return n.useLayoutEffect((function(){r.current?a&&(e.current?a(e.current):a()):(r.current=!0,o&&o()),e.current=t})),n.useLayoutEffect((function(){return function(){i&&i()}}),[]),null}var it=["state"];var ut=["wrappedComponentRef"];var ct=["to","replace","component","onClick","target"];function st(t){var e=t.to,r=t.replace;t.component;var o,u,c=t.onClick,s=t.target,l=p(t,ct),f=t.tag||"a",h=n.useContext(q),d=h.history,v="function"==typeof e?e(h.location):e;if("string"==typeof v)u=x(v);else{var m=v.pathname,y=v.hash,g=v.search;u={pathname:m,hash:y,search:g},o=v.state}var w=i({href:d.createHref(u),onClick:function(t){try{c&&c(t)}catch(n){throw t.preventDefault(),n}if(!t.defaultPrevented&&0===t.button&&function(t){return!t||"_self"===t}(s)&&!function(t){return t.metaKey||t.altKey||t.ctrlKey||t.shiftKey}(t)){var n=b(h.location)===b(u),e=r||n?d.replace:d.push;t.preventDefault(),e(u,o)}}},l);return a.default.createElement(f,w)}var lt=["to","isActive","exact","strict","sensitive","className","activeClassName"];function ft(t,n){if(!t)return t;var e=n.length;if(e){for(var r=t,o=0;o<e&&r;++o)r=r[n[o]];return r}}var ht=function(t){var n=function(n){var e,r=ft(n,["router"]);if(null===(e=r)||"object"!=typeof e||!ft(e,["location"])||!ft(e,["action"]))throw new Error("Could not find router reducer in "+t+' store, it must be mounted under "router"');return r};return{getHash:function(t){return ft(n(t),["location","hash"])},getAction:function(t){return ft(n(t),["action"])},getSearch:function(t){return ft(n(t),["location","search"])},getRouter:n,getLocation:function(t){return ft(n(t),["location"])}}},pt=["store"],dt=n.reduxAdapter.connect;function vt(t){var e,o=t.store,a=t.history,i=t.onLocationChanged,u=t.omitRouter,c=t.children,s=t.storeType,l=ht(s).getLocation,f=n.useRef(o.subscribe((function(){var t=l(o.getState()),n=t.pathname,e=t.search,r=t.hash,i=t.state,u=a.location,c=u.pathname,s=u.search,f=u.hash,h=u.state;"PUSH"!==a.action||c===n&&s===e&&f===r&&h===i||a.push({pathname:n,search:e,hash:r},i)}))),h=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=t.location,r=t.action;i(e,r,n)},p=n.useRef(a.listen(h));return n.useLayoutEffect((function(){return function(){p.current&&p.current(),f.current&&f.current()}}),[]),t.noInitialPop||h({location:a.location,action:a.action},!0),u?r.jsx(r.Fragment,{children:c}):(e="function"==typeof c?c():c,r.jsx(ot,{history:a,children:e}))}function mt(t){var n=function(t){return{onLocationChanged:function(n,e,r){return t(function(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:u.LOCATION_CHANGE,payload:{location:t,action:n,isFirstRendering:e}}}(n,e,r))}}},o=a.default.memo(vt);if("InulaXCompat"===t)return dt(null,n)((function(n){var e=n.store,a=p(n,pt);return r.jsx(o,i({store:e,storeType:t},a))}));if("Redux"===t)return e.connect(null,n)((function(n){var a=n.context||e.ReactReduxContext;return r.jsx(a.Consumer,{children:function(e){var a=e.store;return r.jsx(o,i({store:a,storeType:t},n))}})}));throw new Error("Invalid store type")}var yt=function(t){var n={location:h(t.location),action:t.action};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.type,o=e.payload;if(r===u.LOCATION_CHANGE){var a=o.location,c=o.action;return o.isFirstRendering?t:i({},t,{location:h(a),action:c})}return t}},gt=mt("Redux"),wt=mt("InulaXCompat");t.BrowserRouter=function(t){var e=n.useRef();return null!==e.current&&void 0!==e.current||(e.current=_({basename:t.basename,forceRefresh:t.forceRefresh,getUserConfirmation:t.getUserConfirmation})),r.jsx(ot,{history:e.current,children:t.children})},t.ConnectedHRouter=wt,t.ConnectedRouter=gt,t.HashRouter=function(t){var e=n.useRef();return null!==e.current&&void 0!==e.current||(e.current=$({basename:t.basename,getUserConfirmation:t.getUserConfirmation,hashType:t.hashType})),r.jsx(ot,{history:e.current,children:t.children})},t.Link=st,t.NavLink=function(t){var e=t.to,o=t.isActive,a=t.exact,u=t.strict,c=t.sensitive,s=t.className,l=t.activeClassName,f=p(t,lt),h=n.useContext(q),d="function"==typeof e?e(h.location):e,v=("string"==typeof d?x(d):d).pathname,m=v?et(h.location.pathname,v,{exact:a,strictMode:u,caseSensitive:c}):null,y=!!(o?o(m,h.location):m),g="function"==typeof s?s(y):s;y&&(g=[l,g].filter(Boolean).join(" "));var w=i({className:g,"aria-current":y?"page":void 0},f);return r.jsx(st,i({to:e},w))},t.Prompt=function(t){var e=n.useContext(q),o=t.message,a=t.when,i=void 0===a||a;if("function"==typeof i&&!1===i(e.location)||!i)return null;var u=e.history.block,c=n.useRef(null);return r.jsx(at,{onMount:function(){c.current=o?u(o):null},onUpdate:function(t){t&&t.data!==o&&(c.current&&c.current(),c.current=o?u(o):null)},onUnmount:function(){c.current&&c.current(),c.current=null},data:o})},t.Redirect=function(t){var e=t.to,o=t.push,a=void 0!==o&&o,u=t.computed,c=n.useContext(q).history,s=a?c.push:c.replace,l=function(){if(u){if("string"==typeof e)return x(nt(e).compile(u.params));var t=nt(e.pathname?S(e.pathname):"/").compile(u.params);return i({},e,{pathname:t})}return"string"==typeof e?x(e):e}(),f=l.state,h=p(l,it);return r.jsx(at,{onMount:function(){s(h,f)},onUpdate:function(t){R(null==t?void 0:t.data,h)||s(h,f)},data:h})},t.Route=function(t){var e=n.useContext(q),o=t.computed,a=t.location,u=t.path,c=t.component,s=t.render,l=t.strict,f=t.sensitive,h=t.exact,p=t.children,d=a||e.location,v=i({},e,{location:d,match:o||(u?et(d.pathname,u,{strictMode:l,caseSensitive:f,exact:h}):e.match)});return Array.isArray(p)&&0===n.Children.count(p)&&(p=null),r.jsx(q.Provider,{value:v,children:v.match?p?"function"==typeof p?p(v):p:c?n.createElement(c,v):s?s(v):null:"function"==typeof p?p(v):null})},t.Router=ot,t.Switch=function(t){var e=n.useContext(q),r=t.location||e.location,o=null,a=null;return n.Children.forEach(t.children,(function(t){if(null===a&&n.isValidElement(t)){o=t;var i=t.props,u=i.path||i.from;a=u?et(r.pathname,u,{strictMode:i.strict,caseSensitive:i.sensitive,exact:i.exact}):e.match}})),a&&o?n.cloneElement(o,{location:r,computed:a}):null},t.__RouterContext=q,t.connectRouter=yt,t.createBrowserHistory=_,t.createHashHistory=$,t.generatePath=function(t,n){return nt(t).compile(n)},t.go=f,t.matchPath=et,t.push=s,t.replace=l,t.routerMiddleware=function(t){return function(n){return function(n){return function(e){if(e.type!==u.CALL_HISTORY_METHOD)return n(e);var r,o=e.payload,a=o.method,i=o.args;a in t&&(r=t)[a].apply(r,i)}}}},t.useHistory=function(){return n.useContext(q).history},t.useLocation=rt,t.useParams=function(){var t=n.useContext(q).match;return t?t.params:{}},t.useRouteMatch=function(t){var e=rt().pathname,r=n.useContext(q).match;return t?et(e,t):r},t.withRouter=function(t){return function(e){var o=e.wrappedComponentRef,a=p(e,ut),u=n.useContext(q);return r.jsx(t,i({},a,u,{ref:o}))}},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=connectRouter.min.js.map
