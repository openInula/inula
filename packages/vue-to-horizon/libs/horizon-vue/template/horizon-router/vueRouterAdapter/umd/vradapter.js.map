{"version":3,"file":"vradapter.js","sources":["../../src/history/dom.ts","../../src/history/types.ts","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/extends.js","../../src/history/utils.ts","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/createClass.js","../../src/history/transitionManager.ts","../../src/history/waring.ts","../../src/history/baseHistory.ts","../../src/history/browerHistory.ts","../../src/vue-router-adapter/utils.ts","../../src/vue-router-adapter/vueHistory.ts","../../src/vue-router-adapter/const.ts","../../src/vue-router-adapter/RouterContext.ts","../../src/matcher/types.ts","../../src/matcher/utils.ts","../../src/matcher/lexer.ts","../../src/matcher/parser.ts","../../src/matcher/matcher.ts","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../src/vue-router-adapter/routerError.ts","../../src/vue-router-adapter/hooks.ts","../../src/vue-router-adapter/RouterLink.tsx","../../src/vue-router-adapter/RouterView.tsx","../../src/vue-router-adapter/Router.ts","../../src/vue-router-adapter/RouterProvider.tsx","../../src/vue-router-adapter/componentGuards.ts"],"sourcesContent":["export function isBrowser(): boolean {\r\n  return typeof window !== 'undefined' && window.document && typeof window.document.createElement === 'function';\r\n}\r\n\r\nexport function getDefaultConfirmation(message: string, callBack: (result: boolean) => void) {\r\n  callBack(window.confirm(message));\r\n}\r\n\r\n// 判断浏览器是否支持pushState方法，pushState是browserHistory实现的基础\r\nexport function isSupportHistory(): boolean {\r\n  return isBrowser() && window.history && 'pushState' in window.history;\r\n}\r\n\r\n// 判断浏览器是否支持PopState事件\r\nexport function isSupportsPopState(): boolean {\r\n  return window.navigator.userAgent.indexOf('Trident') === -1;\r\n}\r\n","export type BaseOption = {\r\n  basename?: string;\r\n  getUserConfirmation?: ConfirmationFunc;\r\n};\r\n\r\nexport interface HistoryProps<T = unknown> {\r\n  readonly action: Action;\r\n\r\n  readonly location: Location<T>;\r\n\r\n  length: number;\r\n}\r\n\r\nexport interface AgnosticHistory<T = unknown> extends HistoryProps<T> {\r\n  createHref(path: Partial<Path>): string;\r\n\r\n  push(to: To, state?: T): void;\r\n\r\n  replace(to: To, state?: T): void;\r\n\r\n  listen(listener: CommonListener<T>): () => void;\r\n\r\n  // add listener for listen pop action\r\n  addListener(listener: Listener<T>): () => void;\r\n\r\n  // cancel all pop listeners\r\n  destroy(): void;\r\n\r\n  block(prompt: Prompt<T>): () => void;\r\n\r\n  go(index: number): void;\r\n\r\n  goBack(): void;\r\n\r\n  goForward(): void;\r\n}\r\n\r\nexport type History<T = unknown> = Omit<AgnosticHistory<T>, 'addListener' | 'destroy'>;\r\n\r\nexport interface LocationHandler<T> {\r\n  locationHandler?: ((state?: Partial<HistoryState<T>>) => Location<T>) | null;\r\n  baseHandler?: (() => string) | null;\r\n}\r\n\r\nexport interface CreateLocationHandler<T> {\r\n  locationHandler?: ((basename: string) => (state?: Partial<HistoryState<T>>) => Location<T>) | null;\r\n  baseHandler?: ((basename: string) => () => string) | null;\r\n}\r\n\r\nexport enum Action {\r\n  pop = 'POP',\r\n  push = 'PUSH',\r\n  replace = 'REPLACE',\r\n}\r\n\r\nexport enum EventType {\r\n  PopState = 'popstate',\r\n  HashChange = 'hashchange',\r\n}\r\n\r\nexport enum PopDirection {\r\n  back = 'back',\r\n  forward = 'forward',\r\n  unknown = '',\r\n}\r\n\r\nexport type Path = {\r\n  pathname: string;\r\n\r\n  search: string;\r\n\r\n  hash: string;\r\n};\r\n\r\nexport type HistoryState<T> = {\r\n  state?: T;\r\n\r\n  key: string;\r\n};\r\n\r\nexport type DefaultStateType = unknown;\r\n\r\nexport type Location<T = unknown> = Path & HistoryState<T>;\r\n\r\nexport type To = string | Partial<Path>;\r\n\r\nexport interface CommonListener<T = unknown> {\r\n  (navigation: Navigation<T>): void;\r\n}\r\n\r\nexport interface ActionInfo {\r\n  type: Action;\r\n  direction: PopDirection;\r\n  delta: number;\r\n}\r\n\r\nexport interface PopListener {\r\n  (to: string, from: string, information: ActionInfo): void;\r\n}\r\n\r\nexport interface PopNavigation {\r\n  to: string;\r\n  from: string;\r\n  information: ActionInfo;\r\n}\r\n\r\nexport type Listener<S> =\r\n  | {\r\n      type: 'common';\r\n      listener: CommonListener<S>;\r\n    }\r\n  | {\r\n      type: 'pop';\r\n      listener: PopListener;\r\n    };\r\n\r\nexport interface Navigation<T = unknown> {\r\n  action: Action;\r\n\r\n  location: Location<T>;\r\n}\r\n\r\nexport type Prompt<S> = string | boolean | null | ((location: Location<S>, action: Action) => void);\r\n\r\nexport type CallBackFunc = (isJump: boolean) => void;\r\n\r\nexport type ConfirmationFunc = (message: string, callBack: CallBackFunc) => void;\r\n\r\nexport interface TManager<S> {\r\n  setPrompt(next: Prompt<S>): () => void;\r\n\r\n  confirmJumpTo(\r\n    location: Location<S>,\r\n    action: Action,\r\n    userConfirmationFunc: ConfirmationFunc,\r\n    callBack: CallBackFunc\r\n  ): void;\r\n}\r\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import { Action, Location, Path, To } from './types';\r\n\r\nexport function createPath(path: Partial<Path>): string {\r\n  const { search, hash } = path;\r\n  let pathname = path.pathname || '/';\r\n  if (search && search !== '?') {\r\n    pathname += search.startsWith('?') ? search : '?' + search;\r\n  }\r\n  if (hash && hash !== '#') {\r\n    pathname += hash.startsWith('#') ? hash : '#' + hash;\r\n  }\r\n  return pathname;\r\n}\r\n\r\nexport function parsePath(url: string): Partial<Path> {\r\n  let pathname = url || '/';\r\n  const parsedPath: Partial<Path> = {\r\n    search: '',\r\n    hash: '',\r\n  };\r\n\r\n  const hashIdx = url.indexOf('#');\r\n  if (hashIdx > -1) {\r\n    const hash = url.substring(hashIdx);\r\n    parsedPath.hash = hash === '#' ? '' : hash;\r\n    pathname = pathname.substring(0, hashIdx);\r\n  }\r\n\r\n  const searchIdx = url.indexOf('?');\r\n  if (searchIdx > -1) {\r\n    const search = url.substring(searchIdx);\r\n    parsedPath.search = search === '?' ? '' : search;\r\n    pathname = pathname.substring(0, searchIdx);\r\n  }\r\n  parsedPath.pathname = pathname;\r\n  return parsedPath;\r\n}\r\n\r\nexport function createLocation<S>(current: string | Location, to: To, state?: S, key?: string): Readonly<Location<S>> {\r\n  const pathname = typeof current === 'string' ? current : current.pathname;\r\n  const urlObj = typeof to === 'string' ? parsePath(to) : to;\r\n  // 随机key长度取6\r\n  const getRandKey = genRandomKey(6);\r\n  const location = {\r\n    pathname: pathname,\r\n    search: '',\r\n    hash: '',\r\n    state: state,\r\n    key: typeof key === 'string' ? key : getRandKey(),\r\n    ...urlObj,\r\n  };\r\n  if (!location.pathname) {\r\n    location.pathname = pathname ? pathname : '/';\r\n  } else if (!location.pathname.startsWith('/')) {\r\n    location.pathname = parseRelativePath(location.pathname, pathname);\r\n  }\r\n  if (location.search && location.search[0] !== '?') {\r\n    location.search = '?' + location.search;\r\n  }\r\n  if (location.hash && location.hash[0] !== '#') {\r\n    location.hash = '#' + location.hash;\r\n  }\r\n  return location;\r\n}\r\n\r\nexport function isLocationEqual(p1: Partial<Path>, p2: Partial<Path>) {\r\n  return p1.pathname === p2.pathname && p1.search === p2.search && p1.hash === p2.hash;\r\n}\r\n\r\nexport function addHeadSlash(path: string): string {\r\n  if (path[0] === '/') {\r\n    return path;\r\n  }\r\n  return '/' + path;\r\n}\r\n\r\nexport function stripHeadSlash(path: string): string {\r\n  if (path[0] === '/') {\r\n    return path.substring(1);\r\n  }\r\n  return path;\r\n}\r\n\r\nexport function normalizeSlash(path: string): string {\r\n  const tempPath = addHeadSlash(path);\r\n  if (tempPath[tempPath.length - 1] === '/') {\r\n    return tempPath.substring(0, tempPath.length - 1);\r\n  }\r\n  return tempPath;\r\n}\r\n\r\nexport function hasBasename(path: string, prefix: string): boolean {\r\n  return (\r\n    path.toLowerCase().indexOf(prefix.toLowerCase()) === 0 && ['/', '?', '#', ''].includes(path.charAt(prefix.length))\r\n  );\r\n}\r\n\r\nexport function stripBasename(path: string, prefix: string): string {\r\n  return hasBasename(path, prefix) ? path.substring(prefix.length) : path;\r\n}\r\n\r\n// 使用随机生成的Key记录被访问过的URL，当Block被被触发时利用delta值跳转到之前的页面\r\nexport function createMemoryRecord<T, S>(initVal: S, fn: (arg: S) => T) {\r\n  let visitedRecord: T[] = [fn(initVal)];\r\n\r\n  function getDelta(to: S, from: S): number {\r\n    let toIdx = visitedRecord.lastIndexOf(fn(to));\r\n    if (toIdx === -1) {\r\n      toIdx = 0;\r\n    }\r\n    let fromIdx = visitedRecord.lastIndexOf(fn(from));\r\n    if (fromIdx === -1) {\r\n      fromIdx = 0;\r\n    }\r\n    return toIdx - fromIdx;\r\n  }\r\n\r\n  function addRecord(current: S, newRecord: S, action: Action) {\r\n    const curVal = fn(current);\r\n    const NewVal = fn(newRecord);\r\n    if (action === Action.push) {\r\n      const prevIdx = visitedRecord.lastIndexOf(curVal);\r\n      const newVisitedRecord = visitedRecord.slice(0, prevIdx + 1);\r\n      newVisitedRecord.push(NewVal);\r\n      visitedRecord = newVisitedRecord;\r\n    }\r\n    if (action === Action.replace) {\r\n      const prevIdx = visitedRecord.lastIndexOf(curVal);\r\n      if (prevIdx !== -1) {\r\n        visitedRecord[prevIdx] = NewVal;\r\n      }\r\n    }\r\n  }\r\n\r\n  return { getDelta, addRecord };\r\n}\r\n\r\nfunction genRandomKey(length: number): () => string {\r\n  const end = length + 2;\r\n  return () => {\r\n    return Math.random().toString(18).substring(2, end);\r\n  };\r\n}\r\n\r\nexport function parseRelativePath(to: string, from: string) {\r\n  if (to.startsWith('/')) {\r\n    return to;\r\n  }\r\n  const fromParts = from.split('/');\r\n  const toParts = to.split('/');\r\n  const lastToPart = toParts[toParts.length - 1];\r\n  if (lastToPart === '..' || lastToPart === '.') {\r\n    toParts.push('');\r\n  }\r\n  let index = fromParts.length - 1;\r\n  let toIndex = 0;\r\n  let urlPart: string;\r\n\r\n  while (toIndex < toParts.length) {\r\n    urlPart = toParts[toIndex];\r\n    if (urlPart === '.') {\r\n      continue;\r\n    }\r\n    if (urlPart === '..') {\r\n      if (index > 1) {\r\n        index--;\r\n      }\r\n      toIndex++;\r\n    } else {\r\n      break;\r\n    }\r\n  }\r\n  return fromParts.slice(0, index).join('/') + '/' + toParts.slice(toIndex).join('/');\r\n}\r\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","import type { Action, CallBackFunc, ConfirmationFunc, Location, Prompt, TManager } from './types';\r\n\r\nclass TransitionManager<S> implements TManager<S> {\r\n  private prompt: Prompt<S>;\r\n\r\n  constructor() {\r\n    this.prompt = null;\r\n  }\r\n\r\n  public setPrompt(prompt: Prompt<S>): () => void {\r\n    this.prompt = prompt;\r\n\r\n    // 清除Prompt\r\n    return () => {\r\n      if (this.prompt === prompt) {\r\n        this.prompt = null;\r\n      }\r\n    };\r\n  }\r\n\r\n  public confirmJumpTo(\r\n    location: Location<S>,\r\n    action: Action,\r\n    userConfirmationFunc: ConfirmationFunc,\r\n    callBack: CallBackFunc\r\n  ) {\r\n    if (this.prompt !== null) {\r\n      const result = typeof this.prompt === 'function' ? this.prompt(location, action) : this.prompt;\r\n      if (typeof result === 'string') {\r\n        typeof userConfirmationFunc === 'function' ? userConfirmationFunc(result, callBack) : callBack(true);\r\n      } else {\r\n        callBack(result !== false);\r\n      }\r\n    } else {\r\n      callBack(true);\r\n    }\r\n  }\r\n}\r\n\r\nexport default TransitionManager;\r\n","function warning(condition: any, message: string) {\r\n  if (condition) {\r\n    if (console && typeof console.warn === 'function') {\r\n      console.warn(message);\r\n    }\r\n  }\r\n}\r\n\r\nexport default warning;","import { Action, EventType, HistoryProps, Listener, Navigation, PopDirection, PopNavigation, Prompt } from './types';\r\nimport transitionManager from './transitionManager';\r\nimport { isSupportsPopState } from './dom';\r\nimport { createPath } from './utils';\r\n\r\ntype Trigger<S> =\r\n  | {\r\n      type: 'common';\r\n      trigger: (arg: Navigation<S>) => void;\r\n    }\r\n  | {\r\n      type: 'pop';\r\n      trigger: (arg: PopNavigation) => void;\r\n    };\r\n\r\n// 抽取BrowserHistory和HashHistory中相同的方法\r\nexport function getBaseHistory<S>(\r\n  type: 'browser' | 'hash' = 'browser',\r\n  transitionManager: transitionManager<S>,\r\n  popActionListener: (event: PopStateEvent | HashChangeEvent) => void\r\n) {\r\n  let listenerCount = 0;\r\n  const supportPopState = isSupportsPopState();\r\n  let listeners: Trigger<S>[] = [];\r\n  const unListeners: (() => void)[] = [];\r\n  const browserHistory = window.history;\r\n\r\n  // 标记是否暂停触发type为pop类型的listener\r\n  let pauseTrigger = false;\r\n\r\n  function go(step: number, triggerListener = true) {\r\n    if (triggerListener) {\r\n      pauseTrigger = true;\r\n    }\r\n    browserHistory.go(step);\r\n  }\r\n\r\n  function setupListener(count: number | null) {\r\n    if (count === null) {\r\n      listenerCount = 0;\r\n    } else {\r\n      listenerCount += count;\r\n    }\r\n    if (listenerCount === 1 && count === 1) {\r\n      if (type === 'browser' && supportPopState) {\r\n        addEventListener(EventType.PopState, popActionListener);\r\n      } else {\r\n        addEventListener(EventType.HashChange, popActionListener);\r\n      }\r\n    } else if (listenerCount === 0) {\r\n      if (type === 'browser' && supportPopState) {\r\n        removeEventListener(EventType.PopState, popActionListener);\r\n      } else {\r\n        removeEventListener(EventType.HashChange, popActionListener);\r\n      }\r\n    }\r\n  }\r\n\r\n  function addListener(listener: Listener<S>): () => void {\r\n    let isActive = true;\r\n    const wrapper = (args: Navigation<S> | PopNavigation) => {\r\n      if (isActive) {\r\n        if (listener.type === 'common' && 'action' in args) {\r\n          listener.listener(args);\r\n        } else if (listener.type === 'pop' && 'to' in args) {\r\n          listener.listener(args.to, args.from, args.information);\r\n        }\r\n      }\r\n    };\r\n    const trigger: Trigger<S> = { type: listener.type, trigger: wrapper };\r\n    listeners.push(trigger);\r\n    setupListener(1);\r\n\r\n    const cancelListener = () => {\r\n      isActive = false;\r\n      setupListener(-1);\r\n      listeners = listeners.filter(listener => listener !== trigger);\r\n    };\r\n\r\n    unListeners.push(cancelListener);\r\n    return cancelListener;\r\n  }\r\n\r\n  function destroy() {\r\n    for (const unListen of unListeners) {\r\n      unListen();\r\n    }\r\n    unListeners.length = 0;\r\n    setupListener(null);\r\n  }\r\n\r\n  let isBlocked = false;\r\n\r\n  function block(prompt: Prompt<S> = false): () => void {\r\n    const unblock = transitionManager.setPrompt(prompt);\r\n    if (!isBlocked) {\r\n      setupListener(1);\r\n      isBlocked = true;\r\n    }\r\n    return () => {\r\n      if (isBlocked) {\r\n        isBlocked = false;\r\n        setupListener(-1);\r\n      }\r\n      unblock();\r\n    };\r\n  }\r\n\r\n  function getUpdateStateFunc(historyProps: HistoryProps<S>) {\r\n    return function (nextState: Navigation<S> | undefined) {\r\n      const originPath = createPath(historyProps.location);\r\n      if (nextState) {\r\n        Object.assign(historyProps, nextState);\r\n      }\r\n      const delta = browserHistory.length - historyProps.length;\r\n      historyProps.length = browserHistory.length;\r\n      // 避免location引用相同时setState不触发\r\n      const location = Object.assign({}, historyProps.location);\r\n      const commonArgs = { location: location, action: historyProps.action };\r\n      const popArgs: PopNavigation = {\r\n        to: createPath(location),\r\n        from: originPath,\r\n        information: {\r\n          delta: delta,\r\n          direction: delta > 0 ? PopDirection.forward : PopDirection.back,\r\n          type: Action.pop,\r\n        },\r\n      };\r\n      for (let i = 0; i < listeners.length && !pauseTrigger; i++) {\r\n        const listener = listeners[i];\r\n        if (listener.type === 'common') {\r\n          listener.trigger(commonArgs);\r\n        } else if (listener.type === 'pop' && historyProps.action === Action.pop) {\r\n          // vue history listener only trigger when action is pop\r\n          listener.trigger(popArgs);\r\n        }\r\n      }\r\n      pauseTrigger = false;\r\n    };\r\n  }\r\n\r\n  return { go, addListener, block, destroy, getUpdateStateFunc };\r\n}\r\n","import { getDefaultConfirmation, isSupportHistory, isSupportsPopState } from './dom';\r\nimport {\r\n  Action,\r\n  AgnosticHistory,\r\n  BaseOption,\r\n  CommonListener,\r\n  DefaultStateType,\r\n  EventType,\r\n  History,\r\n  HistoryState,\r\n  Listener,\r\n  Location,\r\n  LocationHandler,\r\n  Path,\r\n  To,\r\n} from './types';\r\nimport { createLocation, createMemoryRecord, createPath, normalizeSlash, stripBasename } from './utils';\r\nimport TransitionManager from './transitionManager';\r\n\r\nimport warning from './waring';\r\nimport { getBaseHistory } from './baseHistory';\r\n\r\nexport type BrowserHistoryOption = {\r\n  /**\r\n   * forceRefresh为True时跳转时会强制刷新页面\r\n   */\r\n  forceRefresh?: boolean;\r\n} & BaseOption;\r\n\r\nexport function createBrowserHistory<S = DefaultStateType>(options: BrowserHistoryOption): History<S>;\r\n/**\r\n * @internal\r\n * @desc this override signature only for internal usage\r\n */\r\nexport function createBrowserHistory<S = DefaultStateType>(\r\n  options: LocationHandler<S> & BrowserHistoryOption\r\n): AgnosticHistory<S>;\r\nexport function createBrowserHistory<S = DefaultStateType>(\r\n  options: LocationHandler<S> & BrowserHistoryOption = {}\r\n): AgnosticHistory<S> {\r\n  const supportHistory = isSupportHistory();\r\n  const isSupportPopState = isSupportsPopState();\r\n  const browserHistory = window.history;\r\n  const { forceRefresh = false, getUserConfirmation = getDefaultConfirmation } = options;\r\n\r\n  const basename = options.basename ? normalizeSlash(options.basename) : '';\r\n\r\n  const initLocation = getLocation(getHistoryState());\r\n\r\n  const recordOperator = createMemoryRecord<string, Location<S>>(initLocation, l => l.key);\r\n\r\n  const transitionManager = new TransitionManager<S>();\r\n\r\n  const { go, addListener, block, destroy, getUpdateStateFunc } = getBaseHistory<S>(\r\n    'browser',\r\n    transitionManager,\r\n    handlePop\r\n  );\r\n\r\n  const listen = (listener: CommonListener<S>) => {\r\n    const trigger: Listener<S> = { type: 'common', listener: listener };\r\n    return addListener(trigger);\r\n  };\r\n\r\n  const history: AgnosticHistory<S> = {\r\n    action: Action.pop,\r\n    length: browserHistory.length,\r\n    location: initLocation,\r\n    go,\r\n    goBack: () => go(-1),\r\n    goForward: () => go(-1),\r\n    listen,\r\n    addListener,\r\n    block,\r\n    push,\r\n    replace,\r\n    destroy,\r\n    createHref,\r\n  };\r\n\r\n  const updateState = getUpdateStateFunc(history);\r\n\r\n  function getHistoryState() {\r\n    return supportHistory ? window.history.state : {};\r\n  }\r\n\r\n  function getLocation(historyState: Partial<HistoryState<S>>) {\r\n    const { search, hash } = window.location;\r\n    const { key, state } = historyState || {};\r\n    let pathname = window.location.pathname;\r\n    pathname = basename ? stripBasename(pathname, basename) : pathname;\r\n\r\n    return createLocation<S>('', { pathname, search, hash }, state, key);\r\n  }\r\n\r\n  // 拦截页面POP事件后，防止返回到的页面被重复拦截\r\n  let forceJump = false;\r\n\r\n  function handlePopState(location: Location<S>) {\r\n    if (forceJump) {\r\n      forceJump = false;\r\n      updateState(undefined);\r\n    } else {\r\n      const action = Action.pop;\r\n\r\n      const callback = (isJump: boolean) => {\r\n        if (isJump) {\r\n          // 执行跳转行为\r\n          updateState({ action: action, location: location });\r\n        } else {\r\n          revertPopState(location, history.location);\r\n        }\r\n      };\r\n\r\n      transitionManager.confirmJumpTo(location, action, getUserConfirmation, callback);\r\n    }\r\n  }\r\n\r\n  const isEventPopState = (event: Event): event is PopStateEvent => {\r\n    return event.type === EventType.PopState;\r\n  };\r\n\r\n  function handlePop(event: PopStateEvent | HashChangeEvent) {\r\n    const historyState = isSupportPopState && isEventPopState(event) ? event.state : getHistoryState();\r\n    const handler = options.locationHandler ? options.locationHandler : getLocation;\r\n    handlePopState(handler(historyState));\r\n  }\r\n\r\n  // 取消页面跳转并恢复到跳转前的页面\r\n  function revertPopState(from: Location<S>, to: Location<S>) {\r\n    const delta = recordOperator.getDelta(to, from);\r\n    if (delta !== 0) {\r\n      go(delta);\r\n      forceJump = true;\r\n    }\r\n  }\r\n\r\n  function createHref(path: Partial<Path>) {\r\n    return (options.baseHandler ? options.baseHandler() : basename) + createPath(path);\r\n  }\r\n\r\n  function push(to: To, state?: S) {\r\n    const action = Action.push;\r\n    const location = createLocation<S>(history.location, to, state, undefined);\r\n\r\n    transitionManager.confirmJumpTo(location, action, getUserConfirmation, isJump => {\r\n      if (!isJump) {\r\n        return;\r\n      }\r\n      const href = createHref(location);\r\n      const { key, state } = location;\r\n\r\n      if (supportHistory) {\r\n        if (forceRefresh) {\r\n          window.location.href = href;\r\n        } else {\r\n          browserHistory.pushState({ key: key, state: state }, '', href);\r\n          recordOperator.addRecord(history.location, location, action);\r\n          updateState({ action, location });\r\n        }\r\n      } else {\r\n        warning(state !== undefined, 'Browser history cannot push state in browsers that do not support HTML5 history');\r\n        window.location.href = href;\r\n      }\r\n    });\r\n  }\r\n\r\n  function replace(to: To, state?: S) {\r\n    const action = Action.replace;\r\n    const location = createLocation<S>(history.location, to, state, undefined);\r\n\r\n    transitionManager.confirmJumpTo(location, action, getUserConfirmation, isJump => {\r\n      if (!isJump) {\r\n        return;\r\n      }\r\n      const href = createHref(location);\r\n      const { key, state } = location;\r\n      if (supportHistory) {\r\n        if (forceRefresh) {\r\n          window.location.replace(href);\r\n        } else {\r\n          browserHistory.replaceState({ key: key, state: state }, '', href);\r\n          recordOperator.addRecord(history.location, location, action);\r\n          updateState({ action, location });\r\n        }\r\n      } else {\r\n        warning(state !== undefined, 'Browser history cannot push state in browsers that do not support HTML5 history');\r\n        window.location.replace(href);\r\n      }\r\n    });\r\n  }\r\n\r\n  return history;\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport type { HistoryLocation } from './vueHistory';\r\nimport { normalizeSlash, parseRelativePath } from '../history/utils';\r\nimport type { LocationQuery, RouteLocation, RouteLocationRaw } from './types';\r\n\r\nexport function normalizeBase(base?: string): string {\r\n  if (!base) {\r\n    if (typeof document !== 'undefined') {\r\n      const baseEl = document.querySelector('base');\r\n      base = (baseEl && baseEl.getAttribute('href')) || '/';\r\n      base = base.replace(/^\\w+:\\/\\/[^\\/]+/, '');\r\n    } else {\r\n      base = '/';\r\n    }\r\n  }\r\n  if (base[0] !== '/' && base[0] !== '#') {\r\n    base = `/${base}`;\r\n  }\r\n  return normalizeSlash(base);\r\n}\r\n\r\nconst BEFORE_HASH_RE = /^[^#]+#/;\r\n\r\nexport function createHrefHandler(base: string): (location: HistoryLocation) => string {\r\n  return (location: HistoryLocation) => base.replace(BEFORE_HASH_RE, '#') + location;\r\n}\r\n\r\nexport interface NormalizedLocation {\r\n  path: string;\r\n  fullPath: string;\r\n  hash: string;\r\n  query: LocationQuery;\r\n}\r\n\r\nexport function parseURL(location: string, currentLocation: string = '/'): NormalizedLocation {\r\n  let path: string | undefined,\r\n    query: LocationQuery = {},\r\n    searchString = '',\r\n    hash = '';\r\n\r\n  // Could use URL and URLSearchParams but IE 11 doesn't support it\r\n  // TODO: move to new URL()\r\n  const hashPos = location.indexOf('#');\r\n  let searchPos = location.indexOf('?');\r\n  // the hash appears before the search, so it's not part of the search string\r\n  if (hashPos < searchPos && hashPos >= 0) {\r\n    searchPos = -1;\r\n  }\r\n\r\n  if (searchPos > -1) {\r\n    path = location.slice(0, searchPos);\r\n    searchString = location.slice(searchPos + 1, hashPos > -1 ? hashPos : location.length);\r\n\r\n    query = parseQuery(searchString);\r\n  }\r\n\r\n  if (hashPos > -1) {\r\n    path = path || location.slice(0, hashPos);\r\n    // keep the # character\r\n    hash = location.slice(hashPos, location.length);\r\n  }\r\n\r\n  // no search and no query\r\n  path = parseRelativePath(path != null ? path : location, currentLocation);\r\n  // empty path means a relative query or hash `?foo=f`, `#thing`\r\n\r\n  return {\r\n    fullPath: path + (searchString && '?') + searchString + hash,\r\n    path,\r\n    query,\r\n    hash: decode(hash),\r\n  };\r\n}\r\n\r\nexport function stringifyUrl(location: Partial<Omit<NormalizedLocation, 'fullPath'>>): string {\r\n  const query: string = location.query ? stringifyQuery(location.query) : '';\r\n  return location.path + (query && '?') + query + (location.hash || '');\r\n}\r\n\r\nfunction stringifyQuery(query: LocationQuery): string {\r\n  const urlParams = new URLSearchParams();\r\n  const keys = Object.keys(query);\r\n  for (const key of keys) {\r\n    const value = query[key];\r\n    if (Array.isArray(value)) {\r\n      value.forEach(v => {\r\n        if (v) {\r\n          urlParams.append(key, v);\r\n        }\r\n      });\r\n    } else if (value !== undefined && value !== null) {\r\n      urlParams.append(key, value.toString());\r\n    }\r\n  }\r\n  return urlParams.toString();\r\n}\r\n\r\nexport function normalizeQuery(query: Record<string | number, any> | undefined): LocationQuery {\r\n  const normalizedQuery: LocationQuery = {};\r\n\r\n  for (const key in query) {\r\n    const value = query[key];\r\n    if (value !== undefined) {\r\n      normalizedQuery[key] = Array.isArray(value)\r\n        ? value.map(v => (v == null ? null : '' + v))\r\n        : value == null\r\n          ? value\r\n          : '' + value;\r\n    }\r\n  }\r\n  return normalizedQuery;\r\n}\r\n\r\nexport function locationToObject(\r\n  location: RouteLocationRaw,\r\n  currentRoute: RouteLocation\r\n): Exclude<RouteLocationRaw, string> {\r\n  return typeof location === 'string' ? parseURL(location, currentRoute.path) : { ...location };\r\n}\r\n\r\nfunction parseQuery(queryString: string): LocationQuery {\r\n  const params = new URLSearchParams(queryString);\r\n  return Object.fromEntries(params.entries());\r\n}\r\n\r\nfunction decode(text: string | number): string {\r\n  return decodeURIComponent(String(text));\r\n}\r\n\r\nfunction shallowCompareArray<T>(a: T[], b: T[] | T): boolean {\r\n  return Array.isArray(b) ? a.length === b.length && a.every((v, i) => b[i] === v) : a.length === 1 && a[0] === b;\r\n}\r\n\r\nfunction compareParams(a: RouteLocation['params'], b: RouteLocation['params']): boolean {\r\n  const aKeys = Object.keys(a);\r\n  const bKeys = Object.keys(b);\r\n  if (aKeys.length !== bKeys.length) {\r\n    return false;\r\n  }\r\n  for (const key of aKeys) {\r\n    const aValue = a[key];\r\n    const bValue = b[key];\r\n    if (Array.isArray(aValue)) {\r\n      if (!shallowCompareArray(aValue, bValue)) {\r\n        return false;\r\n      }\r\n    } else if (Array.isArray(bValue)) {\r\n      if (!shallowCompareArray(bValue, aValue)) {\r\n        return false;\r\n      }\r\n    } else {\r\n      return a === b;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nexport function isSameRouteLocation(a: RouteLocation, b: RouteLocation): boolean {\r\n  const matchLengthA = a.matched.length - 1;\r\n  const matchLengthB = b.matched.length - 1;\r\n\r\n  return (\r\n    matchLengthA >= -1 &&\r\n    matchLengthA === matchLengthB &&\r\n    a.matched[matchLengthA] === b.matched[matchLengthB] &&\r\n    compareParams(a.params, b.params) &&\r\n    stringifyQuery(a.query) === stringifyQuery(b.query) &&\r\n    a.hash === b.hash\r\n  );\r\n}\r\n\r\nexport function createCallBackList<T>() {\r\n  let callbacks: T[] = [];\r\n\r\n  const add = (cb: T) => {\r\n    callbacks.push(cb);\r\n    return () => {\r\n      callbacks = callbacks.filter(item => item !== cb);\r\n    };\r\n  };\r\n\r\n  return {\r\n    add,\r\n    list: () => callbacks.slice(0),\r\n    clear: () => (callbacks.length = 0),\r\n  };\r\n}\r\n\r\nexport function guardEvent(e: MouseEvent) {\r\n  // don't redirect with control keys\r\n  if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) return;\r\n  // don't redirect when preventDefault called\r\n  if (e.defaultPrevented) return;\r\n  // don't redirect on right click\r\n  if (e.button !== undefined && e.button !== 0) return;\r\n  // don't redirect if `target=\"_blank\"`\r\n  // @ts-expect-error getAttribute does exist\r\n  if (e.currentTarget && e.currentTarget.getAttribute) {\r\n    // @ts-expect-error getAttribute exists\r\n    const target = e.currentTarget.getAttribute('target');\r\n    if (/\\b_blank\\b/i.test(target)) return;\r\n  }\r\n  // this may be a Weex event which doesn't have this method\r\n  if (e.preventDefault) e.preventDefault();\r\n\r\n  return true;\r\n}\r\n\r\nexport function includesParams(outer: RouteLocation['params'], inner: RouteLocation['params']): boolean {\r\n  for (const key in inner) {\r\n    const innerValue = inner[key];\r\n    const outerValue = outer[key];\r\n    if (typeof innerValue === 'string') {\r\n      if (innerValue !== outerValue) return false;\r\n    } else {\r\n      if (\r\n        !Array.isArray(outerValue) ||\r\n        outerValue.length !== innerValue.length ||\r\n        innerValue.some((value, i) => value !== outerValue[i])\r\n      )\r\n        return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { createBrowserHistory } from '../history/browerHistory';\r\nimport { createHrefHandler, normalizeBase } from './utils';\r\nimport { createLocation, createPath, stripBasename, addHeadSlash } from '../history/utils';\r\nimport type { ActionInfo, CommonListener, CreateLocationHandler } from '../history/types';\r\n\r\nexport type HistoryLocation = string;\r\nexport type HistoryState = {\r\n  [key: string | number]: HistoryStateValue;\r\n};\r\ntype HistoryStateValue = string | number | boolean | null | undefined | HistoryState | HistoryStateValue[];\r\n\r\ninterface HistoryCallback {\r\n  (to: HistoryLocation, from: HistoryLocation, information: ActionInfo): void;\r\n}\r\n\r\nexport interface VueHistory {\r\n  // props\r\n  readonly base: string;\r\n  readonly location: HistoryLocation;\r\n  readonly state: HistoryState;\r\n\r\n  // methods\r\n  push(to: HistoryLocation, data?: HistoryState): void;\r\n\r\n  replace(to: HistoryLocation, data?: HistoryState): void;\r\n\r\n  go(delta: number, triggerListeners?: boolean): void;\r\n\r\n  listen(cb: HistoryCallback): () => void;\r\n\r\n  /**\r\n   * @internal\r\n   * @desc use for internal only\r\n   * @param listener {CommonListener}\r\n   */\r\n  listenLocation(listener: CommonListener): () => void;\r\n\r\n  createHref(location: HistoryLocation): string;\r\n\r\n  destroy(): void;\r\n}\r\n\r\nfunction createVueBaseHistory(handler: CreateLocationHandler<any>, base?: string): VueHistory {\r\n  const urlBase = normalizeBase(base);\r\n  const locationHandler = handler.locationHandler ? handler.locationHandler(urlBase) : null;\r\n  const hrefHandler = handler.baseHandler ? handler.baseHandler(urlBase) : null;\r\n  const baseHistory = createBrowserHistory<any>({ basename: urlBase, locationHandler, baseHandler: hrefHandler });\r\n\r\n  const listen = (listener: HistoryCallback) => {\r\n    return baseHistory.addListener({ type: 'pop', listener: listener });\r\n  };\r\n\r\n  const listenLocation = (listener: CommonListener) => {\r\n    return baseHistory.listen(listener);\r\n  };\r\n\r\n  const push = (to: HistoryLocation, data?: HistoryState) => {\r\n    return baseHistory.push(stripBasename(to, urlBase), data);\r\n  };\r\n\r\n  const replace = (to: HistoryLocation, data?: HistoryState) => {\r\n    return baseHistory.replace(stripBasename(to, urlBase), data);\r\n  };\r\n\r\n  const historyAdapter: VueHistory = {\r\n    base: urlBase,\r\n    location: '',\r\n    state: {},\r\n    go: baseHistory.go,\r\n    push: push,\r\n    listen,\r\n    listenLocation,\r\n    replace: replace,\r\n    destroy: baseHistory.destroy,\r\n    createHref: createHrefHandler(urlBase),\r\n  };\r\n\r\n  // let location and state readonly\r\n  Object.defineProperties(historyAdapter, {\r\n    location: {\r\n      enumerable: true,\r\n      get: () => createPath(locationHandler ? locationHandler(baseHistory.location) : baseHistory.location),\r\n    },\r\n    state: {\r\n      enumerable: true,\r\n      get: () => baseHistory.location.state,\r\n    },\r\n  });\r\n\r\n  return historyAdapter;\r\n}\r\n\r\nfunction createWebHistory(base?: string): VueHistory {\r\n  return createVueBaseHistory({}, base);\r\n}\r\n\r\nfunction createWebHashHistory(base?: string): VueHistory {\r\n  base = location.host ? base || location.pathname + location.search : '';\r\n\r\n  if (!base.includes('#')) {\r\n    base += '#';\r\n  }\r\n\r\n  const getLocation = (basename: string) => () => {\r\n    const { pathname, search, hash } = window.location;\r\n    const hashPos = basename.indexOf('#');\r\n    if (hashPos > -1) {\r\n      const slicePos = hash.includes(basename.slice(hashPos)) ? basename.slice(hashPos).length : 1;\r\n      const pathFromHash = addHeadSlash(hash.slice(slicePos));\r\n      return createLocation('', pathFromHash);\r\n    }\r\n    const path = stripBasename(pathname, basename);\r\n    return createLocation('', path + search + hash);\r\n  };\r\n\r\n  const getBase = (base: string) => () => {\r\n    const hashIndex = base.indexOf('#');\r\n    if (hashIndex !== -1) {\r\n      return window.location.host && document.querySelector('base') ? base : base.slice(hashIndex);\r\n    }\r\n    return location.protocol + '//' + location.host + base;\r\n  };\r\n\r\n  const hashHandlers: CreateLocationHandler<any> = { locationHandler: getLocation, baseHandler: getBase };\r\n\r\n  return createVueBaseHistory(hashHandlers, base);\r\n}\r\n\r\nexport { createWebHistory, createWebHashHistory };\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport type { RouteLocation } from './types';\r\n\r\nexport const START_LOCATION: RouteLocation = {\r\n  path: '/',\r\n  params: {},\r\n  query: {},\r\n  hash: '',\r\n  fullPath: '/',\r\n  meta: {},\r\n  matched: [],\r\n};\r\n\r\nexport const enum ErrorTypes {\r\n  MATCHER_NOT_FOUND = 1,\r\n  NAVIGATION_GUARD_REDIRECT = 2,\r\n  NAVIGATION_ABORTED = 4,\r\n  NAVIGATION_CANCELLED = 8,\r\n  NAVIGATION_DUPLICATED = 16,\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { createContext } from '@cloudsop/horizon';\r\nimport type { NormalizedRouteRecord, RouteLocation } from './types';\r\nimport type { VueRouter } from './Router';\r\nimport { START_LOCATION } from './const';\r\n\r\nexport const RouterContext = createContext<VueRouter>(null as any);\r\n\r\nexport const RouteContext = createContext<RouteLocation>(START_LOCATION);\r\n\r\nexport const CurrentRouteRecord = createContext<NormalizedRouteRecord>(null as any);\r\n\r\n// provide match depth for <RouterView/>\r\nexport const ViewDepth = createContext<{ depth: number }>({ depth: 0 });\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { Matched, Params } from './parser';\r\n\r\nexport type Token = {\r\n  type: TokenType;\r\n  value: string;\r\n};\r\n\r\nexport enum TokenType {\r\n  Delimiter = 'delimiter',\r\n  Static = 'static',\r\n  Param = 'param',\r\n  WildCard = 'wildcard',\r\n  LBracket = '(',\r\n  RBracket = ')',\r\n  Pattern = 'pattern',\r\n}\r\n\r\nexport interface Parser<P> {\r\n  regexp: RegExp;\r\n\r\n  keys: string[];\r\n\r\n  score: number[];\r\n\r\n  parse(url: string): Matched<P> | null;\r\n\r\n  compile(params: Params<P>): string;\r\n}\r\n\r\nexport type ParserOption = {\r\n  // 是否大小写敏感\r\n  caseSensitive?: boolean;\r\n  // 是否启用严格模式\r\n  strictMode?: boolean;\r\n  // 精准匹配 兼容 React-RouterV5\r\n  exact?: boolean;\r\n};\r\n\r\ntype ClearLeading<U extends string> = U extends `/${infer R}` ? ClearLeading<R> : U;\r\ntype ClearTailing<U extends string> = U extends `${infer L}/` ? ClearTailing<L> : U;\r\n\r\ntype ParseParam<Param extends string> = Param extends `:${infer R}`\r\n  ? {\r\n      [K in R]: string;\r\n    }\r\n  : {};\r\n\r\ntype MergeParams<OneParam extends Record<string, any>, OtherParam extends Record<string, any>> = {\r\n  readonly [Key in keyof OneParam | keyof OtherParam]?: string;\r\n};\r\n\r\ntype ParseURLString<Str extends string> = Str extends `${infer Param}/${infer Rest}`\r\n  ? MergeParams<ParseParam<Param>, ParseURLString<ClearLeading<Rest>>>\r\n  : ParseParam<Str>;\r\n\r\n// 解析URL中的动态参数，以实现TypeScript提示功能\r\nexport type GetURLParams<U extends string> = ParseURLString<ClearLeading<ClearTailing<U>>>;\r\n","/**\r\n * @description 将url中的//转换为/\r\n */\r\nexport function cleanPath(path: string): string {\r\n  return path.replace(/\\/+/g, '/');\r\n}\r\n\r\nexport function scoreCompare(score1: number[], score2: number[]): number {\r\n  const score1Length = score1.length;\r\n  const score2Length = score2.length;\r\n  const end = Math.min(score1Length, score2Length);\r\n  for (let i = 0; i < end; i++) {\r\n    const delta = score2[i] - score1[i];\r\n    if (delta !== 0) {\r\n      return delta;\r\n    }\r\n  }\r\n  if (score1Length === score2Length) {\r\n    return 0;\r\n  }\r\n  return score1Length > score2Length ? -1 : 1;\r\n}\r\n\r\n// 把正则表达式的特殊符号加两个反斜杠进行转义\r\nexport function escapeStr(str: string) {\r\n  return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, '\\\\$1');\r\n}\r\n","import { Token, TokenType } from './types';\r\nimport { cleanPath } from './utils';\r\n\r\nconst validChar = /[^/:()*?$^+]/;\r\n\r\n// 对Url模板进行词法解析，解析结果为Tokens\r\nexport function lexer(path: string): Token[] {\r\n  const tokens: Token[] = [];\r\n\r\n  if (!path) {\r\n    return tokens;\r\n  }\r\n\r\n  let urlPath = cleanPath(path);\r\n  if (urlPath !== '*' && !urlPath.startsWith('/')) {\r\n    throw new Error(`Url must start with \"/\".`);\r\n  }\r\n\r\n  const getLiteral = () => {\r\n    let name = '';\r\n    while (i < urlPath.length && validChar.test(urlPath[i])) {\r\n      name += urlPath[i];\r\n      skipChar(1);\r\n    }\r\n    return name;\r\n  };\r\n\r\n  const skipChar = (step: number) => {\r\n    i += step;\r\n  };\r\n\r\n  let i = 0;\r\n  while (i < urlPath.length) {\r\n    const curChar = urlPath[i];\r\n    const prevChar = urlPath[i - 1];\r\n\r\n    if (curChar === '/') {\r\n      tokens.push({ type: TokenType.Delimiter, value: urlPath[i] });\r\n      skipChar(1);\r\n      continue;\r\n    }\r\n    // dynamic params (/:a)\r\n    if (prevChar === '/' && curChar === ':') {\r\n      skipChar(1);\r\n      tokens.push({ type: TokenType.Param, value: getLiteral() });\r\n      continue;\r\n    }\r\n    // wildCard params (/:*)\r\n    if ((prevChar === '/' || prevChar === undefined) && curChar === '*') {\r\n      tokens.push({ type: TokenType.WildCard, value: urlPath[i] });\r\n      skipChar(1);\r\n      continue;\r\n    }\r\n    // static params\r\n    if (prevChar === '/' && validChar.test(curChar)) {\r\n      tokens.push({ type: TokenType.Static, value: getLiteral() });\r\n      continue;\r\n    }\r\n    if (curChar === '(') {\r\n      tokens.push({ type: TokenType.LBracket, value: '(' });\r\n      skipChar(1);\r\n      continue;\r\n    }\r\n    if (curChar === ')') {\r\n      tokens.push({ type: TokenType.RBracket, value: ')' });\r\n      skipChar(1);\r\n      continue;\r\n    }\r\n    if (['*', '?', '$', '^', '+'].includes(curChar)) {\r\n      tokens.push({ type: TokenType.Pattern, value: curChar });\r\n      skipChar(1);\r\n      continue;\r\n    }\r\n    if (validChar.test(curChar)) {\r\n      tokens.push({ type: TokenType.Pattern, value: getLiteral() });\r\n      continue;\r\n    }\r\n    // 跳过非法字符\r\n    skipChar(1);\r\n  }\r\n\r\n  return tokens;\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { GetURLParams, Parser, ParserOption, TokenType } from './types';\r\nimport { lexer } from './lexer';\r\nimport { escapeStr, scoreCompare } from './utils';\r\n\r\n// 不同类型参数的匹配得分\r\nenum MatchScore {\r\n  // 固定参数\r\n  static = 10,\r\n  // 动态参数\r\n  param = 6,\r\n  // 通配符参数\r\n  wildcard = 3,\r\n  placeholder = -1,\r\n}\r\n\r\nexport type Params<P> = { [K in keyof P]?: P[K] };\r\n\r\n// 兼容 react v5 matched类型\r\nexport type Matched<P = any> = {\r\n  score: number[];\r\n  params: Params<P>;\r\n  path: string;\r\n  url: string;\r\n  isExact: boolean;\r\n};\r\n\r\nconst defaultOption: Required<ParserOption> = {\r\n  // url匹配时是否大小写敏感\r\n  caseSensitive: false,\r\n  // 是否严格匹配url结尾的/\r\n  strictMode: false,\r\n  // 是否完全精确匹配\r\n  exact: false,\r\n};\r\n// 正则表达式中需要转义的字符\r\nconst REGEX_CHARS_RE = /[.+*?^${}()[\\]/\\\\]/g;\r\n// 用于匹配两个//中的的值\r\nconst BASE_PARAM_PATTERN = '[^/]+';\r\n\r\nconst DefaultDelimiter = '/#?';\r\n\r\n/**\r\n * URL匹配整体流程\r\n * 1.词法解析，将URL模板解析为Token\r\n * 2.使用Token生成正则表达式\r\n * 3.利用正则表达式解析URL中参数或填充URL模板\r\n */\r\nexport function createPathParser<Str extends string>(pathname: Str, option?: ParserOption): Parser<GetURLParams<Str>>;\r\nexport function createPathParser<P = unknown>(pathname: string, option?: ParserOption): Parser<P>;\r\nexport function createPathParser<P = unknown>(pathname: string, option: ParserOption = defaultOption): Parser<P> {\r\n  const {\r\n    caseSensitive = defaultOption.caseSensitive,\r\n    strictMode = defaultOption.strictMode,\r\n    exact = defaultOption.exact,\r\n  } = option;\r\n\r\n  let pattern = '^';\r\n  const keys: string[] = [];\r\n  const scores: number[] = [];\r\n\r\n  const tokens = lexer(pathname);\r\n  const onlyHasWildCard = tokens.length === 1 && tokens[0].type === TokenType.WildCard;\r\n  const tokenCount = tokens.length;\r\n  const lastToken = tokens[tokenCount - 1];\r\n  let asteriskCount = 0;\r\n\r\n  /**\r\n   * 用于支持URL中的可选参数/:parma?\r\n   * @description 向前扫描到下一个分隔符/，检查其中是否有?\r\n   * @param currentIdx\r\n   */\r\n  const lookToNextDelimiter = (currentIdx: number): boolean => {\r\n    let hasOptionalParam = false;\r\n    while (currentIdx < tokens.length && tokens[currentIdx].type !== TokenType.Delimiter) {\r\n      if (tokens[currentIdx].value === '?' || tokens[currentIdx].value === '*') {\r\n        hasOptionalParam = true;\r\n      }\r\n      currentIdx++;\r\n    }\r\n    return hasOptionalParam;\r\n  };\r\n  for (let tokenIdx = 0; tokenIdx < tokenCount; tokenIdx++) {\r\n    const token = tokens[tokenIdx];\r\n    const nextToken = tokens[tokenIdx + 1];\r\n    switch (token.type) {\r\n      case TokenType.Delimiter: {\r\n        // 该分隔符后有可选参数则该分割符在匹配时是可选的\r\n        const hasOptional = lookToNextDelimiter(tokenIdx + 1);\r\n        // 该分隔符为最后一个且strictMode===false时，该分割符在匹配时是可选的\r\n        const isSlashOptional = nextToken === undefined && !strictMode;\r\n        pattern += `/${hasOptional || isSlashOptional ? '?' : ''}`;\r\n        break;\r\n      }\r\n      case TokenType.Static:\r\n        pattern += token.value.replace(REGEX_CHARS_RE, '\\\\$&');\r\n        if (nextToken && nextToken.type === TokenType.Pattern) {\r\n          pattern += `(.${nextToken.value})`;\r\n          keys.push(String(asteriskCount));\r\n          asteriskCount++;\r\n        }\r\n        scores.push(MatchScore.static);\r\n        break;\r\n      case TokenType.Param: {\r\n        // 动态参数支持形如/:param、/:param*、/:param?、/:param(\\\\d+)的形式\r\n        let paramRegexp = '';\r\n        if (nextToken) {\r\n          switch (nextToken.type) {\r\n            case TokenType.LBracket:\r\n              // 跳过当前Token和左括号\r\n              tokenIdx += 2;\r\n              while (tokens[tokenIdx].type !== TokenType.RBracket) {\r\n                paramRegexp += tokens[tokenIdx].value;\r\n                tokenIdx++;\r\n              }\r\n              paramRegexp = `(${paramRegexp})`;\r\n              break;\r\n            case TokenType.Pattern:\r\n              tokenIdx++;\r\n              paramRegexp += `(${nextToken.value === '*' ? '.*' : BASE_PARAM_PATTERN})${nextToken.value}`;\r\n              break;\r\n          }\r\n        }\r\n        pattern += paramRegexp ? `(?:${paramRegexp})` : `(${BASE_PARAM_PATTERN})`;\r\n        keys.push(token.value);\r\n        scores.push(MatchScore.param);\r\n        break;\r\n      }\r\n      case TokenType.WildCard:\r\n        keys.push(token.value);\r\n        pattern += `((?:${BASE_PARAM_PATTERN})${onlyHasWildCard ? '?' : ''}(?:/(?:${BASE_PARAM_PATTERN}))*)`;\r\n        scores.push(onlyHasWildCard ? MatchScore.wildcard : MatchScore.placeholder);\r\n        break;\r\n    }\r\n  }\r\n  const isWildCard = lastToken.type === TokenType.WildCard;\r\n\r\n  if (!isWildCard && !exact) {\r\n    if (!strictMode) {\r\n      pattern += `(?:[${escapeStr(DefaultDelimiter)}](?=$))?`;\r\n    }\r\n    if (lastToken.type !== TokenType.Delimiter) {\r\n      pattern += `(?=[${escapeStr(DefaultDelimiter)}]|$)`;\r\n    }\r\n  } else {\r\n    pattern += strictMode ? '$' : `[${escapeStr(DefaultDelimiter)}]?$`;\r\n  }\r\n\r\n  const flag = caseSensitive ? '' : 'i';\r\n  const regexp = new RegExp(pattern, flag);\r\n\r\n  /**\r\n   * @description 根据给定Pattern解析path\r\n   */\r\n  function parse(path: string): Matched<P> | null {\r\n    const reMatch = path.match(regexp);\r\n\r\n    if (!reMatch) {\r\n      return null;\r\n    }\r\n    const matchedPath = reMatch[0];\r\n    const params: Params<P> = {};\r\n    const parseScore: number[] = Array.from(scores);\r\n    for (let i = 1; i < reMatch.length; i++) {\r\n      const param = reMatch[i];\r\n      const key = keys[i - 1];\r\n      if (key === '*' && param) {\r\n        const value = param.split('/');\r\n        if (!Array.isArray(params['*'])) {\r\n          params['*'] = value;\r\n        } else {\r\n          params['*'].push(...value);\r\n        }\r\n        // 完成通配符参数解析后将placeholder替换为wildcard参数的分值\r\n        parseScore.splice(\r\n          scores.indexOf(MatchScore.placeholder),\r\n          1,\r\n          ...new Array(value.length).fill(MatchScore.wildcard)\r\n        );\r\n      } else {\r\n        params[key] = param ? param : undefined;\r\n      }\r\n    }\r\n\r\n    const isExact = path === matchedPath;\r\n    const url = path === '/' && matchedPath === '' ? '/' : matchedPath;\r\n    return { isExact: isExact, path: pathname, url: url, score: parseScore, params: params };\r\n  }\r\n\r\n  /**\r\n   * @description 使用给定参数填充pattern，得到目标URL\r\n   */\r\n  function compile(params: Params<P>): string {\r\n    let path = '';\r\n    for (const token of tokens) {\r\n      switch (token.type) {\r\n        case TokenType.Static:\r\n          path += token.value;\r\n          break;\r\n        case TokenType.Param:\r\n          if (!params[token.value]) {\r\n            throw new Error('Param is invalid.');\r\n          }\r\n          path += params[token.value];\r\n          break;\r\n        case TokenType.WildCard: {\r\n          const wildCard = params['*'];\r\n          if (wildCard instanceof Array) {\r\n            path += wildCard.join('/');\r\n          } else {\r\n            path += wildCard;\r\n          }\r\n          break;\r\n        }\r\n        case TokenType.Delimiter:\r\n          path += token.value;\r\n          break;\r\n      }\r\n    }\r\n    return path;\r\n  }\r\n\r\n  return {\r\n    regexp: regexp,\r\n    keys: keys,\r\n    score: scores,\r\n    compile,\r\n    parse,\r\n  };\r\n}\r\n\r\n/**\r\n * @description 依次使用pathname与pattern进行匹配，根据匹配分数取得分数最高结果\r\n */\r\nexport function matchPath<P = any>(\r\n  pathname: string,\r\n  pattern: string | string[],\r\n  option?: ParserOption\r\n): Matched<P> | null {\r\n  const patterns = Array.isArray(pattern) ? [...pattern] : [pattern];\r\n  const matchedResults: Matched<P>[] = [];\r\n  for (const item of patterns) {\r\n    const parser = createPathParser(item, option);\r\n    const matched = parser.parse(pathname);\r\n    if (matched) {\r\n      matchedResults.push(matched);\r\n    }\r\n  }\r\n  return !matchedResults.length ? null : matchedResults.sort((a, b) => scoreCompare(a.score, b.score))[0];\r\n}\r\n\r\nexport function generatePath<P = any>(path: string, params: Params<P>) {\r\n  const parser = createPathParser(path);\r\n  return parser.compile(params);\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { createPathParser } from './parser';\r\nimport { scoreCompare } from './utils';\r\nimport type { Parser, ParserOption } from './types';\r\n\r\ntype RouteRecordName = string | symbol;\r\n\r\ninterface AgnosticRouteRecord<T extends AgnosticRouteRecord<T>> {\r\n  path: string;\r\n  component?: unknown | undefined;\r\n  meta?: Record<string | number | symbol, unknown>;\r\n  strict?: boolean;\r\n  sensitive?: boolean;\r\n  name?: RouteRecordName;\r\n  children?: T[];\r\n}\r\n\r\nexport interface RouteBranch<T extends AgnosticRouteRecord<T>, R = T> {\r\n  path: T['path'];\r\n  score: number[];\r\n  component: T['component'];\r\n  key: string[];\r\n  regexp: RegExp;\r\n  parse: Parser<unknown>['parse'];\r\n  compile: Parser<unknown>['compile'];\r\n  parent?: RouteBranch<T, R>;\r\n  children: RouteBranch<T, R>[];\r\n  raw: R;\r\n}\r\n\r\ninterface CommonLocation {\r\n  path: string;\r\n  name?: string | symbol | null;\r\n  params: Param;\r\n}\r\n\r\ninterface MatcherOption {\r\n  strict?: boolean;\r\n  sensitive?: boolean;\r\n}\r\n\r\ntype Param = Record<string, string | string[]>;\r\n\r\nconst defaultMatcherOption: MatcherOption = {\r\n  strict: false,\r\n  sensitive: false,\r\n};\r\n\r\nfunction isRouteName(name: unknown): name is RouteRecordName {\r\n  return typeof name === 'string' || typeof name === 'undefined';\r\n}\r\n\r\nfunction getLocationParams(params: Param, keys: string[]): Param {\r\n  const newParams: Param = {};\r\n  for (const key of keys) {\r\n    if (key in params) {\r\n      newParams[key] = params[key];\r\n    }\r\n  }\r\n  return newParams;\r\n}\r\n\r\nfunction convertRecordToBranch<T extends AgnosticRouteRecord<T>, R extends AgnosticRouteRecord<T>>(\r\n  record: R,\r\n  option: ParserOption\r\n): RouteBranch<T, R> {\r\n  const parser = createPathParser(record.path, option);\r\n  return {\r\n    raw: record,\r\n    path: record.path,\r\n    score: parser.score,\r\n    parse: parser.parse,\r\n    regexp: parser.regexp,\r\n    compile: parser.compile,\r\n    component: record.component,\r\n    key: parser.keys,\r\n    children: [],\r\n  };\r\n}\r\n\r\nfunction agnosticRouteMatcher<T extends AgnosticRouteRecord<T>, R extends AgnosticRouteRecord<T> = T>(\r\n  routes: T[],\r\n  option: MatcherOption = defaultMatcherOption,\r\n  branchHandler: (item: T) => R = item => item as unknown as R\r\n) {\r\n  const branches: RouteBranch<T, R>[] = [];\r\n  const branchesMap = new Map<RouteRecordName, RouteBranch<T, R>>();\r\n\r\n  function addBranch(route: T, parent: RouteBranch<T, R> | null = null, recursive: boolean = true) {\r\n    const normalizedRecord = branchHandler(route);\r\n    const path = normalizedRecord.path!;\r\n    if (parent && !path.startsWith('/')) {\r\n      const concatSlash = parent.path.endsWith('/') ? '' : '/';\r\n      normalizedRecord.path = parent.path + (path ? concatSlash + path : '');\r\n    }\r\n    const recordParserOption = mergeDefault(\r\n      {\r\n        exact: true,\r\n        caseSensitive: option.sensitive,\r\n        strictMode: option.strict,\r\n      },\r\n      {\r\n        caseSensitive: route.sensitive,\r\n        strictMode: route.strict,\r\n      }\r\n    );\r\n    const branch = convertRecordToBranch<T, R>(normalizedRecord, recordParserOption);\r\n    if (parent) {\r\n      branch.parent = parent;\r\n      parent.children.push(branch);\r\n    }\r\n    const originalBranch = branch;\r\n    branches.push(branch);\r\n    if (branch.raw.name) {\r\n      branchesMap.set(branch.raw.name, branch);\r\n    }\r\n    if (Array.isArray(route.children) && recursive) {\r\n      for (const child of route.children) {\r\n        addBranch(child, branch);\r\n      }\r\n    }\r\n    branches.sort((a, b) => {\r\n      const score = scoreCompare(a.score, b.score);\r\n      if (score !== 0) {\r\n        return score;\r\n      }\r\n      return a.parent ? -1 : 1;\r\n    });\r\n    return originalBranch ? () => delBranch(originalBranch) : () => {};\r\n  }\r\n\r\n  function getNamedBranch(name: RouteRecordName) {\r\n    if (branchesMap.has(name)) {\r\n      return branchesMap.get(name)!.raw;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  function delBranch(branchRef: RouteRecordName | RouteBranch<T, R>) {\r\n    if (isRouteName(branchRef)) {\r\n      const branch = branchesMap.get(branchRef);\r\n      if (branch) {\r\n        branchesMap.delete(branchRef);\r\n        const branchIndex = branches.indexOf(branch);\r\n        if (branchIndex > -1) {\r\n          branches.splice(branchIndex, 1);\r\n          branch.children.forEach(b => delBranch(b));\r\n        }\r\n      }\r\n    } else {\r\n      const idx = branches.indexOf(branchRef);\r\n      if (idx > -1) {\r\n        branches.splice(idx, 1);\r\n        if (branchRef.raw.name) {\r\n          branchesMap.delete(branchRef.raw.name);\r\n        }\r\n      }\r\n      branchRef.children.forEach(b => delBranch(b));\r\n    }\r\n    branches.sort((a, b) => scoreCompare(a.score, b.score));\r\n  }\r\n\r\n  function matchPath(to: Readonly<Partial<CommonLocation>>, from: Readonly<CommonLocation>) {\r\n    let path: RouteBranch<T, R>['path'];\r\n    let branch: RouteBranch<T, R> | undefined;\r\n    let name: RouteRecordName | undefined;\r\n    let params: Param = {};\r\n\r\n    if ('name' in to && to.name) {\r\n      branch = branchesMap.get(to.name);\r\n      if (!branch) {\r\n        throw Error('route now found');\r\n      }\r\n      name = branch.raw.name;\r\n      params = getLocationParams(from.params, branch.key);\r\n      if (to.params) {\r\n        params = Object.assign(params, getLocationParams(to.params, branch.key));\r\n      }\r\n      path = branch.compile(params);\r\n    } else if (to.path != null) {\r\n      path = to.path;\r\n      for (const b of branches) {\r\n        if (b.regexp.test(path)) {\r\n          branch = b;\r\n          break;\r\n        }\r\n      }\r\n      if (branch) {\r\n        params = branch.parse(path)!.params;\r\n        name = branch.raw.name;\r\n      }\r\n    } else {\r\n      branch = from.name ? branchesMap.get(from.name) : branches.find(b => b.regexp.test(from.path));\r\n      if (!branch) {\r\n        throw Error('route now found');\r\n      }\r\n      name = branch.raw.name;\r\n      params = Object.assign({}, from.params, to.params);\r\n      path = branch.compile(params);\r\n    }\r\n    const matched: R[] = [];\r\n    let parentBranch = branch;\r\n    while (parentBranch) {\r\n      matched.push(parentBranch.raw);\r\n      parentBranch = parentBranch.parent;\r\n    }\r\n    // push is 800 times faster than unshift\r\n    matched.reverse();\r\n    if (matched.length < 1) {\r\n      console.warn(`url \"${path}\" has no matched route`);\r\n    }\r\n\r\n    return {\r\n      name,\r\n      path,\r\n      params,\r\n      matched,\r\n      meta: merge(matched),\r\n    };\r\n  }\r\n\r\n  routes.forEach(r => addBranch(r));\r\n\r\n  return {\r\n    branches,\r\n    addBranch,\r\n    delBranch,\r\n    matchPath,\r\n    getNamedBranch,\r\n  };\r\n}\r\n\r\ntype RecordMeta = Pick<AgnosticRouteRecord<any>, 'meta'>;\r\n\r\nfunction merge<T extends RecordMeta>(data: T[]) {\r\n  return data.reduce((prev, currentValue) => Object.assign(prev, currentValue.meta), {});\r\n}\r\n\r\nfunction mergeDefault<T extends { [key: string]: any }>(defaultOptions: T, partialOptions: Partial<T>): T {\r\n  const mergedOption = {} as T;\r\n  for (const key in defaultOptions) {\r\n    mergedOption[key] =\r\n      key in partialOptions && partialOptions[key] != null ? partialOptions[key]! : defaultOptions[key];\r\n  }\r\n  return mergedOption;\r\n}\r\n\r\nexport { agnosticRouteMatcher };\r\n","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { MatcherLocation, RouteLocation, type RouteLocationRaw } from './types';\r\nimport { ErrorTypes } from './const';\r\n\r\nexport interface MatcherError extends Error {\r\n  type: ErrorTypes.MATCHER_NOT_FOUND;\r\n  location: MatcherLocation;\r\n  currentLocation?: MatcherLocation;\r\n}\r\n\r\nexport interface NavigationFailure extends Error {\r\n  type: ErrorTypes.NAVIGATION_CANCELLED | ErrorTypes.NAVIGATION_ABORTED | ErrorTypes.NAVIGATION_DUPLICATED;\r\n  from: RouteLocation;\r\n  to: RouteLocation;\r\n}\r\n\r\nexport interface NavigationRedirectError extends Omit<NavigationFailure, 'to' | 'type'> {\r\n  type: ErrorTypes.NAVIGATION_GUARD_REDIRECT;\r\n  to: RouteLocationRaw;\r\n}\r\n\r\nexport type RouteError = MatcherError | NavigationFailure | NavigationRedirectError;\r\n\r\nconst NavigationFailureSymbol = Symbol('navigation failure');\r\n\r\nexport function createRouterError<T extends RouteError>(type: T['type'], params: Omit<T, 'type' | keyof Error>): T {\r\n  return Object.assign(new Error(), { type: type, [NavigationFailureSymbol]: true }, params) as unknown as T;\r\n}\r\n\r\nexport function isNavigationFailure(error: any, type: ErrorTypes) {\r\n  return (\r\n    error instanceof Error &&\r\n    NavigationFailureSymbol in error &&\r\n    (type == null || Boolean((error as unknown as NavigationFailure).type & type))\r\n  );\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { useContext, useEffect, useMemo, useRef } from '@cloudsop/horizon';\r\nimport { RouteContext, RouterContext } from './RouterContext';\r\nimport { guardEvent, includesParams, isSameRouteLocation } from './utils';\r\nimport type { RouterLinkProps } from './RouterLink';\r\nimport type { NavigationFailure } from './routerError';\r\nimport type { RouteLocation } from './types';\r\nimport type { VueRouterInternal } from './Router';\r\n\r\nfunction useRouter() {\r\n  return useContext(RouterContext);\r\n}\r\n\r\nfunction useRoute() {\r\n  return useContext(RouteContext);\r\n}\r\n\r\nfunction useLink(props: Pick<RouterLinkProps, 'to' | 'replace'>) {\r\n  const router = useContext(RouterContext);\r\n  const currentRoute = useContext(RouteContext);\r\n\r\n  const { to, replace } = props;\r\n\r\n  const route = useMemo(() => router.resolve(to), [to]);\r\n\r\n  const activeBranchIndex = useMemo<number>(() => {\r\n    const matched = route.matched;\r\n    const length = matched.length;\r\n\r\n    const targetMatched = matched[length - 1];\r\n    const currentMatched = currentRoute.matched;\r\n    if (!targetMatched || currentMatched.length === 0) {\r\n      return -1;\r\n    }\r\n    const index = currentMatched.findIndex(m => m === targetMatched);\r\n    if (index > -1) {\r\n      return index;\r\n    }\r\n    const parentRecordPath: string = matched[length - 2] ? matched[length - 2].path : '';\r\n\r\n    if (\r\n      length > 1 &&\r\n      targetMatched.path === parentRecordPath &&\r\n      currentMatched[currentMatched.length - 1].path !== parentRecordPath\r\n    ) {\r\n      return currentMatched.findIndex(m => m === matched[length - 2]);\r\n    }\r\n    return index;\r\n  }, [route, currentRoute]);\r\n\r\n  const isActive = activeBranchIndex > -1 && includesParams(currentRoute.params, route.params);\r\n  const isExactActive =\r\n    activeBranchIndex > -1 &&\r\n    activeBranchIndex === currentRoute.matched.length - 1 &&\r\n    isSameRouteLocation(currentRoute, route);\r\n\r\n  function navigate(e: MouseEvent): Promise<void | NavigationFailure> {\r\n    if (guardEvent(e)) {\r\n      return router[replace ? 'replace' : 'push'](to);\r\n    }\r\n    return Promise.resolve();\r\n  }\r\n\r\n  return {\r\n    route,\r\n    navigate,\r\n    isActive,\r\n    isExactActive,\r\n  };\r\n}\r\n\r\ninterface WatchCallback {\r\n  (newRouteLocation: RouteLocation, oldRouteLocation: RouteLocation): void;\r\n}\r\n\r\ninterface WatchConfig {\r\n  immediate: boolean;\r\n}\r\n\r\nfunction useRouteWatch(callback: WatchCallback, config?: WatchConfig): () => void {\r\n  const router = useContext(RouterContext) as VueRouterInternal;\r\n  const { immediate } = config || {};\r\n  const isMount = useRef(false);\r\n  const unListener = useRef<(() => void) | null>(null);\r\n  useEffect(() => {\r\n    if (!isMount.current) {\r\n      unListener.current = router.subscribeRouteChange((to, from) => callback(to, from));\r\n      if (immediate) {\r\n        callback(router.currentRoute, router.currentRoute);\r\n      }\r\n      isMount.current = true;\r\n    }\r\n  }, []);\r\n  return () => unListener.current && unListener.current();\r\n}\r\n\r\nexport { useRouter, useRoute, useLink, useRouteWatch };\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { InulaNode, useContext } from '@cloudsop/horizon';\r\nimport { RouterContext } from './RouterContext';\r\nimport { useLink } from './hooks';\r\n\r\nconst getLinkClass = (propClass: string | undefined, globalClass: string | undefined, defaultClass: string): string => {\r\n  return [propClass, globalClass, defaultClass].reduce((prev, curr) => {\r\n    return prev != null ? prev : curr;\r\n  }) as string;\r\n};\r\n\r\nexport interface RouterLinkProps {\r\n  to: string;\r\n  replace?: boolean;\r\n  activeClass?: string;\r\n  exactActiveClass?: string;\r\n  children?: InulaNode;\r\n\r\n  [key: string]: any;\r\n}\r\n\r\nfunction RouterLink(props: RouterLinkProps) {\r\n  const router = useContext(RouterContext);\r\n  const { to, replace, children } = props;\r\n  const link = useLink({ to, replace });\r\n  const { activeClass, exactActiveClass } = props;\r\n  const { linkActiveClass, linkExactActiveClass } = router.option;\r\n\r\n  const classes: string[] = [];\r\n  if (link.isActive) {\r\n    classes.push(getLinkClass(activeClass, linkActiveClass, 'router-link-active'));\r\n  }\r\n  if (link.isExactActive) {\r\n    classes.push(getLinkClass(exactActiveClass, linkExactActiveClass, 'router-link-exact-active'));\r\n  }\r\n\r\n  const className: string | undefined = classes.length > 0 ? classes.join(' ') : undefined;\r\n\r\n  return (\r\n    <a onClick={link.navigate} href={link.route.fullPath} className={className}>\r\n      {children}\r\n    </a>\r\n  );\r\n}\r\n\r\nexport default RouterLink;\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { createElement, useContext, useMemo } from '@cloudsop/horizon';\r\nimport { CurrentRouteRecord, RouteContext, ViewDepth } from './RouterContext';\r\nimport { NormalizedRouteRecord } from './types';\r\n\r\nfunction calcNextDepth(currentDepth: number, matched: NormalizedRouteRecord[]) {\r\n  let matchedRecord: NormalizedRouteRecord | undefined;\r\n  let nextDepth = currentDepth;\r\n  while ((matchedRecord = matched[nextDepth]) && !matchedRecord.component) {\r\n    nextDepth++;\r\n  }\r\n  return nextDepth;\r\n}\r\n\r\nfunction RouterView() {\r\n  const { matched } = useContext(RouteContext);\r\n  const { depth } = useContext(ViewDepth);\r\n  const nextDepth = useMemo(() => calcNextDepth(depth, matched), [depth]);\r\n  const routeRecord = matched[nextDepth];\r\n  if (routeRecord) {\r\n    const { component, props } = routeRecord;\r\n    const nextComponent = createElement(component, props);\r\n\r\n    return (\r\n      <ViewDepth.Provider value={{ depth: nextDepth + 1 }}>\r\n        <CurrentRouteRecord.Provider value={routeRecord}>{nextComponent}</CurrentRouteRecord.Provider>\r\n      </ViewDepth.Provider>\r\n    );\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default RouterView;\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport type { VueHistory } from './vueHistory';\r\nimport { ComponentType, createElement, FunctionComponent, InulaElement } from '@cloudsop/horizon';\r\nimport type {\r\n  ExceptListener,\r\n  NavigationGuard,\r\n  NavigationGuardNext,\r\n  NavigationHook,\r\n  NormalizedRouteRecord,\r\n  RouteLocation,\r\n  RouteLocationRaw,\r\n  RouteMetaData,\r\n  RouteRecordName,\r\n  RouteRedirectOption,\r\n} from './types';\r\nimport { agnosticRouteMatcher, RouteBranch } from '../matcher/matcher';\r\nimport { ErrorTypes, START_LOCATION } from './const';\r\nimport {\r\n  createCallBackList,\r\n  isSameRouteLocation,\r\n  locationToObject,\r\n  normalizeQuery,\r\n  parseURL,\r\n  stringifyUrl,\r\n} from './utils';\r\nimport { createRouterError, NavigationFailure } from './routerError';\r\nimport RouterLink from './RouterLink';\r\nimport RouterView from './RouterView';\r\nimport { RouterProvider } from './RouterProvider';\r\n\r\ninterface App {\r\n  rootComponent: InulaElement;\r\n\r\n  component(name: string, component: FunctionComponent<any>): void;\r\n\r\n  config: AppConfig;\r\n}\r\n\r\ninterface AppConfig {\r\n  globalProperties: Record<string, any>;\r\n}\r\n\r\nexport interface VueRouter {\r\n  readonly currentRoute: RouteLocation;\r\n\r\n  readonly option: RouterOptions;\r\n\r\n  listening: boolean;\r\n\r\n  // dynamic operate route methods\r\n  addRoute(route: RouteRecord): () => void;\r\n\r\n  removeRoute(name: RouteRecordName): void;\r\n\r\n  hasRoute(name: RouteRecordName): boolean;\r\n\r\n  getRoutes(): RouteBranch<RouteRecord, NormalizedRouteRecord>[];\r\n\r\n  resolve(to: Readonly<RouteLocationRaw>, from?: Readonly<RouteLocation>): RouteLocation;\r\n\r\n  // negative methods\r\n  push(to: RouteLocationRaw): Promise<NavigationFailure | void | undefined>;\r\n\r\n  replace(to: RouteLocationRaw): Promise<NavigationFailure | void | undefined>;\r\n\r\n  go(delta: number): void;\r\n\r\n  back(): void;\r\n\r\n  forward(): void;\r\n\r\n  // hooks\r\n  beforeEach(guard: NavigationGuard): () => void;\r\n\r\n  beforeResolve(guard: NavigationGuard): () => void;\r\n\r\n  afterEach(guard: NavigationHook): () => void;\r\n\r\n  onError(handler: ExceptListener): () => void;\r\n\r\n  // status\r\n  isReady(): Promise<void>;\r\n\r\n  install(app: App): void;\r\n}\r\n\r\nexport interface VueRouterInternal extends VueRouter {\r\n  // trigger when popstate event\r\n  pop(to: RouteLocationRaw): void;\r\n\r\n  // use for RouterProvider\r\n  subscribeRouteChange(observer: RouteObserver): () => void;\r\n}\r\n\r\ninterface RouterMatchOption {\r\n  sensitive?: boolean;\r\n  strict?: boolean;\r\n  start?: boolean;\r\n  end?: boolean;\r\n}\r\n\r\ntype RouteRecordOption = Omit<RouterMatchOption, 'start' | 'end'>;\r\n\r\nexport interface RouteRecordBase extends RouteRecordOption {\r\n  path: string;\r\n  redirect?: RouteRedirectOption;\r\n  alias?: string | string[];\r\n  name?: RouteRecordName;\r\n  meta?: RouteMetaData;\r\n  children?: unknown[];\r\n  props?: boolean | Record<string, unknown>;\r\n  beforeEnter?: NavigationGuard | NavigationGuard[];\r\n}\r\n\r\nexport interface RouteRecordSingleView extends RouteRecordBase {\r\n  component: ComponentType<any>;\r\n  children?: never;\r\n}\r\n\r\nexport interface RouteRecordWithChildren extends RouteRecordBase {\r\n  component: ComponentType<any>;\r\n  children: RouteRecord[];\r\n}\r\n\r\nexport interface RouteRecordRedirect extends RouteRecordBase {\r\n  redirect?: RouteRedirectOption;\r\n  component?: never;\r\n  props?: never;\r\n  children?: never;\r\n}\r\n\r\nexport type RouteRecord = RouteRecordSingleView | RouteRecordWithChildren | RouteRecordRedirect;\r\n\r\nexport type Guard<T = any> = () => Promise<T>;\r\n\r\nexport interface RouteObserver {\r\n  (to: RouteLocation, from: RouteLocation): void;\r\n}\r\n\r\nexport interface RouterOptions extends RouteRecordOption {\r\n  history: VueHistory;\r\n  routes: RouteRecord[];\r\n  linkActiveClass?: string;\r\n  linkExactActiveClass?: string;\r\n}\r\n\r\nfunction normalizeRouteRecord(record: RouteRecord): NormalizedRouteRecord {\r\n  return {\r\n    beforeEnter: record.beforeEnter,\r\n    children: record.children || [],\r\n    component: record.component,\r\n    leaveGuards: new Set<NavigationGuard>(),\r\n    meta: record.meta || {},\r\n    name: record.name,\r\n    path: record.path,\r\n    props: record.props || {},\r\n    redirected: record.redirect,\r\n    updateGuards: new Set<NavigationGuard>(),\r\n  };\r\n}\r\n\r\nfunction initRouter(options: RouterOptions): VueRouterInternal {\r\n  const { history, routes } = options;\r\n\r\n  const matcher = agnosticRouteMatcher<RouteRecord, NormalizedRouteRecord>(\r\n    routes,\r\n    {\r\n      sensitive: options.sensitive,\r\n      strict: options.strict,\r\n    },\r\n    item => normalizeRouteRecord(item)\r\n  );\r\n\r\n  const beforeEachGuards = createCallBackList<NavigationGuard>();\r\n  const beforeResolveGuards = createCallBackList<NavigationGuard>();\r\n  const afterEachGuards = createCallBackList<NavigationHook>();\r\n  const exceptListeners = createCallBackList<ExceptListener>();\r\n\r\n  const observers = createCallBackList<RouteObserver>();\r\n\r\n  function resolve(to: Readonly<RouteLocationRaw>, from?: Readonly<RouteLocation>): RouteLocation {\r\n    from = Object.assign({}, from || router.currentRoute);\r\n    if (typeof to === 'string') {\r\n      const normalizedLocation = parseURL(to, from.path);\r\n      const matchedRoute = matcher.matchPath({ path: normalizedLocation.path }, from);\r\n      return Object.assign(normalizedLocation, matchedRoute);\r\n    }\r\n\r\n    let matcherLocation;\r\n\r\n    if (to.path != null) {\r\n      matcherLocation = Object.assign({}, to, { path: parseURL(to.path, from.path).path });\r\n    } else {\r\n      const targetParams = Object.assign({}, to.params);\r\n      for (const key of Object.keys(targetParams)) {\r\n        if (targetParams[key] == null) {\r\n          delete targetParams[key];\r\n        }\r\n      }\r\n      matcherLocation = Object.assign({}, to, { params: targetParams });\r\n    }\r\n    const matchedRoute = matcher.matchPath(matcherLocation, from);\r\n    const fullPath = stringifyUrl(Object.assign(to, { path: matchedRoute.path }));\r\n    const query = normalizeQuery(to.query);\r\n    const hash = to.hash || '';\r\n    return Object.assign({ fullPath, query, hash }, matchedRoute);\r\n  }\r\n\r\n  async function push(to: RouteLocationRaw, redirectFrom?: RouteLocation) {\r\n    const replace = typeof to === 'string' ? false : to.replace;\r\n    const force = typeof to === 'string' ? false : to.force;\r\n    const target = router.resolve(to);\r\n    const from = router.currentRoute;\r\n\r\n    const redirectLocation = extractRedirect(target);\r\n    if (redirectLocation) {\r\n      return push(Object.assign(redirectLocation, { replace: to, force: force }), redirectFrom || target);\r\n    }\r\n\r\n    target.redirectedFrom = redirectFrom;\r\n    let failure: NavigationFailure | void | undefined;\r\n    if (!force && isSameRouteLocation(target, from)) {\r\n      failure = createRouterError<NavigationFailure>(ErrorTypes.NAVIGATION_DUPLICATED, { to: target, from });\r\n    }\r\n\r\n    return failure\r\n      ? Promise.resolve(failure)\r\n      : triggerGuards(target, from)\r\n          .catch(err => triggerError(err, target, from))\r\n          .then((failure: NavigationFailure | void) => {\r\n            if (failure) {\r\n              Promise.reject('infinite redirect in navigation guard');\r\n            } else {\r\n              doNavigate(target, true, replace);\r\n            }\r\n            triggerAfterEach(target, from);\r\n          });\r\n  }\r\n\r\n  function replace(to: RouteLocationRaw) {\r\n    const dest = typeof to === 'string' ? parseURL(to) : to;\r\n    return push(Object.assign(dest, { replace: true }));\r\n  }\r\n\r\n  function extractRedirect(to: Readonly<RouteLocation>): RouteLocationRaw | null {\r\n    const lastMatched = to.matched[to.matched.length - 1];\r\n    if (lastMatched && lastMatched.redirected) {\r\n      const redirect = lastMatched.redirected;\r\n      let newTarget = typeof redirect === 'function' ? redirect(to) : redirect;\r\n      if (typeof newTarget === 'string') {\r\n        if (newTarget.includes('?') || newTarget.includes('#')) {\r\n          newTarget = locationToObject(newTarget, router.currentRoute);\r\n        } else {\r\n          newTarget = { path: newTarget };\r\n        }\r\n      }\r\n      return Object.assign(\r\n        {\r\n          query: to.query,\r\n          hash: to.hash,\r\n          params: newTarget.path != null ? {} : to.params,\r\n        },\r\n        newTarget\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n\r\n  async function pop(to: RouteLocationRaw) {\r\n    const target = router.resolve(to);\r\n    const from = router.currentRoute;\r\n    return triggerGuards(target, from)\r\n      .catch(error => {\r\n        return triggerError(error, target, from);\r\n      })\r\n      .then((failure: NavigationFailure | void) => {\r\n        doNavigate(target, false);\r\n        triggerAfterEach(target, from, failure);\r\n      })\r\n      .catch();\r\n  }\r\n\r\n  async function triggerGuards(to: RouteLocation, from: RouteLocation) {\r\n    let guards: Guard[] = [];\r\n    const { leavingRecords, updateRecords, enterRecords } = analyseChangingRecord(to, from);\r\n\r\n    for (const record of leavingRecords) {\r\n      record.leaveGuards.forEach(guard => {\r\n        guards.push(guardToPromise(guard, to, from));\r\n      });\r\n    }\r\n\r\n    return runGuardQueue(guards)\r\n      .then(() => {\r\n        guards = [];\r\n        for (const beforeEachGuard of beforeEachGuards.list()) {\r\n          guards.push(guardToPromise(beforeEachGuard, to, from));\r\n        }\r\n        return runGuardQueue(guards);\r\n      })\r\n      .then(() => {\r\n        guards = [];\r\n        for (const record of updateRecords) {\r\n          record.updateGuards.forEach(guard => {\r\n            guards.push(guardToPromise(guard, to, from));\r\n          });\r\n        }\r\n        return runGuardQueue(guards);\r\n      })\r\n      .then(() => {\r\n        guards = [];\r\n        for (const record of enterRecords) {\r\n          if (record.beforeEnter) {\r\n            if (Array.isArray(record.beforeEnter)) {\r\n              const beforeEnters = record.beforeEnter.map(r => guardToPromise(r, to, from));\r\n              guards = guards.concat(beforeEnters);\r\n            } else {\r\n              guards.push(guardToPromise(record.beforeEnter, to, from));\r\n            }\r\n          }\r\n        }\r\n        return runGuardQueue(guards);\r\n      })\r\n      .then(() => {\r\n        guards = [];\r\n        for (const guard of beforeResolveGuards.list()) {\r\n          guards.push(guardToPromise(guard, to, from));\r\n        }\r\n        return runGuardQueue(guards);\r\n      })\r\n      .catch(err => {\r\n        Promise.reject(err);\r\n      });\r\n  }\r\n\r\n  function doNavigate(to: RouteLocation, triggerHistory?: boolean, replace?: boolean) {\r\n    if (triggerHistory) {\r\n      if (replace) {\r\n        history.replace(to.fullPath);\r\n      } else {\r\n        history.push(to.fullPath);\r\n      }\r\n    }\r\n    notifyUpdate({ currentRoute: to });\r\n  }\r\n\r\n  function triggerAfterEach(to: RouteLocation, from: RouteLocation, failure?: NavigationFailure | void): void {\r\n    afterEachGuards.list().forEach(guard => guard(to, from, failure));\r\n  }\r\n\r\n  function triggerError(error: any, to: RouteLocation, from: RouteLocation) {\r\n    for (const trigger of exceptListeners.list()) {\r\n      trigger(error, to, from);\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n\r\n  function notifyUpdate(newAttrs: Partial<VueRouter>) {\r\n    if ('currentRoute' in newAttrs) {\r\n      const prevLocation = router.currentRoute;\r\n      Object.assign(router, newAttrs);\r\n      observers.list().forEach(trigger => {\r\n        trigger(router.currentRoute, prevLocation);\r\n      });\r\n    }\r\n  }\r\n\r\n  function install(app: App) {\r\n    // wrap RouterProvider for App\r\n    app.component('RouterLink', RouterLink);\r\n    app.component('RouterView', RouterView);\r\n    const routerInstance = initRouter(options);\r\n    app.rootComponent = createElement(RouterProvider, { router: routerInstance }, app.rootComponent);\r\n    app.config.globalProperties.$router = routerInstance;\r\n    Object.defineProperty(app.config.globalProperties, '$route', {\r\n      enumerable: true,\r\n      get: () => routerInstance.currentRoute,\r\n    });\r\n  }\r\n\r\n  function subscribeRouteChange(observer: RouteObserver) {\r\n    return observers.add(observer);\r\n  }\r\n\r\n  const router: VueRouterInternal = {\r\n    currentRoute: START_LOCATION,\r\n    option: options,\r\n    listening: true,\r\n    go: history.go,\r\n    back: () => history.go(-1),\r\n    forward: () => history.go(1),\r\n    push: push,\r\n    pop: pop,\r\n    replace: replace,\r\n    resolve: resolve,\r\n    beforeEach: beforeEachGuards.add,\r\n    beforeResolve: beforeResolveGuards.add,\r\n    afterEach: afterEachGuards.add,\r\n    onError: exceptListeners.add,\r\n    addRoute(route: RouteRecord): () => void {\r\n      return matcher.addBranch(route);\r\n    },\r\n    removeRoute(name: RouteRecordName) {\r\n      return matcher.delBranch(name);\r\n    },\r\n    hasRoute(name: RouteRecordName): boolean {\r\n      return Boolean(matcher.getNamedBranch(name));\r\n    },\r\n    getRoutes(): RouteBranch<RouteRecord, NormalizedRouteRecord>[] {\r\n      return matcher.branches;\r\n    },\r\n    isReady(): Promise<void> {\r\n      return Promise.resolve();\r\n    },\r\n    install: install,\r\n    subscribeRouteChange,\r\n  };\r\n\r\n  return router;\r\n}\r\n\r\nfunction analyseChangingRecord(to: RouteLocation, from: RouteLocation) {\r\n  const leavingRecords: NormalizedRouteRecord[] = [];\r\n  const updateRecords: NormalizedRouteRecord[] = [];\r\n  const enterRecords: NormalizedRouteRecord[] = [];\r\n\r\n  const maxLen = Math.max(to.matched.length, from.matched.length);\r\n  for (let i = 0; i < maxLen; i++) {\r\n    const recordFrom = from.matched[i];\r\n    if (recordFrom) {\r\n      if (to.matched.find(m => m === recordFrom)) {\r\n        updateRecords.push(recordFrom);\r\n      } else {\r\n        leavingRecords.push(recordFrom);\r\n      }\r\n    }\r\n    const recordTo = to.matched[i];\r\n    if (recordTo) {\r\n      if (from.matched.findIndex(m => m === recordTo) === -1) {\r\n        enterRecords.push(recordTo);\r\n      }\r\n    }\r\n  }\r\n\r\n  return { leavingRecords, updateRecords, enterRecords };\r\n}\r\n\r\nfunction guardToPromise(guard: NavigationGuard, to: RouteLocation, from: RouteLocation): Guard {\r\n  const promise = new Promise((resolve, reject) => {\r\n    const next: NavigationGuardNext = (valid?: boolean | RouteLocationRaw | Error) => {\r\n      if (valid === false) {\r\n        reject(createRouterError(ErrorTypes.NAVIGATION_ABORTED, { from, to }));\r\n      } else if (valid instanceof Error) {\r\n        reject(valid);\r\n      } else if (typeof valid === 'string' || (valid && typeof valid === 'object')) {\r\n        reject(createRouterError(ErrorTypes.NAVIGATION_GUARD_REDIRECT, { from: to, to: valid }));\r\n      } else {\r\n        resolve(null);\r\n      }\r\n    };\r\n    const guardReturn = guard(to, from, next);\r\n    let guardCall = Promise.resolve(guardReturn);\r\n    if (guard.length < 3) {\r\n      guardCall = guardCall.then(next);\r\n    }\r\n    guardCall.catch(err => reject(err));\r\n  });\r\n\r\n  return () => promise;\r\n}\r\n\r\nfunction runGuardQueue(guards: Guard[]) {\r\n  return guards.reduce((promise, guard) => promise.then(() => guard()), Promise.resolve());\r\n}\r\n\r\nexport { initRouter };\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { InulaNode, useLayoutEffect, useRef, useState } from '@cloudsop/horizon';\r\nimport { RouteContext, RouterContext } from './RouterContext';\r\nimport { initRouter, RouterOptions, VueRouter, VueRouterInternal } from './Router';\r\nimport { parseURL } from './utils';\r\nimport { RouteLocation } from './types';\r\n\r\ninterface RouterProviderProps {\r\n  router: VueRouter;\r\n  children: InulaNode;\r\n}\r\n\r\nexport function createRouter(option: RouterOptions): VueRouter {\r\n  return initRouter(option);\r\n}\r\n\r\nexport function RouterProvider(props: RouterProviderProps) {\r\n  const { children } = props;\r\n  const router = props.router as VueRouterInternal;\r\n  const {\r\n    currentRoute,\r\n    option: { history },\r\n  } = router;\r\n\r\n  const unListen = useRef<(() => void) | null>(null);\r\n  const isMount = useRef(false);\r\n  const detachObserver = useRef<(() => void) | null>(null);\r\n\r\n  const urlLocation = parseURL(history.location);\r\n  const [location, setLocation] = useState<RouteLocation>(currentRoute);\r\n\r\n  if (!detachObserver.current) {\r\n    detachObserver.current = router.subscribeRouteChange(to => {\r\n      setLocation(to);\r\n    });\r\n  }\r\n\r\n  // trigger navigator guards when first entry page\r\n  if (location.fullPath !== urlLocation.fullPath || !isMount.current) {\r\n    void router.push(history.location);\r\n  }\r\n\r\n  useLayoutEffect(() => {\r\n    isMount.current = true;\r\n    if (unListen.current) {\r\n      unListen.current();\r\n    }\r\n    if (detachObserver.current) {\r\n      detachObserver.current();\r\n    }\r\n\r\n    detachObserver.current = router.subscribeRouteChange(to => {\r\n      setLocation(to);\r\n    });\r\n\r\n    unListen.current = history.listen(to => {\r\n      if (isMount.current) {\r\n        router.pop(to);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      if (unListen.current) {\r\n        isMount.current = false;\r\n        unListen.current();\r\n        unListen.current = null;\r\n      }\r\n      if (detachObserver.current) {\r\n        detachObserver.current();\r\n        detachObserver.current = null;\r\n      }\r\n    };\r\n  });\r\n\r\n  return (\r\n    <RouterContext.Provider value={router}>\r\n      <RouteContext.Provider value={location}>{children}</RouteContext.Provider>\r\n    </RouterContext.Provider>\r\n  );\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { NavigationGuard } from './types';\r\nimport { useContext, useLayoutEffect } from '@cloudsop/horizon';\r\nimport { CurrentRouteRecord } from './RouterContext';\r\n\r\nfunction onBeforeRouteLeave(leaveGuard: NavigationGuard) {\r\n  useRegisterGuards('leaveGuards', leaveGuard);\r\n}\r\n\r\nfunction onBeforeRouteUpdate(updateGuard: NavigationGuard) {\r\n  useRegisterGuards('updateGuards', updateGuard);\r\n}\r\n\r\ntype GuardType = 'leaveGuards' | 'updateGuards';\r\n\r\nfunction useRegisterGuards(name: GuardType, guard: NavigationGuard) {\r\n  const match = useContext(CurrentRouteRecord);\r\n\r\n  useLayoutEffect(() => {\r\n    match[name].add(guard);\r\n\r\n    return () => {\r\n      match[name].delete(guard);\r\n    };\r\n  }, []);\r\n\r\n  return null;\r\n}\r\n\r\nexport { onBeforeRouteLeave, onBeforeRouteUpdate };\r\n"],"names":["isBrowser","window","document","createElement","getDefaultConfirmation","message","callBack","confirm","isSupportHistory","history","isSupportsPopState","navigator","userAgent","indexOf","Action","EventType","PopDirection","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","createPath","path","search","hash","pathname","startsWith","parsePath","url","parsedPath","hashIdx","substring","searchIdx","createLocation","current","to","state","urlObj","getRandKey","genRandomKey","location","parseRelativePath","addHeadSlash","normalizeSlash","tempPath","hasBasename","prefix","toLowerCase","includes","charAt","stripBasename","createMemoryRecord","initVal","fn","visitedRecord","getDelta","from","toIdx","lastIndexOf","fromIdx","addRecord","newRecord","action","curVal","NewVal","push","prevIdx","newVisitedRecord","slice","replace","end","Math","random","toString","fromParts","split","toParts","lastToPart","index","toIndex","urlPart","join","_classCallCheck","instance","Constructor","TypeError","_typeof","o","Symbol","iterator","constructor","toPrimitive","t","r","e","String","Number","toPropertyKey","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","TransitionManager","prompt","value","setPrompt","_this","confirmJumpTo","userConfirmationFunc","result","warning","condition","console","warn","getBaseHistory","type","undefined","transitionManager","popActionListener","listenerCount","supportPopState","listeners","unListeners","browserHistory","pauseTrigger","go","step","triggerListener","setupListener","count","addEventListener","PopState","HashChange","removeEventListener","addListener","listener","isActive","wrapper","args","information","trigger","cancelListener","filter","destroy","_iterator","_createForOfIteratorHelper","_step","s","n","done","unListen","err","f","isBlocked","block","unblock","getUpdateStateFunc","historyProps","nextState","originPath","delta","commonArgs","popArgs","direction","forward","back","pop","createBrowserHistory","options","supportHistory","isSupportPopState","_options$forceRefresh","forceRefresh","_options$getUserConfi","getUserConfirmation","basename","initLocation","getLocation","getHistoryState","recordOperator","l","_getBaseHistory","handlePop","listen","goBack","goForward","createHref","updateState","historyState","_window$location","_ref","forceJump","handlePopState","callback","isJump","revertPopState","isEventPopState","event","handler","locationHandler","baseHandler","href","pushState","replaceState","normalizeBase","base","baseEl","querySelector","getAttribute","BEFORE_HASH_RE","createHrefHandler","parseURL","currentLocation","query","searchString","hashPos","searchPos","parseQuery","fullPath","decode","stringifyUrl","stringifyQuery","urlParams","URLSearchParams","keys","_loop","_keys","_i","Array","isArray","forEach","v","append","normalizeQuery","normalizedQuery","map","locationToObject","currentRoute","queryString","params","fromEntries","entries","text","decodeURIComponent","shallowCompareArray","a","b","every","compareParams","aKeys","bKeys","_i2","_aKeys","aValue","bValue","isSameRouteLocation","matchLengthA","matched","matchLengthB","createCallBackList","callbacks","add","cb","item","list","clear","guardEvent","metaKey","altKey","ctrlKey","shiftKey","defaultPrevented","button","currentTarget","test","preventDefault","includesParams","outer","inner","_loop2","innerValue","outerValue","some","_ret","createVueBaseHistory","urlBase","hrefHandler","baseHistory","listenLocation","data","historyAdapter","defineProperties","get","createWebHistory","createWebHashHistory","host","slicePos","pathFromHash","getBase","hashIndex","protocol","hashHandlers","START_LOCATION","meta","ErrorTypes","RouterContext","createContext","RouteContext","CurrentRouteRecord","ViewDepth","depth","TokenType","cleanPath","scoreCompare","score1","score2","score1Length","score2Length","min","escapeStr","str","validChar","lexer","tokens","urlPath","Error","getLiteral","name","skipChar","curChar","prevChar","Delimiter","Param","WildCard","Static","LBracket","RBracket","Pattern","MatchScore","defaultOption","caseSensitive","strictMode","exact","REGEX_CHARS_RE","BASE_PARAM_PATTERN","DefaultDelimiter","createPathParser","option","_option$caseSensitive","_option$strictMode","_option$exact","pattern","scores","onlyHasWildCard","tokenCount","lastToken","asteriskCount","lookToNextDelimiter","currentIdx","hasOptionalParam","tokenIdx","token","nextToken","hasOptional","isSlashOptional","static","paramRegexp","param","wildcard","placeholder","isWildCard","flag","regexp","RegExp","parse","reMatch","match","matchedPath","parseScore","_params$","splice","concat","fill","isExact","score","compile","wildCard","defaultMatcherOption","strict","sensitive","isRouteName","getLocationParams","newParams","convertRecordToBranch","record","parser","raw","component","children","agnosticRouteMatcher","routes","branchHandler","branches","branchesMap","Map","addBranch","route","parent","recursive","normalizedRecord","concatSlash","endsWith","recordParserOption","mergeDefault","branch","originalBranch","set","_iterator2","_step2","child","sort","delBranch","getNamedBranch","has","branchRef","delete","branchIndex","idx","matchPath","_iterator3","_step3","find","parentBranch","reverse","merge","reduce","prev","currentValue","defaultOptions","partialOptions","mergedOption","_defineProperty","obj","NavigationFailureSymbol","createRouterError","isNavigationFailure","error","Boolean","useRouter","useContext","useRoute","useLink","router","useMemo","resolve","activeBranchIndex","targetMatched","currentMatched","findIndex","m","parentRecordPath","isExactActive","navigate","Promise","useRouteWatch","config","immediate","isMount","useRef","unListener","useEffect","subscribeRouteChange","getLinkClass","propClass","globalClass","defaultClass","curr","RouterLink","link","activeClass","exactActiveClass","_router$option","linkActiveClass","linkExactActiveClass","classes","className","_jsx","onClick","calcNextDepth","currentDepth","matchedRecord","nextDepth","RouterView","_useContext","_useContext2","routeRecord","nextComponent","Provider","normalizeRouteRecord","beforeEnter","leaveGuards","Set","redirected","redirect","updateGuards","initRouter","matcher","beforeEachGuards","beforeResolveGuards","afterEachGuards","exceptListeners","observers","normalizedLocation","matchedRoute","matcherLocation","targetParams","_Object$keys","redirectFrom","force","redirectLocation","extractRedirect","redirectedFrom","failure","NAVIGATION_DUPLICATED","triggerGuards","catch","triggerError","then","reject","doNavigate","triggerAfterEach","dest","lastMatched","newTarget","guards","_analyseChangingRecor","analyseChangingRecord","leavingRecords","updateRecords","enterRecords","guard","guardToPromise","runGuardQueue","beforeEachGuard","_iterator4","_step4","beforeEnters","_iterator5","_step5","triggerHistory","notifyUpdate","_iterator6","_step6","newAttrs","prevLocation","install","app","routerInstance","rootComponent","RouterProvider","globalProperties","$router","observer","listening","beforeEach","beforeResolve","afterEach","onError","addRoute","removeRoute","hasRoute","getRoutes","isReady","maxLen","max","recordFrom","recordTo","promise","next","valid","NAVIGATION_ABORTED","NAVIGATION_GUARD_REDIRECT","guardReturn","guardCall","createRouter","detachObserver","urlLocation","_useState","useState","setLocation","useLayoutEffect","onBeforeRouteLeave","leaveGuard","useRegisterGuards","onBeforeRouteUpdate","updateGuard"],"mappings":"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"}