{"version":3,"file":"vradapter.js","sources":["../../src/history/dom.ts","../../src/history/types.ts","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/extends.js","../../src/history/utils.ts","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/createClass.js","../../src/history/transitionManager.ts","../../src/history/waring.ts","../../src/history/baseHistory.ts","../../src/history/browerHistory.ts","../../src/vue-router-adapter/utils.ts","../../src/vue-router-adapter/vueHistory.ts","../../src/vue-router-adapter/const.ts","../../src/vue-router-adapter/RouterContext.ts","../../src/matcher/types.ts","../../src/matcher/utils.ts","../../src/matcher/lexer.ts","../../src/matcher/parser.ts","../../src/matcher/matcher.ts","../../../../node_modules/.pnpm/@babel+runtime@7.23.8/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../src/vue-router-adapter/routerError.ts","../../src/vue-router-adapter/hooks.ts","../../src/vue-router-adapter/RouterLink.tsx","../../src/vue-router-adapter/RouterView.tsx","../../src/vue-router-adapter/Router.ts","../../src/vue-router-adapter/RouterProvider.tsx","../../src/vue-router-adapter/componentGuards.ts"],"sourcesContent":["export function isBrowser(): boolean {\r\n  return typeof window !== 'undefined' && window.document && typeof window.document.createElement === 'function';\r\n}\r\n\r\nexport function getDefaultConfirmation(message: string, callBack: (result: boolean) => void) {\r\n  callBack(window.confirm(message));\r\n}\r\n\r\n// 判断浏览器是否支持pushState方法，pushState是browserHistory实现的基础\r\nexport function isSupportHistory(): boolean {\r\n  return isBrowser() && window.history && 'pushState' in window.history;\r\n}\r\n\r\n// 判断浏览器是否支持PopState事件\r\nexport function isSupportsPopState(): boolean {\r\n  return window.navigator.userAgent.indexOf('Trident') === -1;\r\n}\r\n","export type BaseOption = {\r\n  basename?: string;\r\n  getUserConfirmation?: ConfirmationFunc;\r\n};\r\n\r\nexport interface HistoryProps<T = unknown> {\r\n  readonly action: Action;\r\n\r\n  readonly location: Location<T>;\r\n\r\n  length: number;\r\n}\r\n\r\nexport interface AgnosticHistory<T = unknown> extends HistoryProps<T> {\r\n  createHref(path: Partial<Path>): string;\r\n\r\n  push(to: To, state?: T): void;\r\n\r\n  replace(to: To, state?: T): void;\r\n\r\n  listen(listener: CommonListener<T>): () => void;\r\n\r\n  // add listener for listen pop action\r\n  addListener(listener: Listener<T>): () => void;\r\n\r\n  // cancel all pop listeners\r\n  destroy(): void;\r\n\r\n  block(prompt: Prompt<T>): () => void;\r\n\r\n  go(index: number): void;\r\n\r\n  goBack(): void;\r\n\r\n  goForward(): void;\r\n}\r\n\r\nexport type History<T = unknown> = Omit<AgnosticHistory<T>, 'addListener' | 'destroy'>;\r\n\r\nexport interface LocationHandler<T> {\r\n  locationHandler?: ((state?: Partial<HistoryState<T>>) => Location<T>) | null;\r\n  baseHandler?: (() => string) | null;\r\n}\r\n\r\nexport interface CreateLocationHandler<T> {\r\n  locationHandler?: ((basename: string) => (state?: Partial<HistoryState<T>>) => Location<T>) | null;\r\n  baseHandler?: ((basename: string) => () => string) | null;\r\n}\r\n\r\nexport enum Action {\r\n  pop = 'POP',\r\n  push = 'PUSH',\r\n  replace = 'REPLACE',\r\n}\r\n\r\nexport enum EventType {\r\n  PopState = 'popstate',\r\n  HashChange = 'hashchange',\r\n}\r\n\r\nexport enum PopDirection {\r\n  back = 'back',\r\n  forward = 'forward',\r\n  unknown = '',\r\n}\r\n\r\nexport type Path = {\r\n  pathname: string;\r\n\r\n  search: string;\r\n\r\n  hash: string;\r\n};\r\n\r\nexport type HistoryState<T> = {\r\n  state?: T;\r\n\r\n  key: string;\r\n};\r\n\r\nexport type DefaultStateType = unknown;\r\n\r\nexport type Location<T = unknown> = Path & HistoryState<T>;\r\n\r\nexport type To = string | Partial<Path>;\r\n\r\nexport interface CommonListener<T = unknown> {\r\n  (navigation: Navigation<T>): void;\r\n}\r\n\r\nexport interface ActionInfo {\r\n  type: Action;\r\n  direction: PopDirection;\r\n  delta: number;\r\n}\r\n\r\nexport interface PopListener {\r\n  (to: string, from: string, information: ActionInfo): void;\r\n}\r\n\r\nexport interface PopNavigation {\r\n  to: string;\r\n  from: string;\r\n  information: ActionInfo;\r\n}\r\n\r\nexport type Listener<S> =\r\n  | {\r\n      type: 'common';\r\n      listener: CommonListener<S>;\r\n    }\r\n  | {\r\n      type: 'pop';\r\n      listener: PopListener;\r\n    };\r\n\r\nexport interface Navigation<T = unknown> {\r\n  action: Action;\r\n\r\n  location: Location<T>;\r\n}\r\n\r\nexport type Prompt<S> = string | boolean | null | ((location: Location<S>, action: Action) => void);\r\n\r\nexport type CallBackFunc = (isJump: boolean) => void;\r\n\r\nexport type ConfirmationFunc = (message: string, callBack: CallBackFunc) => void;\r\n\r\nexport interface TManager<S> {\r\n  setPrompt(next: Prompt<S>): () => void;\r\n\r\n  confirmJumpTo(\r\n    location: Location<S>,\r\n    action: Action,\r\n    userConfirmationFunc: ConfirmationFunc,\r\n    callBack: CallBackFunc\r\n  ): void;\r\n}\r\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import { Action, Location, Path, To } from './types';\r\n\r\nexport function createPath(path: Partial<Path>): string {\r\n  const { search, hash } = path;\r\n  let pathname = path.pathname || '/';\r\n  if (search && search !== '?') {\r\n    pathname += search.startsWith('?') ? search : '?' + search;\r\n  }\r\n  if (hash && hash !== '#') {\r\n    pathname += hash.startsWith('#') ? hash : '#' + hash;\r\n  }\r\n  return pathname;\r\n}\r\n\r\nexport function parsePath(url: string): Partial<Path> {\r\n  let pathname = url || '/';\r\n  const parsedPath: Partial<Path> = {\r\n    search: '',\r\n    hash: '',\r\n  };\r\n\r\n  const hashIdx = url.indexOf('#');\r\n  if (hashIdx > -1) {\r\n    const hash = url.substring(hashIdx);\r\n    parsedPath.hash = hash === '#' ? '' : hash;\r\n    pathname = pathname.substring(0, hashIdx);\r\n  }\r\n\r\n  const searchIdx = url.indexOf('?');\r\n  if (searchIdx > -1) {\r\n    const search = url.substring(searchIdx);\r\n    parsedPath.search = search === '?' ? '' : search;\r\n    pathname = pathname.substring(0, searchIdx);\r\n  }\r\n  parsedPath.pathname = pathname;\r\n  return parsedPath;\r\n}\r\n\r\nexport function createLocation<S>(current: string | Location, to: To, state?: S, key?: string): Readonly<Location<S>> {\r\n  const pathname = typeof current === 'string' ? current : current.pathname;\r\n  const urlObj = typeof to === 'string' ? parsePath(to) : to;\r\n  // 随机key长度取6\r\n  const getRandKey = genRandomKey(6);\r\n  const location = {\r\n    pathname: pathname,\r\n    search: '',\r\n    hash: '',\r\n    state: state,\r\n    key: typeof key === 'string' ? key : getRandKey(),\r\n    ...urlObj,\r\n  };\r\n  if (!location.pathname) {\r\n    location.pathname = pathname ? pathname : '/';\r\n  } else if (!location.pathname.startsWith('/')) {\r\n    location.pathname = parseRelativePath(location.pathname, pathname);\r\n  }\r\n  if (location.search && location.search[0] !== '?') {\r\n    location.search = '?' + location.search;\r\n  }\r\n  if (location.hash && location.hash[0] !== '#') {\r\n    location.hash = '#' + location.hash;\r\n  }\r\n  return location;\r\n}\r\n\r\nexport function isLocationEqual(p1: Partial<Path>, p2: Partial<Path>) {\r\n  return p1.pathname === p2.pathname && p1.search === p2.search && p1.hash === p2.hash;\r\n}\r\n\r\nexport function addHeadSlash(path: string): string {\r\n  if (path[0] === '/') {\r\n    return path;\r\n  }\r\n  return '/' + path;\r\n}\r\n\r\nexport function stripHeadSlash(path: string): string {\r\n  if (path[0] === '/') {\r\n    return path.substring(1);\r\n  }\r\n  return path;\r\n}\r\n\r\nexport function normalizeSlash(path: string): string {\r\n  const tempPath = addHeadSlash(path);\r\n  if (tempPath[tempPath.length - 1] === '/') {\r\n    return tempPath.substring(0, tempPath.length - 1);\r\n  }\r\n  return tempPath;\r\n}\r\n\r\nexport function hasBasename(path: string, prefix: string): boolean {\r\n  return (\r\n    path.toLowerCase().indexOf(prefix.toLowerCase()) === 0 && ['/', '?', '#', ''].includes(path.charAt(prefix.length))\r\n  );\r\n}\r\n\r\nexport function stripBasename(path: string, prefix: string): string {\r\n  return hasBasename(path, prefix) ? path.substring(prefix.length) : path;\r\n}\r\n\r\n// 使用随机生成的Key记录被访问过的URL，当Block被被触发时利用delta值跳转到之前的页面\r\nexport function createMemoryRecord<T, S>(initVal: S, fn: (arg: S) => T) {\r\n  let visitedRecord: T[] = [fn(initVal)];\r\n\r\n  function getDelta(to: S, from: S): number {\r\n    let toIdx = visitedRecord.lastIndexOf(fn(to));\r\n    if (toIdx === -1) {\r\n      toIdx = 0;\r\n    }\r\n    let fromIdx = visitedRecord.lastIndexOf(fn(from));\r\n    if (fromIdx === -1) {\r\n      fromIdx = 0;\r\n    }\r\n    return toIdx - fromIdx;\r\n  }\r\n\r\n  function addRecord(current: S, newRecord: S, action: Action) {\r\n    const curVal = fn(current);\r\n    const NewVal = fn(newRecord);\r\n    if (action === Action.push) {\r\n      const prevIdx = visitedRecord.lastIndexOf(curVal);\r\n      const newVisitedRecord = visitedRecord.slice(0, prevIdx + 1);\r\n      newVisitedRecord.push(NewVal);\r\n      visitedRecord = newVisitedRecord;\r\n    }\r\n    if (action === Action.replace) {\r\n      const prevIdx = visitedRecord.lastIndexOf(curVal);\r\n      if (prevIdx !== -1) {\r\n        visitedRecord[prevIdx] = NewVal;\r\n      }\r\n    }\r\n  }\r\n\r\n  return { getDelta, addRecord };\r\n}\r\n\r\nfunction genRandomKey(length: number): () => string {\r\n  const end = length + 2;\r\n  return () => {\r\n    return Math.random().toString(18).substring(2, end);\r\n  };\r\n}\r\n\r\nexport function parseRelativePath(to: string, from: string) {\r\n  if (to.startsWith('/')) {\r\n    return to;\r\n  }\r\n  const fromParts = from.split('/');\r\n  const toParts = to.split('/');\r\n  const lastToPart = toParts[toParts.length - 1];\r\n  if (lastToPart === '..' || lastToPart === '.') {\r\n    toParts.push('');\r\n  }\r\n  let index = fromParts.length - 1;\r\n  let toIndex = 0;\r\n  let urlPart: string;\r\n\r\n  while (toIndex < toParts.length) {\r\n    urlPart = toParts[toIndex];\r\n    if (urlPart === '.') {\r\n      continue;\r\n    }\r\n    if (urlPart === '..') {\r\n      if (index > 1) {\r\n        index--;\r\n      }\r\n      toIndex++;\r\n    } else {\r\n      break;\r\n    }\r\n  }\r\n  return fromParts.slice(0, index).join('/') + '/' + toParts.slice(toIndex).join('/');\r\n}\r\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","import type { Action, CallBackFunc, ConfirmationFunc, Location, Prompt, TManager } from './types';\r\n\r\nclass TransitionManager<S> implements TManager<S> {\r\n  private prompt: Prompt<S>;\r\n\r\n  constructor() {\r\n    this.prompt = null;\r\n  }\r\n\r\n  public setPrompt(prompt: Prompt<S>): () => void {\r\n    this.prompt = prompt;\r\n\r\n    // 清除Prompt\r\n    return () => {\r\n      if (this.prompt === prompt) {\r\n        this.prompt = null;\r\n      }\r\n    };\r\n  }\r\n\r\n  public confirmJumpTo(\r\n    location: Location<S>,\r\n    action: Action,\r\n    userConfirmationFunc: ConfirmationFunc,\r\n    callBack: CallBackFunc\r\n  ) {\r\n    if (this.prompt !== null) {\r\n      const result = typeof this.prompt === 'function' ? this.prompt(location, action) : this.prompt;\r\n      if (typeof result === 'string') {\r\n        typeof userConfirmationFunc === 'function' ? userConfirmationFunc(result, callBack) : callBack(true);\r\n      } else {\r\n        callBack(result !== false);\r\n      }\r\n    } else {\r\n      callBack(true);\r\n    }\r\n  }\r\n}\r\n\r\nexport default TransitionManager;\r\n","function warning(condition: any, message: string) {\r\n  if (condition) {\r\n    if (console && typeof console.warn === 'function') {\r\n      console.warn(message);\r\n    }\r\n  }\r\n}\r\n\r\nexport default warning;","import { Action, EventType, HistoryProps, Listener, Navigation, PopDirection, PopNavigation, Prompt } from './types';\r\nimport transitionManager from './transitionManager';\r\nimport { isSupportsPopState } from './dom';\r\nimport { createPath } from './utils';\r\n\r\ntype Trigger<S> =\r\n  | {\r\n      type: 'common';\r\n      trigger: (arg: Navigation<S>) => void;\r\n    }\r\n  | {\r\n      type: 'pop';\r\n      trigger: (arg: PopNavigation) => void;\r\n    };\r\n\r\n// 抽取BrowserHistory和HashHistory中相同的方法\r\nexport function getBaseHistory<S>(\r\n  type: 'browser' | 'hash' = 'browser',\r\n  transitionManager: transitionManager<S>,\r\n  popActionListener: (event: PopStateEvent | HashChangeEvent) => void\r\n) {\r\n  let listenerCount = 0;\r\n  const supportPopState = isSupportsPopState();\r\n  let listeners: Trigger<S>[] = [];\r\n  const unListeners: (() => void)[] = [];\r\n  const browserHistory = window.history;\r\n\r\n  // 标记是否暂停触发type为pop类型的listener\r\n  let pauseTrigger = false;\r\n\r\n  function go(step: number, triggerListener = true) {\r\n    if (triggerListener) {\r\n      pauseTrigger = true;\r\n    }\r\n    browserHistory.go(step);\r\n  }\r\n\r\n  function setupListener(count: number | null) {\r\n    if (count === null) {\r\n      listenerCount = 0;\r\n    } else {\r\n      listenerCount += count;\r\n    }\r\n    if (listenerCount === 1 && count === 1) {\r\n      if (type === 'browser' && supportPopState) {\r\n        addEventListener(EventType.PopState, popActionListener);\r\n      } else {\r\n        addEventListener(EventType.HashChange, popActionListener);\r\n      }\r\n    } else if (listenerCount === 0) {\r\n      if (type === 'browser' && supportPopState) {\r\n        removeEventListener(EventType.PopState, popActionListener);\r\n      } else {\r\n        removeEventListener(EventType.HashChange, popActionListener);\r\n      }\r\n    }\r\n  }\r\n\r\n  function addListener(listener: Listener<S>): () => void {\r\n    let isActive = true;\r\n    const wrapper = (args: Navigation<S> | PopNavigation) => {\r\n      if (isActive) {\r\n        if (listener.type === 'common' && 'action' in args) {\r\n          listener.listener(args);\r\n        } else if (listener.type === 'pop' && 'to' in args) {\r\n          listener.listener(args.to, args.from, args.information);\r\n        }\r\n      }\r\n    };\r\n    const trigger: Trigger<S> = { type: listener.type, trigger: wrapper };\r\n    listeners.push(trigger);\r\n    setupListener(1);\r\n\r\n    const cancelListener = () => {\r\n      isActive = false;\r\n      setupListener(-1);\r\n      listeners = listeners.filter(listener => listener !== trigger);\r\n    };\r\n\r\n    unListeners.push(cancelListener);\r\n    return cancelListener;\r\n  }\r\n\r\n  function destroy() {\r\n    for (const unListen of unListeners) {\r\n      unListen();\r\n    }\r\n    unListeners.length = 0;\r\n    setupListener(null);\r\n  }\r\n\r\n  let isBlocked = false;\r\n\r\n  function block(prompt: Prompt<S> = false): () => void {\r\n    const unblock = transitionManager.setPrompt(prompt);\r\n    if (!isBlocked) {\r\n      setupListener(1);\r\n      isBlocked = true;\r\n    }\r\n    return () => {\r\n      if (isBlocked) {\r\n        isBlocked = false;\r\n        setupListener(-1);\r\n      }\r\n      unblock();\r\n    };\r\n  }\r\n\r\n  function getUpdateStateFunc(historyProps: HistoryProps<S>) {\r\n    return function (nextState: Navigation<S> | undefined) {\r\n      const originPath = createPath(historyProps.location);\r\n      if (nextState) {\r\n        Object.assign(historyProps, nextState);\r\n      }\r\n      const delta = browserHistory.length - historyProps.length;\r\n      historyProps.length = browserHistory.length;\r\n      // 避免location引用相同时setState不触发\r\n      const location = Object.assign({}, historyProps.location);\r\n      const commonArgs = { location: location, action: historyProps.action };\r\n      const popArgs: PopNavigation = {\r\n        to: createPath(location),\r\n        from: originPath,\r\n        information: {\r\n          delta: delta,\r\n          direction: delta > 0 ? PopDirection.forward : PopDirection.back,\r\n          type: Action.pop,\r\n        },\r\n      };\r\n      for (let i = 0; i < listeners.length && !pauseTrigger; i++) {\r\n        const listener = listeners[i];\r\n        if (listener.type === 'common') {\r\n          listener.trigger(commonArgs);\r\n        } else if (listener.type === 'pop' && historyProps.action === Action.pop) {\r\n          // vue history listener only trigger when action is pop\r\n          listener.trigger(popArgs);\r\n        }\r\n      }\r\n      pauseTrigger = false;\r\n    };\r\n  }\r\n\r\n  return { go, addListener, block, destroy, getUpdateStateFunc };\r\n}\r\n","import { getDefaultConfirmation, isSupportHistory, isSupportsPopState } from './dom';\r\nimport {\r\n  Action,\r\n  AgnosticHistory,\r\n  BaseOption,\r\n  CommonListener,\r\n  DefaultStateType,\r\n  EventType,\r\n  History,\r\n  HistoryState,\r\n  Listener,\r\n  Location,\r\n  LocationHandler,\r\n  Path,\r\n  To,\r\n} from './types';\r\nimport { createLocation, createMemoryRecord, createPath, normalizeSlash, stripBasename } from './utils';\r\nimport TransitionManager from './transitionManager';\r\n\r\nimport warning from './waring';\r\nimport { getBaseHistory } from './baseHistory';\r\n\r\nexport type BrowserHistoryOption = {\r\n  /**\r\n   * forceRefresh为True时跳转时会强制刷新页面\r\n   */\r\n  forceRefresh?: boolean;\r\n} & BaseOption;\r\n\r\nexport function createBrowserHistory<S = DefaultStateType>(options: BrowserHistoryOption): History<S>;\r\n/**\r\n * @internal\r\n * @desc this override signature only for internal usage\r\n */\r\nexport function createBrowserHistory<S = DefaultStateType>(\r\n  options: LocationHandler<S> & BrowserHistoryOption\r\n): AgnosticHistory<S>;\r\nexport function createBrowserHistory<S = DefaultStateType>(\r\n  options: LocationHandler<S> & BrowserHistoryOption = {}\r\n): AgnosticHistory<S> {\r\n  const supportHistory = isSupportHistory();\r\n  const isSupportPopState = isSupportsPopState();\r\n  const browserHistory = window.history;\r\n  const { forceRefresh = false, getUserConfirmation = getDefaultConfirmation } = options;\r\n\r\n  const basename = options.basename ? normalizeSlash(options.basename) : '';\r\n\r\n  const initLocation = getLocation(getHistoryState());\r\n\r\n  const recordOperator = createMemoryRecord<string, Location<S>>(initLocation, l => l.key);\r\n\r\n  const transitionManager = new TransitionManager<S>();\r\n\r\n  const { go, addListener, block, destroy, getUpdateStateFunc } = getBaseHistory<S>(\r\n    'browser',\r\n    transitionManager,\r\n    handlePop\r\n  );\r\n\r\n  const listen = (listener: CommonListener<S>) => {\r\n    const trigger: Listener<S> = { type: 'common', listener: listener };\r\n    return addListener(trigger);\r\n  };\r\n\r\n  const history: AgnosticHistory<S> = {\r\n    action: Action.pop,\r\n    length: browserHistory.length,\r\n    location: initLocation,\r\n    go,\r\n    goBack: () => go(-1),\r\n    goForward: () => go(-1),\r\n    listen,\r\n    addListener,\r\n    block,\r\n    push,\r\n    replace,\r\n    destroy,\r\n    createHref,\r\n  };\r\n\r\n  const updateState = getUpdateStateFunc(history);\r\n\r\n  function getHistoryState() {\r\n    return supportHistory ? window.history.state : {};\r\n  }\r\n\r\n  function getLocation(historyState: Partial<HistoryState<S>>) {\r\n    const { search, hash } = window.location;\r\n    const { key, state } = historyState || {};\r\n    let pathname = window.location.pathname;\r\n    pathname = basename ? stripBasename(pathname, basename) : pathname;\r\n\r\n    return createLocation<S>('', { pathname, search, hash }, state, key);\r\n  }\r\n\r\n  // 拦截页面POP事件后，防止返回到的页面被重复拦截\r\n  let forceJump = false;\r\n\r\n  function handlePopState(location: Location<S>) {\r\n    if (forceJump) {\r\n      forceJump = false;\r\n      updateState(undefined);\r\n    } else {\r\n      const action = Action.pop;\r\n\r\n      const callback = (isJump: boolean) => {\r\n        if (isJump) {\r\n          // 执行跳转行为\r\n          updateState({ action: action, location: location });\r\n        } else {\r\n          revertPopState(location, history.location);\r\n        }\r\n      };\r\n\r\n      transitionManager.confirmJumpTo(location, action, getUserConfirmation, callback);\r\n    }\r\n  }\r\n\r\n  const isEventPopState = (event: Event): event is PopStateEvent => {\r\n    return event.type === EventType.PopState;\r\n  };\r\n\r\n  function handlePop(event: PopStateEvent | HashChangeEvent) {\r\n    const historyState = isSupportPopState && isEventPopState(event) ? event.state : getHistoryState();\r\n    const handler = options.locationHandler ? options.locationHandler : getLocation;\r\n    handlePopState(handler(historyState));\r\n  }\r\n\r\n  // 取消页面跳转并恢复到跳转前的页面\r\n  function revertPopState(from: Location<S>, to: Location<S>) {\r\n    const delta = recordOperator.getDelta(to, from);\r\n    if (delta !== 0) {\r\n      go(delta);\r\n      forceJump = true;\r\n    }\r\n  }\r\n\r\n  function createHref(path: Partial<Path>) {\r\n    return (options.baseHandler ? options.baseHandler() : basename) + createPath(path);\r\n  }\r\n\r\n  function push(to: To, state?: S) {\r\n    const action = Action.push;\r\n    const location = createLocation<S>(history.location, to, state, undefined);\r\n\r\n    transitionManager.confirmJumpTo(location, action, getUserConfirmation, isJump => {\r\n      if (!isJump) {\r\n        return;\r\n      }\r\n      const href = createHref(location);\r\n      const { key, state } = location;\r\n\r\n      if (supportHistory) {\r\n        if (forceRefresh) {\r\n          window.location.href = href;\r\n        } else {\r\n          browserHistory.pushState({ key: key, state: state }, '', href);\r\n          recordOperator.addRecord(history.location, location, action);\r\n          updateState({ action, location });\r\n        }\r\n      } else {\r\n        warning(state !== undefined, 'Browser history cannot push state in browsers that do not support HTML5 history');\r\n        window.location.href = href;\r\n      }\r\n    });\r\n  }\r\n\r\n  function replace(to: To, state?: S) {\r\n    const action = Action.replace;\r\n    const location = createLocation<S>(history.location, to, state, undefined);\r\n\r\n    transitionManager.confirmJumpTo(location, action, getUserConfirmation, isJump => {\r\n      if (!isJump) {\r\n        return;\r\n      }\r\n      const href = createHref(location);\r\n      const { key, state } = location;\r\n      if (supportHistory) {\r\n        if (forceRefresh) {\r\n          window.location.replace(href);\r\n        } else {\r\n          browserHistory.replaceState({ key: key, state: state }, '', href);\r\n          recordOperator.addRecord(history.location, location, action);\r\n          updateState({ action, location });\r\n        }\r\n      } else {\r\n        warning(state !== undefined, 'Browser history cannot push state in browsers that do not support HTML5 history');\r\n        window.location.replace(href);\r\n      }\r\n    });\r\n  }\r\n\r\n  return history;\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport type { HistoryLocation } from './vueHistory';\r\nimport { normalizeSlash, parseRelativePath } from '../history/utils';\r\nimport type { LocationQuery, RouteLocation, RouteLocationRaw } from './types';\r\n\r\nexport function normalizeBase(base?: string): string {\r\n  if (!base) {\r\n    if (typeof document !== 'undefined') {\r\n      const baseEl = document.querySelector('base');\r\n      base = (baseEl && baseEl.getAttribute('href')) || '/';\r\n      base = base.replace(/^\\w+:\\/\\/[^\\/]+/, '');\r\n    } else {\r\n      base = '/';\r\n    }\r\n  }\r\n  if (base[0] !== '/' && base[0] !== '#') {\r\n    base = `/${base}`;\r\n  }\r\n  return normalizeSlash(base);\r\n}\r\n\r\nconst BEFORE_HASH_RE = /^[^#]+#/;\r\n\r\nexport function createHrefHandler(base: string): (location: HistoryLocation) => string {\r\n  return (location: HistoryLocation) => base.replace(BEFORE_HASH_RE, '#') + location;\r\n}\r\n\r\nexport interface NormalizedLocation {\r\n  path: string;\r\n  fullPath: string;\r\n  hash: string;\r\n  query: LocationQuery;\r\n}\r\n\r\nexport function parseURL(location: string, currentLocation: string = '/'): NormalizedLocation {\r\n  let path: string | undefined,\r\n    query: LocationQuery = {},\r\n    searchString = '',\r\n    hash = '';\r\n\r\n  // Could use URL and URLSearchParams but IE 11 doesn't support it\r\n  // TODO: move to new URL()\r\n  const hashPos = location.indexOf('#');\r\n  let searchPos = location.indexOf('?');\r\n  // the hash appears before the search, so it's not part of the search string\r\n  if (hashPos < searchPos && hashPos >= 0) {\r\n    searchPos = -1;\r\n  }\r\n\r\n  if (searchPos > -1) {\r\n    path = location.slice(0, searchPos);\r\n    searchString = location.slice(searchPos + 1, hashPos > -1 ? hashPos : location.length);\r\n\r\n    query = parseQuery(searchString);\r\n  }\r\n\r\n  if (hashPos > -1) {\r\n    path = path || location.slice(0, hashPos);\r\n    // keep the # character\r\n    hash = location.slice(hashPos, location.length);\r\n  }\r\n\r\n  // no search and no query\r\n  path = parseRelativePath(path != null ? path : location, currentLocation);\r\n  // empty path means a relative query or hash `?foo=f`, `#thing`\r\n\r\n  return {\r\n    fullPath: path + (searchString && '?') + searchString + hash,\r\n    path,\r\n    query,\r\n    hash: decode(hash),\r\n  };\r\n}\r\n\r\nexport function stringifyUrl(location: Partial<Omit<NormalizedLocation, 'fullPath'>>): string {\r\n  const query: string = location.query ? stringifyQuery(location.query) : '';\r\n  return location.path + (query && '?') + query + (location.hash || '');\r\n}\r\n\r\nfunction stringifyQuery(query: LocationQuery): string {\r\n  const urlParams = new URLSearchParams();\r\n  const keys = Object.keys(query);\r\n  for (const key of keys) {\r\n    const value = query[key];\r\n    if (Array.isArray(value)) {\r\n      value.forEach(v => {\r\n        if (v) {\r\n          urlParams.append(key, v);\r\n        }\r\n      });\r\n    } else if (value !== undefined && value !== null) {\r\n      urlParams.append(key, value.toString());\r\n    }\r\n  }\r\n  return urlParams.toString();\r\n}\r\n\r\nexport function normalizeQuery(query: Record<string | number, any> | undefined): LocationQuery {\r\n  const normalizedQuery: LocationQuery = {};\r\n\r\n  for (const key in query) {\r\n    const value = query[key];\r\n    if (value !== undefined) {\r\n      normalizedQuery[key] = Array.isArray(value)\r\n        ? value.map(v => (v == null ? null : '' + v))\r\n        : value == null\r\n          ? value\r\n          : '' + value;\r\n    }\r\n  }\r\n  return normalizedQuery;\r\n}\r\n\r\nexport function locationToObject(\r\n  location: RouteLocationRaw,\r\n  currentRoute: RouteLocation\r\n): Exclude<RouteLocationRaw, string> {\r\n  return typeof location === 'string' ? parseURL(location, currentRoute.path) : { ...location };\r\n}\r\n\r\nfunction parseQuery(queryString: string): LocationQuery {\r\n  const params = new URLSearchParams(queryString);\r\n  return Object.fromEntries(params.entries());\r\n}\r\n\r\nfunction decode(text: string | number): string {\r\n  return decodeURIComponent(String(text));\r\n}\r\n\r\nfunction shallowCompareArray<T>(a: T[], b: T[] | T): boolean {\r\n  return Array.isArray(b) ? a.length === b.length && a.every((v, i) => b[i] === v) : a.length === 1 && a[0] === b;\r\n}\r\n\r\nfunction compareParams(a: RouteLocation['params'], b: RouteLocation['params']): boolean {\r\n  const aKeys = Object.keys(a);\r\n  const bKeys = Object.keys(b);\r\n  if (aKeys.length !== bKeys.length) {\r\n    return false;\r\n  }\r\n  for (const key of aKeys) {\r\n    const aValue = a[key];\r\n    const bValue = b[key];\r\n    if (Array.isArray(aValue)) {\r\n      if (!shallowCompareArray(aValue, bValue)) {\r\n        return false;\r\n      }\r\n    } else if (Array.isArray(bValue)) {\r\n      if (!shallowCompareArray(bValue, aValue)) {\r\n        return false;\r\n      }\r\n    } else {\r\n      return a === b;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nexport function isSameRouteLocation(a: RouteLocation, b: RouteLocation): boolean {\r\n  const matchLengthA = a.matched.length - 1;\r\n  const matchLengthB = b.matched.length - 1;\r\n\r\n  return (\r\n    matchLengthA >= -1 &&\r\n    matchLengthA === matchLengthB &&\r\n    a.matched[matchLengthA] === b.matched[matchLengthB] &&\r\n    compareParams(a.params, b.params) &&\r\n    stringifyQuery(a.query) === stringifyQuery(b.query) &&\r\n    a.hash === b.hash\r\n  );\r\n}\r\n\r\nexport function createCallBackList<T>() {\r\n  let callbacks: T[] = [];\r\n\r\n  const add = (cb: T) => {\r\n    callbacks.push(cb);\r\n    return () => {\r\n      callbacks = callbacks.filter(item => item !== cb);\r\n    };\r\n  };\r\n\r\n  return {\r\n    add,\r\n    list: () => callbacks.slice(0),\r\n    clear: () => (callbacks.length = 0),\r\n  };\r\n}\r\n\r\nexport function guardEvent(e: MouseEvent) {\r\n  // don't redirect with control keys\r\n  if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) return;\r\n  // don't redirect when preventDefault called\r\n  if (e.defaultPrevented) return;\r\n  // don't redirect on right click\r\n  if (e.button !== undefined && e.button !== 0) return;\r\n  // don't redirect if `target=\"_blank\"`\r\n  // @ts-expect-error getAttribute does exist\r\n  if (e.currentTarget && e.currentTarget.getAttribute) {\r\n    // @ts-expect-error getAttribute exists\r\n    const target = e.currentTarget.getAttribute('target');\r\n    if (/\\b_blank\\b/i.test(target)) return;\r\n  }\r\n  // this may be a Weex event which doesn't have this method\r\n  if (e.preventDefault) e.preventDefault();\r\n\r\n  return true;\r\n}\r\n\r\nexport function includesParams(outer: RouteLocation['params'], inner: RouteLocation['params']): boolean {\r\n  for (const key in inner) {\r\n    const innerValue = inner[key];\r\n    const outerValue = outer[key];\r\n    if (typeof innerValue === 'string') {\r\n      if (innerValue !== outerValue) return false;\r\n    } else {\r\n      if (\r\n        !Array.isArray(outerValue) ||\r\n        outerValue.length !== innerValue.length ||\r\n        innerValue.some((value, i) => value !== outerValue[i])\r\n      )\r\n        return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { createBrowserHistory } from '../history/browerHistory';\r\nimport { createHrefHandler, normalizeBase } from './utils';\r\nimport { createLocation, createPath, stripBasename, addHeadSlash } from '../history/utils';\r\nimport type { ActionInfo, CommonListener, CreateLocationHandler } from '../history/types';\r\n\r\nexport type HistoryLocation = string;\r\nexport type HistoryState = {\r\n  [key: string | number]: HistoryStateValue;\r\n};\r\ntype HistoryStateValue = string | number | boolean | null | undefined | HistoryState | HistoryStateValue[];\r\n\r\ninterface HistoryCallback {\r\n  (to: HistoryLocation, from: HistoryLocation, information: ActionInfo): void;\r\n}\r\n\r\nexport interface VueHistory {\r\n  // props\r\n  readonly base: string;\r\n  readonly location: HistoryLocation;\r\n  readonly state: HistoryState;\r\n\r\n  // methods\r\n  push(to: HistoryLocation, data?: HistoryState): void;\r\n\r\n  replace(to: HistoryLocation, data?: HistoryState): void;\r\n\r\n  go(delta: number, triggerListeners?: boolean): void;\r\n\r\n  listen(cb: HistoryCallback): () => void;\r\n\r\n  /**\r\n   * @internal\r\n   * @desc use for internal only\r\n   * @param listener {CommonListener}\r\n   */\r\n  listenLocation(listener: CommonListener): () => void;\r\n\r\n  createHref(location: HistoryLocation): string;\r\n\r\n  destroy(): void;\r\n}\r\n\r\nfunction createVueBaseHistory(handler: CreateLocationHandler<any>, base?: string): VueHistory {\r\n  const urlBase = normalizeBase(base);\r\n  const locationHandler = handler.locationHandler ? handler.locationHandler(urlBase) : null;\r\n  const hrefHandler = handler.baseHandler ? handler.baseHandler(urlBase) : null;\r\n  const baseHistory = createBrowserHistory<any>({ basename: urlBase, locationHandler, baseHandler: hrefHandler });\r\n\r\n  const listen = (listener: HistoryCallback) => {\r\n    return baseHistory.addListener({ type: 'pop', listener: listener });\r\n  };\r\n\r\n  const listenLocation = (listener: CommonListener) => {\r\n    return baseHistory.listen(listener);\r\n  };\r\n\r\n  const push = (to: HistoryLocation, data?: HistoryState) => {\r\n    return baseHistory.push(stripBasename(to, urlBase), data);\r\n  };\r\n\r\n  const replace = (to: HistoryLocation, data?: HistoryState) => {\r\n    return baseHistory.replace(stripBasename(to, urlBase), data);\r\n  };\r\n\r\n  const historyAdapter: VueHistory = {\r\n    base: urlBase,\r\n    location: '',\r\n    state: {},\r\n    go: baseHistory.go,\r\n    push: push,\r\n    listen,\r\n    listenLocation,\r\n    replace: replace,\r\n    destroy: baseHistory.destroy,\r\n    createHref: createHrefHandler(urlBase),\r\n  };\r\n\r\n  // let location and state readonly\r\n  Object.defineProperties(historyAdapter, {\r\n    location: {\r\n      enumerable: true,\r\n      get: () => createPath(locationHandler ? locationHandler(baseHistory.location) : baseHistory.location),\r\n    },\r\n    state: {\r\n      enumerable: true,\r\n      get: () => baseHistory.location.state,\r\n    },\r\n  });\r\n\r\n  return historyAdapter;\r\n}\r\n\r\nfunction createWebHistory(base?: string): VueHistory {\r\n  return createVueBaseHistory({}, base);\r\n}\r\n\r\nfunction createWebHashHistory(base?: string): VueHistory {\r\n  base = location.host ? base || location.pathname + location.search : '';\r\n\r\n  if (!base.includes('#')) {\r\n    base += '#';\r\n  }\r\n\r\n  const getLocation = (basename: string) => () => {\r\n    const { pathname, search, hash } = window.location;\r\n    const hashPos = basename.indexOf('#');\r\n    if (hashPos > -1) {\r\n      const slicePos = hash.includes(basename.slice(hashPos)) ? basename.slice(hashPos).length : 1;\r\n      const pathFromHash = addHeadSlash(hash.slice(slicePos));\r\n      return createLocation('', pathFromHash);\r\n    }\r\n    const path = stripBasename(pathname, basename);\r\n    return createLocation('', path + search + hash);\r\n  };\r\n\r\n  const getBase = (base: string) => () => {\r\n    const hashIndex = base.indexOf('#');\r\n    if (hashIndex !== -1) {\r\n      return window.location.host && document.querySelector('base') ? base : base.slice(hashIndex);\r\n    }\r\n    return location.protocol + '//' + location.host + base;\r\n  };\r\n\r\n  const hashHandlers: CreateLocationHandler<any> = { locationHandler: getLocation, baseHandler: getBase };\r\n\r\n  return createVueBaseHistory(hashHandlers, base);\r\n}\r\n\r\nexport { createWebHistory, createWebHashHistory };\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport type { RouteLocation } from './types';\r\n\r\nexport const START_LOCATION: RouteLocation = {\r\n  path: '/',\r\n  params: {},\r\n  query: {},\r\n  hash: '',\r\n  fullPath: '/',\r\n  meta: {},\r\n  matched: [],\r\n};\r\n\r\nexport const enum ErrorTypes {\r\n  MATCHER_NOT_FOUND = 1,\r\n  NAVIGATION_GUARD_REDIRECT = 2,\r\n  NAVIGATION_ABORTED = 4,\r\n  NAVIGATION_CANCELLED = 8,\r\n  NAVIGATION_DUPLICATED = 16,\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { createContext } from '@cloudsop/horizon';\r\nimport type { NormalizedRouteRecord, RouteLocation } from './types';\r\nimport type { VueRouter } from './Router';\r\nimport { START_LOCATION } from './const';\r\n\r\nexport const RouterContext = createContext<VueRouter>(null as any);\r\n\r\nexport const RouteContext = createContext<RouteLocation>(START_LOCATION);\r\n\r\nexport const CurrentRouteRecord = createContext<NormalizedRouteRecord>(null as any);\r\n\r\n// provide match depth for <RouterView/>\r\nexport const ViewDepth = createContext<{ depth: number }>({ depth: 0 });\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { Matched, Params } from './parser';\r\n\r\nexport type Token = {\r\n  type: TokenType;\r\n  value: string;\r\n};\r\n\r\nexport enum TokenType {\r\n  Delimiter = 'delimiter',\r\n  Static = 'static',\r\n  Param = 'param',\r\n  WildCard = 'wildcard',\r\n  LBracket = '(',\r\n  RBracket = ')',\r\n  Pattern = 'pattern',\r\n}\r\n\r\nexport interface Parser<P> {\r\n  regexp: RegExp;\r\n\r\n  keys: string[];\r\n\r\n  score: number[];\r\n\r\n  parse(url: string): Matched<P> | null;\r\n\r\n  compile(params: Params<P>): string;\r\n}\r\n\r\nexport type ParserOption = {\r\n  // 是否大小写敏感\r\n  caseSensitive?: boolean;\r\n  // 是否启用严格模式\r\n  strictMode?: boolean;\r\n  // 精准匹配 兼容 React-RouterV5\r\n  exact?: boolean;\r\n};\r\n\r\ntype ClearLeading<U extends string> = U extends `/${infer R}` ? ClearLeading<R> : U;\r\ntype ClearTailing<U extends string> = U extends `${infer L}/` ? ClearTailing<L> : U;\r\n\r\ntype ParseParam<Param extends string> = Param extends `:${infer R}`\r\n  ? {\r\n      [K in R]: string;\r\n    }\r\n  : {};\r\n\r\ntype MergeParams<OneParam extends Record<string, any>, OtherParam extends Record<string, any>> = {\r\n  readonly [Key in keyof OneParam | keyof OtherParam]?: string;\r\n};\r\n\r\ntype ParseURLString<Str extends string> = Str extends `${infer Param}/${infer Rest}`\r\n  ? MergeParams<ParseParam<Param>, ParseURLString<ClearLeading<Rest>>>\r\n  : ParseParam<Str>;\r\n\r\n// 解析URL中的动态参数，以实现TypeScript提示功能\r\nexport type GetURLParams<U extends string> = ParseURLString<ClearLeading<ClearTailing<U>>>;\r\n","/**\r\n * @description 将url中的//转换为/\r\n */\r\nexport function cleanPath(path: string): string {\r\n  return path.replace(/\\/+/g, '/');\r\n}\r\n\r\nexport function scoreCompare(score1: number[], score2: number[]): number {\r\n  const score1Length = score1.length;\r\n  const score2Length = score2.length;\r\n  const end = Math.min(score1Length, score2Length);\r\n  for (let i = 0; i < end; i++) {\r\n    const delta = score2[i] - score1[i];\r\n    if (delta !== 0) {\r\n      return delta;\r\n    }\r\n  }\r\n  if (score1Length === score2Length) {\r\n    return 0;\r\n  }\r\n  return score1Length > score2Length ? -1 : 1;\r\n}\r\n\r\n// 把正则表达式的特殊符号加两个反斜杠进行转义\r\nexport function escapeStr(str: string) {\r\n  return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, '\\\\$1');\r\n}\r\n","import { Token, TokenType } from './types';\r\nimport { cleanPath } from './utils';\r\n\r\nconst validChar = /[^/:()*?$^+]/;\r\n\r\n// 对Url模板进行词法解析，解析结果为Tokens\r\nexport function lexer(path: string): Token[] {\r\n  const tokens: Token[] = [];\r\n\r\n  if (!path) {\r\n    return tokens;\r\n  }\r\n\r\n  let urlPath = cleanPath(path);\r\n  if (urlPath !== '*' && !urlPath.startsWith('/')) {\r\n    throw new Error(`Url must start with \"/\".`);\r\n  }\r\n\r\n  const getLiteral = () => {\r\n    let name = '';\r\n    while (i < urlPath.length && validChar.test(urlPath[i])) {\r\n      name += urlPath[i];\r\n      skipChar(1);\r\n    }\r\n    return name;\r\n  };\r\n\r\n  const skipChar = (step: number) => {\r\n    i += step;\r\n  };\r\n\r\n  let i = 0;\r\n  while (i < urlPath.length) {\r\n    const curChar = urlPath[i];\r\n    const prevChar = urlPath[i - 1];\r\n\r\n    if (curChar === '/') {\r\n      tokens.push({ type: TokenType.Delimiter, value: urlPath[i] });\r\n      skipChar(1);\r\n      continue;\r\n    }\r\n    // dynamic params (/:a)\r\n    if (prevChar === '/' && curChar === ':') {\r\n      skipChar(1);\r\n      tokens.push({ type: TokenType.Param, value: getLiteral() });\r\n      continue;\r\n    }\r\n    // wildCard params (/:*)\r\n    if ((prevChar === '/' || prevChar === undefined) && curChar === '*') {\r\n      tokens.push({ type: TokenType.WildCard, value: urlPath[i] });\r\n      skipChar(1);\r\n      continue;\r\n    }\r\n    // static params\r\n    if (prevChar === '/' && validChar.test(curChar)) {\r\n      tokens.push({ type: TokenType.Static, value: getLiteral() });\r\n      continue;\r\n    }\r\n    if (curChar === '(') {\r\n      tokens.push({ type: TokenType.LBracket, value: '(' });\r\n      skipChar(1);\r\n      continue;\r\n    }\r\n    if (curChar === ')') {\r\n      tokens.push({ type: TokenType.RBracket, value: ')' });\r\n      skipChar(1);\r\n      continue;\r\n    }\r\n    if (['*', '?', '$', '^', '+'].includes(curChar)) {\r\n      tokens.push({ type: TokenType.Pattern, value: curChar });\r\n      skipChar(1);\r\n      continue;\r\n    }\r\n    if (validChar.test(curChar)) {\r\n      tokens.push({ type: TokenType.Pattern, value: getLiteral() });\r\n      continue;\r\n    }\r\n    // 跳过非法字符\r\n    skipChar(1);\r\n  }\r\n\r\n  return tokens;\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { GetURLParams, Parser, ParserOption, TokenType } from './types';\r\nimport { lexer } from './lexer';\r\nimport { escapeStr, scoreCompare } from './utils';\r\n\r\n// 不同类型参数的匹配得分\r\nenum MatchScore {\r\n  // 固定参数\r\n  static = 10,\r\n  // 动态参数\r\n  param = 6,\r\n  // 通配符参数\r\n  wildcard = 3,\r\n  placeholder = -1,\r\n}\r\n\r\nexport type Params<P> = { [K in keyof P]?: P[K] };\r\n\r\n// 兼容 react v5 matched类型\r\nexport type Matched<P = any> = {\r\n  score: number[];\r\n  params: Params<P>;\r\n  path: string;\r\n  url: string;\r\n  isExact: boolean;\r\n};\r\n\r\nconst defaultOption: Required<ParserOption> = {\r\n  // url匹配时是否大小写敏感\r\n  caseSensitive: false,\r\n  // 是否严格匹配url结尾的/\r\n  strictMode: false,\r\n  // 是否完全精确匹配\r\n  exact: false,\r\n};\r\n// 正则表达式中需要转义的字符\r\nconst REGEX_CHARS_RE = /[.+*?^${}()[\\]/\\\\]/g;\r\n// 用于匹配两个//中的的值\r\nconst BASE_PARAM_PATTERN = '[^/]+';\r\n\r\nconst DefaultDelimiter = '/#?';\r\n\r\n/**\r\n * URL匹配整体流程\r\n * 1.词法解析，将URL模板解析为Token\r\n * 2.使用Token生成正则表达式\r\n * 3.利用正则表达式解析URL中参数或填充URL模板\r\n */\r\nexport function createPathParser<Str extends string>(pathname: Str, option?: ParserOption): Parser<GetURLParams<Str>>;\r\nexport function createPathParser<P = unknown>(pathname: string, option?: ParserOption): Parser<P>;\r\nexport function createPathParser<P = unknown>(pathname: string, option: ParserOption = defaultOption): Parser<P> {\r\n  const {\r\n    caseSensitive = defaultOption.caseSensitive,\r\n    strictMode = defaultOption.strictMode,\r\n    exact = defaultOption.exact,\r\n  } = option;\r\n\r\n  let pattern = '^';\r\n  const keys: string[] = [];\r\n  const scores: number[] = [];\r\n\r\n  const tokens = lexer(pathname);\r\n  const onlyHasWildCard = tokens.length === 1 && tokens[0].type === TokenType.WildCard;\r\n  const tokenCount = tokens.length;\r\n  const lastToken = tokens[tokenCount - 1];\r\n  let asteriskCount = 0;\r\n\r\n  /**\r\n   * 用于支持URL中的可选参数/:parma?\r\n   * @description 向前扫描到下一个分隔符/，检查其中是否有?\r\n   * @param currentIdx\r\n   */\r\n  const lookToNextDelimiter = (currentIdx: number): boolean => {\r\n    let hasOptionalParam = false;\r\n    while (currentIdx < tokens.length && tokens[currentIdx].type !== TokenType.Delimiter) {\r\n      if (tokens[currentIdx].value === '?' || tokens[currentIdx].value === '*') {\r\n        hasOptionalParam = true;\r\n      }\r\n      currentIdx++;\r\n    }\r\n    return hasOptionalParam;\r\n  };\r\n  for (let tokenIdx = 0; tokenIdx < tokenCount; tokenIdx++) {\r\n    const token = tokens[tokenIdx];\r\n    const nextToken = tokens[tokenIdx + 1];\r\n    switch (token.type) {\r\n      case TokenType.Delimiter: {\r\n        // 该分隔符后有可选参数则该分割符在匹配时是可选的\r\n        const hasOptional = lookToNextDelimiter(tokenIdx + 1);\r\n        // 该分隔符为最后一个且strictMode===false时，该分割符在匹配时是可选的\r\n        const isSlashOptional = nextToken === undefined && !strictMode;\r\n        pattern += `/${hasOptional || isSlashOptional ? '?' : ''}`;\r\n        break;\r\n      }\r\n      case TokenType.Static:\r\n        pattern += token.value.replace(REGEX_CHARS_RE, '\\\\$&');\r\n        if (nextToken && nextToken.type === TokenType.Pattern) {\r\n          pattern += `(.${nextToken.value})`;\r\n          keys.push(String(asteriskCount));\r\n          asteriskCount++;\r\n        }\r\n        scores.push(MatchScore.static);\r\n        break;\r\n      case TokenType.Param: {\r\n        // 动态参数支持形如/:param、/:param*、/:param?、/:param(\\\\d+)的形式\r\n        let paramRegexp = '';\r\n        if (nextToken) {\r\n          switch (nextToken.type) {\r\n            case TokenType.LBracket:\r\n              // 跳过当前Token和左括号\r\n              tokenIdx += 2;\r\n              while (tokens[tokenIdx].type !== TokenType.RBracket) {\r\n                paramRegexp += tokens[tokenIdx].value;\r\n                tokenIdx++;\r\n              }\r\n              paramRegexp = `(${paramRegexp})`;\r\n              break;\r\n            case TokenType.Pattern:\r\n              tokenIdx++;\r\n              paramRegexp += `(${nextToken.value === '*' ? '.*' : BASE_PARAM_PATTERN})${nextToken.value}`;\r\n              break;\r\n          }\r\n        }\r\n        pattern += paramRegexp ? `(?:${paramRegexp})` : `(${BASE_PARAM_PATTERN})`;\r\n        keys.push(token.value);\r\n        scores.push(MatchScore.param);\r\n        break;\r\n      }\r\n      case TokenType.WildCard:\r\n        keys.push(token.value);\r\n        pattern += `((?:${BASE_PARAM_PATTERN})${onlyHasWildCard ? '?' : ''}(?:/(?:${BASE_PARAM_PATTERN}))*)`;\r\n        scores.push(onlyHasWildCard ? MatchScore.wildcard : MatchScore.placeholder);\r\n        break;\r\n    }\r\n  }\r\n  const isWildCard = lastToken.type === TokenType.WildCard;\r\n\r\n  if (!isWildCard && !exact) {\r\n    if (!strictMode) {\r\n      pattern += `(?:[${escapeStr(DefaultDelimiter)}](?=$))?`;\r\n    }\r\n    if (lastToken.type !== TokenType.Delimiter) {\r\n      pattern += `(?=[${escapeStr(DefaultDelimiter)}]|$)`;\r\n    }\r\n  } else {\r\n    pattern += strictMode ? '$' : `[${escapeStr(DefaultDelimiter)}]?$`;\r\n  }\r\n\r\n  const flag = caseSensitive ? '' : 'i';\r\n  const regexp = new RegExp(pattern, flag);\r\n\r\n  /**\r\n   * @description 根据给定Pattern解析path\r\n   */\r\n  function parse(path: string): Matched<P> | null {\r\n    const reMatch = path.match(regexp);\r\n\r\n    if (!reMatch) {\r\n      return null;\r\n    }\r\n    const matchedPath = reMatch[0];\r\n    const params: Params<P> = {};\r\n    const parseScore: number[] = Array.from(scores);\r\n    for (let i = 1; i < reMatch.length; i++) {\r\n      const param = reMatch[i];\r\n      const key = keys[i - 1];\r\n      if (key === '*' && param) {\r\n        const value = param.split('/');\r\n        if (!Array.isArray(params['*'])) {\r\n          params['*'] = value;\r\n        } else {\r\n          params['*'].push(...value);\r\n        }\r\n        // 完成通配符参数解析后将placeholder替换为wildcard参数的分值\r\n        parseScore.splice(\r\n          scores.indexOf(MatchScore.placeholder),\r\n          1,\r\n          ...new Array(value.length).fill(MatchScore.wildcard)\r\n        );\r\n      } else {\r\n        params[key] = param ? param : undefined;\r\n      }\r\n    }\r\n\r\n    const isExact = path === matchedPath;\r\n    const url = path === '/' && matchedPath === '' ? '/' : matchedPath;\r\n    return { isExact: isExact, path: pathname, url: url, score: parseScore, params: params };\r\n  }\r\n\r\n  /**\r\n   * @description 使用给定参数填充pattern，得到目标URL\r\n   */\r\n  function compile(params: Params<P>): string {\r\n    let path = '';\r\n    for (const token of tokens) {\r\n      switch (token.type) {\r\n        case TokenType.Static:\r\n          path += token.value;\r\n          break;\r\n        case TokenType.Param:\r\n          if (!params[token.value]) {\r\n            throw new Error('Param is invalid.');\r\n          }\r\n          path += params[token.value];\r\n          break;\r\n        case TokenType.WildCard: {\r\n          const wildCard = params['*'];\r\n          if (wildCard instanceof Array) {\r\n            path += wildCard.join('/');\r\n          } else {\r\n            path += wildCard;\r\n          }\r\n          break;\r\n        }\r\n        case TokenType.Delimiter:\r\n          path += token.value;\r\n          break;\r\n      }\r\n    }\r\n    return path;\r\n  }\r\n\r\n  return {\r\n    regexp: regexp,\r\n    keys: keys,\r\n    score: scores,\r\n    compile,\r\n    parse,\r\n  };\r\n}\r\n\r\n/**\r\n * @description 依次使用pathname与pattern进行匹配，根据匹配分数取得分数最高结果\r\n */\r\nexport function matchPath<P = any>(\r\n  pathname: string,\r\n  pattern: string | string[],\r\n  option?: ParserOption\r\n): Matched<P> | null {\r\n  const patterns = Array.isArray(pattern) ? [...pattern] : [pattern];\r\n  const matchedResults: Matched<P>[] = [];\r\n  for (const item of patterns) {\r\n    const parser = createPathParser(item, option);\r\n    const matched = parser.parse(pathname);\r\n    if (matched) {\r\n      matchedResults.push(matched);\r\n    }\r\n  }\r\n  return !matchedResults.length ? null : matchedResults.sort((a, b) => scoreCompare(a.score, b.score))[0];\r\n}\r\n\r\nexport function generatePath<P = any>(path: string, params: Params<P>) {\r\n  const parser = createPathParser(path);\r\n  return parser.compile(params);\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { createPathParser } from './parser';\r\nimport { scoreCompare } from './utils';\r\nimport type { Parser, ParserOption } from './types';\r\n\r\ntype RouteRecordName = string | symbol;\r\n\r\ninterface AgnosticRouteRecord<T extends AgnosticRouteRecord<T>> {\r\n  path: string;\r\n  component?: unknown | undefined;\r\n  meta?: Record<string | number | symbol, unknown>;\r\n  strict?: boolean;\r\n  sensitive?: boolean;\r\n  name?: RouteRecordName;\r\n  children?: T[];\r\n}\r\n\r\nexport interface RouteBranch<T extends AgnosticRouteRecord<T>, R = T> {\r\n  path: T['path'];\r\n  score: number[];\r\n  component: T['component'];\r\n  key: string[];\r\n  regexp: RegExp;\r\n  parse: Parser<unknown>['parse'];\r\n  compile: Parser<unknown>['compile'];\r\n  parent?: RouteBranch<T, R>;\r\n  children: RouteBranch<T, R>[];\r\n  raw: R;\r\n}\r\n\r\ninterface CommonLocation {\r\n  path: string;\r\n  name?: string | symbol | null;\r\n  params: Param;\r\n}\r\n\r\ninterface MatcherOption {\r\n  strict?: boolean;\r\n  sensitive?: boolean;\r\n}\r\n\r\ntype Param = Record<string, string | string[]>;\r\n\r\nconst defaultMatcherOption: MatcherOption = {\r\n  strict: false,\r\n  sensitive: false,\r\n};\r\n\r\nfunction isRouteName(name: unknown): name is RouteRecordName {\r\n  return typeof name === 'string' || typeof name === 'undefined';\r\n}\r\n\r\nfunction getLocationParams(params: Param, keys: string[]): Param {\r\n  const newParams: Param = {};\r\n  for (const key of keys) {\r\n    if (key in params) {\r\n      newParams[key] = params[key];\r\n    }\r\n  }\r\n  return newParams;\r\n}\r\n\r\nfunction convertRecordToBranch<T extends AgnosticRouteRecord<T>, R extends AgnosticRouteRecord<T>>(\r\n  record: R,\r\n  option: ParserOption\r\n): RouteBranch<T, R> {\r\n  const parser = createPathParser(record.path, option);\r\n  return {\r\n    raw: record,\r\n    path: record.path,\r\n    score: parser.score,\r\n    parse: parser.parse,\r\n    regexp: parser.regexp,\r\n    compile: parser.compile,\r\n    component: record.component,\r\n    key: parser.keys,\r\n    children: [],\r\n  };\r\n}\r\n\r\nfunction agnosticRouteMatcher<T extends AgnosticRouteRecord<T>, R extends AgnosticRouteRecord<T> = T>(\r\n  routes: T[],\r\n  option: MatcherOption = defaultMatcherOption,\r\n  branchHandler: (item: T) => R = item => item as unknown as R\r\n) {\r\n  const branches: RouteBranch<T, R>[] = [];\r\n  const branchesMap = new Map<RouteRecordName, RouteBranch<T, R>>();\r\n\r\n  function addBranch(route: T, parent: RouteBranch<T, R> | null = null, recursive: boolean = true) {\r\n    const normalizedRecord = branchHandler(route);\r\n    const path = normalizedRecord.path!;\r\n    if (parent && !path.startsWith('/')) {\r\n      const concatSlash = parent.path.endsWith('/') ? '' : '/';\r\n      normalizedRecord.path = parent.path + (path ? concatSlash + path : '');\r\n    }\r\n    const recordParserOption = mergeDefault(\r\n      {\r\n        exact: true,\r\n        caseSensitive: option.sensitive,\r\n        strictMode: option.strict,\r\n      },\r\n      {\r\n        caseSensitive: route.sensitive,\r\n        strictMode: route.strict,\r\n      }\r\n    );\r\n    const branch = convertRecordToBranch<T, R>(normalizedRecord, recordParserOption);\r\n    if (parent) {\r\n      branch.parent = parent;\r\n      parent.children.push(branch);\r\n    }\r\n    const originalBranch = branch;\r\n    branches.push(branch);\r\n    if (branch.raw.name) {\r\n      branchesMap.set(branch.raw.name, branch);\r\n    }\r\n    if (Array.isArray(route.children) && recursive) {\r\n      for (const child of route.children) {\r\n        addBranch(child, branch);\r\n      }\r\n    }\r\n    branches.sort((a, b) => {\r\n      const score = scoreCompare(a.score, b.score);\r\n      if (score !== 0) {\r\n        return score;\r\n      }\r\n      return a.parent ? -1 : 1;\r\n    });\r\n    return originalBranch ? () => delBranch(originalBranch) : () => {};\r\n  }\r\n\r\n  function getNamedBranch(name: RouteRecordName) {\r\n    if (branchesMap.has(name)) {\r\n      return branchesMap.get(name)!.raw;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  function delBranch(branchRef: RouteRecordName | RouteBranch<T, R>) {\r\n    if (isRouteName(branchRef)) {\r\n      const branch = branchesMap.get(branchRef);\r\n      if (branch) {\r\n        branchesMap.delete(branchRef);\r\n        const branchIndex = branches.indexOf(branch);\r\n        if (branchIndex > -1) {\r\n          branches.splice(branchIndex, 1);\r\n          branch.children.forEach(b => delBranch(b));\r\n        }\r\n      }\r\n    } else {\r\n      const idx = branches.indexOf(branchRef);\r\n      if (idx > -1) {\r\n        branches.splice(idx, 1);\r\n        if (branchRef.raw.name) {\r\n          branchesMap.delete(branchRef.raw.name);\r\n        }\r\n      }\r\n      branchRef.children.forEach(b => delBranch(b));\r\n    }\r\n    branches.sort((a, b) => scoreCompare(a.score, b.score));\r\n  }\r\n\r\n  function matchPath(to: Readonly<Partial<CommonLocation>>, from: Readonly<CommonLocation>) {\r\n    let path: RouteBranch<T, R>['path'];\r\n    let branch: RouteBranch<T, R> | undefined;\r\n    let name: RouteRecordName | undefined;\r\n    let params: Param = {};\r\n\r\n    if ('name' in to && to.name) {\r\n      branch = branchesMap.get(to.name);\r\n      if (!branch) {\r\n        throw Error('route now found');\r\n      }\r\n      name = branch.raw.name;\r\n      params = getLocationParams(from.params, branch.key);\r\n      if (to.params) {\r\n        params = Object.assign(params, getLocationParams(to.params, branch.key));\r\n      }\r\n      path = branch.compile(params);\r\n    } else if (to.path != null) {\r\n      path = to.path;\r\n      for (const b of branches) {\r\n        if (b.regexp.test(path)) {\r\n          branch = b;\r\n          break;\r\n        }\r\n      }\r\n      if (branch) {\r\n        params = branch.parse(path)!.params;\r\n        name = branch.raw.name;\r\n      }\r\n    } else {\r\n      branch = from.name ? branchesMap.get(from.name) : branches.find(b => b.regexp.test(from.path));\r\n      if (!branch) {\r\n        throw Error('route now found');\r\n      }\r\n      name = branch.raw.name;\r\n      params = Object.assign({}, from.params, to.params);\r\n      path = branch.compile(params);\r\n    }\r\n    const matched: R[] = [];\r\n    let parentBranch = branch;\r\n    while (parentBranch) {\r\n      matched.push(parentBranch.raw);\r\n      parentBranch = parentBranch.parent;\r\n    }\r\n    // push is 800 times faster than unshift\r\n    matched.reverse();\r\n    if (matched.length < 1) {\r\n      console.warn(`url \"${path}\" has no matched route`);\r\n    }\r\n\r\n    return {\r\n      name,\r\n      path,\r\n      params,\r\n      matched,\r\n      meta: merge(matched),\r\n    };\r\n  }\r\n\r\n  routes.forEach(r => addBranch(r));\r\n\r\n  return {\r\n    branches,\r\n    addBranch,\r\n    delBranch,\r\n    matchPath,\r\n    getNamedBranch,\r\n  };\r\n}\r\n\r\ntype RecordMeta = Pick<AgnosticRouteRecord<any>, 'meta'>;\r\n\r\nfunction merge<T extends RecordMeta>(data: T[]) {\r\n  return data.reduce((prev, currentValue) => Object.assign(prev, currentValue.meta), {});\r\n}\r\n\r\nfunction mergeDefault<T extends { [key: string]: any }>(defaultOptions: T, partialOptions: Partial<T>): T {\r\n  const mergedOption = {} as T;\r\n  for (const key in defaultOptions) {\r\n    mergedOption[key] =\r\n      key in partialOptions && partialOptions[key] != null ? partialOptions[key]! : defaultOptions[key];\r\n  }\r\n  return mergedOption;\r\n}\r\n\r\nexport { agnosticRouteMatcher };\r\n","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { MatcherLocation, RouteLocation, type RouteLocationRaw } from './types';\r\nimport { ErrorTypes } from './const';\r\n\r\nexport interface MatcherError extends Error {\r\n  type: ErrorTypes.MATCHER_NOT_FOUND;\r\n  location: MatcherLocation;\r\n  currentLocation?: MatcherLocation;\r\n}\r\n\r\nexport interface NavigationFailure extends Error {\r\n  type: ErrorTypes.NAVIGATION_CANCELLED | ErrorTypes.NAVIGATION_ABORTED | ErrorTypes.NAVIGATION_DUPLICATED;\r\n  from: RouteLocation;\r\n  to: RouteLocation;\r\n}\r\n\r\nexport interface NavigationRedirectError extends Omit<NavigationFailure, 'to' | 'type'> {\r\n  type: ErrorTypes.NAVIGATION_GUARD_REDIRECT;\r\n  to: RouteLocationRaw;\r\n}\r\n\r\nexport type RouteError = MatcherError | NavigationFailure | NavigationRedirectError;\r\n\r\nconst NavigationFailureSymbol = Symbol('navigation failure');\r\n\r\nexport function createRouterError<T extends RouteError>(type: T['type'], params: Omit<T, 'type' | keyof Error>): T {\r\n  return Object.assign(new Error(), { type: type, [NavigationFailureSymbol]: true }, params) as unknown as T;\r\n}\r\n\r\nexport function isNavigationFailure(error: any, type: ErrorTypes) {\r\n  return (\r\n    error instanceof Error &&\r\n    NavigationFailureSymbol in error &&\r\n    (type == null || Boolean((error as unknown as NavigationFailure).type & type))\r\n  );\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { useContext, useEffect, useMemo, useRef } from '@cloudsop/horizon';\r\nimport { RouteContext, RouterContext } from './RouterContext';\r\nimport { guardEvent, includesParams, isSameRouteLocation } from './utils';\r\nimport type { RouterLinkProps } from './RouterLink';\r\nimport type { NavigationFailure } from './routerError';\r\nimport type { RouteLocation } from './types';\r\nimport type { VueRouterInternal } from './Router';\r\n\r\nfunction useRouter() {\r\n  return useContext(RouterContext);\r\n}\r\n\r\nfunction useRoute() {\r\n  return useContext(RouteContext);\r\n}\r\n\r\nfunction useLink(props: Pick<RouterLinkProps, 'to' | 'replace'>) {\r\n  const router = useContext(RouterContext);\r\n  const currentRoute = useContext(RouteContext);\r\n\r\n  const { to, replace } = props;\r\n\r\n  const route = useMemo(() => router.resolve(to), [to]);\r\n\r\n  const activeBranchIndex = useMemo<number>(() => {\r\n    const matched = route.matched;\r\n    const length = matched.length;\r\n\r\n    const targetMatched = matched[length - 1];\r\n    const currentMatched = currentRoute.matched;\r\n    if (!targetMatched || currentMatched.length === 0) {\r\n      return -1;\r\n    }\r\n    const index = currentMatched.findIndex(m => m === targetMatched);\r\n    if (index > -1) {\r\n      return index;\r\n    }\r\n    const parentRecordPath: string = matched[length - 2] ? matched[length - 2].path : '';\r\n\r\n    if (\r\n      length > 1 &&\r\n      targetMatched.path === parentRecordPath &&\r\n      currentMatched[currentMatched.length - 1].path !== parentRecordPath\r\n    ) {\r\n      return currentMatched.findIndex(m => m === matched[length - 2]);\r\n    }\r\n    return index;\r\n  }, [route, currentRoute]);\r\n\r\n  const isActive = activeBranchIndex > -1 && includesParams(currentRoute.params, route.params);\r\n  const isExactActive =\r\n    activeBranchIndex > -1 &&\r\n    activeBranchIndex === currentRoute.matched.length - 1 &&\r\n    isSameRouteLocation(currentRoute, route);\r\n\r\n  function navigate(e: MouseEvent): Promise<void | NavigationFailure> {\r\n    if (guardEvent(e)) {\r\n      return router[replace ? 'replace' : 'push'](to);\r\n    }\r\n    return Promise.resolve();\r\n  }\r\n\r\n  return {\r\n    route,\r\n    navigate,\r\n    isActive,\r\n    isExactActive,\r\n  };\r\n}\r\n\r\ninterface WatchCallback {\r\n  (newRouteLocation: RouteLocation, oldRouteLocation: RouteLocation): void;\r\n}\r\n\r\ninterface WatchConfig {\r\n  immediate: boolean;\r\n}\r\n\r\nfunction useRouteWatch(callback: WatchCallback, config?: WatchConfig): () => void {\r\n  const router = useContext(RouterContext) as VueRouterInternal;\r\n  const { immediate } = config || {};\r\n  const isMount = useRef(false);\r\n  const unListener = useRef<(() => void) | null>(null);\r\n  useEffect(() => {\r\n    if (!isMount.current) {\r\n      unListener.current = router.subscribeRouteChange((to, from) => callback(to, from));\r\n      if (immediate) {\r\n        callback(router.currentRoute, router.currentRoute);\r\n      }\r\n      isMount.current = true;\r\n    }\r\n  }, []);\r\n  return () => unListener.current && unListener.current();\r\n}\r\n\r\nexport { useRouter, useRoute, useLink, useRouteWatch };\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { InulaNode, useContext } from '@cloudsop/horizon';\r\nimport { RouterContext } from './RouterContext';\r\nimport { useLink } from './hooks';\r\n\r\nconst getLinkClass = (propClass: string | undefined, globalClass: string | undefined, defaultClass: string): string => {\r\n  return [propClass, globalClass, defaultClass].reduce((prev, curr) => {\r\n    return prev != null ? prev : curr;\r\n  }) as string;\r\n};\r\n\r\nexport interface RouterLinkProps {\r\n  to: string;\r\n  replace?: boolean;\r\n  activeClass?: string;\r\n  exactActiveClass?: string;\r\n  children?: InulaNode;\r\n\r\n  [key: string]: any;\r\n}\r\n\r\nfunction RouterLink(props: RouterLinkProps) {\r\n  const router = useContext(RouterContext);\r\n  const { to, replace, children } = props;\r\n  const link = useLink({ to, replace });\r\n  const { activeClass, exactActiveClass } = props;\r\n  const { linkActiveClass, linkExactActiveClass } = router.option;\r\n\r\n  const classes: string[] = [];\r\n  if (link.isActive) {\r\n    classes.push(getLinkClass(activeClass, linkActiveClass, 'router-link-active'));\r\n  }\r\n  if (link.isExactActive) {\r\n    classes.push(getLinkClass(exactActiveClass, linkExactActiveClass, 'router-link-exact-active'));\r\n  }\r\n\r\n  const className: string | undefined = classes.length > 0 ? classes.join(' ') : undefined;\r\n\r\n  return (\r\n    <a onClick={link.navigate} href={link.route.fullPath} className={className}>\r\n      {children}\r\n    </a>\r\n  );\r\n}\r\n\r\nexport default RouterLink;\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { createElement, useContext, useMemo } from '@cloudsop/horizon';\r\nimport { CurrentRouteRecord, RouteContext, ViewDepth } from './RouterContext';\r\nimport { NormalizedRouteRecord } from './types';\r\n\r\nfunction calcNextDepth(currentDepth: number, matched: NormalizedRouteRecord[]) {\r\n  let matchedRecord: NormalizedRouteRecord | undefined;\r\n  let nextDepth = currentDepth;\r\n  while ((matchedRecord = matched[nextDepth]) && !matchedRecord.component) {\r\n    nextDepth++;\r\n  }\r\n  return nextDepth;\r\n}\r\n\r\nfunction RouterView() {\r\n  const { matched } = useContext(RouteContext);\r\n  const { depth } = useContext(ViewDepth);\r\n  const nextDepth = useMemo(() => calcNextDepth(depth, matched), [depth]);\r\n  const routeRecord = matched[nextDepth];\r\n  if (routeRecord) {\r\n    const { component, props } = routeRecord;\r\n    const nextComponent = createElement(component, props);\r\n\r\n    return (\r\n      <ViewDepth.Provider value={{ depth: nextDepth + 1 }}>\r\n        <CurrentRouteRecord.Provider value={routeRecord}>{nextComponent}</CurrentRouteRecord.Provider>\r\n      </ViewDepth.Provider>\r\n    );\r\n  }\r\n  return null;\r\n}\r\n\r\nexport default RouterView;\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport type { VueHistory } from './vueHistory';\r\nimport { ComponentType, createElement, FunctionComponent, InulaElement } from '@cloudsop/horizon';\r\nimport type {\r\n  ExceptListener,\r\n  NavigationGuard,\r\n  NavigationGuardNext,\r\n  NavigationHook,\r\n  NormalizedRouteRecord,\r\n  RouteLocation,\r\n  RouteLocationRaw,\r\n  RouteMetaData,\r\n  RouteRecordName,\r\n  RouteRedirectOption,\r\n} from './types';\r\nimport { agnosticRouteMatcher, RouteBranch } from '../matcher/matcher';\r\nimport { ErrorTypes, START_LOCATION } from './const';\r\nimport {\r\n  createCallBackList,\r\n  isSameRouteLocation,\r\n  locationToObject,\r\n  normalizeQuery,\r\n  parseURL,\r\n  stringifyUrl,\r\n} from './utils';\r\nimport { createRouterError, NavigationFailure } from './routerError';\r\nimport RouterLink from './RouterLink';\r\nimport RouterView from './RouterView';\r\nimport { RouterProvider } from './RouterProvider';\r\n\r\ninterface App {\r\n  rootComponent: InulaElement;\r\n\r\n  component(name: string, component: FunctionComponent<any>): void;\r\n\r\n  config: AppConfig;\r\n}\r\n\r\ninterface AppConfig {\r\n  globalProperties: Record<string, any>;\r\n}\r\n\r\nexport interface VueRouter {\r\n  readonly currentRoute: RouteLocation;\r\n\r\n  readonly option: RouterOptions;\r\n\r\n  listening: boolean;\r\n\r\n  // dynamic operate route methods\r\n  addRoute(route: RouteRecord): () => void;\r\n\r\n  removeRoute(name: RouteRecordName): void;\r\n\r\n  hasRoute(name: RouteRecordName): boolean;\r\n\r\n  getRoutes(): RouteBranch<RouteRecord, NormalizedRouteRecord>[];\r\n\r\n  resolve(to: Readonly<RouteLocationRaw>, from?: Readonly<RouteLocation>): RouteLocation;\r\n\r\n  // negative methods\r\n  push(to: RouteLocationRaw): Promise<NavigationFailure | void | undefined>;\r\n\r\n  replace(to: RouteLocationRaw): Promise<NavigationFailure | void | undefined>;\r\n\r\n  go(delta: number): void;\r\n\r\n  back(): void;\r\n\r\n  forward(): void;\r\n\r\n  // hooks\r\n  beforeEach(guard: NavigationGuard): () => void;\r\n\r\n  beforeResolve(guard: NavigationGuard): () => void;\r\n\r\n  afterEach(guard: NavigationHook): () => void;\r\n\r\n  onError(handler: ExceptListener): () => void;\r\n\r\n  // status\r\n  isReady(): Promise<void>;\r\n\r\n  install(app: App): void;\r\n}\r\n\r\nexport interface VueRouterInternal extends VueRouter {\r\n  // trigger when popstate event\r\n  pop(to: RouteLocationRaw): void;\r\n\r\n  // use for RouterProvider\r\n  subscribeRouteChange(observer: RouteObserver): () => void;\r\n}\r\n\r\ninterface RouterMatchOption {\r\n  sensitive?: boolean;\r\n  strict?: boolean;\r\n  start?: boolean;\r\n  end?: boolean;\r\n}\r\n\r\ntype RouteRecordOption = Omit<RouterMatchOption, 'start' | 'end'>;\r\n\r\nexport interface RouteRecordBase extends RouteRecordOption {\r\n  path: string;\r\n  redirect?: RouteRedirectOption;\r\n  alias?: string | string[];\r\n  name?: RouteRecordName;\r\n  meta?: RouteMetaData;\r\n  children?: unknown[];\r\n  props?: boolean | Record<string, unknown>;\r\n  beforeEnter?: NavigationGuard | NavigationGuard[];\r\n}\r\n\r\nexport interface RouteRecordSingleView extends RouteRecordBase {\r\n  component: ComponentType<any>;\r\n  children?: never;\r\n}\r\n\r\nexport interface RouteRecordWithChildren extends RouteRecordBase {\r\n  component: ComponentType<any>;\r\n  children: RouteRecord[];\r\n}\r\n\r\nexport interface RouteRecordRedirect extends RouteRecordBase {\r\n  redirect?: RouteRedirectOption;\r\n  component?: never;\r\n  props?: never;\r\n  children?: never;\r\n}\r\n\r\nexport type RouteRecord = RouteRecordSingleView | RouteRecordWithChildren | RouteRecordRedirect;\r\n\r\nexport type Guard<T = any> = () => Promise<T>;\r\n\r\nexport interface RouteObserver {\r\n  (to: RouteLocation, from: RouteLocation): void;\r\n}\r\n\r\nexport interface RouterOptions extends RouteRecordOption {\r\n  history: VueHistory;\r\n  routes: RouteRecord[];\r\n  linkActiveClass?: string;\r\n  linkExactActiveClass?: string;\r\n}\r\n\r\nfunction normalizeRouteRecord(record: RouteRecord): NormalizedRouteRecord {\r\n  return {\r\n    beforeEnter: record.beforeEnter,\r\n    children: record.children || [],\r\n    component: record.component,\r\n    leaveGuards: new Set<NavigationGuard>(),\r\n    meta: record.meta || {},\r\n    name: record.name,\r\n    path: record.path,\r\n    props: record.props || {},\r\n    redirected: record.redirect,\r\n    updateGuards: new Set<NavigationGuard>(),\r\n  };\r\n}\r\n\r\nfunction initRouter(options: RouterOptions): VueRouterInternal {\r\n  const { history, routes } = options;\r\n\r\n  const matcher = agnosticRouteMatcher<RouteRecord, NormalizedRouteRecord>(\r\n    routes,\r\n    {\r\n      sensitive: options.sensitive,\r\n      strict: options.strict,\r\n    },\r\n    item => normalizeRouteRecord(item)\r\n  );\r\n\r\n  const beforeEachGuards = createCallBackList<NavigationGuard>();\r\n  const beforeResolveGuards = createCallBackList<NavigationGuard>();\r\n  const afterEachGuards = createCallBackList<NavigationHook>();\r\n  const exceptListeners = createCallBackList<ExceptListener>();\r\n\r\n  const observers = createCallBackList<RouteObserver>();\r\n\r\n  function resolve(to: Readonly<RouteLocationRaw>, from?: Readonly<RouteLocation>): RouteLocation {\r\n    from = Object.assign({}, from || router.currentRoute);\r\n    if (typeof to === 'string') {\r\n      const normalizedLocation = parseURL(to, from.path);\r\n      const matchedRoute = matcher.matchPath({ path: normalizedLocation.path }, from);\r\n      return Object.assign(normalizedLocation, matchedRoute);\r\n    }\r\n\r\n    let matcherLocation;\r\n\r\n    if (to.path != null) {\r\n      matcherLocation = Object.assign({}, to, { path: parseURL(to.path, from.path).path });\r\n    } else {\r\n      const targetParams = Object.assign({}, to.params);\r\n      for (const key of Object.keys(targetParams)) {\r\n        if (targetParams[key] == null) {\r\n          delete targetParams[key];\r\n        }\r\n      }\r\n      matcherLocation = Object.assign({}, to, { params: targetParams });\r\n    }\r\n    const matchedRoute = matcher.matchPath(matcherLocation, from);\r\n    const fullPath = stringifyUrl(Object.assign(to, { path: matchedRoute.path }));\r\n    const query = normalizeQuery(to.query);\r\n    const hash = to.hash || '';\r\n    return Object.assign({ fullPath, query, hash }, matchedRoute);\r\n  }\r\n\r\n  async function push(to: RouteLocationRaw, redirectFrom?: RouteLocation) {\r\n    const replace = typeof to === 'string' ? false : to.replace;\r\n    const force = typeof to === 'string' ? false : to.force;\r\n    const target = router.resolve(to);\r\n    const from = router.currentRoute;\r\n\r\n    const redirectLocation = extractRedirect(target);\r\n    if (redirectLocation) {\r\n      return push(Object.assign(redirectLocation, { replace: to, force: force }), redirectFrom || target);\r\n    }\r\n\r\n    target.redirectedFrom = redirectFrom;\r\n    let failure: NavigationFailure | void | undefined;\r\n    if (!force && isSameRouteLocation(target, from)) {\r\n      failure = createRouterError<NavigationFailure>(ErrorTypes.NAVIGATION_DUPLICATED, { to: target, from });\r\n    }\r\n\r\n    return failure\r\n      ? Promise.resolve(failure)\r\n      : triggerGuards(target, from)\r\n          .catch(err => triggerError(err, target, from))\r\n          .then((failure: NavigationFailure | void) => {\r\n            if (failure) {\r\n              Promise.reject('infinite redirect in navigation guard');\r\n            } else {\r\n              doNavigate(target, true, replace);\r\n            }\r\n            triggerAfterEach(target, from);\r\n          });\r\n  }\r\n\r\n  function replace(to: RouteLocationRaw) {\r\n    const dest = typeof to === 'string' ? parseURL(to) : to;\r\n    return push(Object.assign(dest, { replace: true }));\r\n  }\r\n\r\n  function extractRedirect(to: Readonly<RouteLocation>): RouteLocationRaw | null {\r\n    const lastMatched = to.matched[to.matched.length - 1];\r\n    if (lastMatched && lastMatched.redirected) {\r\n      const redirect = lastMatched.redirected;\r\n      let newTarget = typeof redirect === 'function' ? redirect(to) : redirect;\r\n      if (typeof newTarget === 'string') {\r\n        if (newTarget.includes('?') || newTarget.includes('#')) {\r\n          newTarget = locationToObject(newTarget, router.currentRoute);\r\n        } else {\r\n          newTarget = { path: newTarget };\r\n        }\r\n      }\r\n      return Object.assign(\r\n        {\r\n          query: to.query,\r\n          hash: to.hash,\r\n          params: newTarget.path != null ? {} : to.params,\r\n        },\r\n        newTarget\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n\r\n  async function pop(to: RouteLocationRaw) {\r\n    const target = router.resolve(to);\r\n    const from = router.currentRoute;\r\n    return triggerGuards(target, from)\r\n      .catch(error => {\r\n        return triggerError(error, target, from);\r\n      })\r\n      .then((failure: NavigationFailure | void) => {\r\n        doNavigate(target, false);\r\n        triggerAfterEach(target, from, failure);\r\n      })\r\n      .catch();\r\n  }\r\n\r\n  async function triggerGuards(to: RouteLocation, from: RouteLocation) {\r\n    let guards: Guard[] = [];\r\n    const { leavingRecords, updateRecords, enterRecords } = analyseChangingRecord(to, from);\r\n\r\n    for (const record of leavingRecords) {\r\n      record.leaveGuards.forEach(guard => {\r\n        guards.push(guardToPromise(guard, to, from));\r\n      });\r\n    }\r\n\r\n    return runGuardQueue(guards)\r\n      .then(() => {\r\n        guards = [];\r\n        for (const beforeEachGuard of beforeEachGuards.list()) {\r\n          guards.push(guardToPromise(beforeEachGuard, to, from));\r\n        }\r\n        return runGuardQueue(guards);\r\n      })\r\n      .then(() => {\r\n        guards = [];\r\n        for (const record of updateRecords) {\r\n          record.updateGuards.forEach(guard => {\r\n            guards.push(guardToPromise(guard, to, from));\r\n          });\r\n        }\r\n        return runGuardQueue(guards);\r\n      })\r\n      .then(() => {\r\n        guards = [];\r\n        for (const record of enterRecords) {\r\n          if (record.beforeEnter) {\r\n            if (Array.isArray(record.beforeEnter)) {\r\n              const beforeEnters = record.beforeEnter.map(r => guardToPromise(r, to, from));\r\n              guards = guards.concat(beforeEnters);\r\n            } else {\r\n              guards.push(guardToPromise(record.beforeEnter, to, from));\r\n            }\r\n          }\r\n        }\r\n        return runGuardQueue(guards);\r\n      })\r\n      .then(() => {\r\n        guards = [];\r\n        for (const guard of beforeResolveGuards.list()) {\r\n          guards.push(guardToPromise(guard, to, from));\r\n        }\r\n        return runGuardQueue(guards);\r\n      })\r\n      .catch(err => {\r\n        Promise.reject(err);\r\n      });\r\n  }\r\n\r\n  function doNavigate(to: RouteLocation, triggerHistory?: boolean, replace?: boolean) {\r\n    if (triggerHistory) {\r\n      if (replace) {\r\n        history.replace(to.fullPath);\r\n      } else {\r\n        history.push(to.fullPath);\r\n      }\r\n    }\r\n    notifyUpdate({ currentRoute: to });\r\n  }\r\n\r\n  function triggerAfterEach(to: RouteLocation, from: RouteLocation, failure?: NavigationFailure | void): void {\r\n    afterEachGuards.list().forEach(guard => guard(to, from, failure));\r\n  }\r\n\r\n  function triggerError(error: any, to: RouteLocation, from: RouteLocation) {\r\n    for (const trigger of exceptListeners.list()) {\r\n      trigger(error, to, from);\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n\r\n  function notifyUpdate(newAttrs: Partial<VueRouter>) {\r\n    if ('currentRoute' in newAttrs) {\r\n      const prevLocation = router.currentRoute;\r\n      Object.assign(router, newAttrs);\r\n      observers.list().forEach(trigger => {\r\n        trigger(router.currentRoute, prevLocation);\r\n      });\r\n    }\r\n  }\r\n\r\n  function install(app: App) {\r\n    // wrap RouterProvider for App\r\n    app.component('RouterLink', RouterLink);\r\n    app.component('RouterView', RouterView);\r\n    const routerInstance = initRouter(options);\r\n    app.rootComponent = createElement(RouterProvider, { router: routerInstance }, app.rootComponent);\r\n    app.config.globalProperties.$router = routerInstance;\r\n    Object.defineProperty(app.config.globalProperties, '$route', {\r\n      enumerable: true,\r\n      get: () => routerInstance.currentRoute,\r\n    });\r\n  }\r\n\r\n  function subscribeRouteChange(observer: RouteObserver) {\r\n    return observers.add(observer);\r\n  }\r\n\r\n  const router: VueRouterInternal = {\r\n    currentRoute: START_LOCATION,\r\n    option: options,\r\n    listening: true,\r\n    go: history.go,\r\n    back: () => history.go(-1),\r\n    forward: () => history.go(1),\r\n    push: push,\r\n    pop: pop,\r\n    replace: replace,\r\n    resolve: resolve,\r\n    beforeEach: beforeEachGuards.add,\r\n    beforeResolve: beforeResolveGuards.add,\r\n    afterEach: afterEachGuards.add,\r\n    onError: exceptListeners.add,\r\n    addRoute(route: RouteRecord): () => void {\r\n      return matcher.addBranch(route);\r\n    },\r\n    removeRoute(name: RouteRecordName) {\r\n      return matcher.delBranch(name);\r\n    },\r\n    hasRoute(name: RouteRecordName): boolean {\r\n      return Boolean(matcher.getNamedBranch(name));\r\n    },\r\n    getRoutes(): RouteBranch<RouteRecord, NormalizedRouteRecord>[] {\r\n      return matcher.branches;\r\n    },\r\n    isReady(): Promise<void> {\r\n      return Promise.resolve();\r\n    },\r\n    install: install,\r\n    subscribeRouteChange,\r\n  };\r\n\r\n  return router;\r\n}\r\n\r\nfunction analyseChangingRecord(to: RouteLocation, from: RouteLocation) {\r\n  const leavingRecords: NormalizedRouteRecord[] = [];\r\n  const updateRecords: NormalizedRouteRecord[] = [];\r\n  const enterRecords: NormalizedRouteRecord[] = [];\r\n\r\n  const maxLen = Math.max(to.matched.length, from.matched.length);\r\n  for (let i = 0; i < maxLen; i++) {\r\n    const recordFrom = from.matched[i];\r\n    if (recordFrom) {\r\n      if (to.matched.find(m => m === recordFrom)) {\r\n        updateRecords.push(recordFrom);\r\n      } else {\r\n        leavingRecords.push(recordFrom);\r\n      }\r\n    }\r\n    const recordTo = to.matched[i];\r\n    if (recordTo) {\r\n      if (from.matched.findIndex(m => m === recordTo) === -1) {\r\n        enterRecords.push(recordTo);\r\n      }\r\n    }\r\n  }\r\n\r\n  return { leavingRecords, updateRecords, enterRecords };\r\n}\r\n\r\nfunction guardToPromise(guard: NavigationGuard, to: RouteLocation, from: RouteLocation): Guard {\r\n  const promise = new Promise((resolve, reject) => {\r\n    const next: NavigationGuardNext = (valid?: boolean | RouteLocationRaw | Error) => {\r\n      if (valid === false) {\r\n        reject(createRouterError(ErrorTypes.NAVIGATION_ABORTED, { from, to }));\r\n      } else if (valid instanceof Error) {\r\n        reject(valid);\r\n      } else if (typeof valid === 'string' || (valid && typeof valid === 'object')) {\r\n        reject(createRouterError(ErrorTypes.NAVIGATION_GUARD_REDIRECT, { from: to, to: valid }));\r\n      } else {\r\n        resolve(null);\r\n      }\r\n    };\r\n    const guardReturn = guard(to, from, next);\r\n    let guardCall = Promise.resolve(guardReturn);\r\n    if (guard.length < 3) {\r\n      guardCall = guardCall.then(next);\r\n    }\r\n    guardCall.catch(err => reject(err));\r\n  });\r\n\r\n  return () => promise;\r\n}\r\n\r\nfunction runGuardQueue(guards: Guard[]) {\r\n  return guards.reduce((promise, guard) => promise.then(() => guard()), Promise.resolve());\r\n}\r\n\r\nexport { initRouter };\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { InulaNode, useLayoutEffect, useRef, useState } from '@cloudsop/horizon';\r\nimport { RouteContext, RouterContext } from './RouterContext';\r\nimport { initRouter, RouterOptions, VueRouter, VueRouterInternal } from './Router';\r\nimport { parseURL } from './utils';\r\nimport { RouteLocation } from './types';\r\n\r\ninterface RouterProviderProps {\r\n  router: VueRouter;\r\n  children: InulaNode;\r\n}\r\n\r\nexport function createRouter(option: RouterOptions): VueRouter {\r\n  return initRouter(option);\r\n}\r\n\r\nexport function RouterProvider(props: RouterProviderProps) {\r\n  const { children } = props;\r\n  const router = props.router as VueRouterInternal;\r\n  const {\r\n    currentRoute,\r\n    option: { history },\r\n  } = router;\r\n\r\n  const unListen = useRef<(() => void) | null>(null);\r\n  const isMount = useRef(false);\r\n  const detachObserver = useRef<(() => void) | null>(null);\r\n\r\n  const urlLocation = parseURL(history.location);\r\n  const [location, setLocation] = useState<RouteLocation>(currentRoute);\r\n\r\n  if (!detachObserver.current) {\r\n    detachObserver.current = router.subscribeRouteChange(to => {\r\n      setLocation(to);\r\n    });\r\n  }\r\n\r\n  // trigger navigator guards when first entry page\r\n  if (location.fullPath !== urlLocation.fullPath || !isMount.current) {\r\n    void router.push(history.location);\r\n  }\r\n\r\n  useLayoutEffect(() => {\r\n    isMount.current = true;\r\n    if (unListen.current) {\r\n      unListen.current();\r\n    }\r\n    if (detachObserver.current) {\r\n      detachObserver.current();\r\n    }\r\n\r\n    detachObserver.current = router.subscribeRouteChange(to => {\r\n      setLocation(to);\r\n    });\r\n\r\n    unListen.current = history.listen(to => {\r\n      if (isMount.current) {\r\n        router.pop(to);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      if (unListen.current) {\r\n        isMount.current = false;\r\n        unListen.current();\r\n        unListen.current = null;\r\n      }\r\n      if (detachObserver.current) {\r\n        detachObserver.current();\r\n        detachObserver.current = null;\r\n      }\r\n    };\r\n  });\r\n\r\n  return (\r\n    <RouterContext.Provider value={router}>\r\n      <RouteContext.Provider value={location}>{children}</RouteContext.Provider>\r\n    </RouterContext.Provider>\r\n  );\r\n}\r\n","/*\r\n * Copyright (c) 2020 Huawei Technologies Co.,Ltd.\r\n *\r\n * openInula is licensed under Mulan PSL v2.\r\n * You can use this software according to the terms and conditions of the Mulan PSL v2.\r\n * You may obtain a copy of Mulan PSL v2 at:\r\n *\r\n *          http://license.coscl.org.cn/MulanPSL2\r\n *\r\n * THIS SOFTWARE IS PROVIDED ON AN \"AS IS\" BASIS, WITHOUT WARRANTIES OF ANY KIND,\r\n * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,\r\n * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.\r\n * See the Mulan PSL v2 for more details.\r\n */\r\n\r\nimport { NavigationGuard } from './types';\r\nimport { useContext, useLayoutEffect } from '@cloudsop/horizon';\r\nimport { CurrentRouteRecord } from './RouterContext';\r\n\r\nfunction onBeforeRouteLeave(leaveGuard: NavigationGuard) {\r\n  useRegisterGuards('leaveGuards', leaveGuard);\r\n}\r\n\r\nfunction onBeforeRouteUpdate(updateGuard: NavigationGuard) {\r\n  useRegisterGuards('updateGuards', updateGuard);\r\n}\r\n\r\ntype GuardType = 'leaveGuards' | 'updateGuards';\r\n\r\nfunction useRegisterGuards(name: GuardType, guard: NavigationGuard) {\r\n  const match = useContext(CurrentRouteRecord);\r\n\r\n  useLayoutEffect(() => {\r\n    match[name].add(guard);\r\n\r\n    return () => {\r\n      match[name].delete(guard);\r\n    };\r\n  }, []);\r\n\r\n  return null;\r\n}\r\n\r\nexport { onBeforeRouteLeave, onBeforeRouteUpdate };\r\n"],"names":["isBrowser","window","document","createElement","getDefaultConfirmation","message","callBack","confirm","isSupportHistory","history","isSupportsPopState","navigator","userAgent","indexOf","Action","EventType","PopDirection","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","createPath","path","search","hash","pathname","startsWith","parsePath","url","parsedPath","hashIdx","substring","searchIdx","createLocation","current","to","state","urlObj","getRandKey","genRandomKey","location","parseRelativePath","addHeadSlash","normalizeSlash","tempPath","hasBasename","prefix","toLowerCase","includes","charAt","stripBasename","createMemoryRecord","initVal","fn","visitedRecord","getDelta","from","toIdx","lastIndexOf","fromIdx","addRecord","newRecord","action","curVal","NewVal","push","prevIdx","newVisitedRecord","slice","replace","end","Math","random","toString","fromParts","split","toParts","lastToPart","index","toIndex","urlPart","join","_classCallCheck","instance","Constructor","TypeError","_typeof","o","Symbol","iterator","constructor","toPrimitive","t","r","e","String","Number","toPropertyKey","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","TransitionManager","prompt","value","setPrompt","_this","confirmJumpTo","userConfirmationFunc","result","warning","condition","console","warn","getBaseHistory","type","undefined","transitionManager","popActionListener","listenerCount","supportPopState","listeners","unListeners","browserHistory","pauseTrigger","go","step","triggerListener","setupListener","count","addEventListener","PopState","HashChange","removeEventListener","addListener","listener","isActive","wrapper","args","information","trigger","cancelListener","filter","destroy","_iterator","_createForOfIteratorHelper","_step","s","n","done","unListen","err","f","isBlocked","block","unblock","getUpdateStateFunc","historyProps","nextState","originPath","delta","commonArgs","popArgs","direction","forward","back","pop","createBrowserHistory","options","supportHistory","isSupportPopState","_options$forceRefresh","forceRefresh","_options$getUserConfi","getUserConfirmation","basename","initLocation","getLocation","getHistoryState","recordOperator","l","_getBaseHistory","handlePop","listen","goBack","goForward","createHref","updateState","historyState","_window$location","_ref","forceJump","handlePopState","callback","isJump","revertPopState","isEventPopState","event","handler","locationHandler","baseHandler","href","pushState","replaceState","normalizeBase","base","baseEl","querySelector","getAttribute","BEFORE_HASH_RE","createHrefHandler","parseURL","currentLocation","query","searchString","hashPos","searchPos","parseQuery","fullPath","decode","stringifyUrl","stringifyQuery","urlParams","URLSearchParams","keys","_loop","_keys","_i","Array","isArray","forEach","v","append","normalizeQuery","normalizedQuery","map","locationToObject","currentRoute","queryString","params","fromEntries","entries","text","decodeURIComponent","shallowCompareArray","a","b","every","compareParams","aKeys","bKeys","_i2","_aKeys","aValue","bValue","isSameRouteLocation","matchLengthA","matched","matchLengthB","createCallBackList","callbacks","add","cb","item","list","clear","guardEvent","metaKey","altKey","ctrlKey","shiftKey","defaultPrevented","button","currentTarget","test","preventDefault","includesParams","outer","inner","_loop2","innerValue","outerValue","some","_ret","createVueBaseHistory","urlBase","hrefHandler","baseHistory","listenLocation","data","historyAdapter","defineProperties","get","createWebHistory","createWebHashHistory","host","slicePos","pathFromHash","getBase","hashIndex","protocol","hashHandlers","START_LOCATION","meta","ErrorTypes","RouterContext","createContext","RouteContext","CurrentRouteRecord","ViewDepth","depth","TokenType","cleanPath","scoreCompare","score1","score2","score1Length","score2Length","min","escapeStr","str","validChar","lexer","tokens","urlPath","Error","getLiteral","name","skipChar","curChar","prevChar","Delimiter","Param","WildCard","Static","LBracket","RBracket","Pattern","MatchScore","defaultOption","caseSensitive","strictMode","exact","REGEX_CHARS_RE","BASE_PARAM_PATTERN","DefaultDelimiter","createPathParser","option","_option$caseSensitive","_option$strictMode","_option$exact","pattern","scores","onlyHasWildCard","tokenCount","lastToken","asteriskCount","lookToNextDelimiter","currentIdx","hasOptionalParam","tokenIdx","token","nextToken","hasOptional","isSlashOptional","static","paramRegexp","param","wildcard","placeholder","isWildCard","flag","regexp","RegExp","parse","reMatch","match","matchedPath","parseScore","_params$","splice","concat","fill","isExact","score","compile","wildCard","defaultMatcherOption","strict","sensitive","isRouteName","getLocationParams","newParams","convertRecordToBranch","record","parser","raw","component","children","agnosticRouteMatcher","routes","branchHandler","branches","branchesMap","Map","addBranch","route","parent","recursive","normalizedRecord","concatSlash","endsWith","recordParserOption","mergeDefault","branch","originalBranch","set","_iterator2","_step2","child","sort","delBranch","getNamedBranch","has","branchRef","delete","branchIndex","idx","matchPath","_iterator3","_step3","find","parentBranch","reverse","merge","reduce","prev","currentValue","defaultOptions","partialOptions","mergedOption","_defineProperty","obj","NavigationFailureSymbol","createRouterError","isNavigationFailure","error","Boolean","useRouter","useContext","useRoute","useLink","router","useMemo","resolve","activeBranchIndex","targetMatched","currentMatched","findIndex","m","parentRecordPath","isExactActive","navigate","Promise","useRouteWatch","config","immediate","isMount","useRef","unListener","useEffect","subscribeRouteChange","getLinkClass","propClass","globalClass","defaultClass","curr","RouterLink","link","activeClass","exactActiveClass","_router$option","linkActiveClass","linkExactActiveClass","classes","className","_jsx","onClick","calcNextDepth","currentDepth","matchedRecord","nextDepth","RouterView","_useContext","_useContext2","routeRecord","nextComponent","Provider","normalizeRouteRecord","beforeEnter","leaveGuards","Set","redirected","redirect","updateGuards","initRouter","matcher","beforeEachGuards","beforeResolveGuards","afterEachGuards","exceptListeners","observers","normalizedLocation","matchedRoute","matcherLocation","targetParams","_Object$keys","redirectFrom","force","redirectLocation","extractRedirect","redirectedFrom","failure","NAVIGATION_DUPLICATED","triggerGuards","catch","triggerError","then","reject","doNavigate","triggerAfterEach","dest","lastMatched","newTarget","guards","_analyseChangingRecor","analyseChangingRecord","leavingRecords","updateRecords","enterRecords","guard","guardToPromise","runGuardQueue","beforeEachGuard","_iterator4","_step4","beforeEnters","_iterator5","_step5","triggerHistory","notifyUpdate","_iterator6","_step6","newAttrs","prevLocation","install","app","routerInstance","rootComponent","RouterProvider","globalProperties","$router","observer","listening","beforeEach","beforeResolve","afterEach","onError","addRoute","removeRoute","hasRoute","getRoutes","isReady","maxLen","max","recordFrom","recordTo","promise","next","valid","NAVIGATION_ABORTED","NAVIGATION_GUARD_REDIRECT","guardReturn","guardCall","createRouter","detachObserver","urlLocation","_useState","useState","setLocation","useLayoutEffect","onBeforeRouteLeave","leaveGuard","useRegisterGuards","onBeforeRouteUpdate","updateGuard"],"mappings":";;;AAAO,SAASA,SAASA,GAAY;AACnC,EAAA,OAAO,OAAOC,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACC,QAAQ,IAAI,OAAOD,MAAM,CAACC,QAAQ,CAACC,aAAa,KAAK,UAAU,CAAA;AAChH,CAAA;AAEO,SAASC,sBAAsBA,CAACC,OAAe,EAAEC,QAAmC,EAAE;AAC3FA,EAAAA,QAAQ,CAACL,MAAM,CAACM,OAAO,CAACF,OAAO,CAAC,CAAC,CAAA;AACnC,CAAA;;AAEA;AACO,SAASG,gBAAgBA,GAAY;AAC1C,EAAA,OAAOR,SAAS,EAAE,IAAIC,MAAM,CAACQ,OAAO,IAAI,WAAW,IAAIR,MAAM,CAACQ,OAAO,CAAA;AACvE,CAAA;;AAEA;AACO,SAASC,kBAAkBA,GAAY;AAC5C,EAAA,OAAOT,MAAM,CAACU,SAAS,CAACC,SAAS,CAACC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAA;AAC7D;;ACiCYC,IAAAA,MAAM,0BAANA,MAAM,EAAA;EAANA,MAAM,CAAA,KAAA,CAAA,GAAA,KAAA,CAAA;EAANA,MAAM,CAAA,MAAA,CAAA,GAAA,MAAA,CAAA;EAANA,MAAM,CAAA,SAAA,CAAA,GAAA,SAAA,CAAA;AAAA,EAAA,OAANA,MAAM,CAAA;AAAA,CAAA,CAAA,EAAA,CAAA,CAAA;AAMNC,IAAAA,SAAS,0BAATA,SAAS,EAAA;EAATA,SAAS,CAAA,UAAA,CAAA,GAAA,UAAA,CAAA;EAATA,SAAS,CAAA,YAAA,CAAA,GAAA,YAAA,CAAA;AAAA,EAAA,OAATA,SAAS,CAAA;AAAA,CAAA,CAAA,EAAA,CAAA,CAAA;AAKTC,IAAAA,YAAY,0BAAZA,YAAY,EAAA;EAAZA,YAAY,CAAA,MAAA,CAAA,GAAA,MAAA,CAAA;EAAZA,YAAY,CAAA,SAAA,CAAA,GAAA,SAAA,CAAA;EAAZA,YAAY,CAAA,SAAA,CAAA,GAAA,EAAA,CAAA;AAAA,EAAA,OAAZA,YAAY,CAAA;AAAA,CAAA,CAAA,EAAA,CAAA;;AC5DT,SAASC,QAAQA,GAAG;AACjCA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAM,GAAGD,MAAM,CAACC,MAAM,CAACC,IAAI,EAAE,GAAG,UAAUC,MAAM,EAAE;AAClE,IAAA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;AACzC,MAAA,IAAIG,MAAM,GAAGF,SAAS,CAACD,CAAC,CAAC,CAAA;AACzB,MAAA,KAAK,IAAII,GAAG,IAAID,MAAM,EAAE;AACtB,QAAA,IAAIP,MAAM,CAACS,SAAS,CAACC,cAAc,CAACC,IAAI,CAACJ,MAAM,EAAEC,GAAG,CAAC,EAAE;AACrDL,UAAAA,MAAM,CAACK,GAAG,CAAC,GAAGD,MAAM,CAACC,GAAG,CAAC,CAAA;AAC3B,SAAA;AACF,OAAA;AACF,KAAA;AACA,IAAA,OAAOL,MAAM,CAAA;GACd,CAAA;AACD,EAAA,OAAOJ,QAAQ,CAACa,KAAK,CAAC,IAAI,EAAEP,SAAS,CAAC,CAAA;AACxC;;ACXO,SAASQ,UAAUA,CAACC,IAAmB,EAAU;AACtD,EAAA,IAAQC,MAAM,GAAWD,IAAI,CAArBC,MAAM;IAAEC,IAAI,GAAKF,IAAI,CAAbE,IAAI,CAAA;AACpB,EAAA,IAAIC,QAAQ,GAAGH,IAAI,CAACG,QAAQ,IAAI,GAAG,CAAA;AACnC,EAAA,IAAIF,MAAM,IAAIA,MAAM,KAAK,GAAG,EAAE;AAC5BE,IAAAA,QAAQ,IAAIF,MAAM,CAACG,UAAU,CAAC,GAAG,CAAC,GAAGH,MAAM,GAAG,GAAG,GAAGA,MAAM,CAAA;AAC5D,GAAA;AACA,EAAA,IAAIC,IAAI,IAAIA,IAAI,KAAK,GAAG,EAAE;AACxBC,IAAAA,QAAQ,IAAID,IAAI,CAACE,UAAU,CAAC,GAAG,CAAC,GAAGF,IAAI,GAAG,GAAG,GAAGA,IAAI,CAAA;AACtD,GAAA;AACA,EAAA,OAAOC,QAAQ,CAAA;AACjB,CAAA;AAEO,SAASE,SAASA,CAACC,GAAW,EAAiB;AACpD,EAAA,IAAIH,QAAQ,GAAGG,GAAG,IAAI,GAAG,CAAA;AACzB,EAAA,IAAMC,UAAyB,GAAG;AAChCN,IAAAA,MAAM,EAAE,EAAE;AACVC,IAAAA,IAAI,EAAE,EAAA;GACP,CAAA;AAED,EAAA,IAAMM,OAAO,GAAGF,GAAG,CAACzB,OAAO,CAAC,GAAG,CAAC,CAAA;AAChC,EAAA,IAAI2B,OAAO,GAAG,CAAC,CAAC,EAAE;AAChB,IAAA,IAAMN,IAAI,GAAGI,GAAG,CAACG,SAAS,CAACD,OAAO,CAAC,CAAA;IACnCD,UAAU,CAACL,IAAI,GAAGA,IAAI,KAAK,GAAG,GAAG,EAAE,GAAGA,IAAI,CAAA;IAC1CC,QAAQ,GAAGA,QAAQ,CAACM,SAAS,CAAC,CAAC,EAAED,OAAO,CAAC,CAAA;AAC3C,GAAA;AAEA,EAAA,IAAME,SAAS,GAAGJ,GAAG,CAACzB,OAAO,CAAC,GAAG,CAAC,CAAA;AAClC,EAAA,IAAI6B,SAAS,GAAG,CAAC,CAAC,EAAE;AAClB,IAAA,IAAMT,MAAM,GAAGK,GAAG,CAACG,SAAS,CAACC,SAAS,CAAC,CAAA;IACvCH,UAAU,CAACN,MAAM,GAAGA,MAAM,KAAK,GAAG,GAAG,EAAE,GAAGA,MAAM,CAAA;IAChDE,QAAQ,GAAGA,QAAQ,CAACM,SAAS,CAAC,CAAC,EAAEC,SAAS,CAAC,CAAA;AAC7C,GAAA;EACAH,UAAU,CAACJ,QAAQ,GAAGA,QAAQ,CAAA;AAC9B,EAAA,OAAOI,UAAU,CAAA;AACnB,CAAA;AAEO,SAASI,cAAcA,CAAIC,OAA0B,EAAEC,EAAM,EAAEC,KAAS,EAAEpB,GAAY,EAAyB;EACpH,IAAMS,QAAQ,GAAG,OAAOS,OAAO,KAAK,QAAQ,GAAGA,OAAO,GAAGA,OAAO,CAACT,QAAQ,CAAA;AACzE,EAAA,IAAMY,MAAM,GAAG,OAAOF,EAAE,KAAK,QAAQ,GAAGR,SAAS,CAACQ,EAAE,CAAC,GAAGA,EAAE,CAAA;AAC1D;AACA,EAAA,IAAMG,UAAU,GAAGC,YAAY,CAAC,CAAC,CAAC,CAAA;EAClC,IAAMC,QAAQ,GAAAjC,QAAA,CAAA;AACZkB,IAAAA,QAAQ,EAAEA,QAAQ;AAClBF,IAAAA,MAAM,EAAE,EAAE;AACVC,IAAAA,IAAI,EAAE,EAAE;AACRY,IAAAA,KAAK,EAAEA,KAAK;IACZpB,GAAG,EAAE,OAAOA,GAAG,KAAK,QAAQ,GAAGA,GAAG,GAAGsB,UAAU,EAAC;AAAC,GAAA,EAC9CD,MAAM,CACV,CAAA;AACD,EAAA,IAAI,CAACG,QAAQ,CAACf,QAAQ,EAAE;AACtBe,IAAAA,QAAQ,CAACf,QAAQ,GAAGA,QAAQ,GAAGA,QAAQ,GAAG,GAAG,CAAA;GAC9C,MAAM,IAAI,CAACe,QAAQ,CAACf,QAAQ,CAACC,UAAU,CAAC,GAAG,CAAC,EAAE;IAC7Cc,QAAQ,CAACf,QAAQ,GAAGgB,iBAAiB,CAACD,QAAQ,CAACf,QAAQ,EAAEA,QAAQ,CAAC,CAAA;AACpE,GAAA;AACA,EAAA,IAAIe,QAAQ,CAACjB,MAAM,IAAIiB,QAAQ,CAACjB,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;AACjDiB,IAAAA,QAAQ,CAACjB,MAAM,GAAG,GAAG,GAAGiB,QAAQ,CAACjB,MAAM,CAAA;AACzC,GAAA;AACA,EAAA,IAAIiB,QAAQ,CAAChB,IAAI,IAAIgB,QAAQ,CAAChB,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;AAC7CgB,IAAAA,QAAQ,CAAChB,IAAI,GAAG,GAAG,GAAGgB,QAAQ,CAAChB,IAAI,CAAA;AACrC,GAAA;AACA,EAAA,OAAOgB,QAAQ,CAAA;AACjB,CAAA;AAMO,SAASE,YAAYA,CAACpB,IAAY,EAAU;AACjD,EAAA,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;AACnB,IAAA,OAAOA,IAAI,CAAA;AACb,GAAA;EACA,OAAO,GAAG,GAAGA,IAAI,CAAA;AACnB,CAAA;AASO,SAASqB,cAAcA,CAACrB,IAAY,EAAU;AACnD,EAAA,IAAMsB,QAAQ,GAAGF,YAAY,CAACpB,IAAI,CAAC,CAAA;EACnC,IAAIsB,QAAQ,CAACA,QAAQ,CAAC9B,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;IACzC,OAAO8B,QAAQ,CAACb,SAAS,CAAC,CAAC,EAAEa,QAAQ,CAAC9B,MAAM,GAAG,CAAC,CAAC,CAAA;AACnD,GAAA;AACA,EAAA,OAAO8B,QAAQ,CAAA;AACjB,CAAA;AAEO,SAASC,WAAWA,CAACvB,IAAY,EAAEwB,MAAc,EAAW;AACjE,EAAA,OACExB,IAAI,CAACyB,WAAW,EAAE,CAAC5C,OAAO,CAAC2C,MAAM,CAACC,WAAW,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC,CAACC,QAAQ,CAAC1B,IAAI,CAAC2B,MAAM,CAACH,MAAM,CAAChC,MAAM,CAAC,CAAC,CAAA;AAEtH,CAAA;AAEO,SAASoC,aAAaA,CAAC5B,IAAY,EAAEwB,MAAc,EAAU;AAClE,EAAA,OAAOD,WAAW,CAACvB,IAAI,EAAEwB,MAAM,CAAC,GAAGxB,IAAI,CAACS,SAAS,CAACe,MAAM,CAAChC,MAAM,CAAC,GAAGQ,IAAI,CAAA;AACzE,CAAA;;AAEA;AACO,SAAS6B,kBAAkBA,CAAOC,OAAU,EAAEC,EAAiB,EAAE;AACtE,EAAA,IAAIC,aAAkB,GAAG,CAACD,EAAE,CAACD,OAAO,CAAC,CAAC,CAAA;AAEtC,EAAA,SAASG,QAAQA,CAACpB,EAAK,EAAEqB,IAAO,EAAU;IACxC,IAAIC,KAAK,GAAGH,aAAa,CAACI,WAAW,CAACL,EAAE,CAAClB,EAAE,CAAC,CAAC,CAAA;AAC7C,IAAA,IAAIsB,KAAK,KAAK,CAAC,CAAC,EAAE;AAChBA,MAAAA,KAAK,GAAG,CAAC,CAAA;AACX,KAAA;IACA,IAAIE,OAAO,GAAGL,aAAa,CAACI,WAAW,CAACL,EAAE,CAACG,IAAI,CAAC,CAAC,CAAA;AACjD,IAAA,IAAIG,OAAO,KAAK,CAAC,CAAC,EAAE;AAClBA,MAAAA,OAAO,GAAG,CAAC,CAAA;AACb,KAAA;IACA,OAAOF,KAAK,GAAGE,OAAO,CAAA;AACxB,GAAA;AAEA,EAAA,SAASC,SAASA,CAAC1B,OAAU,EAAE2B,SAAY,EAAEC,MAAc,EAAE;AAC3D,IAAA,IAAMC,MAAM,GAAGV,EAAE,CAACnB,OAAO,CAAC,CAAA;AAC1B,IAAA,IAAM8B,MAAM,GAAGX,EAAE,CAACQ,SAAS,CAAC,CAAA;AAC5B,IAAA,IAAIC,MAAM,KAAK1D,MAAM,CAAC6D,IAAI,EAAE;AAC1B,MAAA,IAAMC,OAAO,GAAGZ,aAAa,CAACI,WAAW,CAACK,MAAM,CAAC,CAAA;MACjD,IAAMI,gBAAgB,GAAGb,aAAa,CAACc,KAAK,CAAC,CAAC,EAAEF,OAAO,GAAG,CAAC,CAAC,CAAA;AAC5DC,MAAAA,gBAAgB,CAACF,IAAI,CAACD,MAAM,CAAC,CAAA;AAC7BV,MAAAA,aAAa,GAAGa,gBAAgB,CAAA;AAClC,KAAA;AACA,IAAA,IAAIL,MAAM,KAAK1D,MAAM,CAACiE,OAAO,EAAE;AAC7B,MAAA,IAAMH,QAAO,GAAGZ,aAAa,CAACI,WAAW,CAACK,MAAM,CAAC,CAAA;AACjD,MAAA,IAAIG,QAAO,KAAK,CAAC,CAAC,EAAE;AAClBZ,QAAAA,aAAa,CAACY,QAAO,CAAC,GAAGF,MAAM,CAAA;AACjC,OAAA;AACF,KAAA;AACF,GAAA;EAEA,OAAO;AAAET,IAAAA,QAAQ,EAARA,QAAQ;AAAEK,IAAAA,SAAS,EAATA,SAAAA;GAAW,CAAA;AAChC,CAAA;AAEA,SAASrB,YAAYA,CAACzB,MAAc,EAAgB;AAClD,EAAA,IAAMwD,GAAG,GAAGxD,MAAM,GAAG,CAAC,CAAA;AACtB,EAAA,OAAO,YAAM;AACX,IAAA,OAAOyD,IAAI,CAACC,MAAM,EAAE,CAACC,QAAQ,CAAC,EAAE,CAAC,CAAC1C,SAAS,CAAC,CAAC,EAAEuC,GAAG,CAAC,CAAA;GACpD,CAAA;AACH,CAAA;AAEO,SAAS7B,iBAAiBA,CAACN,EAAU,EAAEqB,IAAY,EAAE;AAC1D,EAAA,IAAIrB,EAAE,CAACT,UAAU,CAAC,GAAG,CAAC,EAAE;AACtB,IAAA,OAAOS,EAAE,CAAA;AACX,GAAA;AACA,EAAA,IAAMuC,SAAS,GAAGlB,IAAI,CAACmB,KAAK,CAAC,GAAG,CAAC,CAAA;AACjC,EAAA,IAAMC,OAAO,GAAGzC,EAAE,CAACwC,KAAK,CAAC,GAAG,CAAC,CAAA;EAC7B,IAAME,UAAU,GAAGD,OAAO,CAACA,OAAO,CAAC9D,MAAM,GAAG,CAAC,CAAC,CAAA;AAC9C,EAAA,IAAI+D,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,GAAG,EAAE;AAC7CD,IAAAA,OAAO,CAACX,IAAI,CAAC,EAAE,CAAC,CAAA;AAClB,GAAA;AACA,EAAA,IAAIa,KAAK,GAAGJ,SAAS,CAAC5D,MAAM,GAAG,CAAC,CAAA;EAChC,IAAIiE,OAAO,GAAG,CAAC,CAAA;AACf,EAAA,IAAIC,OAAe,CAAA;AAEnB,EAAA,OAAOD,OAAO,GAAGH,OAAO,CAAC9D,MAAM,EAAE;AAC/BkE,IAAAA,OAAO,GAAGJ,OAAO,CAACG,OAAO,CAAC,CAAA;IAC1B,IAAIC,OAAO,KAAK,GAAG,EAAE;AACnB,MAAA,SAAA;AACF,KAAA;IACA,IAAIA,OAAO,KAAK,IAAI,EAAE;MACpB,IAAIF,KAAK,GAAG,CAAC,EAAE;AACbA,QAAAA,KAAK,EAAE,CAAA;AACT,OAAA;AACAC,MAAAA,OAAO,EAAE,CAAA;AACX,KAAC,MAAM;AACL,MAAA,MAAA;AACF,KAAA;AACF,GAAA;EACA,OAAOL,SAAS,CAACN,KAAK,CAAC,CAAC,EAAEU,KAAK,CAAC,CAACG,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,GAAGL,OAAO,CAACR,KAAK,CAACW,OAAO,CAAC,CAACE,IAAI,CAAC,GAAG,CAAC,CAAA;AACrF;;AC7Ke,SAASC,eAAeA,CAACC,QAAQ,EAAEC,WAAW,EAAE;AAC7D,EAAA,IAAI,EAAED,QAAQ,YAAYC,WAAW,CAAC,EAAE;AACtC,IAAA,MAAM,IAAIC,SAAS,CAAC,mCAAmC,CAAC,CAAA;AAC1D,GAAA;AACF;;ACJe,SAASC,OAAOA,CAACC,CAAC,EAAE;EACjC,yBAAyB,CAAA;;AAEzB,EAAA,OAAOD,OAAO,GAAG,UAAU,IAAI,OAAOE,MAAM,IAAI,QAAQ,IAAI,OAAOA,MAAM,CAACC,QAAQ,GAAG,UAAUF,CAAC,EAAE;AAChG,IAAA,OAAO,OAAOA,CAAC,CAAA;GAChB,GAAG,UAAUA,CAAC,EAAE;IACf,OAAOA,CAAC,IAAI,UAAU,IAAI,OAAOC,MAAM,IAAID,CAAC,CAACG,WAAW,KAAKF,MAAM,IAAID,CAAC,KAAKC,MAAM,CAACvE,SAAS,GAAG,QAAQ,GAAG,OAAOsE,CAAC,CAAA;AACrH,GAAC,EAAED,OAAO,CAACC,CAAC,CAAC,CAAA;AACf;;ACPe,SAASI,WAAWA,CAACC,CAAC,EAAEC,CAAC,EAAE;EACxC,IAAI,QAAQ,IAAIP,OAAO,CAACM,CAAC,CAAC,IAAI,CAACA,CAAC,EAAE,OAAOA,CAAC,CAAA;AAC1C,EAAA,IAAIE,CAAC,GAAGF,CAAC,CAACJ,MAAM,CAACG,WAAW,CAAC,CAAA;AAC7B,EAAA,IAAI,KAAK,CAAC,KAAKG,CAAC,EAAE;IAChB,IAAIlF,CAAC,GAAGkF,CAAC,CAAC3E,IAAI,CAACyE,CAAC,EAAEC,CAAC,IAAI,SAAS,CAAC,CAAA;IACjC,IAAI,QAAQ,IAAIP,OAAO,CAAC1E,CAAC,CAAC,EAAE,OAAOA,CAAC,CAAA;AACpC,IAAA,MAAM,IAAIyE,SAAS,CAAC,8CAA8C,CAAC,CAAA;AACrE,GAAA;EACA,OAAO,CAAC,QAAQ,KAAKQ,CAAC,GAAGE,MAAM,GAAGC,MAAM,EAAEJ,CAAC,CAAC,CAAA;AAC9C;;ACRe,SAASK,aAAaA,CAACL,CAAC,EAAE;AACvC,EAAA,IAAIhF,CAAC,GAAG+E,WAAW,CAACC,CAAC,EAAE,QAAQ,CAAC,CAAA;AAChC,EAAA,OAAO,QAAQ,IAAIN,OAAO,CAAC1E,CAAC,CAAC,GAAGA,CAAC,GAAGmF,MAAM,CAACnF,CAAC,CAAC,CAAA;AAC/C;;ACJA,SAASsF,iBAAiBA,CAACvF,MAAM,EAAEwF,KAAK,EAAE;AACxC,EAAA,KAAK,IAAIvF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuF,KAAK,CAACrF,MAAM,EAAEF,CAAC,EAAE,EAAE;AACrC,IAAA,IAAIwF,UAAU,GAAGD,KAAK,CAACvF,CAAC,CAAC,CAAA;AACzBwF,IAAAA,UAAU,CAACC,UAAU,GAAGD,UAAU,CAACC,UAAU,IAAI,KAAK,CAAA;IACtDD,UAAU,CAACE,YAAY,GAAG,IAAI,CAAA;IAC9B,IAAI,OAAO,IAAIF,UAAU,EAAEA,UAAU,CAACG,QAAQ,GAAG,IAAI,CAAA;AACrD/F,IAAAA,MAAM,CAACgG,cAAc,CAAC7F,MAAM,EAAEsF,aAAa,CAACG,UAAU,CAACpF,GAAG,CAAC,EAAEoF,UAAU,CAAC,CAAA;AAC1E,GAAA;AACF,CAAA;AACe,SAASK,YAAYA,CAACrB,WAAW,EAAEsB,UAAU,EAAEC,WAAW,EAAE;EACzE,IAAID,UAAU,EAAER,iBAAiB,CAACd,WAAW,CAACnE,SAAS,EAAEyF,UAAU,CAAC,CAAA;AACpE,EAAA,IAAIC,WAAW,EAAET,iBAAiB,CAACd,WAAW,EAAEuB,WAAW,CAAC,CAAA;AAC5DnG,EAAAA,MAAM,CAACgG,cAAc,CAACpB,WAAW,EAAE,WAAW,EAAE;AAC9CmB,IAAAA,QAAQ,EAAE,KAAA;AACZ,GAAC,CAAC,CAAA;AACF,EAAA,OAAOnB,WAAW,CAAA;AACpB;;ICfMwB,iBAAiB,gBAAA,YAAA;AAGrB,EAAA,SAAAA,oBAAc;AAAA1B,IAAAA,eAAA,OAAA0B,iBAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CAFNC,MAAM,GAAA,KAAA,CAAA,CAAA;IAGZ,IAAI,CAACA,MAAM,GAAG,IAAI,CAAA;AACpB,GAAA;AAACJ,EAAAA,YAAA,CAAAG,iBAAA,EAAA,CAAA;IAAA5F,GAAA,EAAA,WAAA;AAAA8F,IAAAA,KAAA,EAED,SAAAC,SAAiBF,CAAAA,MAAiB,EAAc;AAAA,MAAA,IAAAG,KAAA,GAAA,IAAA,CAAA;MAC9C,IAAI,CAACH,MAAM,GAAGA,MAAM,CAAA;;AAEpB;AACA,MAAA,OAAO,YAAM;AACX,QAAA,IAAIG,KAAI,CAACH,MAAM,KAAKA,MAAM,EAAE;UAC1BG,KAAI,CAACH,MAAM,GAAG,IAAI,CAAA;AACpB,SAAA;OACD,CAAA;AACH,KAAA;AAAC,GAAA,EAAA;IAAA7F,GAAA,EAAA,eAAA;IAAA8F,KAAA,EAED,SAAAG,aAAAA,CACEzE,QAAqB,EACrBsB,MAAc,EACdoD,oBAAsC,EACtCtH,QAAsB,EACtB;AACA,MAAA,IAAI,IAAI,CAACiH,MAAM,KAAK,IAAI,EAAE;QACxB,IAAMM,MAAM,GAAG,OAAO,IAAI,CAACN,MAAM,KAAK,UAAU,GAAG,IAAI,CAACA,MAAM,CAACrE,QAAQ,EAAEsB,MAAM,CAAC,GAAG,IAAI,CAAC+C,MAAM,CAAA;AAC9F,QAAA,IAAI,OAAOM,MAAM,KAAK,QAAQ,EAAE;AAC9B,UAAA,OAAOD,oBAAoB,KAAK,UAAU,GAAGA,oBAAoB,CAACC,MAAM,EAAEvH,QAAQ,CAAC,GAAGA,QAAQ,CAAC,IAAI,CAAC,CAAA;AACtG,SAAC,MAAM;AACLA,UAAAA,QAAQ,CAACuH,MAAM,KAAK,KAAK,CAAC,CAAA;AAC5B,SAAA;AACF,OAAC,MAAM;QACLvH,QAAQ,CAAC,IAAI,CAAC,CAAA;AAChB,OAAA;AACF,KAAA;AAAC,GAAA,CAAA,CAAA,CAAA;AAAA,EAAA,OAAAgH,iBAAA,CAAA;AAAA,CAAA,EAAA;;ACpCH,SAASQ,OAAOA,CAACC,SAAc,EAAE1H,OAAe,EAAE;AAChD,EAAA,IAAI0H,SAAS,EAAE;IACb,IAAIC,OAAO,IAAI,OAAOA,OAAO,CAACC,IAAI,KAAK,UAAU,EAAE;AACjDD,MAAAA,OAAO,CAACC,IAAI,CAAC5H,OAAO,CAAC,CAAA;AACvB,KAAA;AACF,GAAA;AACF;;;;;ACSA;AACO,SAAS6H,cAAcA,GAI5B;AAAA,EAAA,IAHAC,IAAwB,GAAA5G,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA6G,SAAA,GAAA7G,SAAA,CAAA,CAAA,CAAA,GAAG,SAAS,CAAA;EAAA,IACpC8G,iBAAuC,GAAA9G,SAAA,CAAAC,MAAA,GAAAD,CAAAA,GAAAA,SAAA,MAAA6G,SAAA,CAAA;EAAA,IACvCE,iBAAmE,GAAA/G,SAAA,CAAAC,MAAA,GAAAD,CAAAA,GAAAA,SAAA,MAAA6G,SAAA,CAAA;EAEnE,IAAIG,aAAa,GAAG,CAAC,CAAA;AACrB,EAAA,IAAMC,eAAe,GAAG9H,kBAAkB,EAAE,CAAA;EAC5C,IAAI+H,SAAuB,GAAG,EAAE,CAAA;EAChC,IAAMC,WAA2B,GAAG,EAAE,CAAA;AACtC,EAAA,IAAMC,cAAc,GAAG1I,MAAM,CAACQ,OAAO,CAAA;;AAErC;EACA,IAAImI,YAAY,GAAG,KAAK,CAAA;EAExB,SAASC,EAAEA,CAACC,IAAY,EAA0B;AAAA,IAAA,IAAxBC,eAAe,GAAAxH,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA6G,SAAA,GAAA7G,SAAA,CAAA,CAAA,CAAA,GAAG,IAAI,CAAA;AAC9C,IAAA,IAAIwH,eAAe,EAAE;AACnBH,MAAAA,YAAY,GAAG,IAAI,CAAA;AACrB,KAAA;AACAD,IAAAA,cAAc,CAACE,EAAE,CAACC,IAAI,CAAC,CAAA;AACzB,GAAA;EAEA,SAASE,aAAaA,CAACC,KAAoB,EAAE;IAC3C,IAAIA,KAAK,KAAK,IAAI,EAAE;AAClBV,MAAAA,aAAa,GAAG,CAAC,CAAA;AACnB,KAAC,MAAM;AACLA,MAAAA,aAAa,IAAIU,KAAK,CAAA;AACxB,KAAA;AACA,IAAA,IAAIV,aAAa,KAAK,CAAC,IAAIU,KAAK,KAAK,CAAC,EAAE;AACtC,MAAA,IAAId,IAAI,KAAK,SAAS,IAAIK,eAAe,EAAE;AACzCU,QAAAA,gBAAgB,CAACnI,SAAS,CAACoI,QAAQ,EAAEb,iBAAiB,CAAC,CAAA;AACzD,OAAC,MAAM;AACLY,QAAAA,gBAAgB,CAACnI,SAAS,CAACqI,UAAU,EAAEd,iBAAiB,CAAC,CAAA;AAC3D,OAAA;AACF,KAAC,MAAM,IAAIC,aAAa,KAAK,CAAC,EAAE;AAC9B,MAAA,IAAIJ,IAAI,KAAK,SAAS,IAAIK,eAAe,EAAE;AACzCa,QAAAA,mBAAmB,CAACtI,SAAS,CAACoI,QAAQ,EAAEb,iBAAiB,CAAC,CAAA;AAC5D,OAAC,MAAM;AACLe,QAAAA,mBAAmB,CAACtI,SAAS,CAACqI,UAAU,EAAEd,iBAAiB,CAAC,CAAA;AAC9D,OAAA;AACF,KAAA;AACF,GAAA;EAEA,SAASgB,WAAWA,CAACC,QAAqB,EAAc;IACtD,IAAIC,QAAQ,GAAG,IAAI,CAAA;AACnB,IAAA,IAAMC,OAAO,GAAG,UAACC,IAAmC,EAAK;AACvD,MAAA,IAAIF,QAAQ,EAAE;QACZ,IAAID,QAAQ,CAACpB,IAAI,KAAK,QAAQ,IAAI,QAAQ,IAAIuB,IAAI,EAAE;AAClDH,UAAAA,QAAQ,CAACA,QAAQ,CAACG,IAAI,CAAC,CAAA;SACxB,MAAM,IAAIH,QAAQ,CAACpB,IAAI,KAAK,KAAK,IAAI,IAAI,IAAIuB,IAAI,EAAE;AAClDH,UAAAA,QAAQ,CAACA,QAAQ,CAACG,IAAI,CAAC7G,EAAE,EAAE6G,IAAI,CAACxF,IAAI,EAAEwF,IAAI,CAACC,WAAW,CAAC,CAAA;AACzD,SAAA;AACF,OAAA;KACD,CAAA;AACD,IAAA,IAAMC,OAAmB,GAAG;MAAEzB,IAAI,EAAEoB,QAAQ,CAACpB,IAAI;AAAEyB,MAAAA,OAAO,EAAEH,OAAAA;KAAS,CAAA;AACrEhB,IAAAA,SAAS,CAAC9D,IAAI,CAACiF,OAAO,CAAC,CAAA;IACvBZ,aAAa,CAAC,CAAC,CAAC,CAAA;AAEhB,IAAA,IAAMa,cAAc,GAAG,YAAM;AAC3BL,MAAAA,QAAQ,GAAG,KAAK,CAAA;MAChBR,aAAa,CAAC,CAAC,CAAC,CAAC,CAAA;AACjBP,MAAAA,SAAS,GAAGA,SAAS,CAACqB,MAAM,CAAC,UAAAP,QAAQ,EAAA;QAAA,OAAIA,QAAQ,KAAKK,OAAO,CAAA;OAAC,CAAA,CAAA;KAC/D,CAAA;AAEDlB,IAAAA,WAAW,CAAC/D,IAAI,CAACkF,cAAc,CAAC,CAAA;AAChC,IAAA,OAAOA,cAAc,CAAA;AACvB,GAAA;EAEA,SAASE,OAAOA,GAAG;AAAA,IAAA,IAAAC,SAAA,GAAAC,4BAAA,CACMvB,WAAW,CAAA;MAAAwB,KAAA,CAAA;AAAA,IAAA,IAAA;MAAlC,KAAAF,SAAA,CAAAG,CAAA,EAAAD,EAAAA,CAAAA,CAAAA,KAAA,GAAAF,SAAA,CAAAI,CAAA,EAAAC,EAAAA,IAAA,GAAoC;AAAA,QAAA,IAAzBC,QAAQ,GAAAJ,KAAA,CAAA1C,KAAA,CAAA;AACjB8C,QAAAA,QAAQ,EAAE,CAAA;AACZ,OAAA;AAAC,KAAA,CAAA,OAAAC,GAAA,EAAA;MAAAP,SAAA,CAAAxD,CAAA,CAAA+D,GAAA,CAAA,CAAA;AAAA,KAAA,SAAA;AAAAP,MAAAA,SAAA,CAAAQ,CAAA,EAAA,CAAA;AAAA,KAAA;IACD9B,WAAW,CAAClH,MAAM,GAAG,CAAC,CAAA;IACtBwH,aAAa,CAAC,IAAI,CAAC,CAAA;AACrB,GAAA;EAEA,IAAIyB,SAAS,GAAG,KAAK,CAAA;EAErB,SAASC,KAAKA,GAAwC;AAAA,IAAA,IAAvCnD,MAAiB,GAAAhG,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA6G,SAAA,GAAA7G,SAAA,CAAA,CAAA,CAAA,GAAG,KAAK,CAAA;AACtC,IAAA,IAAMoJ,OAAO,GAAGtC,iBAAiB,CAACZ,SAAS,CAACF,MAAM,CAAC,CAAA;IACnD,IAAI,CAACkD,SAAS,EAAE;MACdzB,aAAa,CAAC,CAAC,CAAC,CAAA;AAChByB,MAAAA,SAAS,GAAG,IAAI,CAAA;AAClB,KAAA;AACA,IAAA,OAAO,YAAM;AACX,MAAA,IAAIA,SAAS,EAAE;AACbA,QAAAA,SAAS,GAAG,KAAK,CAAA;QACjBzB,aAAa,CAAC,CAAC,CAAC,CAAC,CAAA;AACnB,OAAA;AACA2B,MAAAA,OAAO,EAAE,CAAA;KACV,CAAA;AACH,GAAA;EAEA,SAASC,kBAAkBA,CAACC,YAA6B,EAAE;IACzD,OAAO,UAAUC,SAAoC,EAAE;AACrD,MAAA,IAAMC,UAAU,GAAGhJ,UAAU,CAAC8I,YAAY,CAAC3H,QAAQ,CAAC,CAAA;AACpD,MAAA,IAAI4H,SAAS,EAAE;AACb7J,QAAAA,QAAA,CAAc4J,YAAY,EAAEC,SAAS,CAAC,CAAA;AACxC,OAAA;MACA,IAAME,KAAK,GAAGrC,cAAc,CAACnH,MAAM,GAAGqJ,YAAY,CAACrJ,MAAM,CAAA;AACzDqJ,MAAAA,YAAY,CAACrJ,MAAM,GAAGmH,cAAc,CAACnH,MAAM,CAAA;AAC3C;MACA,IAAM0B,QAAQ,GAAGjC,QAAA,CAAc,EAAE,EAAE4J,YAAY,CAAC3H,QAAQ,CAAC,CAAA;AACzD,MAAA,IAAM+H,UAAU,GAAG;AAAE/H,QAAAA,QAAQ,EAAEA,QAAQ;QAAEsB,MAAM,EAAEqG,YAAY,CAACrG,MAAAA;OAAQ,CAAA;AACtE,MAAA,IAAM0G,OAAsB,GAAG;AAC7BrI,QAAAA,EAAE,EAAEd,UAAU,CAACmB,QAAQ,CAAC;AACxBgB,QAAAA,IAAI,EAAE6G,UAAU;AAChBpB,QAAAA,WAAW,EAAE;AACXqB,UAAAA,KAAK,EAAEA,KAAK;UACZG,SAAS,EAAEH,KAAK,GAAG,CAAC,GAAGhK,YAAY,CAACoK,OAAO,GAAGpK,YAAY,CAACqK,IAAI;UAC/DlD,IAAI,EAAErH,MAAM,CAACwK,GAAAA;AACf,SAAA;OACD,CAAA;AACD,MAAA,KAAK,IAAIhK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmH,SAAS,CAACjH,MAAM,IAAI,CAACoH,YAAY,EAAEtH,CAAC,EAAE,EAAE;AAC1D,QAAA,IAAMiI,QAAQ,GAAGd,SAAS,CAACnH,CAAC,CAAC,CAAA;AAC7B,QAAA,IAAIiI,QAAQ,CAACpB,IAAI,KAAK,QAAQ,EAAE;AAC9BoB,UAAAA,QAAQ,CAACK,OAAO,CAACqB,UAAU,CAAC,CAAA;AAC9B,SAAC,MAAM,IAAI1B,QAAQ,CAACpB,IAAI,KAAK,KAAK,IAAI0C,YAAY,CAACrG,MAAM,KAAK1D,MAAM,CAACwK,GAAG,EAAE;AACxE;AACA/B,UAAAA,QAAQ,CAACK,OAAO,CAACsB,OAAO,CAAC,CAAA;AAC3B,SAAA;AACF,OAAA;AACAtC,MAAAA,YAAY,GAAG,KAAK,CAAA;KACrB,CAAA;AACH,GAAA;EAEA,OAAO;AAAEC,IAAAA,EAAE,EAAFA,EAAE;AAAES,IAAAA,WAAW,EAAXA,WAAW;AAAEoB,IAAAA,KAAK,EAALA,KAAK;AAAEX,IAAAA,OAAO,EAAPA,OAAO;AAAEa,IAAAA,kBAAkB,EAAlBA,kBAAAA;GAAoB,CAAA;AAChE;;AChHA;AACA;AACA;AACA;;AAIO,SAASW,oBAAoBA,GAEd;AAAA,EAAA,IADpBC,OAAkD,GAAAjK,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA6G,SAAA,GAAA7G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;AAEvD,EAAA,IAAMkK,cAAc,GAAGjL,gBAAgB,EAAE,CAAA;AACzC,EAAA,IAAMkL,iBAAiB,GAAGhL,kBAAkB,EAAE,CAAA;AAC9C,EAAA,IAAMiI,cAAc,GAAG1I,MAAM,CAACQ,OAAO,CAAA;AACrC,EAAA,IAAAkL,qBAAA,GAA+EH,OAAO,CAA9EI,YAAY;AAAZA,IAAAA,YAAY,GAAAD,qBAAA,KAAG,KAAA,CAAA,GAAA,KAAK,GAAAA,qBAAA;IAAAE,qBAAA,GAAmDL,OAAO,CAAxDM,mBAAmB;AAAnBA,IAAAA,mBAAmB,GAAAD,qBAAA,KAAGzL,KAAAA,CAAAA,GAAAA,sBAAsB,GAAAyL,qBAAA,CAAA;AAE1E,EAAA,IAAME,QAAQ,GAAGP,OAAO,CAACO,QAAQ,GAAG1I,cAAc,CAACmI,OAAO,CAACO,QAAQ,CAAC,GAAG,EAAE,CAAA;AAEzE,EAAA,IAAMC,YAAY,GAAGC,WAAW,CAACC,eAAe,EAAE,CAAC,CAAA;AAEnD,EAAA,IAAMC,cAAc,GAAGtI,kBAAkB,CAAsBmI,YAAY,EAAE,UAAAI,CAAC,EAAA;IAAA,OAAIA,CAAC,CAAC1K,GAAG,CAAA;GAAC,CAAA,CAAA;AAExF,EAAA,IAAM2G,iBAAiB,GAAG,IAAIf,iBAAiB,EAAK,CAAA;EAEpD,IAAA+E,eAAA,GAAgEnE,cAAc,CAC5E,SAAS,EACTG,iBAAiB,EACjBiE,SACF,CAAC;IAJOzD,EAAE,GAAAwD,eAAA,CAAFxD,EAAE;IAAES,WAAW,GAAA+C,eAAA,CAAX/C,WAAW;IAAEoB,KAAK,GAAA2B,eAAA,CAAL3B,KAAK;IAAEX,OAAO,GAAAsC,eAAA,CAAPtC,OAAO;IAAEa,kBAAkB,GAAAyB,eAAA,CAAlBzB,kBAAkB,CAAA;AAM3D,EAAA,IAAM2B,MAAM,GAAG,UAAChD,QAA2B,EAAK;AAC9C,IAAA,IAAMK,OAAoB,GAAG;AAAEzB,MAAAA,IAAI,EAAE,QAAQ;AAAEoB,MAAAA,QAAQ,EAAEA,QAAAA;KAAU,CAAA;IACnE,OAAOD,WAAW,CAACM,OAAO,CAAC,CAAA;GAC5B,CAAA;AAED,EAAA,IAAMnJ,OAA2B,GAAG;IAClC+D,MAAM,EAAE1D,MAAM,CAACwK,GAAG;IAClB9J,MAAM,EAAEmH,cAAc,CAACnH,MAAM;AAC7B0B,IAAAA,QAAQ,EAAE8I,YAAY;AACtBnD,IAAAA,EAAE,EAAFA,EAAE;IACF2D,MAAM,EAAE,YAAA;AAAA,MAAA,OAAM3D,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;AAAA,KAAA;IACpB4D,SAAS,EAAE,YAAA;AAAA,MAAA,OAAM5D,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;AAAA,KAAA;AACvB0D,IAAAA,MAAM,EAANA,MAAM;AACNjD,IAAAA,WAAW,EAAXA,WAAW;AACXoB,IAAAA,KAAK,EAALA,KAAK;AACL/F,IAAAA,IAAI,EAAJA,IAAI;AACJI,IAAAA,OAAO,EAAPA,OAAO;AACPgF,IAAAA,OAAO,EAAPA,OAAO;AACP2C,IAAAA,UAAU,EAAVA,UAAAA;GACD,CAAA;AAED,EAAA,IAAMC,WAAW,GAAG/B,kBAAkB,CAACnK,OAAO,CAAC,CAAA;EAE/C,SAASyL,eAAeA,GAAG;IACzB,OAAOT,cAAc,GAAGxL,MAAM,CAACQ,OAAO,CAACqC,KAAK,GAAG,EAAE,CAAA;AACnD,GAAA;EAEA,SAASmJ,WAAWA,CAACW,YAAsC,EAAE;AAC3D,IAAA,IAAAC,gBAAA,GAAyB5M,MAAM,CAACiD,QAAQ;MAAhCjB,MAAM,GAAA4K,gBAAA,CAAN5K,MAAM;MAAEC,IAAI,GAAA2K,gBAAA,CAAJ3K,IAAI,CAAA;AACpB,IAAA,IAAA4K,IAAA,GAAuBF,YAAY,IAAI,EAAE;MAAjClL,GAAG,GAAAoL,IAAA,CAAHpL,GAAG;MAAEoB,KAAK,GAAAgK,IAAA,CAALhK,KAAK,CAAA;AAClB,IAAA,IAAIX,QAAQ,GAAGlC,MAAM,CAACiD,QAAQ,CAACf,QAAQ,CAAA;IACvCA,QAAQ,GAAG4J,QAAQ,GAAGnI,aAAa,CAACzB,QAAQ,EAAE4J,QAAQ,CAAC,GAAG5J,QAAQ,CAAA;IAElE,OAAOQ,cAAc,CAAI,EAAE,EAAE;AAAER,MAAAA,QAAQ,EAARA,QAAQ;AAAEF,MAAAA,MAAM,EAANA,MAAM;AAAEC,MAAAA,IAAI,EAAJA,IAAAA;AAAK,KAAC,EAAEY,KAAK,EAAEpB,GAAG,CAAC,CAAA;AACtE,GAAA;;AAEA;EACA,IAAIqL,SAAS,GAAG,KAAK,CAAA;EAErB,SAASC,cAAcA,CAAC9J,QAAqB,EAAE;AAC7C,IAAA,IAAI6J,SAAS,EAAE;AACbA,MAAAA,SAAS,GAAG,KAAK,CAAA;MACjBJ,WAAW,CAACvE,SAAS,CAAC,CAAA;AACxB,KAAC,MAAM;AACL,MAAA,IAAM5D,MAAM,GAAG1D,MAAM,CAACwK,GAAG,CAAA;AAEzB,MAAA,IAAM2B,QAAQ,GAAG,UAACC,MAAe,EAAK;AACpC,QAAA,IAAIA,MAAM,EAAE;AACV;AACAP,UAAAA,WAAW,CAAC;AAAEnI,YAAAA,MAAM,EAAEA,MAAM;AAAEtB,YAAAA,QAAQ,EAAEA,QAAAA;AAAS,WAAC,CAAC,CAAA;AACrD,SAAC,MAAM;AACLiK,UAAAA,cAAc,CAACjK,QAAQ,EAAEzC,OAAO,CAACyC,QAAQ,CAAC,CAAA;AAC5C,SAAA;OACD,CAAA;MAEDmF,iBAAiB,CAACV,aAAa,CAACzE,QAAQ,EAAEsB,MAAM,EAAEsH,mBAAmB,EAAEmB,QAAQ,CAAC,CAAA;AAClF,KAAA;AACF,GAAA;AAEA,EAAA,IAAMG,eAAe,GAAG,UAACC,KAAY,EAA6B;AAChE,IAAA,OAAOA,KAAK,CAAClF,IAAI,KAAKpH,SAAS,CAACoI,QAAQ,CAAA;GACzC,CAAA;EAED,SAASmD,SAASA,CAACe,KAAsC,EAAE;AACzD,IAAA,IAAMT,YAAY,GAAGlB,iBAAiB,IAAI0B,eAAe,CAACC,KAAK,CAAC,GAAGA,KAAK,CAACvK,KAAK,GAAGoJ,eAAe,EAAE,CAAA;IAClG,IAAMoB,OAAO,GAAG9B,OAAO,CAAC+B,eAAe,GAAG/B,OAAO,CAAC+B,eAAe,GAAGtB,WAAW,CAAA;AAC/Ee,IAAAA,cAAc,CAACM,OAAO,CAACV,YAAY,CAAC,CAAC,CAAA;AACvC,GAAA;;AAEA;AACA,EAAA,SAASO,cAAcA,CAACjJ,IAAiB,EAAErB,EAAe,EAAE;IAC1D,IAAMmI,KAAK,GAAGmB,cAAc,CAAClI,QAAQ,CAACpB,EAAE,EAAEqB,IAAI,CAAC,CAAA;IAC/C,IAAI8G,KAAK,KAAK,CAAC,EAAE;MACfnC,EAAE,CAACmC,KAAK,CAAC,CAAA;AACT+B,MAAAA,SAAS,GAAG,IAAI,CAAA;AAClB,KAAA;AACF,GAAA;EAEA,SAASL,UAAUA,CAAC1K,IAAmB,EAAE;AACvC,IAAA,OAAO,CAACwJ,OAAO,CAACgC,WAAW,GAAGhC,OAAO,CAACgC,WAAW,EAAE,GAAGzB,QAAQ,IAAIhK,UAAU,CAACC,IAAI,CAAC,CAAA;AACpF,GAAA;AAEA,EAAA,SAAS2C,IAAIA,CAAC9B,EAAM,EAAEC,KAAS,EAAE;AAC/B,IAAA,IAAM0B,MAAM,GAAG1D,MAAM,CAAC6D,IAAI,CAAA;AAC1B,IAAA,IAAMzB,QAAQ,GAAGP,cAAc,CAAIlC,OAAO,CAACyC,QAAQ,EAAEL,EAAE,EAAEC,KAAK,EAAEsF,SAAS,CAAC,CAAA;IAE1EC,iBAAiB,CAACV,aAAa,CAACzE,QAAQ,EAAEsB,MAAM,EAAEsH,mBAAmB,EAAE,UAAAoB,MAAM,EAAI;MAC/E,IAAI,CAACA,MAAM,EAAE;AACX,QAAA,OAAA;AACF,OAAA;AACA,MAAA,IAAMO,IAAI,GAAGf,UAAU,CAACxJ,QAAQ,CAAC,CAAA;AACjC,MAAA,IAAQxB,GAAG,GAAYwB,QAAQ,CAAvBxB,GAAG;QAAEoB,KAAK,GAAKI,QAAQ,CAAlBJ,KAAK,CAAA;AAElB,MAAA,IAAI2I,cAAc,EAAE;AAClB,QAAA,IAAIG,YAAY,EAAE;AAChB3L,UAAAA,MAAM,CAACiD,QAAQ,CAACuK,IAAI,GAAGA,IAAI,CAAA;AAC7B,SAAC,MAAM;UACL9E,cAAc,CAAC+E,SAAS,CAAC;AAAEhM,YAAAA,GAAG,EAAEA,GAAG;AAAEoB,YAAAA,KAAK,EAAEA,KAAAA;AAAM,WAAC,EAAE,EAAE,EAAE2K,IAAI,CAAC,CAAA;UAC9DtB,cAAc,CAAC7H,SAAS,CAAC7D,OAAO,CAACyC,QAAQ,EAAEA,QAAQ,EAAEsB,MAAM,CAAC,CAAA;AAC5DmI,UAAAA,WAAW,CAAC;AAAEnI,YAAAA,MAAM,EAANA,MAAM;AAAEtB,YAAAA,QAAQ,EAARA,QAAAA;AAAS,WAAC,CAAC,CAAA;AACnC,SAAA;AACF,OAAC,MAAM;AACL4E,QAAAA,OAAO,CAAChF,KAAK,KAAKsF,SAAS,EAAE,iFAAiF,CAAC,CAAA;AAC/GnI,QAAAA,MAAM,CAACiD,QAAQ,CAACuK,IAAI,GAAGA,IAAI,CAAA;AAC7B,OAAA;AACF,KAAC,CAAC,CAAA;AACJ,GAAA;AAEA,EAAA,SAAS1I,OAAOA,CAAClC,EAAM,EAAEC,KAAS,EAAE;AAClC,IAAA,IAAM0B,MAAM,GAAG1D,MAAM,CAACiE,OAAO,CAAA;AAC7B,IAAA,IAAM7B,QAAQ,GAAGP,cAAc,CAAIlC,OAAO,CAACyC,QAAQ,EAAEL,EAAE,EAAEC,KAAK,EAAEsF,SAAS,CAAC,CAAA;IAE1EC,iBAAiB,CAACV,aAAa,CAACzE,QAAQ,EAAEsB,MAAM,EAAEsH,mBAAmB,EAAE,UAAAoB,MAAM,EAAI;MAC/E,IAAI,CAACA,MAAM,EAAE;AACX,QAAA,OAAA;AACF,OAAA;AACA,MAAA,IAAMO,IAAI,GAAGf,UAAU,CAACxJ,QAAQ,CAAC,CAAA;AACjC,MAAA,IAAQxB,GAAG,GAAYwB,QAAQ,CAAvBxB,GAAG;QAAEoB,KAAK,GAAKI,QAAQ,CAAlBJ,KAAK,CAAA;AAClB,MAAA,IAAI2I,cAAc,EAAE;AAClB,QAAA,IAAIG,YAAY,EAAE;AAChB3L,UAAAA,MAAM,CAACiD,QAAQ,CAAC6B,OAAO,CAAC0I,IAAI,CAAC,CAAA;AAC/B,SAAC,MAAM;UACL9E,cAAc,CAACgF,YAAY,CAAC;AAAEjM,YAAAA,GAAG,EAAEA,GAAG;AAAEoB,YAAAA,KAAK,EAAEA,KAAAA;AAAM,WAAC,EAAE,EAAE,EAAE2K,IAAI,CAAC,CAAA;UACjEtB,cAAc,CAAC7H,SAAS,CAAC7D,OAAO,CAACyC,QAAQ,EAAEA,QAAQ,EAAEsB,MAAM,CAAC,CAAA;AAC5DmI,UAAAA,WAAW,CAAC;AAAEnI,YAAAA,MAAM,EAANA,MAAM;AAAEtB,YAAAA,QAAQ,EAARA,QAAAA;AAAS,WAAC,CAAC,CAAA;AACnC,SAAA;AACF,OAAC,MAAM;AACL4E,QAAAA,OAAO,CAAChF,KAAK,KAAKsF,SAAS,EAAE,iFAAiF,CAAC,CAAA;AAC/GnI,QAAAA,MAAM,CAACiD,QAAQ,CAAC6B,OAAO,CAAC0I,IAAI,CAAC,CAAA;AAC/B,OAAA;AACF,KAAC,CAAC,CAAA;AACJ,GAAA;AAEA,EAAA,OAAOhN,OAAO,CAAA;AAChB;;AC9KO,SAASmN,aAAaA,CAACC,IAAa,EAAU;EACnD,IAAI,CAACA,IAAI,EAAE;AACT,IAAA,IAAI,OAAO3N,QAAQ,KAAK,WAAW,EAAE;AACnC,MAAA,IAAM4N,MAAM,GAAG5N,QAAQ,CAAC6N,aAAa,CAAC,MAAM,CAAC,CAAA;MAC7CF,IAAI,GAAIC,MAAM,IAAIA,MAAM,CAACE,YAAY,CAAC,MAAM,CAAC,IAAK,GAAG,CAAA;MACrDH,IAAI,GAAGA,IAAI,CAAC9I,OAAO,CAAC,iBAAiB,EAAE,EAAE,CAAC,CAAA;AAC5C,KAAC,MAAM;AACL8I,MAAAA,IAAI,GAAG,GAAG,CAAA;AACZ,KAAA;AACF,GAAA;AACA,EAAA,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;AACtCA,IAAAA,IAAI,SAAOA,IAAM,CAAA;AACnB,GAAA;EACA,OAAOxK,cAAc,CAACwK,IAAI,CAAC,CAAA;AAC7B,CAAA;AAEA,IAAMI,cAAc,GAAG,SAAS,CAAA;AAEzB,SAASC,iBAAiBA,CAACL,IAAY,EAAyC;AACrF,EAAA,OAAO,UAAC3K,QAAyB,EAAA;IAAA,OAAK2K,IAAI,CAAC9I,OAAO,CAACkJ,cAAc,EAAE,GAAG,CAAC,GAAG/K,QAAQ,CAAA;AAAA,GAAA,CAAA;AACpF,CAAA;AASO,SAASiL,QAAQA,CAACjL,QAAgB,EAAqD;AAAA,EAAA,IAAnDkL,eAAuB,GAAA7M,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA6G,SAAA,GAAA7G,SAAA,CAAA,CAAA,CAAA,GAAG,GAAG,CAAA;AACtE,EAAA,IAAIS,IAAwB;IAC1BqM,KAAoB,GAAG,EAAE;AACzBC,IAAAA,YAAY,GAAG,EAAE;AACjBpM,IAAAA,IAAI,GAAG,EAAE,CAAA;;AAEX;AACA;AACA,EAAA,IAAMqM,OAAO,GAAGrL,QAAQ,CAACrC,OAAO,CAAC,GAAG,CAAC,CAAA;AACrC,EAAA,IAAI2N,SAAS,GAAGtL,QAAQ,CAACrC,OAAO,CAAC,GAAG,CAAC,CAAA;AACrC;AACA,EAAA,IAAI0N,OAAO,GAAGC,SAAS,IAAID,OAAO,IAAI,CAAC,EAAE;IACvCC,SAAS,GAAG,CAAC,CAAC,CAAA;AAChB,GAAA;AAEA,EAAA,IAAIA,SAAS,GAAG,CAAC,CAAC,EAAE;IAClBxM,IAAI,GAAGkB,QAAQ,CAAC4B,KAAK,CAAC,CAAC,EAAE0J,SAAS,CAAC,CAAA;AACnCF,IAAAA,YAAY,GAAGpL,QAAQ,CAAC4B,KAAK,CAAC0J,SAAS,GAAG,CAAC,EAAED,OAAO,GAAG,CAAC,CAAC,GAAGA,OAAO,GAAGrL,QAAQ,CAAC1B,MAAM,CAAC,CAAA;AAEtF6M,IAAAA,KAAK,GAAGI,UAAU,CAACH,YAAY,CAAC,CAAA;AAClC,GAAA;AAEA,EAAA,IAAIC,OAAO,GAAG,CAAC,CAAC,EAAE;IAChBvM,IAAI,GAAGA,IAAI,IAAIkB,QAAQ,CAAC4B,KAAK,CAAC,CAAC,EAAEyJ,OAAO,CAAC,CAAA;AACzC;IACArM,IAAI,GAAGgB,QAAQ,CAAC4B,KAAK,CAACyJ,OAAO,EAAErL,QAAQ,CAAC1B,MAAM,CAAC,CAAA;AACjD,GAAA;;AAEA;AACAQ,EAAAA,IAAI,GAAGmB,iBAAiB,CAACnB,IAAI,IAAI,IAAI,GAAGA,IAAI,GAAGkB,QAAQ,EAAEkL,eAAe,CAAC,CAAA;AACzE;;EAEA,OAAO;IACLM,QAAQ,EAAE1M,IAAI,IAAIsM,YAAY,IAAI,GAAG,CAAC,GAAGA,YAAY,GAAGpM,IAAI;AAC5DF,IAAAA,IAAI,EAAJA,IAAI;AACJqM,IAAAA,KAAK,EAALA,KAAK;IACLnM,IAAI,EAAEyM,MAAM,CAACzM,IAAI,CAAA;GAClB,CAAA;AACH,CAAA;AAEO,SAAS0M,YAAYA,CAAC1L,QAAuD,EAAU;AAC5F,EAAA,IAAMmL,KAAa,GAAGnL,QAAQ,CAACmL,KAAK,GAAGQ,cAAc,CAAC3L,QAAQ,CAACmL,KAAK,CAAC,GAAG,EAAE,CAAA;AAC1E,EAAA,OAAOnL,QAAQ,CAAClB,IAAI,IAAIqM,KAAK,IAAI,GAAG,CAAC,GAAGA,KAAK,IAAInL,QAAQ,CAAChB,IAAI,IAAI,EAAE,CAAC,CAAA;AACvE,CAAA;AAEA,SAAS2M,cAAcA,CAACR,KAAoB,EAAU;AACpD,EAAA,IAAMS,SAAS,GAAG,IAAIC,eAAe,EAAE,CAAA;AACvC,EAAA,IAAMC,IAAI,GAAG9N,MAAM,CAAC8N,IAAI,CAACX,KAAK,CAAC,CAAA;EAAC,IAAAY,KAAA,GAAAA,YACR;AAAnB,IAAA,IAAMvN,GAAG,GAAAwN,KAAA,CAAAC,EAAA,CAAA,CAAA;AACZ,IAAA,IAAM3H,KAAK,GAAG6G,KAAK,CAAC3M,GAAG,CAAC,CAAA;AACxB,IAAA,IAAI0N,KAAK,CAACC,OAAO,CAAC7H,KAAK,CAAC,EAAE;AACxBA,MAAAA,KAAK,CAAC8H,OAAO,CAAC,UAAAC,CAAC,EAAI;AACjB,QAAA,IAAIA,CAAC,EAAE;AACLT,UAAAA,SAAS,CAACU,MAAM,CAAC9N,GAAG,EAAE6N,CAAC,CAAC,CAAA;AAC1B,SAAA;AACF,OAAC,CAAC,CAAA;KACH,MAAM,IAAI/H,KAAK,KAAKY,SAAS,IAAIZ,KAAK,KAAK,IAAI,EAAE;MAChDsH,SAAS,CAACU,MAAM,CAAC9N,GAAG,EAAE8F,KAAK,CAACrC,QAAQ,EAAE,CAAC,CAAA;AACzC,KAAA;GACD,CAAA;AAXD,EAAA,KAAA,IAAAgK,EAAA,GAAA,CAAA,EAAAD,KAAA,GAAkBF,IAAI,EAAAG,EAAA,GAAAD,KAAA,CAAA1N,MAAA,EAAA2N,EAAA,EAAA,EAAA;IAAAF,KAAA,EAAA,CAAA;AAAA,GAAA;AAYtB,EAAA,OAAOH,SAAS,CAAC3J,QAAQ,EAAE,CAAA;AAC7B,CAAA;AAEO,SAASsK,cAAcA,CAACpB,KAA+C,EAAiB;EAC7F,IAAMqB,eAA8B,GAAG,EAAE,CAAA;AAEzC,EAAA,KAAK,IAAMhO,GAAG,IAAI2M,KAAK,EAAE;AACvB,IAAA,IAAM7G,KAAK,GAAG6G,KAAK,CAAC3M,GAAG,CAAC,CAAA;IACxB,IAAI8F,KAAK,KAAKY,SAAS,EAAE;AACvBsH,MAAAA,eAAe,CAAChO,GAAG,CAAC,GAAG0N,KAAK,CAACC,OAAO,CAAC7H,KAAK,CAAC,GACvCA,KAAK,CAACmI,GAAG,CAAC,UAAAJ,CAAC,EAAA;QAAA,OAAKA,CAAC,IAAI,IAAI,GAAG,IAAI,GAAG,EAAE,GAAGA,CAAC,CAAA;OAAC,CAAC,GAC3C/H,KAAK,IAAI,IAAI,GACXA,KAAK,GACL,EAAE,GAAGA,KAAK,CAAA;AAClB,KAAA;AACF,GAAA;AACA,EAAA,OAAOkI,eAAe,CAAA;AACxB,CAAA;AAEO,SAASE,gBAAgBA,CAC9B1M,QAA0B,EAC1B2M,YAA2B,EACQ;AACnC,EAAA,OAAO,OAAO3M,QAAQ,KAAK,QAAQ,GAAGiL,QAAQ,CAACjL,QAAQ,EAAE2M,YAAY,CAAC7N,IAAI,CAAC,GAAAf,QAAA,CAAA,EAAA,EAAQiC,QAAQ,CAAE,CAAA;AAC/F,CAAA;AAEA,SAASuL,UAAUA,CAACqB,WAAmB,EAAiB;AACtD,EAAA,IAAMC,MAAM,GAAG,IAAIhB,eAAe,CAACe,WAAW,CAAC,CAAA;EAC/C,OAAO5O,MAAM,CAAC8O,WAAW,CAACD,MAAM,CAACE,OAAO,EAAE,CAAC,CAAA;AAC7C,CAAA;AAEA,SAAStB,MAAMA,CAACuB,IAAqB,EAAU;AAC7C,EAAA,OAAOC,kBAAkB,CAAC1J,MAAM,CAACyJ,IAAI,CAAC,CAAC,CAAA;AACzC,CAAA;AAEA,SAASE,mBAAmBA,CAAIC,CAAM,EAAEC,CAAU,EAAW;EAC3D,OAAOlB,KAAK,CAACC,OAAO,CAACiB,CAAC,CAAC,GAAGD,CAAC,CAAC7O,MAAM,KAAK8O,CAAC,CAAC9O,MAAM,IAAI6O,CAAC,CAACE,KAAK,CAAC,UAAChB,CAAC,EAAEjO,CAAC,EAAA;AAAA,IAAA,OAAKgP,CAAC,CAAChP,CAAC,CAAC,KAAKiO,CAAC,CAAA;AAAA,GAAA,CAAC,GAAGc,CAAC,CAAC7O,MAAM,KAAK,CAAC,IAAI6O,CAAC,CAAC,CAAC,CAAC,KAAKC,CAAC,CAAA;AACjH,CAAA;AAEA,SAASE,aAAaA,CAACH,CAA0B,EAAEC,CAA0B,EAAW;AACtF,EAAA,IAAMG,KAAK,GAAGvP,MAAM,CAAC8N,IAAI,CAACqB,CAAC,CAAC,CAAA;AAC5B,EAAA,IAAMK,KAAK,GAAGxP,MAAM,CAAC8N,IAAI,CAACsB,CAAC,CAAC,CAAA;AAC5B,EAAA,IAAIG,KAAK,CAACjP,MAAM,KAAKkP,KAAK,CAAClP,MAAM,EAAE;AACjC,IAAA,OAAO,KAAK,CAAA;AACd,GAAA;AACA,EAAA,KAAA,IAAAmP,GAAA,GAAA,CAAA,EAAAC,MAAA,GAAkBH,KAAK,EAAAE,GAAA,GAAAC,MAAA,CAAApP,MAAA,EAAAmP,GAAA,EAAE,EAAA;AAApB,IAAA,IAAMjP,GAAG,GAAAkP,MAAA,CAAAD,GAAA,CAAA,CAAA;AACZ,IAAA,IAAME,MAAM,GAAGR,CAAC,CAAC3O,GAAG,CAAC,CAAA;AACrB,IAAA,IAAMoP,MAAM,GAAGR,CAAC,CAAC5O,GAAG,CAAC,CAAA;AACrB,IAAA,IAAI0N,KAAK,CAACC,OAAO,CAACwB,MAAM,CAAC,EAAE;AACzB,MAAA,IAAI,CAACT,mBAAmB,CAACS,MAAM,EAAEC,MAAM,CAAC,EAAE;AACxC,QAAA,OAAO,KAAK,CAAA;AACd,OAAA;KACD,MAAM,IAAI1B,KAAK,CAACC,OAAO,CAACyB,MAAM,CAAC,EAAE;AAChC,MAAA,IAAI,CAACV,mBAAmB,CAACU,MAAM,EAAED,MAAM,CAAC,EAAE;AACxC,QAAA,OAAO,KAAK,CAAA;AACd,OAAA;AACF,KAAC,MAAM;MACL,OAAOR,CAAC,KAAKC,CAAC,CAAA;AAChB,KAAA;AACF,GAAA;AACA,EAAA,OAAO,IAAI,CAAA;AACb,CAAA;AAEO,SAASS,mBAAmBA,CAACV,CAAgB,EAAEC,CAAgB,EAAW;EAC/E,IAAMU,YAAY,GAAGX,CAAC,CAACY,OAAO,CAACzP,MAAM,GAAG,CAAC,CAAA;EACzC,IAAM0P,YAAY,GAAGZ,CAAC,CAACW,OAAO,CAACzP,MAAM,GAAG,CAAC,CAAA;EAEzC,OACEwP,YAAY,IAAI,CAAC,CAAC,IAClBA,YAAY,KAAKE,YAAY,IAC7Bb,CAAC,CAACY,OAAO,CAACD,YAAY,CAAC,KAAKV,CAAC,CAACW,OAAO,CAACC,YAAY,CAAC,IACnDV,aAAa,CAACH,CAAC,CAACN,MAAM,EAAEO,CAAC,CAACP,MAAM,CAAC,IACjClB,cAAc,CAACwB,CAAC,CAAChC,KAAK,CAAC,KAAKQ,cAAc,CAACyB,CAAC,CAACjC,KAAK,CAAC,IACnDgC,CAAC,CAACnO,IAAI,KAAKoO,CAAC,CAACpO,IAAI,CAAA;AAErB,CAAA;AAEO,SAASiP,kBAAkBA,GAAM;EACtC,IAAIC,SAAc,GAAG,EAAE,CAAA;AAEvB,EAAA,IAAMC,GAAG,GAAG,UAACC,EAAK,EAAK;AACrBF,IAAAA,SAAS,CAACzM,IAAI,CAAC2M,EAAE,CAAC,CAAA;AAClB,IAAA,OAAO,YAAM;AACXF,MAAAA,SAAS,GAAGA,SAAS,CAACtH,MAAM,CAAC,UAAAyH,IAAI,EAAA;QAAA,OAAIA,IAAI,KAAKD,EAAE,CAAA;OAAC,CAAA,CAAA;KAClD,CAAA;GACF,CAAA;EAED,OAAO;AACLD,IAAAA,GAAG,EAAHA,GAAG;IACHG,IAAI,EAAE,YAAA;AAAA,MAAA,OAAMJ,SAAS,CAACtM,KAAK,CAAC,CAAC,CAAC,CAAA;AAAA,KAAA;IAC9B2M,KAAK,EAAE,YAAA;AAAA,MAAA,OAAOL,SAAS,CAAC5P,MAAM,GAAG,CAAC,CAAA;AAAA,KAAA;GACnC,CAAA;AACH,CAAA;AAEO,SAASkQ,UAAUA,CAAClL,CAAa,EAAE;AACxC;AACA,EAAA,IAAIA,CAAC,CAACmL,OAAO,IAAInL,CAAC,CAACoL,MAAM,IAAIpL,CAAC,CAACqL,OAAO,IAAIrL,CAAC,CAACsL,QAAQ,EAAE,OAAA;AACtD;EACA,IAAItL,CAAC,CAACuL,gBAAgB,EAAE,OAAA;AACxB;EACA,IAAIvL,CAAC,CAACwL,MAAM,KAAK5J,SAAS,IAAI5B,CAAC,CAACwL,MAAM,KAAK,CAAC,EAAE,OAAA;AAC9C;AACA;EACA,IAAIxL,CAAC,CAACyL,aAAa,IAAIzL,CAAC,CAACyL,aAAa,CAACjE,YAAY,EAAE;AACnD;IACA,IAAM3M,MAAM,GAAGmF,CAAC,CAACyL,aAAa,CAACjE,YAAY,CAAC,QAAQ,CAAC,CAAA;AACrD,IAAA,IAAI,aAAa,CAACkE,IAAI,CAAC7Q,MAAM,CAAC,EAAE,OAAA;AAClC,GAAA;AACA;EACA,IAAImF,CAAC,CAAC2L,cAAc,EAAE3L,CAAC,CAAC2L,cAAc,EAAE,CAAA;AAExC,EAAA,OAAO,IAAI,CAAA;AACb,CAAA;AAEO,SAASC,cAAcA,CAACC,KAA8B,EAAEC,KAA8B,EAAW;EAAA,IAAAC,MAAA,GAAAA,YAC7E;AACvB,MAAA,IAAMC,UAAU,GAAGF,KAAK,CAAC5Q,GAAG,CAAC,CAAA;AAC7B,MAAA,IAAM+Q,UAAU,GAAGJ,KAAK,CAAC3Q,GAAG,CAAC,CAAA;AAC7B,MAAA,IAAI,OAAO8Q,UAAU,KAAK,QAAQ,EAAE;QAClC,IAAIA,UAAU,KAAKC,UAAU,EAAA,OAAA;AAAAlD,UAAAA,CAAA,EAAS,KAAA;AAAK,SAAA,CAAA;AAC7C,OAAC,MAAM;QACL,IACE,CAACH,KAAK,CAACC,OAAO,CAACoD,UAAU,CAAC,IAC1BA,UAAU,CAACjR,MAAM,KAAKgR,UAAU,CAAChR,MAAM,IACvCgR,UAAU,CAACE,IAAI,CAAC,UAAClL,KAAK,EAAElG,CAAC,EAAA;AAAA,UAAA,OAAKkG,KAAK,KAAKiL,UAAU,CAACnR,CAAC,CAAC,CAAA;SAAC,CAAA,EAAA,OAAA;AAAAiO,UAAAA,CAAA,EAE/C,KAAA;AAAK,SAAA,CAAA;AAChB,OAAA;KACD;IAAAoD,IAAA,CAAA;EAbD,KAAK,IAAMjR,GAAG,IAAI4Q,KAAK,EAAA;AAAAK,IAAAA,IAAA,GAAAJ,MAAA,EAAA,CAAA;AAAA,IAAA,IAAAI,IAAA,EAAA,OAAAA,IAAA,CAAApD,CAAA,CAAA;AAAA,GAAA;AAevB,EAAA,OAAO,IAAI,CAAA;AACb;;AC/OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA4CA,SAASqD,oBAAoBA,CAACtF,OAAmC,EAAEO,IAAa,EAAc;AAC5F,EAAA,IAAMgF,OAAO,GAAGjF,aAAa,CAACC,IAAI,CAAC,CAAA;AACnC,EAAA,IAAMN,eAAe,GAAGD,OAAO,CAACC,eAAe,GAAGD,OAAO,CAACC,eAAe,CAACsF,OAAO,CAAC,GAAG,IAAI,CAAA;AACzF,EAAA,IAAMC,WAAW,GAAGxF,OAAO,CAACE,WAAW,GAAGF,OAAO,CAACE,WAAW,CAACqF,OAAO,CAAC,GAAG,IAAI,CAAA;EAC7E,IAAME,WAAW,GAAGxH,oBAAoB,CAAM;AAAEQ,IAAAA,QAAQ,EAAE8G,OAAO;AAAEtF,IAAAA,eAAe,EAAfA,eAAe;AAAEC,IAAAA,WAAW,EAAEsF,WAAAA;AAAY,GAAC,CAAC,CAAA;AAE/G,EAAA,IAAMvG,MAAM,GAAG,UAAChD,QAAyB,EAAK;IAC5C,OAAOwJ,WAAW,CAACzJ,WAAW,CAAC;AAAEnB,MAAAA,IAAI,EAAE,KAAK;AAAEoB,MAAAA,QAAQ,EAAEA,QAAAA;AAAS,KAAC,CAAC,CAAA;GACpE,CAAA;AAED,EAAA,IAAMyJ,cAAc,GAAG,UAACzJ,QAAwB,EAAK;AACnD,IAAA,OAAOwJ,WAAW,CAACxG,MAAM,CAAChD,QAAQ,CAAC,CAAA;GACpC,CAAA;AAED,EAAA,IAAM5E,IAAI,GAAG,UAAC9B,EAAmB,EAAEoQ,IAAmB,EAAK;AACzD,IAAA,OAAOF,WAAW,CAACpO,IAAI,CAACf,aAAa,CAACf,EAAE,EAAEgQ,OAAO,CAAC,EAAEI,IAAI,CAAC,CAAA;GAC1D,CAAA;AAED,EAAA,IAAMlO,OAAO,GAAG,UAAClC,EAAmB,EAAEoQ,IAAmB,EAAK;AAC5D,IAAA,OAAOF,WAAW,CAAChO,OAAO,CAACnB,aAAa,CAACf,EAAE,EAAEgQ,OAAO,CAAC,EAAEI,IAAI,CAAC,CAAA;GAC7D,CAAA;AAED,EAAA,IAAMC,cAA0B,GAAG;AACjCrF,IAAAA,IAAI,EAAEgF,OAAO;AACb3P,IAAAA,QAAQ,EAAE,EAAE;IACZJ,KAAK,EAAE,EAAE;IACT+F,EAAE,EAAEkK,WAAW,CAAClK,EAAE;AAClBlE,IAAAA,IAAI,EAAEA,IAAI;AACV4H,IAAAA,MAAM,EAANA,MAAM;AACNyG,IAAAA,cAAc,EAAdA,cAAc;AACdjO,IAAAA,OAAO,EAAEA,OAAO;IAChBgF,OAAO,EAAEgJ,WAAW,CAAChJ,OAAO;IAC5B2C,UAAU,EAAEwB,iBAAiB,CAAC2E,OAAO,CAAA;GACtC,CAAA;;AAED;AACA3R,EAAAA,MAAM,CAACiS,gBAAgB,CAACD,cAAc,EAAE;AACtChQ,IAAAA,QAAQ,EAAE;AACR6D,MAAAA,UAAU,EAAE,IAAI;MAChBqM,GAAG,EAAE,YAAA;AAAA,QAAA,OAAMrR,UAAU,CAACwL,eAAe,GAAGA,eAAe,CAACwF,WAAW,CAAC7P,QAAQ,CAAC,GAAG6P,WAAW,CAAC7P,QAAQ,CAAC,CAAA;AAAA,OAAA;KACtG;AACDJ,IAAAA,KAAK,EAAE;AACLiE,MAAAA,UAAU,EAAE,IAAI;MAChBqM,GAAG,EAAE,YAAA;AAAA,QAAA,OAAML,WAAW,CAAC7P,QAAQ,CAACJ,KAAK,CAAA;AAAA,OAAA;AACvC,KAAA;AACF,GAAC,CAAC,CAAA;AAEF,EAAA,OAAOoQ,cAAc,CAAA;AACvB,CAAA;AAEA,SAASG,gBAAgBA,CAACxF,IAAa,EAAc;AACnD,EAAA,OAAO+E,oBAAoB,CAAC,EAAE,EAAE/E,IAAI,CAAC,CAAA;AACvC,CAAA;AAEA,SAASyF,oBAAoBA,CAACzF,IAAa,EAAc;AACvDA,EAAAA,IAAI,GAAG3K,QAAQ,CAACqQ,IAAI,GAAG1F,IAAI,IAAI3K,QAAQ,CAACf,QAAQ,GAAGe,QAAQ,CAACjB,MAAM,GAAG,EAAE,CAAA;AAEvE,EAAA,IAAI,CAAC4L,IAAI,CAACnK,QAAQ,CAAC,GAAG,CAAC,EAAE;AACvBmK,IAAAA,IAAI,IAAI,GAAG,CAAA;AACb,GAAA;AAEA,EAAA,IAAM5B,WAAW,GAAG,UAACF,QAAgB,EAAA;AAAA,IAAA,OAAK,YAAM;AAC9C,MAAA,IAAAc,gBAAA,GAAmC5M,MAAM,CAACiD,QAAQ;QAA1Cf,QAAQ,GAAA0K,gBAAA,CAAR1K,QAAQ;QAAEF,MAAM,GAAA4K,gBAAA,CAAN5K,MAAM;QAAEC,IAAI,GAAA2K,gBAAA,CAAJ3K,IAAI,CAAA;AAC9B,MAAA,IAAMqM,OAAO,GAAGxC,QAAQ,CAAClL,OAAO,CAAC,GAAG,CAAC,CAAA;AACrC,MAAA,IAAI0N,OAAO,GAAG,CAAC,CAAC,EAAE;QAChB,IAAMiF,QAAQ,GAAGtR,IAAI,CAACwB,QAAQ,CAACqI,QAAQ,CAACjH,KAAK,CAACyJ,OAAO,CAAC,CAAC,GAAGxC,QAAQ,CAACjH,KAAK,CAACyJ,OAAO,CAAC,CAAC/M,MAAM,GAAG,CAAC,CAAA;QAC5F,IAAMiS,YAAY,GAAGrQ,YAAY,CAAClB,IAAI,CAAC4C,KAAK,CAAC0O,QAAQ,CAAC,CAAC,CAAA;AACvD,QAAA,OAAO7Q,cAAc,CAAC,EAAE,EAAE8Q,YAAY,CAAC,CAAA;AACzC,OAAA;AACA,MAAA,IAAMzR,IAAI,GAAG4B,aAAa,CAACzB,QAAQ,EAAE4J,QAAQ,CAAC,CAAA;MAC9C,OAAOpJ,cAAc,CAAC,EAAE,EAAEX,IAAI,GAAGC,MAAM,GAAGC,IAAI,CAAC,CAAA;KAChD,CAAA;AAAA,GAAA,CAAA;AAED,EAAA,IAAMwR,OAAO,GAAG,UAAC7F,IAAY,EAAA;AAAA,IAAA,OAAK,YAAM;AACtC,MAAA,IAAM8F,SAAS,GAAG9F,IAAI,CAAChN,OAAO,CAAC,GAAG,CAAC,CAAA;AACnC,MAAA,IAAI8S,SAAS,KAAK,CAAC,CAAC,EAAE;QACpB,OAAO1T,MAAM,CAACiD,QAAQ,CAACqQ,IAAI,IAAIrT,QAAQ,CAAC6N,aAAa,CAAC,MAAM,CAAC,GAAGF,IAAI,GAAGA,IAAI,CAAC/I,KAAK,CAAC6O,SAAS,CAAC,CAAA;AAC9F,OAAA;MACA,OAAOzQ,QAAQ,CAAC0Q,QAAQ,GAAG,IAAI,GAAG1Q,QAAQ,CAACqQ,IAAI,GAAG1F,IAAI,CAAA;KACvD,CAAA;AAAA,GAAA,CAAA;AAED,EAAA,IAAMgG,YAAwC,GAAG;AAAEtG,IAAAA,eAAe,EAAEtB,WAAW;AAAEuB,IAAAA,WAAW,EAAEkG,OAAAA;GAAS,CAAA;AAEvG,EAAA,OAAOd,oBAAoB,CAACiB,YAAY,EAAEhG,IAAI,CAAC,CAAA;AACjD;;AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIO,IAAMiG,cAA6B,GAAG;AAC3C9R,EAAAA,IAAI,EAAE,GAAG;EACT+N,MAAM,EAAE,EAAE;EACV1B,KAAK,EAAE,EAAE;AACTnM,EAAAA,IAAI,EAAE,EAAE;AACRwM,EAAAA,QAAQ,EAAE,GAAG;EACbqF,IAAI,EAAE,EAAE;AACR9C,EAAAA,OAAO,EAAE,EAAA;AACX,EAAC;AAEiB+C,IAAAA,UAAU,0BAAVA,UAAU,EAAA;AAAVA,EAAAA,UAAU,CAAVA,UAAU,CAAA,mBAAA,CAAA,GAAA,CAAA,CAAA,GAAA,mBAAA,CAAA;AAAVA,EAAAA,UAAU,CAAVA,UAAU,CAAA,2BAAA,CAAA,GAAA,CAAA,CAAA,GAAA,2BAAA,CAAA;AAAVA,EAAAA,UAAU,CAAVA,UAAU,CAAA,oBAAA,CAAA,GAAA,CAAA,CAAA,GAAA,oBAAA,CAAA;AAAVA,EAAAA,UAAU,CAAVA,UAAU,CAAA,sBAAA,CAAA,GAAA,CAAA,CAAA,GAAA,sBAAA,CAAA;AAAVA,EAAAA,UAAU,CAAVA,UAAU,CAAA,uBAAA,CAAA,GAAA,EAAA,CAAA,GAAA,uBAAA,CAAA;AAAA,EAAA,OAAVA,UAAU,CAAA;AAAA,CAAA,CAAA,EAAA,CAAA;;AC3B5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOO,IAAMC,aAAa,GAAGC,aAAa,CAAY,IAAW,CAAC,CAAA;AAE3D,IAAMC,YAAY,GAAGD,aAAa,CAAgBJ,cAAc,CAAC,CAAA;AAEjE,IAAMM,kBAAkB,GAAGF,aAAa,CAAwB,IAAW,CAAC,CAAA;;AAEnF;AACO,IAAMG,SAAS,GAAGH,aAAa,CAAoB;AAAEI,EAAAA,KAAK,EAAE,CAAA;AAAE,CAAC,CAAC;;AC3BvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AASYC,IAAAA,SAAS,0BAATA,SAAS,EAAA;EAATA,SAAS,CAAA,WAAA,CAAA,GAAA,WAAA,CAAA;EAATA,SAAS,CAAA,QAAA,CAAA,GAAA,QAAA,CAAA;EAATA,SAAS,CAAA,OAAA,CAAA,GAAA,OAAA,CAAA;EAATA,SAAS,CAAA,UAAA,CAAA,GAAA,UAAA,CAAA;EAATA,SAAS,CAAA,UAAA,CAAA,GAAA,GAAA,CAAA;EAATA,SAAS,CAAA,UAAA,CAAA,GAAA,GAAA,CAAA;EAATA,SAAS,CAAA,SAAA,CAAA,GAAA,SAAA,CAAA;AAAA,EAAA,OAATA,SAAS,CAAA;AAAA,CAAA,CAAA,EAAA,CAAA,CAAA;;AAgDrB;;ACtEA;AACA;AACA;AACO,SAASC,SAASA,CAACxS,IAAY,EAAU;AAC9C,EAAA,OAAOA,IAAI,CAAC+C,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;AAClC,CAAA;AAEO,SAAS0P,YAAYA,CAACC,MAAgB,EAAEC,MAAgB,EAAU;AACvE,EAAA,IAAMC,YAAY,GAAGF,MAAM,CAAClT,MAAM,CAAA;AAClC,EAAA,IAAMqT,YAAY,GAAGF,MAAM,CAACnT,MAAM,CAAA;EAClC,IAAMwD,GAAG,GAAGC,IAAI,CAAC6P,GAAG,CAACF,YAAY,EAAEC,YAAY,CAAC,CAAA;EAChD,KAAK,IAAIvT,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0D,GAAG,EAAE1D,CAAC,EAAE,EAAE;IAC5B,IAAM0J,KAAK,GAAG2J,MAAM,CAACrT,CAAC,CAAC,GAAGoT,MAAM,CAACpT,CAAC,CAAC,CAAA;IACnC,IAAI0J,KAAK,KAAK,CAAC,EAAE;AACf,MAAA,OAAOA,KAAK,CAAA;AACd,KAAA;AACF,GAAA;EACA,IAAI4J,YAAY,KAAKC,YAAY,EAAE;AACjC,IAAA,OAAO,CAAC,CAAA;AACV,GAAA;AACA,EAAA,OAAOD,YAAY,GAAGC,YAAY,GAAG,CAAC,CAAC,GAAG,CAAC,CAAA;AAC7C,CAAA;;AAEA;AACO,SAASE,SAASA,CAACC,GAAW,EAAE;AACrC,EAAA,OAAOA,GAAG,CAACjQ,OAAO,CAAC,2BAA2B,EAAE,MAAM,CAAC,CAAA;AACzD;;ACvBA,IAAMkQ,SAAS,GAAG,cAAc,CAAA;;AAEhC;AACO,SAASC,KAAKA,CAAClT,IAAY,EAAW;EAC3C,IAAMmT,MAAe,GAAG,EAAE,CAAA;EAE1B,IAAI,CAACnT,IAAI,EAAE;AACT,IAAA,OAAOmT,MAAM,CAAA;AACf,GAAA;AAEA,EAAA,IAAIC,OAAO,GAAGZ,SAAS,CAACxS,IAAI,CAAC,CAAA;EAC7B,IAAIoT,OAAO,KAAK,GAAG,IAAI,CAACA,OAAO,CAAChT,UAAU,CAAC,GAAG,CAAC,EAAE;IAC/C,MAAM,IAAIiT,KAAK,CAAA,4BAA2B,CAAC,CAAA;AAC7C,GAAA;AAEA,EAAA,IAAMC,UAAU,GAAG,YAAM;IACvB,IAAIC,IAAI,GAAG,EAAE,CAAA;AACb,IAAA,OAAOjU,CAAC,GAAG8T,OAAO,CAAC5T,MAAM,IAAIyT,SAAS,CAAC/C,IAAI,CAACkD,OAAO,CAAC9T,CAAC,CAAC,CAAC,EAAE;AACvDiU,MAAAA,IAAI,IAAIH,OAAO,CAAC9T,CAAC,CAAC,CAAA;MAClBkU,QAAQ,CAAC,CAAC,CAAC,CAAA;AACb,KAAA;AACA,IAAA,OAAOD,IAAI,CAAA;GACZ,CAAA;AAED,EAAA,IAAMC,QAAQ,GAAG,UAAC1M,IAAY,EAAK;AACjCxH,IAAAA,CAAC,IAAIwH,IAAI,CAAA;GACV,CAAA;EAED,IAAIxH,CAAC,GAAG,CAAC,CAAA;AACT,EAAA,OAAOA,CAAC,GAAG8T,OAAO,CAAC5T,MAAM,EAAE;AACzB,IAAA,IAAMiU,OAAO,GAAGL,OAAO,CAAC9T,CAAC,CAAC,CAAA;AAC1B,IAAA,IAAMoU,QAAQ,GAAGN,OAAO,CAAC9T,CAAC,GAAG,CAAC,CAAC,CAAA;IAE/B,IAAImU,OAAO,KAAK,GAAG,EAAE;MACnBN,MAAM,CAACxQ,IAAI,CAAC;QAAEwD,IAAI,EAAEoM,SAAS,CAACoB,SAAS;QAAEnO,KAAK,EAAE4N,OAAO,CAAC9T,CAAC,CAAA;AAAE,OAAC,CAAC,CAAA;MAC7DkU,QAAQ,CAAC,CAAC,CAAC,CAAA;AACX,MAAA,SAAA;AACF,KAAA;AACA;AACA,IAAA,IAAIE,QAAQ,KAAK,GAAG,IAAID,OAAO,KAAK,GAAG,EAAE;MACvCD,QAAQ,CAAC,CAAC,CAAC,CAAA;MACXL,MAAM,CAACxQ,IAAI,CAAC;QAAEwD,IAAI,EAAEoM,SAAS,CAACqB,KAAK;QAAEpO,KAAK,EAAE8N,UAAU,EAAC;AAAE,OAAC,CAAC,CAAA;AAC3D,MAAA,SAAA;AACF,KAAA;AACA;AACA,IAAA,IAAI,CAACI,QAAQ,KAAK,GAAG,IAAIA,QAAQ,KAAKtN,SAAS,KAAKqN,OAAO,KAAK,GAAG,EAAE;MACnEN,MAAM,CAACxQ,IAAI,CAAC;QAAEwD,IAAI,EAAEoM,SAAS,CAACsB,QAAQ;QAAErO,KAAK,EAAE4N,OAAO,CAAC9T,CAAC,CAAA;AAAE,OAAC,CAAC,CAAA;MAC5DkU,QAAQ,CAAC,CAAC,CAAC,CAAA;AACX,MAAA,SAAA;AACF,KAAA;AACA;IACA,IAAIE,QAAQ,KAAK,GAAG,IAAIT,SAAS,CAAC/C,IAAI,CAACuD,OAAO,CAAC,EAAE;MAC/CN,MAAM,CAACxQ,IAAI,CAAC;QAAEwD,IAAI,EAAEoM,SAAS,CAACuB,MAAM;QAAEtO,KAAK,EAAE8N,UAAU,EAAC;AAAE,OAAC,CAAC,CAAA;AAC5D,MAAA,SAAA;AACF,KAAA;IACA,IAAIG,OAAO,KAAK,GAAG,EAAE;MACnBN,MAAM,CAACxQ,IAAI,CAAC;QAAEwD,IAAI,EAAEoM,SAAS,CAACwB,QAAQ;AAAEvO,QAAAA,KAAK,EAAE,GAAA;AAAI,OAAC,CAAC,CAAA;MACrDgO,QAAQ,CAAC,CAAC,CAAC,CAAA;AACX,MAAA,SAAA;AACF,KAAA;IACA,IAAIC,OAAO,KAAK,GAAG,EAAE;MACnBN,MAAM,CAACxQ,IAAI,CAAC;QAAEwD,IAAI,EAAEoM,SAAS,CAACyB,QAAQ;AAAExO,QAAAA,KAAK,EAAE,GAAA;AAAI,OAAC,CAAC,CAAA;MACrDgO,QAAQ,CAAC,CAAC,CAAC,CAAA;AACX,MAAA,SAAA;AACF,KAAA;AACA,IAAA,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC9R,QAAQ,CAAC+R,OAAO,CAAC,EAAE;MAC/CN,MAAM,CAACxQ,IAAI,CAAC;QAAEwD,IAAI,EAAEoM,SAAS,CAAC0B,OAAO;AAAEzO,QAAAA,KAAK,EAAEiO,OAAAA;AAAQ,OAAC,CAAC,CAAA;MACxDD,QAAQ,CAAC,CAAC,CAAC,CAAA;AACX,MAAA,SAAA;AACF,KAAA;AACA,IAAA,IAAIP,SAAS,CAAC/C,IAAI,CAACuD,OAAO,CAAC,EAAE;MAC3BN,MAAM,CAACxQ,IAAI,CAAC;QAAEwD,IAAI,EAAEoM,SAAS,CAAC0B,OAAO;QAAEzO,KAAK,EAAE8N,UAAU,EAAC;AAAE,OAAC,CAAC,CAAA;AAC7D,MAAA,SAAA;AACF,KAAA;AACA;IACAE,QAAQ,CAAC,CAAC,CAAC,CAAA;AACb,GAAA;AAEA,EAAA,OAAOL,MAAM,CAAA;AACf;;;;;;AC/DA;AAAA,IACKe,UAAU,0BAAVA,UAAU,EAAA;AAAVA,EAAAA,UAAU,CAAVA,UAAU,CAAA,QAAA,CAAA,GAAA,EAAA,CAAA,GAAA,QAAA,CAAA;AAAVA,EAAAA,UAAU,CAAVA,UAAU,CAAA,OAAA,CAAA,GAAA,CAAA,CAAA,GAAA,OAAA,CAAA;AAAVA,EAAAA,UAAU,CAAVA,UAAU,CAAA,UAAA,CAAA,GAAA,CAAA,CAAA,GAAA,UAAA,CAAA;AAAVA,EAAAA,UAAU,CAAVA,UAAU,CAAA,aAAA,CAAA,GAAA,CAAA,CAAA,CAAA,GAAA,aAAA,CAAA;AAAA,EAAA,OAAVA,UAAU,CAAA;AAAA,CAAA,CAAVA,UAAU,IAYf,EAAA,CAAA,CAAA;AASA,IAAMC,aAAqC,GAAG;AAC5C;AACAC,EAAAA,aAAa,EAAE,KAAK;AACpB;AACAC,EAAAA,UAAU,EAAE,KAAK;AACjB;AACAC,EAAAA,KAAK,EAAE,KAAA;AACT,CAAC,CAAA;AACD;AACA,IAAMC,cAAc,GAAG,qBAAqB,CAAA;AAC5C;AACA,IAAMC,kBAAkB,GAAG,OAAO,CAAA;AAElC,IAAMC,gBAAgB,GAAG,KAAK,CAAA;;AAE9B;AACA;AACA;AACA;AACA;AACA;;AAGO,SAASC,gBAAgBA,CAAcvU,QAAgB,EAAmD;AAAA,EAAA,IAAjDwU,MAAoB,GAAApV,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA6G,SAAA,GAAA7G,SAAA,CAAA,CAAA,CAAA,GAAG4U,aAAa,CAAA;AAClG,EAAA,IAAAS,qBAAA,GAIID,MAAM,CAHRP,aAAa;AAAbA,IAAAA,aAAa,GAAAQ,qBAAA,KAAA,KAAA,CAAA,GAAGT,aAAa,CAACC,aAAa,GAAAQ,qBAAA;IAAAC,kBAAA,GAGzCF,MAAM,CAFRN,UAAU;AAAVA,IAAAA,UAAU,GAAAQ,kBAAA,KAAA,KAAA,CAAA,GAAGV,aAAa,CAACE,UAAU,GAAAQ,kBAAA;IAAAC,aAAA,GAEnCH,MAAM,CADRL,KAAK;AAALA,IAAAA,KAAK,GAAAQ,aAAA,KAAA,KAAA,CAAA,GAAGX,aAAa,CAACG,KAAK,GAAAQ,aAAA,CAAA;EAG7B,IAAIC,OAAO,GAAG,GAAG,CAAA;EACjB,IAAM/H,IAAc,GAAG,EAAE,CAAA;EACzB,IAAMgI,MAAgB,GAAG,EAAE,CAAA;AAE3B,EAAA,IAAM7B,MAAM,GAAGD,KAAK,CAAC/S,QAAQ,CAAC,CAAA;AAC9B,EAAA,IAAM8U,eAAe,GAAG9B,MAAM,CAAC3T,MAAM,KAAK,CAAC,IAAI2T,MAAM,CAAC,CAAC,CAAC,CAAChN,IAAI,KAAKoM,SAAS,CAACsB,QAAQ,CAAA;AACpF,EAAA,IAAMqB,UAAU,GAAG/B,MAAM,CAAC3T,MAAM,CAAA;AAChC,EAAA,IAAM2V,SAAS,GAAGhC,MAAM,CAAC+B,UAAU,GAAG,CAAC,CAAC,CAAA;EACxC,IAAIE,aAAa,GAAG,CAAC,CAAA;;AAErB;AACF;AACA;AACA;AACA;AACE,EAAA,IAAMC,mBAAmB,GAAG,UAACC,UAAkB,EAAc;IAC3D,IAAIC,gBAAgB,GAAG,KAAK,CAAA;AAC5B,IAAA,OAAOD,UAAU,GAAGnC,MAAM,CAAC3T,MAAM,IAAI2T,MAAM,CAACmC,UAAU,CAAC,CAACnP,IAAI,KAAKoM,SAAS,CAACoB,SAAS,EAAE;AACpF,MAAA,IAAIR,MAAM,CAACmC,UAAU,CAAC,CAAC9P,KAAK,KAAK,GAAG,IAAI2N,MAAM,CAACmC,UAAU,CAAC,CAAC9P,KAAK,KAAK,GAAG,EAAE;AACxE+P,QAAAA,gBAAgB,GAAG,IAAI,CAAA;AACzB,OAAA;AACAD,MAAAA,UAAU,EAAE,CAAA;AACd,KAAA;AACA,IAAA,OAAOC,gBAAgB,CAAA;GACxB,CAAA;EACD,KAAK,IAAIC,QAAQ,GAAG,CAAC,EAAEA,QAAQ,GAAGN,UAAU,EAAEM,QAAQ,EAAE,EAAE;AACxD,IAAA,IAAMC,KAAK,GAAGtC,MAAM,CAACqC,QAAQ,CAAC,CAAA;AAC9B,IAAA,IAAME,SAAS,GAAGvC,MAAM,CAACqC,QAAQ,GAAG,CAAC,CAAC,CAAA;IACtC,QAAQC,KAAK,CAACtP,IAAI;MAChB,KAAKoM,SAAS,CAACoB,SAAS;AAAE,QAAA;AACxB;AACA,UAAA,IAAMgC,WAAW,GAAGN,mBAAmB,CAACG,QAAQ,GAAG,CAAC,CAAC,CAAA;AACrD;AACA,UAAA,IAAMI,eAAe,GAAGF,SAAS,KAAKtP,SAAS,IAAI,CAACiO,UAAU,CAAA;UAC9DU,OAAO,IAAA,GAAA,IAAQY,WAAW,IAAIC,eAAe,GAAG,GAAG,GAAG,EAAE,CAAE,CAAA;AAC1D,UAAA,MAAA;AACF,SAAA;MACA,KAAKrD,SAAS,CAACuB,MAAM;QACnBiB,OAAO,IAAIU,KAAK,CAACjQ,KAAK,CAACzC,OAAO,CAACwR,cAAc,EAAE,MAAM,CAAC,CAAA;QACtD,IAAImB,SAAS,IAAIA,SAAS,CAACvP,IAAI,KAAKoM,SAAS,CAAC0B,OAAO,EAAE;AACrDc,UAAAA,OAAO,IAASW,IAAAA,GAAAA,SAAS,CAAClQ,KAAK,GAAG,GAAA,CAAA;AAClCwH,UAAAA,IAAI,CAACrK,IAAI,CAAC8B,MAAM,CAAC2Q,aAAa,CAAC,CAAC,CAAA;AAChCA,UAAAA,aAAa,EAAE,CAAA;AACjB,SAAA;AACAJ,QAAAA,MAAM,CAACrS,IAAI,CAACuR,UAAU,CAAC2B,MAAM,CAAC,CAAA;AAC9B,QAAA,MAAA;MACF,KAAKtD,SAAS,CAACqB,KAAK;AAAE,QAAA;AACpB;UACA,IAAIkC,WAAW,GAAG,EAAE,CAAA;AACpB,UAAA,IAAIJ,SAAS,EAAE;YACb,QAAQA,SAAS,CAACvP,IAAI;cACpB,KAAKoM,SAAS,CAACwB,QAAQ;AACrB;AACAyB,gBAAAA,QAAQ,IAAI,CAAC,CAAA;gBACb,OAAOrC,MAAM,CAACqC,QAAQ,CAAC,CAACrP,IAAI,KAAKoM,SAAS,CAACyB,QAAQ,EAAE;AACnD8B,kBAAAA,WAAW,IAAI3C,MAAM,CAACqC,QAAQ,CAAC,CAAChQ,KAAK,CAAA;AACrCgQ,kBAAAA,QAAQ,EAAE,CAAA;AACZ,iBAAA;gBACAM,WAAW,GAAA,GAAA,GAAOA,WAAW,GAAG,GAAA,CAAA;AAChC,gBAAA,MAAA;cACF,KAAKvD,SAAS,CAAC0B,OAAO;AACpBuB,gBAAAA,QAAQ,EAAE,CAAA;AACVM,gBAAAA,WAAW,IAAQJ,GAAAA,IAAAA,SAAS,CAAClQ,KAAK,KAAK,GAAG,GAAG,IAAI,GAAGgP,kBAAkB,CAAIkB,GAAAA,GAAAA,GAAAA,SAAS,CAAClQ,KAAO,CAAA;AAC3F,gBAAA,MAAA;AACJ,aAAA;AACF,WAAA;AACAuP,UAAAA,OAAO,IAAIe,WAAW,GAAA,KAAA,GAASA,WAAW,GAAA,GAAA,GAAA,GAAA,GAAUtB,kBAAkB,GAAG,GAAA,CAAA;AACzExH,UAAAA,IAAI,CAACrK,IAAI,CAAC8S,KAAK,CAACjQ,KAAK,CAAC,CAAA;AACtBwP,UAAAA,MAAM,CAACrS,IAAI,CAACuR,UAAU,CAAC6B,KAAK,CAAC,CAAA;AAC7B,UAAA,MAAA;AACF,SAAA;MACA,KAAKxD,SAAS,CAACsB,QAAQ;AACrB7G,QAAAA,IAAI,CAACrK,IAAI,CAAC8S,KAAK,CAACjQ,KAAK,CAAC,CAAA;QACtBuP,OAAO,IAAA,MAAA,GAAWP,kBAAkB,GAAA,GAAA,IAAIS,eAAe,GAAG,GAAG,GAAG,EAAE,CAAUT,GAAAA,SAAAA,GAAAA,kBAAkB,GAAM,MAAA,CAAA;AACpGQ,QAAAA,MAAM,CAACrS,IAAI,CAACsS,eAAe,GAAGf,UAAU,CAAC8B,QAAQ,GAAG9B,UAAU,CAAC+B,WAAW,CAAC,CAAA;AAC3E,QAAA,MAAA;AACJ,KAAA;AACF,GAAA;EACA,IAAMC,UAAU,GAAGf,SAAS,CAAChP,IAAI,KAAKoM,SAAS,CAACsB,QAAQ,CAAA;AAExD,EAAA,IAAI,CAACqC,UAAU,IAAI,CAAC5B,KAAK,EAAE;IACzB,IAAI,CAACD,UAAU,EAAE;AACfU,MAAAA,OAAO,IAAWhC,MAAAA,GAAAA,SAAS,CAAC0B,gBAAgB,CAAC,GAAU,UAAA,CAAA;AACzD,KAAA;AACA,IAAA,IAAIU,SAAS,CAAChP,IAAI,KAAKoM,SAAS,CAACoB,SAAS,EAAE;AAC1CoB,MAAAA,OAAO,IAAWhC,MAAAA,GAAAA,SAAS,CAAC0B,gBAAgB,CAAC,GAAM,MAAA,CAAA;AACrD,KAAA;AACF,GAAC,MAAM;IACLM,OAAO,IAAIV,UAAU,GAAG,GAAG,SAAOtB,SAAS,CAAC0B,gBAAgB,CAAC,GAAK,KAAA,CAAA;AACpE,GAAA;AAEA,EAAA,IAAM0B,IAAI,GAAG/B,aAAa,GAAG,EAAE,GAAG,GAAG,CAAA;EACrC,IAAMgC,MAAM,GAAG,IAAIC,MAAM,CAACtB,OAAO,EAAEoB,IAAI,CAAC,CAAA;;AAExC;AACF;AACA;EACE,SAASG,KAAKA,CAACtW,IAAY,EAAqB;AAC9C,IAAA,IAAMuW,OAAO,GAAGvW,IAAI,CAACwW,KAAK,CAACJ,MAAM,CAAC,CAAA;IAElC,IAAI,CAACG,OAAO,EAAE;AACZ,MAAA,OAAO,IAAI,CAAA;AACb,KAAA;AACA,IAAA,IAAME,WAAW,GAAGF,OAAO,CAAC,CAAC,CAAC,CAAA;IAC9B,IAAMxI,MAAiB,GAAG,EAAE,CAAA;AAC5B,IAAA,IAAM2I,UAAoB,GAAGtJ,KAAK,CAAClL,IAAI,CAAC8S,MAAM,CAAC,CAAA;AAC/C,IAAA,KAAK,IAAI1V,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiX,OAAO,CAAC/W,MAAM,EAAEF,CAAC,EAAE,EAAE;AACvC,MAAA,IAAMyW,KAAK,GAAGQ,OAAO,CAACjX,CAAC,CAAC,CAAA;AACxB,MAAA,IAAMI,GAAG,GAAGsN,IAAI,CAAC1N,CAAC,GAAG,CAAC,CAAC,CAAA;AACvB,MAAA,IAAII,GAAG,KAAK,GAAG,IAAIqW,KAAK,EAAE;AACxB,QAAA,IAAMvQ,KAAK,GAAGuQ,KAAK,CAAC1S,KAAK,CAAC,GAAG,CAAC,CAAA;QAC9B,IAAI,CAAC+J,KAAK,CAACC,OAAO,CAACU,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;AAC/BA,UAAAA,MAAM,CAAC,GAAG,CAAC,GAAGvI,KAAK,CAAA;AACrB,SAAC,MAAM;AAAA,UAAA,IAAAmR,QAAA,CAAA;AACL,UAAA,CAAAA,QAAA,GAAA5I,MAAM,CAAC,GAAG,CAAC,EAACpL,IAAI,CAAA7C,KAAA,CAAA6W,QAAA,EAAInR,KAAK,CAAC,CAAA;AAC5B,SAAA;AACA;AACAkR,QAAAA,UAAU,CAACE,MAAM,CAAA9W,KAAA,CAAjB4W,UAAU,EAAA,CACR1B,MAAM,CAACnW,OAAO,CAACqV,UAAU,CAAC+B,WAAW,CAAC,EACtC,CAAC,CAAAY,CAAAA,MAAA,CACE,IAAIzJ,KAAK,CAAC5H,KAAK,CAAChG,MAAM,CAAC,CAACsX,IAAI,CAAC5C,UAAU,CAAC8B,QAAQ,CAAC,CACtD,CAAC,CAAA;AACH,OAAC,MAAM;QACLjI,MAAM,CAACrO,GAAG,CAAC,GAAGqW,KAAK,GAAGA,KAAK,GAAG3P,SAAS,CAAA;AACzC,OAAA;AACF,KAAA;AAEA,IAAA,IAAM2Q,OAAO,GAAG/W,IAAI,KAAKyW,WAAW,CAAA;AACpC,IAAA,IAAMnW,GAAG,GAAGN,IAAI,KAAK,GAAG,IAAIyW,WAAW,KAAK,EAAE,GAAG,GAAG,GAAGA,WAAW,CAAA;IAClE,OAAO;AAAEM,MAAAA,OAAO,EAAEA,OAAO;AAAE/W,MAAAA,IAAI,EAAEG,QAAQ;AAAEG,MAAAA,GAAG,EAAEA,GAAG;AAAE0W,MAAAA,KAAK,EAAEN,UAAU;AAAE3I,MAAAA,MAAM,EAAEA,MAAAA;KAAQ,CAAA;AAC1F,GAAA;;AAEA;AACF;AACA;EACE,SAASkJ,OAAOA,CAAClJ,MAAiB,EAAU;IAC1C,IAAI/N,IAAI,GAAG,EAAE,CAAA;AAAC,IAAA,IAAAgI,SAAA,GAAAC,4BAAA,CACMkL,MAAM,CAAA;MAAAjL,KAAA,CAAA;AAAA,IAAA,IAAA;MAA1B,KAAAF,SAAA,CAAAG,CAAA,EAAAD,EAAAA,CAAAA,CAAAA,KAAA,GAAAF,SAAA,CAAAI,CAAA,EAAAC,EAAAA,IAAA,GAA4B;AAAA,QAAA,IAAjBoN,MAAK,GAAAvN,KAAA,CAAA1C,KAAA,CAAA;QACd,QAAQiQ,MAAK,CAACtP,IAAI;UAChB,KAAKoM,SAAS,CAACuB,MAAM;YACnB9T,IAAI,IAAIyV,MAAK,CAACjQ,KAAK,CAAA;AACnB,YAAA,MAAA;UACF,KAAK+M,SAAS,CAACqB,KAAK;AAClB,YAAA,IAAI,CAAC7F,MAAM,CAAC0H,MAAK,CAACjQ,KAAK,CAAC,EAAE;AACxB,cAAA,MAAM,IAAI6N,KAAK,CAAC,mBAAmB,CAAC,CAAA;AACtC,aAAA;AACArT,YAAAA,IAAI,IAAI+N,MAAM,CAAC0H,MAAK,CAACjQ,KAAK,CAAC,CAAA;AAC3B,YAAA,MAAA;UACF,KAAK+M,SAAS,CAACsB,QAAQ;AAAE,YAAA;AACvB,cAAA,IAAMqD,QAAQ,GAAGnJ,MAAM,CAAC,GAAG,CAAC,CAAA;cAC5B,IAAImJ,QAAQ,YAAY9J,KAAK,EAAE;AAC7BpN,gBAAAA,IAAI,IAAIkX,QAAQ,CAACvT,IAAI,CAAC,GAAG,CAAC,CAAA;AAC5B,eAAC,MAAM;AACL3D,gBAAAA,IAAI,IAAIkX,QAAQ,CAAA;AAClB,eAAA;AACA,cAAA,MAAA;AACF,aAAA;UACA,KAAK3E,SAAS,CAACoB,SAAS;YACtB3T,IAAI,IAAIyV,MAAK,CAACjQ,KAAK,CAAA;AACnB,YAAA,MAAA;AACJ,SAAA;AACF,OAAA;AAAC,KAAA,CAAA,OAAA+C,GAAA,EAAA;MAAAP,SAAA,CAAAxD,CAAA,CAAA+D,GAAA,CAAA,CAAA;AAAA,KAAA,SAAA;AAAAP,MAAAA,SAAA,CAAAQ,CAAA,EAAA,CAAA;AAAA,KAAA;AACD,IAAA,OAAOxI,IAAI,CAAA;AACb,GAAA;EAEA,OAAO;AACLoW,IAAAA,MAAM,EAAEA,MAAM;AACdpJ,IAAAA,IAAI,EAAEA,IAAI;AACVgK,IAAAA,KAAK,EAAEhC,MAAM;AACbiC,IAAAA,OAAO,EAAPA,OAAO;AACPX,IAAAA,KAAK,EAALA,KAAAA;GACD,CAAA;AACH;;;;;AC1LA,IAAMa,oBAAmC,GAAG;AAC1CC,EAAAA,MAAM,EAAE,KAAK;AACbC,EAAAA,SAAS,EAAE,KAAA;AACb,CAAC,CAAA;AAED,SAASC,WAAWA,CAAC/D,IAAa,EAA2B;EAC3D,OAAO,OAAOA,IAAI,KAAK,QAAQ,IAAI,OAAOA,IAAI,KAAK,WAAW,CAAA;AAChE,CAAA;AAEA,SAASgE,iBAAiBA,CAACxJ,MAAa,EAAEf,IAAc,EAAS;EAC/D,IAAMwK,SAAgB,GAAG,EAAE,CAAA;AAAC,EAAA,IAAAxP,SAAA,GAAAC,4BAAA,CACV+E,IAAI,CAAA;IAAA9E,KAAA,CAAA;AAAA,EAAA,IAAA;IAAtB,KAAAF,SAAA,CAAAG,CAAA,EAAAD,EAAAA,CAAAA,CAAAA,KAAA,GAAAF,SAAA,CAAAI,CAAA,EAAAC,EAAAA,IAAA,GAAwB;AAAA,MAAA,IAAb3I,IAAG,GAAAwI,KAAA,CAAA1C,KAAA,CAAA;MACZ,IAAI9F,IAAG,IAAIqO,MAAM,EAAE;AACjByJ,QAAAA,SAAS,CAAC9X,IAAG,CAAC,GAAGqO,MAAM,CAACrO,IAAG,CAAC,CAAA;AAC9B,OAAA;AACF,KAAA;AAAC,GAAA,CAAA,OAAA6I,GAAA,EAAA;IAAAP,SAAA,CAAAxD,CAAA,CAAA+D,GAAA,CAAA,CAAA;AAAA,GAAA,SAAA;AAAAP,IAAAA,SAAA,CAAAQ,CAAA,EAAA,CAAA;AAAA,GAAA;AACD,EAAA,OAAOgP,SAAS,CAAA;AAClB,CAAA;AAEA,SAASC,qBAAqBA,CAC5BC,MAAS,EACT/C,MAAoB,EACD;EACnB,IAAMgD,MAAM,GAAGjD,gBAAgB,CAACgD,MAAM,CAAC1X,IAAI,EAAE2U,MAAM,CAAC,CAAA;EACpD,OAAO;AACLiD,IAAAA,GAAG,EAAEF,MAAM;IACX1X,IAAI,EAAE0X,MAAM,CAAC1X,IAAI;IACjBgX,KAAK,EAAEW,MAAM,CAACX,KAAK;IACnBV,KAAK,EAAEqB,MAAM,CAACrB,KAAK;IACnBF,MAAM,EAAEuB,MAAM,CAACvB,MAAM;IACrBa,OAAO,EAAEU,MAAM,CAACV,OAAO;IACvBY,SAAS,EAAEH,MAAM,CAACG,SAAS;IAC3BnY,GAAG,EAAEiY,MAAM,CAAC3K,IAAI;AAChB8K,IAAAA,QAAQ,EAAE,EAAA;GACX,CAAA;AACH,CAAA;AAEA,SAASC,oBAAoBA,CAC3BC,MAAW,EAGX;AAAA,EAAA,IAFArD,MAAqB,GAAApV,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA6G,SAAA,GAAA7G,SAAA,CAAA,CAAA,CAAA,GAAG4X,oBAAoB,CAAA;AAAA,EAAA,IAC5Cc,aAA6B,GAAA1Y,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA6G,SAAA,GAAA7G,SAAA,CAAA,CAAA,CAAA,GAAG,UAAAgQ,IAAI,EAAA;AAAA,IAAA,OAAIA,IAAI,CAAA;GAAgB,CAAA;EAE5D,IAAM2I,QAA6B,GAAG,EAAE,CAAA;AACxC,EAAA,IAAMC,WAAW,GAAG,IAAIC,GAAG,EAAsC,CAAA;EAEjE,SAASC,SAASA,CAACC,KAAQ,EAAsE;AAAA,IAAA,IAApEC,MAAgC,GAAAhZ,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA6G,SAAA,GAAA7G,SAAA,CAAA,CAAA,CAAA,GAAG,IAAI,CAAA;AAAA,IAAA,IAAEiZ,SAAkB,GAAAjZ,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA6G,SAAA,GAAA7G,SAAA,CAAA,CAAA,CAAA,GAAG,IAAI,CAAA;AAC7F,IAAA,IAAMkZ,gBAAgB,GAAGR,aAAa,CAACK,KAAK,CAAC,CAAA;AAC7C,IAAA,IAAMtY,IAAI,GAAGyY,gBAAgB,CAACzY,IAAK,CAAA;IACnC,IAAIuY,MAAM,IAAI,CAACvY,IAAI,CAACI,UAAU,CAAC,GAAG,CAAC,EAAE;AACnC,MAAA,IAAMsY,WAAW,GAAGH,MAAM,CAACvY,IAAI,CAAC2Y,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,GAAG,CAAA;AACxDF,MAAAA,gBAAgB,CAACzY,IAAI,GAAGuY,MAAM,CAACvY,IAAI,IAAIA,IAAI,GAAG0Y,WAAW,GAAG1Y,IAAI,GAAG,EAAE,CAAC,CAAA;AACxE,KAAA;IACA,IAAM4Y,kBAAkB,GAAGC,YAAY,CACrC;AACEvE,MAAAA,KAAK,EAAE,IAAI;MACXF,aAAa,EAAEO,MAAM,CAAC0C,SAAS;MAC/BhD,UAAU,EAAEM,MAAM,CAACyC,MAAAA;AACrB,KAAC,EACD;MACEhD,aAAa,EAAEkE,KAAK,CAACjB,SAAS;MAC9BhD,UAAU,EAAEiE,KAAK,CAAClB,MAAAA;AACpB,KACF,CAAC,CAAA;AACD,IAAA,IAAM0B,MAAM,GAAGrB,qBAAqB,CAAOgB,gBAAgB,EAAEG,kBAAkB,CAAC,CAAA;AAChF,IAAA,IAAIL,MAAM,EAAE;MACVO,MAAM,CAACP,MAAM,GAAGA,MAAM,CAAA;AACtBA,MAAAA,MAAM,CAACT,QAAQ,CAACnV,IAAI,CAACmW,MAAM,CAAC,CAAA;AAC9B,KAAA;IACA,IAAMC,cAAc,GAAGD,MAAM,CAAA;AAC7BZ,IAAAA,QAAQ,CAACvV,IAAI,CAACmW,MAAM,CAAC,CAAA;AACrB,IAAA,IAAIA,MAAM,CAAClB,GAAG,CAACrE,IAAI,EAAE;MACnB4E,WAAW,CAACa,GAAG,CAACF,MAAM,CAAClB,GAAG,CAACrE,IAAI,EAAEuF,MAAM,CAAC,CAAA;AAC1C,KAAA;IACA,IAAI1L,KAAK,CAACC,OAAO,CAACiL,KAAK,CAACR,QAAQ,CAAC,IAAIU,SAAS,EAAE;AAAA,MAAA,IAAAS,UAAA,GAAAhR,4BAAA,CAC1BqQ,KAAK,CAACR,QAAQ,CAAA;QAAAoB,MAAA,CAAA;AAAA,MAAA,IAAA;QAAlC,KAAAD,UAAA,CAAA9Q,CAAA,EAAA+Q,EAAAA,CAAAA,CAAAA,MAAA,GAAAD,UAAA,CAAA7Q,CAAA,EAAAC,EAAAA,IAAA,GAAoC;AAAA,UAAA,IAAzB8Q,KAAK,GAAAD,MAAA,CAAA1T,KAAA,CAAA;AACd6S,UAAAA,SAAS,CAACc,KAAK,EAAEL,MAAM,CAAC,CAAA;AAC1B,SAAA;AAAC,OAAA,CAAA,OAAAvQ,GAAA,EAAA;QAAA0Q,UAAA,CAAAzU,CAAA,CAAA+D,GAAA,CAAA,CAAA;AAAA,OAAA,SAAA;AAAA0Q,QAAAA,UAAA,CAAAzQ,CAAA,EAAA,CAAA;AAAA,OAAA;AACH,KAAA;AACA0P,IAAAA,QAAQ,CAACkB,IAAI,CAAC,UAAC/K,CAAC,EAAEC,CAAC,EAAK;MACtB,IAAM0I,KAAK,GAAGvE,YAAY,CAACpE,CAAC,CAAC2I,KAAK,EAAE1I,CAAC,CAAC0I,KAAK,CAAC,CAAA;MAC5C,IAAIA,KAAK,KAAK,CAAC,EAAE;AACf,QAAA,OAAOA,KAAK,CAAA;AACd,OAAA;AACA,MAAA,OAAO3I,CAAC,CAACkK,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAA;AAC1B,KAAC,CAAC,CAAA;AACF,IAAA,OAAOQ,cAAc,GAAG,YAAA;MAAA,OAAMM,SAAS,CAACN,cAAc,CAAC,CAAA;KAAG,GAAA,YAAM,EAAE,CAAA;AACpE,GAAA;EAEA,SAASO,cAAcA,CAAC/F,IAAqB,EAAE;AAC7C,IAAA,IAAI4E,WAAW,CAACoB,GAAG,CAAChG,IAAI,CAAC,EAAE;AACzB,MAAA,OAAO4E,WAAW,CAAC/G,GAAG,CAACmC,IAAI,CAAC,CAAEqE,GAAG,CAAA;AACnC,KAAA;AACA,IAAA,OAAOxR,SAAS,CAAA;AAClB,GAAA;EAEA,SAASiT,SAASA,CAACG,SAA8C,EAAE;AACjE,IAAA,IAAIlC,WAAW,CAACkC,SAAS,CAAC,EAAE;AAC1B,MAAA,IAAMV,MAAM,GAAGX,WAAW,CAAC/G,GAAG,CAACoI,SAAS,CAAC,CAAA;AACzC,MAAA,IAAIV,MAAM,EAAE;AACVX,QAAAA,WAAW,CAACsB,MAAM,CAACD,SAAS,CAAC,CAAA;AAC7B,QAAA,IAAME,WAAW,GAAGxB,QAAQ,CAACrZ,OAAO,CAACia,MAAM,CAAC,CAAA;AAC5C,QAAA,IAAIY,WAAW,GAAG,CAAC,CAAC,EAAE;AACpBxB,UAAAA,QAAQ,CAACtB,MAAM,CAAC8C,WAAW,EAAE,CAAC,CAAC,CAAA;AAC/BZ,UAAAA,MAAM,CAAChB,QAAQ,CAACxK,OAAO,CAAC,UAAAgB,CAAC,EAAA;YAAA,OAAI+K,SAAS,CAAC/K,CAAC,CAAC,CAAA;WAAC,CAAA,CAAA;AAC5C,SAAA;AACF,OAAA;AACF,KAAC,MAAM;AACL,MAAA,IAAMqL,GAAG,GAAGzB,QAAQ,CAACrZ,OAAO,CAAC2a,SAAS,CAAC,CAAA;AACvC,MAAA,IAAIG,GAAG,GAAG,CAAC,CAAC,EAAE;AACZzB,QAAAA,QAAQ,CAACtB,MAAM,CAAC+C,GAAG,EAAE,CAAC,CAAC,CAAA;AACvB,QAAA,IAAIH,SAAS,CAAC5B,GAAG,CAACrE,IAAI,EAAE;UACtB4E,WAAW,CAACsB,MAAM,CAACD,SAAS,CAAC5B,GAAG,CAACrE,IAAI,CAAC,CAAA;AACxC,SAAA;AACF,OAAA;AACAiG,MAAAA,SAAS,CAAC1B,QAAQ,CAACxK,OAAO,CAAC,UAAAgB,CAAC,EAAA;QAAA,OAAI+K,SAAS,CAAC/K,CAAC,CAAC,CAAA;OAAC,CAAA,CAAA;AAC/C,KAAA;AACA4J,IAAAA,QAAQ,CAACkB,IAAI,CAAC,UAAC/K,CAAC,EAAEC,CAAC,EAAA;MAAA,OAAKmE,YAAY,CAACpE,CAAC,CAAC2I,KAAK,EAAE1I,CAAC,CAAC0I,KAAK,CAAC,CAAA;KAAC,CAAA,CAAA;AACzD,GAAA;AAEA,EAAA,SAAS4C,SAASA,CAAC/Y,EAAqC,EAAEqB,IAA8B,EAAE;AACxF,IAAA,IAAIlC,IAA+B,CAAA;AACnC,IAAA,IAAI8Y,MAAqC,CAAA;AACzC,IAAA,IAAIvF,IAAiC,CAAA;IACrC,IAAIxF,MAAa,GAAG,EAAE,CAAA;AAEtB,IAAA,IAAI,MAAM,IAAIlN,EAAE,IAAIA,EAAE,CAAC0S,IAAI,EAAE;MAC3BuF,MAAM,GAAGX,WAAW,CAAC/G,GAAG,CAACvQ,EAAE,CAAC0S,IAAI,CAAC,CAAA;MACjC,IAAI,CAACuF,MAAM,EAAE;QACX,MAAMzF,KAAK,CAAC,iBAAiB,CAAC,CAAA;AAChC,OAAA;AACAE,MAAAA,IAAI,GAAGuF,MAAM,CAAClB,GAAG,CAACrE,IAAI,CAAA;MACtBxF,MAAM,GAAGwJ,iBAAiB,CAACrV,IAAI,CAAC6L,MAAM,EAAE+K,MAAM,CAACpZ,GAAG,CAAC,CAAA;MACnD,IAAImB,EAAE,CAACkN,MAAM,EAAE;AACbA,QAAAA,MAAM,GAAG9O,QAAA,CAAc8O,MAAM,EAAEwJ,iBAAiB,CAAC1W,EAAE,CAACkN,MAAM,EAAE+K,MAAM,CAACpZ,GAAG,CAAC,CAAC,CAAA;AAC1E,OAAA;AACAM,MAAAA,IAAI,GAAG8Y,MAAM,CAAC7B,OAAO,CAAClJ,MAAM,CAAC,CAAA;AAC/B,KAAC,MAAM,IAAIlN,EAAE,CAACb,IAAI,IAAI,IAAI,EAAE;MAC1BA,IAAI,GAAGa,EAAE,CAACb,IAAI,CAAA;AAAC,MAAA,IAAA6Z,UAAA,GAAA5R,4BAAA,CACCiQ,QAAQ,CAAA;QAAA4B,MAAA,CAAA;AAAA,MAAA,IAAA;QAAxB,KAAAD,UAAA,CAAA1R,CAAA,EAAA2R,EAAAA,CAAAA,CAAAA,MAAA,GAAAD,UAAA,CAAAzR,CAAA,EAAAC,EAAAA,IAAA,GAA0B;AAAA,UAAA,IAAfiG,CAAC,GAAAwL,MAAA,CAAAtU,KAAA,CAAA;UACV,IAAI8I,CAAC,CAAC8H,MAAM,CAAClG,IAAI,CAAClQ,IAAI,CAAC,EAAE;AACvB8Y,YAAAA,MAAM,GAAGxK,CAAC,CAAA;AACV,YAAA,MAAA;AACF,WAAA;AACF,SAAA;AAAC,OAAA,CAAA,OAAA/F,GAAA,EAAA;QAAAsR,UAAA,CAAArV,CAAA,CAAA+D,GAAA,CAAA,CAAA;AAAA,OAAA,SAAA;AAAAsR,QAAAA,UAAA,CAAArR,CAAA,EAAA,CAAA;AAAA,OAAA;AACD,MAAA,IAAIsQ,MAAM,EAAE;QACV/K,MAAM,GAAG+K,MAAM,CAACxC,KAAK,CAACtW,IAAI,CAAC,CAAE+N,MAAM,CAAA;AACnCwF,QAAAA,IAAI,GAAGuF,MAAM,CAAClB,GAAG,CAACrE,IAAI,CAAA;AACxB,OAAA;AACF,KAAC,MAAM;AACLuF,MAAAA,MAAM,GAAG5W,IAAI,CAACqR,IAAI,GAAG4E,WAAW,CAAC/G,GAAG,CAAClP,IAAI,CAACqR,IAAI,CAAC,GAAG2E,QAAQ,CAAC6B,IAAI,CAAC,UAAAzL,CAAC,EAAA;QAAA,OAAIA,CAAC,CAAC8H,MAAM,CAAClG,IAAI,CAAChO,IAAI,CAAClC,IAAI,CAAC,CAAA;OAAC,CAAA,CAAA;MAC9F,IAAI,CAAC8Y,MAAM,EAAE;QACX,MAAMzF,KAAK,CAAC,iBAAiB,CAAC,CAAA;AAChC,OAAA;AACAE,MAAAA,IAAI,GAAGuF,MAAM,CAAClB,GAAG,CAACrE,IAAI,CAAA;AACtBxF,MAAAA,MAAM,GAAG9O,QAAA,CAAc,EAAE,EAAEiD,IAAI,CAAC6L,MAAM,EAAElN,EAAE,CAACkN,MAAM,CAAC,CAAA;AAClD/N,MAAAA,IAAI,GAAG8Y,MAAM,CAAC7B,OAAO,CAAClJ,MAAM,CAAC,CAAA;AAC/B,KAAA;IACA,IAAMkB,OAAY,GAAG,EAAE,CAAA;IACvB,IAAI+K,YAAY,GAAGlB,MAAM,CAAA;AACzB,IAAA,OAAOkB,YAAY,EAAE;AACnB/K,MAAAA,OAAO,CAACtM,IAAI,CAACqX,YAAY,CAACpC,GAAG,CAAC,CAAA;MAC9BoC,YAAY,GAAGA,YAAY,CAACzB,MAAM,CAAA;AACpC,KAAA;AACA;IACAtJ,OAAO,CAACgL,OAAO,EAAE,CAAA;AACjB,IAAA,IAAIhL,OAAO,CAACzP,MAAM,GAAG,CAAC,EAAE;AACtBwG,MAAAA,OAAO,CAACC,IAAI,CAASjG,QAAAA,GAAAA,IAAI,4BAAwB,CAAC,CAAA;AACpD,KAAA;IAEA,OAAO;AACLuT,MAAAA,IAAI,EAAJA,IAAI;AACJvT,MAAAA,IAAI,EAAJA,IAAI;AACJ+N,MAAAA,MAAM,EAANA,MAAM;AACNkB,MAAAA,OAAO,EAAPA,OAAO;MACP8C,IAAI,EAAEmI,KAAK,CAACjL,OAAO,CAAA;KACpB,CAAA;AACH,GAAA;AAEA+I,EAAAA,MAAM,CAAC1K,OAAO,CAAC,UAAA/I,CAAC,EAAA;IAAA,OAAI8T,SAAS,CAAC9T,CAAC,CAAC,CAAA;GAAC,CAAA,CAAA;EAEjC,OAAO;AACL2T,IAAAA,QAAQ,EAARA,QAAQ;AACRG,IAAAA,SAAS,EAATA,SAAS;AACTgB,IAAAA,SAAS,EAATA,SAAS;AACTO,IAAAA,SAAS,EAATA,SAAS;AACTN,IAAAA,cAAc,EAAdA,cAAAA;GACD,CAAA;AACH,CAAA;AAIA,SAASY,KAAKA,CAAuBjJ,IAAS,EAAE;AAC9C,EAAA,OAAOA,IAAI,CAACkJ,MAAM,CAAC,UAACC,IAAI,EAAEC,YAAY,EAAA;AAAA,IAAA,OAAKpb,QAAA,CAAcmb,IAAI,EAAEC,YAAY,CAACtI,IAAI,CAAC,CAAA;GAAE,EAAA,EAAE,CAAC,CAAA;AACxF,CAAA;AAEA,SAAS8G,YAAYA,CAAmCyB,cAAiB,EAAEC,cAA0B,EAAK;EACxG,IAAMC,YAAY,GAAG,EAAO,CAAA;AAC5B,EAAA,KAAK,IAAM9a,KAAG,IAAI4a,cAAc,EAAE;IAChCE,YAAY,CAAC9a,KAAG,CAAC,GACfA,KAAG,IAAI6a,cAAc,IAAIA,cAAc,CAAC7a,KAAG,CAAC,IAAI,IAAI,GAAG6a,cAAc,CAAC7a,KAAG,CAAC,GAAI4a,cAAc,CAAC5a,KAAG,CAAC,CAAA;AACrG,GAAA;AACA,EAAA,OAAO8a,YAAY,CAAA;AACrB;;AClQe,SAASC,eAAeA,CAACC,GAAG,EAAEhb,GAAG,EAAE8F,KAAK,EAAE;AACvD9F,EAAAA,GAAG,GAAGiF,aAAa,CAACjF,GAAG,CAAC,CAAA;EACxB,IAAIA,GAAG,IAAIgb,GAAG,EAAE;AACdxb,IAAAA,MAAM,CAACgG,cAAc,CAACwV,GAAG,EAAEhb,GAAG,EAAE;AAC9B8F,MAAAA,KAAK,EAAEA,KAAK;AACZT,MAAAA,UAAU,EAAE,IAAI;AAChBC,MAAAA,YAAY,EAAE,IAAI;AAClBC,MAAAA,QAAQ,EAAE,IAAA;AACZ,KAAC,CAAC,CAAA;AACJ,GAAC,MAAM;AACLyV,IAAAA,GAAG,CAAChb,GAAG,CAAC,GAAG8F,KAAK,CAAA;AAClB,GAAA;AACA,EAAA,OAAOkV,GAAG,CAAA;AACZ;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAwBA,IAAMC,uBAAuB,GAAGzW,MAAM,CAAC,oBAAoB,CAAC,CAAA;AAErD,SAAS0W,iBAAiBA,CAAuBzU,IAAe,EAAE4H,MAAqC,EAAK;AACjH,EAAA,OAAO9O,QAAA,CAAc,IAAIoU,KAAK,EAAE,EAAAoH,eAAA,CAAA;AAAItU,IAAAA,IAAI,EAAEA,IAAAA;AAAI,GAAA,EAAGwU,uBAAuB,EAAG,IAAI,CAAA,EAAI5M,MAAM,CAAC,CAAA;AAC5F,CAAA;AAEO,SAAS8M,mBAAmBA,CAACC,KAAU,EAAE3U,IAAgB,EAAE;EAChE,OACE2U,KAAK,YAAYzH,KAAK,IACtBsH,uBAAuB,IAAIG,KAAK,KAC/B3U,IAAI,IAAI,IAAI,IAAI4U,OAAO,CAAED,KAAK,CAAkC3U,IAAI,GAAGA,IAAI,CAAC,CAAC,CAAA;AAElF;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAUA,SAAS6U,SAASA,GAAG;EACnB,OAAOC,UAAU,CAAChJ,aAAa,CAAC,CAAA;AAClC,CAAA;AAEA,SAASiJ,QAAQA,GAAG;EAClB,OAAOD,UAAU,CAAC9I,YAAY,CAAC,CAAA;AACjC,CAAA;AAEA,SAASgJ,OAAOA,CAACtW,KAA8C,EAAE;AAC/D,EAAA,IAAMuW,MAAM,GAAGH,UAAU,CAAChJ,aAAa,CAAC,CAAA;AACxC,EAAA,IAAMpE,YAAY,GAAGoN,UAAU,CAAC9I,YAAY,CAAC,CAAA;AAE7C,EAAA,IAAQtR,EAAE,GAAcgE,KAAK,CAArBhE,EAAE;IAAEkC,OAAO,GAAK8B,KAAK,CAAjB9B,OAAO,CAAA;EAEnB,IAAMuV,KAAK,GAAG+C,OAAO,CAAC,YAAA;AAAA,IAAA,OAAMD,MAAM,CAACE,OAAO,CAACza,EAAE,CAAC,CAAA;GAAE,EAAA,CAACA,EAAE,CAAC,CAAC,CAAA;AAErD,EAAA,IAAM0a,iBAAiB,GAAGF,OAAO,CAAS,YAAM;AAC9C,IAAA,IAAMpM,OAAO,GAAGqJ,KAAK,CAACrJ,OAAO,CAAA;AAC7B,IAAA,IAAMzP,MAAM,GAAGyP,OAAO,CAACzP,MAAM,CAAA;AAE7B,IAAA,IAAMgc,aAAa,GAAGvM,OAAO,CAACzP,MAAM,GAAG,CAAC,CAAC,CAAA;AACzC,IAAA,IAAMic,cAAc,GAAG5N,YAAY,CAACoB,OAAO,CAAA;IAC3C,IAAI,CAACuM,aAAa,IAAIC,cAAc,CAACjc,MAAM,KAAK,CAAC,EAAE;AACjD,MAAA,OAAO,CAAC,CAAC,CAAA;AACX,KAAA;AACA,IAAA,IAAMgE,KAAK,GAAGiY,cAAc,CAACC,SAAS,CAAC,UAAAC,CAAC,EAAA;MAAA,OAAIA,CAAC,KAAKH,aAAa,CAAA;KAAC,CAAA,CAAA;AAChE,IAAA,IAAIhY,KAAK,GAAG,CAAC,CAAC,EAAE;AACd,MAAA,OAAOA,KAAK,CAAA;AACd,KAAA;AACA,IAAA,IAAMoY,gBAAwB,GAAG3M,OAAO,CAACzP,MAAM,GAAG,CAAC,CAAC,GAAGyP,OAAO,CAACzP,MAAM,GAAG,CAAC,CAAC,CAACQ,IAAI,GAAG,EAAE,CAAA;IAEpF,IACER,MAAM,GAAG,CAAC,IACVgc,aAAa,CAACxb,IAAI,KAAK4b,gBAAgB,IACvCH,cAAc,CAACA,cAAc,CAACjc,MAAM,GAAG,CAAC,CAAC,CAACQ,IAAI,KAAK4b,gBAAgB,EACnE;AACA,MAAA,OAAOH,cAAc,CAACC,SAAS,CAAC,UAAAC,CAAC,EAAA;AAAA,QAAA,OAAIA,CAAC,KAAK1M,OAAO,CAACzP,MAAM,GAAG,CAAC,CAAC,CAAA;OAAC,CAAA,CAAA;AACjE,KAAA;AACA,IAAA,OAAOgE,KAAK,CAAA;AACd,GAAC,EAAE,CAAC8U,KAAK,EAAEzK,YAAY,CAAC,CAAC,CAAA;AAEzB,EAAA,IAAMrG,QAAQ,GAAG+T,iBAAiB,GAAG,CAAC,CAAC,IAAInL,cAAc,CAACvC,YAAY,CAACE,MAAM,EAAEuK,KAAK,CAACvK,MAAM,CAAC,CAAA;EAC5F,IAAM8N,aAAa,GACjBN,iBAAiB,GAAG,CAAC,CAAC,IACtBA,iBAAiB,KAAK1N,YAAY,CAACoB,OAAO,CAACzP,MAAM,GAAG,CAAC,IACrDuP,mBAAmB,CAAClB,YAAY,EAAEyK,KAAK,CAAC,CAAA;EAE1C,SAASwD,QAAQA,CAACtX,CAAa,EAAqC;AAClE,IAAA,IAAIkL,UAAU,CAAClL,CAAC,CAAC,EAAE;MACjB,OAAO4W,MAAM,CAACrY,OAAO,GAAG,SAAS,GAAG,MAAM,CAAC,CAAClC,EAAE,CAAC,CAAA;AACjD,KAAA;AACA,IAAA,OAAOkb,OAAO,CAACT,OAAO,EAAE,CAAA;AAC1B,GAAA;EAEA,OAAO;AACLhD,IAAAA,KAAK,EAALA,KAAK;AACLwD,IAAAA,QAAQ,EAARA,QAAQ;AACRtU,IAAAA,QAAQ,EAARA,QAAQ;AACRqU,IAAAA,aAAa,EAAbA,aAAAA;GACD,CAAA;AACH,CAAA;AAUA,SAASG,aAAaA,CAAC/Q,QAAuB,EAAEgR,MAAoB,EAAc;AAChF,EAAA,IAAMb,MAAM,GAAGH,UAAU,CAAChJ,aAAa,CAAsB,CAAA;AAC7D,EAAA,IAAAnH,IAAA,GAAsBmR,MAAM,IAAI,EAAE;IAA1BC,SAAS,GAAApR,IAAA,CAAToR,SAAS,CAAA;AACjB,EAAA,IAAMC,OAAO,GAAGC,MAAM,CAAC,KAAK,CAAC,CAAA;AAC7B,EAAA,IAAMC,UAAU,GAAGD,MAAM,CAAsB,IAAI,CAAC,CAAA;AACpDE,EAAAA,SAAS,CAAC,YAAM;AACd,IAAA,IAAI,CAACH,OAAO,CAACvb,OAAO,EAAE;MACpByb,UAAU,CAACzb,OAAO,GAAGwa,MAAM,CAACmB,oBAAoB,CAAC,UAAC1b,EAAE,EAAEqB,IAAI,EAAA;AAAA,QAAA,OAAK+I,QAAQ,CAACpK,EAAE,EAAEqB,IAAI,CAAC,CAAA;OAAC,CAAA,CAAA;AAClF,MAAA,IAAIga,SAAS,EAAE;QACbjR,QAAQ,CAACmQ,MAAM,CAACvN,YAAY,EAAEuN,MAAM,CAACvN,YAAY,CAAC,CAAA;AACpD,OAAA;MACAsO,OAAO,CAACvb,OAAO,GAAG,IAAI,CAAA;AACxB,KAAA;GACD,EAAE,EAAE,CAAC,CAAA;EACN,OAAO,YAAA;IAAA,OAAMyb,UAAU,CAACzb,OAAO,IAAIyb,UAAU,CAACzb,OAAO,EAAE,CAAA;AAAA,GAAA,CAAA;AACzD;;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA,IAAM4b,YAAY,GAAG,UAACC,SAA6B,EAAEC,WAA+B,EAAEC,YAAoB,EAAa;AACrH,EAAA,OAAO,CAACF,SAAS,EAAEC,WAAW,EAAEC,YAAY,CAAC,CAACxC,MAAM,CAAC,UAACC,IAAI,EAAEwC,IAAI,EAAK;AACnE,IAAA,OAAOxC,IAAI,IAAI,IAAI,GAAGA,IAAI,GAAGwC,IAAI,CAAA;AACnC,GAAC,CAAC,CAAA;AACJ,CAAC,CAAA;AAYD,SAASC,UAAUA,CAAChY,KAAsB,EAAE;AAC1C,EAAA,IAAMuW,MAAM,GAAGH,UAAU,CAAChJ,aAAa,CAAC,CAAA;AACxC,EAAA,IAAQpR,EAAE,GAAwBgE,KAAK,CAA/BhE,EAAE;IAAEkC,OAAO,GAAe8B,KAAK,CAA3B9B,OAAO;IAAE+U,QAAQ,GAAKjT,KAAK,CAAlBiT,QAAQ,CAAA;EAC7B,IAAMgF,IAAI,GAAG3B,OAAO,CAAC;AAAEta,IAAAA,EAAE,EAAFA,EAAE;AAAEkC,IAAAA,OAAO,EAAPA,OAAAA;AAAQ,GAAC,CAAC,CAAA;AACrC,EAAA,IAAQga,WAAW,GAAuBlY,KAAK,CAAvCkY,WAAW;IAAEC,gBAAgB,GAAKnY,KAAK,CAA1BmY,gBAAgB,CAAA;AACrC,EAAA,IAAAC,cAAA,GAAkD7B,MAAM,CAACzG,MAAM;IAAvDuI,eAAe,GAAAD,cAAA,CAAfC,eAAe;IAAEC,oBAAoB,GAAAF,cAAA,CAApBE,oBAAoB,CAAA;EAE7C,IAAMC,OAAiB,GAAG,EAAE,CAAA;EAC5B,IAAIN,IAAI,CAACtV,QAAQ,EAAE;IACjB4V,OAAO,CAACza,IAAI,CAAC6Z,YAAY,CAACO,WAAW,EAAEG,eAAe,EAAE,oBAAoB,CAAC,CAAC,CAAA;AAChF,GAAA;EACA,IAAIJ,IAAI,CAACjB,aAAa,EAAE;IACtBuB,OAAO,CAACza,IAAI,CAAC6Z,YAAY,CAACQ,gBAAgB,EAAEG,oBAAoB,EAAE,0BAA0B,CAAC,CAAC,CAAA;AAChG,GAAA;AAEA,EAAA,IAAME,SAA6B,GAAGD,OAAO,CAAC5d,MAAM,GAAG,CAAC,GAAG4d,OAAO,CAACzZ,IAAI,CAAC,GAAG,CAAC,GAAGyC,SAAS,CAAA;AAExF,EAAA,OACEkX,GAAA,CAAA,GAAA,EAAA;IAAGC,OAAO,EAAET,IAAI,CAAChB,QAAS;AAACrQ,IAAAA,IAAI,EAAEqR,IAAI,CAACxE,KAAK,CAAC5L,QAAS;AAAC2Q,IAAAA,SAAS,EAAEA,SAAU;AAAAvF,IAAAA,QAAA,EACxEA,QAAAA;AAAQ,GACR,CAAC,CAAA;AAER;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA,SAAS0F,aAAaA,CAACC,YAAoB,EAAExO,OAAgC,EAAE;AAC7E,EAAA,IAAIyO,aAAgD,CAAA;EACpD,IAAIC,SAAS,GAAGF,YAAY,CAAA;AAC5B,EAAA,OAAO,CAACC,aAAa,GAAGzO,OAAO,CAAC0O,SAAS,CAAC,KAAK,CAACD,aAAa,CAAC7F,SAAS,EAAE;AACvE8F,IAAAA,SAAS,EAAE,CAAA;AACb,GAAA;AACA,EAAA,OAAOA,SAAS,CAAA;AAClB,CAAA;AAEA,SAASC,UAAUA,GAAG;AACpB,EAAA,IAAAC,WAAA,GAAoB5C,UAAU,CAAC9I,YAAY,CAAC;IAApClD,OAAO,GAAA4O,WAAA,CAAP5O,OAAO,CAAA;AACf,EAAA,IAAA6O,YAAA,GAAkB7C,UAAU,CAAC5I,SAAS,CAAC;IAA/BC,KAAK,GAAAwL,YAAA,CAALxL,KAAK,CAAA;EACb,IAAMqL,SAAS,GAAGtC,OAAO,CAAC,YAAA;AAAA,IAAA,OAAMmC,aAAa,CAAClL,KAAK,EAAErD,OAAO,CAAC,CAAA;GAAE,EAAA,CAACqD,KAAK,CAAC,CAAC,CAAA;AACvE,EAAA,IAAMyL,WAAW,GAAG9O,OAAO,CAAC0O,SAAS,CAAC,CAAA;AACtC,EAAA,IAAII,WAAW,EAAE;AACf,IAAA,IAAQlG,SAAS,GAAYkG,WAAW,CAAhClG,SAAS;MAAEhT,KAAK,GAAKkZ,WAAW,CAArBlZ,KAAK,CAAA;AACxB,IAAA,IAAMmZ,aAAa,GAAG7f,aAAa,CAAC0Z,SAAS,EAAEhT,KAAK,CAAC,CAAA;AAErD,IAAA,OACEyY,GAAA,CAACjL,SAAS,CAAC4L,QAAQ,EAAA;AAACzY,MAAAA,KAAK,EAAE;QAAE8M,KAAK,EAAEqL,SAAS,GAAG,CAAA;OAAI;AAAA7F,MAAAA,QAAA,EAClDwF,GAAA,CAAClL,kBAAkB,CAAC6L,QAAQ,EAAA;AAACzY,QAAAA,KAAK,EAAEuY,WAAY;AAAAjG,QAAAA,QAAA,EAAEkG,aAAAA;OAA2C,CAAA;AAAC,KAC5E,CAAC,CAAA;AAEzB,GAAA;AACA,EAAA,OAAO,IAAI,CAAA;AACb;;;;;ACoHA,SAASE,oBAAoBA,CAACxG,MAAmB,EAAyB;EACxE,OAAO;IACLyG,WAAW,EAAEzG,MAAM,CAACyG,WAAW;AAC/BrG,IAAAA,QAAQ,EAAEJ,MAAM,CAACI,QAAQ,IAAI,EAAE;IAC/BD,SAAS,EAAEH,MAAM,CAACG,SAAS;AAC3BuG,IAAAA,WAAW,EAAE,IAAIC,GAAG,EAAmB;AACvCtM,IAAAA,IAAI,EAAE2F,MAAM,CAAC3F,IAAI,IAAI,EAAE;IACvBwB,IAAI,EAAEmE,MAAM,CAACnE,IAAI;IACjBvT,IAAI,EAAE0X,MAAM,CAAC1X,IAAI;AACjB6E,IAAAA,KAAK,EAAE6S,MAAM,CAAC7S,KAAK,IAAI,EAAE;IACzByZ,UAAU,EAAE5G,MAAM,CAAC6G,QAAQ;IAC3BC,YAAY,EAAE,IAAIH,GAAG,EAAkB;GACxC,CAAA;AACH,CAAA;AAEA,SAASI,UAAUA,CAACjV,OAAsB,EAAqB;AAC7D,EAAA,IAAQ/K,OAAO,GAAa+K,OAAO,CAA3B/K,OAAO;IAAEuZ,MAAM,GAAKxO,OAAO,CAAlBwO,MAAM,CAAA;AAEvB,EAAA,IAAM0G,OAAO,GAAG3G,oBAAoB,CAClCC,MAAM,EACN;IACEX,SAAS,EAAE7N,OAAO,CAAC6N,SAAS;IAC5BD,MAAM,EAAE5N,OAAO,CAAC4N,MAAAA;GACjB,EACD,UAAA7H,IAAI,EAAA;IAAA,OAAI2O,oBAAoB,CAAC3O,IAAI,CAAC,CAAA;AAAA,GACpC,CAAC,CAAA;AAED,EAAA,IAAMoP,gBAAgB,GAAGxP,kBAAkB,EAAmB,CAAA;AAC9D,EAAA,IAAMyP,mBAAmB,GAAGzP,kBAAkB,EAAmB,CAAA;AACjE,EAAA,IAAM0P,eAAe,GAAG1P,kBAAkB,EAAkB,CAAA;AAC5D,EAAA,IAAM2P,eAAe,GAAG3P,kBAAkB,EAAkB,CAAA;AAE5D,EAAA,IAAM4P,SAAS,GAAG5P,kBAAkB,EAAiB,CAAA;AAErD,EAAA,SAASmM,OAAOA,CAACza,EAA8B,EAAEqB,IAA8B,EAAiB;IAC9FA,IAAI,GAAGjD,QAAA,CAAc,EAAE,EAAEiD,IAAI,IAAIkZ,MAAM,CAACvN,YAAY,CAAC,CAAA;AACrD,IAAA,IAAI,OAAOhN,EAAE,KAAK,QAAQ,EAAE;MAC1B,IAAMme,kBAAkB,GAAG7S,QAAQ,CAACtL,EAAE,EAAEqB,IAAI,CAAClC,IAAI,CAAC,CAAA;AAClD,MAAA,IAAMif,aAAY,GAAGP,OAAO,CAAC9E,SAAS,CAAC;QAAE5Z,IAAI,EAAEgf,kBAAkB,CAAChf,IAAAA;OAAM,EAAEkC,IAAI,CAAC,CAAA;AAC/E,MAAA,OAAOjD,QAAA,CAAc+f,kBAAkB,EAAEC,aAAY,CAAC,CAAA;AACxD,KAAA;AAEA,IAAA,IAAIC,eAAe,CAAA;AAEnB,IAAA,IAAIre,EAAE,CAACb,IAAI,IAAI,IAAI,EAAE;AACnBkf,MAAAA,eAAe,GAAGjgB,QAAA,CAAc,EAAE,EAAE4B,EAAE,EAAE;QAAEb,IAAI,EAAEmM,QAAQ,CAACtL,EAAE,CAACb,IAAI,EAAEkC,IAAI,CAAClC,IAAI,CAAC,CAACA,IAAAA;AAAK,OAAC,CAAC,CAAA;AACtF,KAAC,MAAM;MACL,IAAMmf,YAAY,GAAGlgB,QAAA,CAAc,EAAE,EAAE4B,EAAE,CAACkN,MAAM,CAAC,CAAA;AACjD,MAAA,KAAA,IAAAZ,EAAA,GAAAiS,CAAAA,EAAAA,YAAA,GAAkBlgB,MAAM,CAAC8N,IAAI,CAACmS,YAAY,CAAC,EAAAhS,EAAA,GAAAiS,YAAA,CAAA5f,MAAA,EAAA2N,EAAA,EAAE,EAAA;AAAxC,QAAA,IAAMzN,GAAG,GAAA0f,YAAA,CAAAjS,EAAA,CAAA,CAAA;AACZ,QAAA,IAAIgS,YAAY,CAACzf,GAAG,CAAC,IAAI,IAAI,EAAE;UAC7B,OAAOyf,YAAY,CAACzf,GAAG,CAAC,CAAA;AAC1B,SAAA;AACF,OAAA;AACAwf,MAAAA,eAAe,GAAGjgB,QAAA,CAAc,EAAE,EAAE4B,EAAE,EAAE;AAAEkN,QAAAA,MAAM,EAAEoR,YAAAA;AAAa,OAAC,CAAC,CAAA;AACnE,KAAA;IACA,IAAMF,YAAY,GAAGP,OAAO,CAAC9E,SAAS,CAACsF,eAAe,EAAEhd,IAAI,CAAC,CAAA;AAC7D,IAAA,IAAMwK,QAAQ,GAAGE,YAAY,CAAC3N,QAAA,CAAc4B,EAAE,EAAE;MAAEb,IAAI,EAAEif,YAAY,CAACjf,IAAAA;AAAK,KAAC,CAAC,CAAC,CAAA;AAC7E,IAAA,IAAMqM,KAAK,GAAGoB,cAAc,CAAC5M,EAAE,CAACwL,KAAK,CAAC,CAAA;AACtC,IAAA,IAAMnM,IAAI,GAAGW,EAAE,CAACX,IAAI,IAAI,EAAE,CAAA;AAC1B,IAAA,OAAOjB,QAAA,CAAc;AAAEyN,MAAAA,QAAQ,EAARA,QAAQ;AAAEL,MAAAA,KAAK,EAALA,KAAK;AAAEnM,MAAAA,IAAI,EAAJA,IAAAA;KAAM,EAAE+e,YAAY,CAAC,CAAA;AAC/D,GAAA;AAEA,EAAA,eAAetc,IAAIA,CAAC9B,EAAoB,EAAEwe,YAA4B,EAAE;IACtE,IAAMtc,OAAO,GAAG,OAAOlC,EAAE,KAAK,QAAQ,GAAG,KAAK,GAAGA,EAAE,CAACkC,OAAO,CAAA;IAC3D,IAAMuc,KAAK,GAAG,OAAOze,EAAE,KAAK,QAAQ,GAAG,KAAK,GAAGA,EAAE,CAACye,KAAK,CAAA;AACvD,IAAA,IAAMjgB,MAAM,GAAG+b,MAAM,CAACE,OAAO,CAACza,EAAE,CAAC,CAAA;AACjC,IAAA,IAAMqB,IAAI,GAAGkZ,MAAM,CAACvN,YAAY,CAAA;AAEhC,IAAA,IAAM0R,gBAAgB,GAAGC,eAAe,CAACngB,MAAM,CAAC,CAAA;AAChD,IAAA,IAAIkgB,gBAAgB,EAAE;AACpB,MAAA,OAAO5c,IAAI,CAAC1D,QAAA,CAAcsgB,gBAAgB,EAAE;AAAExc,QAAAA,OAAO,EAAElC,EAAE;AAAEye,QAAAA,KAAK,EAAEA,KAAAA;AAAM,OAAC,CAAC,EAAED,YAAY,IAAIhgB,MAAM,CAAC,CAAA;AACrG,KAAA;IAEAA,MAAM,CAACogB,cAAc,GAAGJ,YAAY,CAAA;AACpC,IAAA,IAAIK,OAA6C,CAAA;IACjD,IAAI,CAACJ,KAAK,IAAIvQ,mBAAmB,CAAC1P,MAAM,EAAE6C,IAAI,CAAC,EAAE;AAC/Cwd,MAAAA,OAAO,GAAG9E,iBAAiB,CAAoB5I,UAAU,CAAC2N,qBAAqB,EAAE;AAAE9e,QAAAA,EAAE,EAAExB,MAAM;AAAE6C,QAAAA,IAAI,EAAJA,IAAAA;AAAK,OAAC,CAAC,CAAA;AACxG,KAAA;AAEA,IAAA,OAAOwd,OAAO,GACV3D,OAAO,CAACT,OAAO,CAACoE,OAAO,CAAC,GACxBE,aAAa,CAACvgB,MAAM,EAAE6C,IAAI,CAAC,CACxB2d,KAAK,CAAC,UAAAtX,GAAG,EAAA;AAAA,MAAA,OAAIuX,YAAY,CAACvX,GAAG,EAAElJ,MAAM,EAAE6C,IAAI,CAAC,CAAA;AAAA,KAAA,CAAC,CAC7C6d,IAAI,CAAC,UAACL,OAAiC,EAAK;AAC3C,MAAA,IAAIA,OAAO,EAAE;AACX3D,QAAAA,OAAO,CAACiE,MAAM,CAAC,uCAAuC,CAAC,CAAA;AACzD,OAAC,MAAM;AACLC,QAAAA,UAAU,CAAC5gB,MAAM,EAAE,IAAI,EAAE0D,OAAO,CAAC,CAAA;AACnC,OAAA;AACAmd,MAAAA,gBAAgB,CAAC7gB,MAAM,EAAE6C,IAAI,CAAC,CAAA;AAChC,KAAC,CAAC,CAAA;AACV,GAAA;EAEA,SAASa,OAAOA,CAAClC,EAAoB,EAAE;AACrC,IAAA,IAAMsf,IAAI,GAAG,OAAOtf,EAAE,KAAK,QAAQ,GAAGsL,QAAQ,CAACtL,EAAE,CAAC,GAAGA,EAAE,CAAA;AACvD,IAAA,OAAO8B,IAAI,CAAC1D,QAAA,CAAckhB,IAAI,EAAE;AAAEpd,MAAAA,OAAO,EAAE,IAAA;AAAK,KAAC,CAAC,CAAC,CAAA;AACrD,GAAA;EAEA,SAASyc,eAAeA,CAAC3e,EAA2B,EAA2B;AAC7E,IAAA,IAAMuf,WAAW,GAAGvf,EAAE,CAACoO,OAAO,CAACpO,EAAE,CAACoO,OAAO,CAACzP,MAAM,GAAG,CAAC,CAAC,CAAA;AACrD,IAAA,IAAI4gB,WAAW,IAAIA,WAAW,CAAC9B,UAAU,EAAE;AACzC,MAAA,IAAMC,QAAQ,GAAG6B,WAAW,CAAC9B,UAAU,CAAA;AACvC,MAAA,IAAI+B,SAAS,GAAG,OAAO9B,QAAQ,KAAK,UAAU,GAAGA,QAAQ,CAAC1d,EAAE,CAAC,GAAG0d,QAAQ,CAAA;AACxE,MAAA,IAAI,OAAO8B,SAAS,KAAK,QAAQ,EAAE;AACjC,QAAA,IAAIA,SAAS,CAAC3e,QAAQ,CAAC,GAAG,CAAC,IAAI2e,SAAS,CAAC3e,QAAQ,CAAC,GAAG,CAAC,EAAE;UACtD2e,SAAS,GAAGzS,gBAAgB,CAACyS,SAAS,EAAEjF,MAAM,CAACvN,YAAY,CAAC,CAAA;AAC9D,SAAC,MAAM;AACLwS,UAAAA,SAAS,GAAG;AAAErgB,YAAAA,IAAI,EAAEqgB,SAAAA;WAAW,CAAA;AACjC,SAAA;AACF,OAAA;AACA,MAAA,OAAOphB,QAAA,CACL;QACEoN,KAAK,EAAExL,EAAE,CAACwL,KAAK;QACfnM,IAAI,EAAEW,EAAE,CAACX,IAAI;QACb6N,MAAM,EAAEsS,SAAS,CAACrgB,IAAI,IAAI,IAAI,GAAG,EAAE,GAAGa,EAAE,CAACkN,MAAAA;OAC1C,EACDsS,SACF,CAAC,CAAA;AACH,KAAA;AACA,IAAA,OAAO,IAAI,CAAA;AACb,GAAA;EAEA,eAAe/W,GAAGA,CAACzI,EAAoB,EAAE;AACvC,IAAA,IAAMxB,MAAM,GAAG+b,MAAM,CAACE,OAAO,CAACza,EAAE,CAAC,CAAA;AACjC,IAAA,IAAMqB,IAAI,GAAGkZ,MAAM,CAACvN,YAAY,CAAA;IAChC,OAAO+R,aAAa,CAACvgB,MAAM,EAAE6C,IAAI,CAAC,CAC/B2d,KAAK,CAAC,UAAA/E,KAAK,EAAI;AACd,MAAA,OAAOgF,YAAY,CAAChF,KAAK,EAAEzb,MAAM,EAAE6C,IAAI,CAAC,CAAA;AAC1C,KAAC,CAAC,CACD6d,IAAI,CAAC,UAACL,OAAiC,EAAK;AAC3CO,MAAAA,UAAU,CAAC5gB,MAAM,EAAE,KAAK,CAAC,CAAA;AACzB6gB,MAAAA,gBAAgB,CAAC7gB,MAAM,EAAE6C,IAAI,EAAEwd,OAAO,CAAC,CAAA;AACzC,KAAC,CAAC,CACDG,KAAK,EAAE,CAAA;AACZ,GAAA;AAEA,EAAA,eAAeD,aAAaA,CAAC/e,EAAiB,EAAEqB,IAAmB,EAAE;IACnE,IAAIoe,MAAe,GAAG,EAAE,CAAA;AACxB,IAAA,IAAAC,qBAAA,GAAwDC,qBAAqB,CAAC3f,EAAE,EAAEqB,IAAI,CAAC;MAA/Eue,cAAc,GAAAF,qBAAA,CAAdE,cAAc;MAAEC,aAAa,GAAAH,qBAAA,CAAbG,aAAa;MAAEC,YAAY,GAAAJ,qBAAA,CAAZI,YAAY,CAAA;AAAqC,IAAA,IAAA3Y,SAAA,GAAAC,0BAAA,CAEnEwY,cAAc,CAAA;MAAAvY,KAAA,CAAA;AAAA,IAAA,IAAA;MAAnC,KAAAF,SAAA,CAAAG,CAAA,EAAAD,EAAAA,CAAAA,CAAAA,KAAA,GAAAF,SAAA,CAAAI,CAAA,EAAAC,EAAAA,IAAA,GAAqC;AAAA,QAAA,IAA1BqP,MAAM,GAAAxP,KAAA,CAAA1C,KAAA,CAAA;AACfkS,QAAAA,MAAM,CAAC0G,WAAW,CAAC9Q,OAAO,CAAC,UAAAsT,KAAK,EAAI;UAClCN,MAAM,CAAC3d,IAAI,CAACke,cAAc,CAACD,KAAK,EAAE/f,EAAE,EAAEqB,IAAI,CAAC,CAAC,CAAA;AAC9C,SAAC,CAAC,CAAA;AACJ,OAAA;AAAC,KAAA,CAAA,OAAAqG,GAAA,EAAA;MAAAP,SAAA,CAAAxD,CAAA,CAAA+D,GAAA,CAAA,CAAA;AAAA,KAAA,SAAA;AAAAP,MAAAA,SAAA,CAAAQ,CAAA,EAAA,CAAA;AAAA,KAAA;AAED,IAAA,OAAOsY,aAAa,CAACR,MAAM,CAAC,CACzBP,IAAI,CAAC,YAAM;AACVO,MAAAA,MAAM,GAAG,EAAE,CAAA;MAAC,IAAArH,UAAA,GAAAhR,0BAAA,CACkB0W,gBAAgB,CAACnP,IAAI,EAAE,CAAA;QAAA0J,MAAA,CAAA;AAAA,MAAA,IAAA;QAArD,KAAAD,UAAA,CAAA9Q,CAAA,EAAA+Q,EAAAA,CAAAA,CAAAA,MAAA,GAAAD,UAAA,CAAA7Q,CAAA,EAAAC,EAAAA,IAAA,GAAuD;AAAA,UAAA,IAA5C0Y,eAAe,GAAA7H,MAAA,CAAA1T,KAAA,CAAA;UACxB8a,MAAM,CAAC3d,IAAI,CAACke,cAAc,CAACE,eAAe,EAAElgB,EAAE,EAAEqB,IAAI,CAAC,CAAC,CAAA;AACxD,SAAA;AAAC,OAAA,CAAA,OAAAqG,GAAA,EAAA;QAAA0Q,UAAA,CAAAzU,CAAA,CAAA+D,GAAA,CAAA,CAAA;AAAA,OAAA,SAAA;AAAA0Q,QAAAA,UAAA,CAAAzQ,CAAA,EAAA,CAAA;AAAA,OAAA;MACD,OAAOsY,aAAa,CAACR,MAAM,CAAC,CAAA;AAC9B,KAAC,CAAC,CACDP,IAAI,CAAC,YAAM;AACVO,MAAAA,MAAM,GAAG,EAAE,CAAA;AAAC,MAAA,IAAAzG,UAAA,GAAA5R,0BAAA,CACSyY,aAAa,CAAA;QAAA5G,MAAA,CAAA;AAAA,MAAA,IAAA;QAAlC,KAAAD,UAAA,CAAA1R,CAAA,EAAA2R,EAAAA,CAAAA,CAAAA,MAAA,GAAAD,UAAA,CAAAzR,CAAA,EAAAC,EAAAA,IAAA,GAAoC;AAAA,UAAA,IAAzBqP,MAAM,GAAAoC,MAAA,CAAAtU,KAAA,CAAA;AACfkS,UAAAA,MAAM,CAAC8G,YAAY,CAAClR,OAAO,CAAC,UAAAsT,KAAK,EAAI;YACnCN,MAAM,CAAC3d,IAAI,CAACke,cAAc,CAACD,KAAK,EAAE/f,EAAE,EAAEqB,IAAI,CAAC,CAAC,CAAA;AAC9C,WAAC,CAAC,CAAA;AACJ,SAAA;AAAC,OAAA,CAAA,OAAAqG,GAAA,EAAA;QAAAsR,UAAA,CAAArV,CAAA,CAAA+D,GAAA,CAAA,CAAA;AAAA,OAAA,SAAA;AAAAsR,QAAAA,UAAA,CAAArR,CAAA,EAAA,CAAA;AAAA,OAAA;MACD,OAAOsY,aAAa,CAACR,MAAM,CAAC,CAAA;AAC9B,KAAC,CAAC,CACDP,IAAI,CAAC,YAAM;AACVO,MAAAA,MAAM,GAAG,EAAE,CAAA;AAAC,MAAA,IAAAU,UAAA,GAAA/Y,0BAAA,CACS0Y,YAAY,CAAA;QAAAM,MAAA,CAAA;AAAA,MAAA,IAAA;QAAjC,KAAAD,UAAA,CAAA7Y,CAAA,EAAA8Y,EAAAA,CAAAA,CAAAA,MAAA,GAAAD,UAAA,CAAA5Y,CAAA,EAAAC,EAAAA,IAAA,GAAmC;AAAA,UAAA,IAAxBqP,MAAM,GAAAuJ,MAAA,CAAAzb,KAAA,CAAA;UACf,IAAIkS,MAAM,CAACyG,WAAW,EAAE;YACtB,IAAI/Q,KAAK,CAACC,OAAO,CAACqK,MAAM,CAACyG,WAAW,CAAC,EAAE;cACrC,IAAM+C,YAAY,GAAGxJ,MAAM,CAACyG,WAAW,CAACxQ,GAAG,CAAC,UAAApJ,CAAC,EAAA;AAAA,gBAAA,OAAIsc,cAAc,CAACtc,CAAC,EAAE1D,EAAE,EAAEqB,IAAI,CAAC,CAAA;eAAC,CAAA,CAAA;AAC7Eoe,cAAAA,MAAM,GAAGA,MAAM,CAACzJ,MAAM,CAACqK,YAAY,CAAC,CAAA;AACtC,aAAC,MAAM;AACLZ,cAAAA,MAAM,CAAC3d,IAAI,CAACke,cAAc,CAACnJ,MAAM,CAACyG,WAAW,EAAEtd,EAAE,EAAEqB,IAAI,CAAC,CAAC,CAAA;AAC3D,aAAA;AACF,WAAA;AACF,SAAA;AAAC,OAAA,CAAA,OAAAqG,GAAA,EAAA;QAAAyY,UAAA,CAAAxc,CAAA,CAAA+D,GAAA,CAAA,CAAA;AAAA,OAAA,SAAA;AAAAyY,QAAAA,UAAA,CAAAxY,CAAA,EAAA,CAAA;AAAA,OAAA;MACD,OAAOsY,aAAa,CAACR,MAAM,CAAC,CAAA;AAC9B,KAAC,CAAC,CACDP,IAAI,CAAC,YAAM;AACVO,MAAAA,MAAM,GAAG,EAAE,CAAA;MAAC,IAAAa,UAAA,GAAAlZ,0BAAA,CACQ2W,mBAAmB,CAACpP,IAAI,EAAE,CAAA;QAAA4R,MAAA,CAAA;AAAA,MAAA,IAAA;QAA9C,KAAAD,UAAA,CAAAhZ,CAAA,EAAAiZ,EAAAA,CAAAA,CAAAA,MAAA,GAAAD,UAAA,CAAA/Y,CAAA,EAAAC,EAAAA,IAAA,GAAgD;AAAA,UAAA,IAArCuY,MAAK,GAAAQ,MAAA,CAAA5b,KAAA,CAAA;UACd8a,MAAM,CAAC3d,IAAI,CAACke,cAAc,CAACD,MAAK,EAAE/f,EAAE,EAAEqB,IAAI,CAAC,CAAC,CAAA;AAC9C,SAAA;AAAC,OAAA,CAAA,OAAAqG,GAAA,EAAA;QAAA4Y,UAAA,CAAA3c,CAAA,CAAA+D,GAAA,CAAA,CAAA;AAAA,OAAA,SAAA;AAAA4Y,QAAAA,UAAA,CAAA3Y,CAAA,EAAA,CAAA;AAAA,OAAA;MACD,OAAOsY,aAAa,CAACR,MAAM,CAAC,CAAA;AAC9B,KAAC,CAAC,CACDT,KAAK,CAAC,UAAAtX,GAAG,EAAI;AACZwT,MAAAA,OAAO,CAACiE,MAAM,CAACzX,GAAG,CAAC,CAAA;AACrB,KAAC,CAAC,CAAA;AACN,GAAA;AAEA,EAAA,SAAS0X,UAAUA,CAACpf,EAAiB,EAAEwgB,cAAwB,EAAEte,OAAiB,EAAE;AAClF,IAAA,IAAIse,cAAc,EAAE;AAClB,MAAA,IAAIte,OAAO,EAAE;AACXtE,QAAAA,OAAO,CAACsE,OAAO,CAAClC,EAAE,CAAC6L,QAAQ,CAAC,CAAA;AAC9B,OAAC,MAAM;AACLjO,QAAAA,OAAO,CAACkE,IAAI,CAAC9B,EAAE,CAAC6L,QAAQ,CAAC,CAAA;AAC3B,OAAA;AACF,KAAA;AACA4U,IAAAA,YAAY,CAAC;AAAEzT,MAAAA,YAAY,EAAEhN,EAAAA;AAAG,KAAC,CAAC,CAAA;AACpC,GAAA;AAEA,EAAA,SAASqf,gBAAgBA,CAACrf,EAAiB,EAAEqB,IAAmB,EAAEwd,OAAkC,EAAQ;IAC1Gb,eAAe,CAACrP,IAAI,EAAE,CAAClC,OAAO,CAAC,UAAAsT,KAAK,EAAA;AAAA,MAAA,OAAIA,KAAK,CAAC/f,EAAE,EAAEqB,IAAI,EAAEwd,OAAO,CAAC,CAAA;KAAC,CAAA,CAAA;AACnE,GAAA;AAEA,EAAA,SAASI,YAAYA,CAAChF,KAAU,EAAEja,EAAiB,EAAEqB,IAAmB,EAAE;IAAA,IAAAqf,UAAA,GAAAtZ,0BAAA,CAClD6W,eAAe,CAACtP,IAAI,EAAE,CAAA;MAAAgS,MAAA,CAAA;AAAA,IAAA,IAAA;MAA5C,KAAAD,UAAA,CAAApZ,CAAA,EAAAqZ,EAAAA,CAAAA,CAAAA,MAAA,GAAAD,UAAA,CAAAnZ,CAAA,EAAAC,EAAAA,IAAA,GAA8C;AAAA,QAAA,IAAnCT,OAAO,GAAA4Z,MAAA,CAAAhc,KAAA,CAAA;AAChBoC,QAAAA,OAAO,CAACkT,KAAK,EAAEja,EAAE,EAAEqB,IAAI,CAAC,CAAA;AAC1B,OAAA;AAAC,KAAA,CAAA,OAAAqG,GAAA,EAAA;MAAAgZ,UAAA,CAAA/c,CAAA,CAAA+D,GAAA,CAAA,CAAA;AAAA,KAAA,SAAA;AAAAgZ,MAAAA,UAAA,CAAA/Y,CAAA,EAAA,CAAA;AAAA,KAAA;AACD,IAAA,OAAOuT,OAAO,CAACiE,MAAM,CAAClF,KAAK,CAAC,CAAA;AAC9B,GAAA;EAEA,SAASwG,YAAYA,CAACG,QAA4B,EAAE;IAClD,IAAI,cAAc,IAAIA,QAAQ,EAAE;AAC9B,MAAA,IAAMC,YAAY,GAAGtG,MAAM,CAACvN,YAAY,CAAA;AACxC5O,MAAAA,QAAA,CAAcmc,MAAM,EAAEqG,QAAQ,CAAC,CAAA;MAC/B1C,SAAS,CAACvP,IAAI,EAAE,CAAClC,OAAO,CAAC,UAAA1F,OAAO,EAAI;AAClCA,QAAAA,OAAO,CAACwT,MAAM,CAACvN,YAAY,EAAE6T,YAAY,CAAC,CAAA;AAC5C,OAAC,CAAC,CAAA;AACJ,KAAA;AACF,GAAA;EAEA,SAASC,OAAOA,CAACC,GAAQ,EAAE;AACzB;AACAA,IAAAA,GAAG,CAAC/J,SAAS,CAAC,YAAY,EAAEgF,UAAU,CAAC,CAAA;AACvC+E,IAAAA,GAAG,CAAC/J,SAAS,CAAC,YAAY,EAAE+F,UAAU,CAAC,CAAA;AACvC,IAAA,IAAMiE,cAAc,GAAGpD,UAAU,CAACjV,OAAO,CAAC,CAAA;AAC1CoY,IAAAA,GAAG,CAACE,aAAa,GAAG3jB,aAAa,CAAC4jB,cAAc,EAAE;AAAE3G,MAAAA,MAAM,EAAEyG,cAAAA;AAAe,KAAC,EAAED,GAAG,CAACE,aAAa,CAAC,CAAA;AAChGF,IAAAA,GAAG,CAAC3F,MAAM,CAAC+F,gBAAgB,CAACC,OAAO,GAAGJ,cAAc,CAAA;IACpD3iB,MAAM,CAACgG,cAAc,CAAC0c,GAAG,CAAC3F,MAAM,CAAC+F,gBAAgB,EAAE,QAAQ,EAAE;AAC3Djd,MAAAA,UAAU,EAAE,IAAI;MAChBqM,GAAG,EAAE,YAAA;QAAA,OAAMyQ,cAAc,CAAChU,YAAY,CAAA;AAAA,OAAA;AACxC,KAAC,CAAC,CAAA;AACJ,GAAA;EAEA,SAAS0O,oBAAoBA,CAAC2F,QAAuB,EAAE;AACrD,IAAA,OAAOnD,SAAS,CAAC1P,GAAG,CAAC6S,QAAQ,CAAC,CAAA;AAChC,GAAA;AAEA,EAAA,IAAM9G,MAAyB,GAAG;AAChCvN,IAAAA,YAAY,EAAEiE,cAAc;AAC5B6C,IAAAA,MAAM,EAAEnL,OAAO;AACf2Y,IAAAA,SAAS,EAAE,IAAI;IACftb,EAAE,EAAEpI,OAAO,CAACoI,EAAE;IACdwC,IAAI,EAAE,YAAA;AAAA,MAAA,OAAM5K,OAAO,CAACoI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;AAAA,KAAA;IAC1BuC,OAAO,EAAE,YAAA;AAAA,MAAA,OAAM3K,OAAO,CAACoI,EAAE,CAAC,CAAC,CAAC,CAAA;AAAA,KAAA;AAC5BlE,IAAAA,IAAI,EAAEA,IAAI;AACV2G,IAAAA,GAAG,EAAEA,GAAG;AACRvG,IAAAA,OAAO,EAAEA,OAAO;AAChBuY,IAAAA,OAAO,EAAEA,OAAO;IAChB8G,UAAU,EAAEzD,gBAAgB,CAACtP,GAAG;IAChCgT,aAAa,EAAEzD,mBAAmB,CAACvP,GAAG;IACtCiT,SAAS,EAAEzD,eAAe,CAACxP,GAAG;IAC9BkT,OAAO,EAAEzD,eAAe,CAACzP,GAAG;IAC5BmT,QAAQ,EAAA,UAAClK,KAAkB,EAAc;AACvC,MAAA,OAAOoG,OAAO,CAACrG,SAAS,CAACC,KAAK,CAAC,CAAA;KAChC;IACDmK,WAAW,EAAA,UAAClP,IAAqB,EAAE;AACjC,MAAA,OAAOmL,OAAO,CAACrF,SAAS,CAAC9F,IAAI,CAAC,CAAA;KAC/B;IACDmP,QAAQ,EAAA,UAACnP,IAAqB,EAAW;MACvC,OAAOwH,OAAO,CAAC2D,OAAO,CAACpF,cAAc,CAAC/F,IAAI,CAAC,CAAC,CAAA;KAC7C;IACDoP,SAAS,EAAA,YAAsD;MAC7D,OAAOjE,OAAO,CAACxG,QAAQ,CAAA;KACxB;IACD0K,OAAO,EAAA,YAAkB;AACvB,MAAA,OAAO7G,OAAO,CAACT,OAAO,EAAE,CAAA;KACzB;AACDqG,IAAAA,OAAO,EAAEA,OAAO;AAChBpF,IAAAA,oBAAoB,EAApBA,oBAAAA;GACD,CAAA;AAED,EAAA,OAAOnB,MAAM,CAAA;AACf,CAAA;AAEA,SAASoF,qBAAqBA,CAAC3f,EAAiB,EAAEqB,IAAmB,EAAE;EACrE,IAAMue,cAAuC,GAAG,EAAE,CAAA;EAClD,IAAMC,aAAsC,GAAG,EAAE,CAAA;EACjD,IAAMC,YAAqC,GAAG,EAAE,CAAA;AAEhD,EAAA,IAAMkC,MAAM,GAAG5f,IAAI,CAAC6f,GAAG,CAACjiB,EAAE,CAACoO,OAAO,CAACzP,MAAM,EAAE0C,IAAI,CAAC+M,OAAO,CAACzP,MAAM,CAAC,CAAA;EAAC,IAAAyN,KAAA,GAAAA,YAC/B;AAC/B,IAAA,IAAM8V,UAAU,GAAG7gB,IAAI,CAAC+M,OAAO,CAAC3P,CAAC,CAAC,CAAA;AAClC,IAAA,IAAIyjB,UAAU,EAAE;AACd,MAAA,IAAIliB,EAAE,CAACoO,OAAO,CAAC8K,IAAI,CAAC,UAAA4B,CAAC,EAAA;QAAA,OAAIA,CAAC,KAAKoH,UAAU,CAAA;AAAA,OAAA,CAAC,EAAE;AAC1CrC,QAAAA,aAAa,CAAC/d,IAAI,CAACogB,UAAU,CAAC,CAAA;AAChC,OAAC,MAAM;AACLtC,QAAAA,cAAc,CAAC9d,IAAI,CAACogB,UAAU,CAAC,CAAA;AACjC,OAAA;AACF,KAAA;AACA,IAAA,IAAMC,QAAQ,GAAGniB,EAAE,CAACoO,OAAO,CAAC3P,CAAC,CAAC,CAAA;AAC9B,IAAA,IAAI0jB,QAAQ,EAAE;AACZ,MAAA,IAAI9gB,IAAI,CAAC+M,OAAO,CAACyM,SAAS,CAAC,UAAAC,CAAC,EAAA;QAAA,OAAIA,CAAC,KAAKqH,QAAQ,CAAA;OAAC,CAAA,KAAK,CAAC,CAAC,EAAE;AACtDrC,QAAAA,YAAY,CAAChe,IAAI,CAACqgB,QAAQ,CAAC,CAAA;AAC7B,OAAA;AACF,KAAA;GACD,CAAA;EAfD,KAAK,IAAI1jB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGujB,MAAM,EAAEvjB,CAAC,EAAE,EAAA;IAAA2N,KAAA,EAAA,CAAA;AAAA,GAAA;EAiB/B,OAAO;AAAEwT,IAAAA,cAAc,EAAdA,cAAc;AAAEC,IAAAA,aAAa,EAAbA,aAAa;AAAEC,IAAAA,YAAY,EAAZA,YAAAA;GAAc,CAAA;AACxD,CAAA;AAEA,SAASE,cAAcA,CAACD,KAAsB,EAAE/f,EAAiB,EAAEqB,IAAmB,EAAS;EAC7F,IAAM+gB,OAAO,GAAG,IAAIlH,OAAO,CAAC,UAACT,OAAO,EAAE0E,MAAM,EAAK;AAC/C,IAAA,IAAMkD,IAAyB,GAAG,UAACC,KAA0C,EAAK;MAChF,IAAIA,KAAK,KAAK,KAAK,EAAE;AACnBnD,QAAAA,MAAM,CAACpF,iBAAiB,CAAC5I,UAAU,CAACoR,kBAAkB,EAAE;AAAElhB,UAAAA,IAAI,EAAJA,IAAI;AAAErB,UAAAA,EAAE,EAAFA,EAAAA;AAAG,SAAC,CAAC,CAAC,CAAA;AACxE,OAAC,MAAM,IAAIsiB,KAAK,YAAY9P,KAAK,EAAE;QACjC2M,MAAM,CAACmD,KAAK,CAAC,CAAA;AACf,OAAC,MAAM,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAKA,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAS,EAAE;AAC5EnD,QAAAA,MAAM,CAACpF,iBAAiB,CAAC5I,UAAU,CAACqR,yBAAyB,EAAE;AAAEnhB,UAAAA,IAAI,EAAErB,EAAE;AAAEA,UAAAA,EAAE,EAAEsiB,KAAAA;AAAM,SAAC,CAAC,CAAC,CAAA;AAC1F,OAAC,MAAM;QACL7H,OAAO,CAAC,IAAI,CAAC,CAAA;AACf,OAAA;KACD,CAAA;IACD,IAAMgI,WAAW,GAAG1C,KAAK,CAAC/f,EAAE,EAAEqB,IAAI,EAAEghB,IAAI,CAAC,CAAA;AACzC,IAAA,IAAIK,SAAS,GAAGxH,OAAO,CAACT,OAAO,CAACgI,WAAW,CAAC,CAAA;AAC5C,IAAA,IAAI1C,KAAK,CAACphB,MAAM,GAAG,CAAC,EAAE;AACpB+jB,MAAAA,SAAS,GAAGA,SAAS,CAACxD,IAAI,CAACmD,IAAI,CAAC,CAAA;AAClC,KAAA;AACAK,IAAAA,SAAS,CAAC1D,KAAK,CAAC,UAAAtX,GAAG,EAAA;MAAA,OAAIyX,MAAM,CAACzX,GAAG,CAAC,CAAA;KAAC,CAAA,CAAA;AACrC,GAAC,CAAC,CAAA;EAEF,OAAO,YAAA;AAAA,IAAA,OAAM0a,OAAO,CAAA;AAAA,GAAA,CAAA;AACtB,CAAA;AAEA,SAASnC,aAAaA,CAACR,MAAe,EAAE;AACtC,EAAA,OAAOA,MAAM,CAACnG,MAAM,CAAC,UAAC8I,OAAO,EAAErC,KAAK,EAAA;IAAA,OAAKqC,OAAO,CAAClD,IAAI,CAAC,YAAA;MAAA,OAAMa,KAAK,EAAE,CAAA;KAAC,CAAA,CAAA;AAAA,GAAA,EAAE7E,OAAO,CAACT,OAAO,EAAE,CAAC,CAAA;AAC1F;;ACveA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAaO,SAASkI,YAAYA,CAAC7O,MAAqB,EAAa;EAC7D,OAAO8J,UAAU,CAAC9J,MAAM,CAAC,CAAA;AAC3B,CAAA;AAEO,SAASoN,cAAcA,CAACld,KAA0B,EAAE;AACzD,EAAA,IAAQiT,QAAQ,GAAKjT,KAAK,CAAlBiT,QAAQ,CAAA;AAChB,EAAA,IAAMsD,MAAM,GAAGvW,KAAK,CAACuW,MAA2B,CAAA;AAChD,EAAA,IACEvN,YAAY,GAEVuN,MAAM,CAFRvN,YAAY;AACFpP,IAAAA,OAAO,GACf2c,MAAM,CADRzG,MAAM,CAAIlW,OAAO,CAAA;AAGnB,EAAA,IAAM6J,QAAQ,GAAG8T,MAAM,CAAsB,IAAI,CAAC,CAAA;AAClD,EAAA,IAAMD,OAAO,GAAGC,MAAM,CAAC,KAAK,CAAC,CAAA;AAC7B,EAAA,IAAMqH,cAAc,GAAGrH,MAAM,CAAsB,IAAI,CAAC,CAAA;AAExD,EAAA,IAAMsH,WAAW,GAAGvX,QAAQ,CAAC1N,OAAO,CAACyC,QAAQ,CAAC,CAAA;AAC9C,EAAA,IAAAyiB,SAAA,GAAgCC,QAAQ,CAAgB/V,YAAY,CAAC;AAA9D3M,IAAAA,QAAQ,GAAAyiB,SAAA,CAAA,CAAA,CAAA;AAAEE,IAAAA,WAAW,GAAAF,SAAA,CAAA,CAAA,CAAA,CAAA;AAE5B,EAAA,IAAI,CAACF,cAAc,CAAC7iB,OAAO,EAAE;IAC3B6iB,cAAc,CAAC7iB,OAAO,GAAGwa,MAAM,CAACmB,oBAAoB,CAAC,UAAA1b,EAAE,EAAI;MACzDgjB,WAAW,CAAChjB,EAAE,CAAC,CAAA;AACjB,KAAC,CAAC,CAAA;AACJ,GAAA;;AAEA;AACA,EAAA,IAAIK,QAAQ,CAACwL,QAAQ,KAAKgX,WAAW,CAAChX,QAAQ,IAAI,CAACyP,OAAO,CAACvb,OAAO,EAAE;AAClE,IAAA,KAAKwa,MAAM,CAACzY,IAAI,CAAClE,OAAO,CAACyC,QAAQ,CAAC,CAAA;AACpC,GAAA;AAEA4iB,EAAAA,eAAe,CAAC,YAAM;IACpB3H,OAAO,CAACvb,OAAO,GAAG,IAAI,CAAA;IACtB,IAAI0H,QAAQ,CAAC1H,OAAO,EAAE;MACpB0H,QAAQ,CAAC1H,OAAO,EAAE,CAAA;AACpB,KAAA;IACA,IAAI6iB,cAAc,CAAC7iB,OAAO,EAAE;MAC1B6iB,cAAc,CAAC7iB,OAAO,EAAE,CAAA;AAC1B,KAAA;IAEA6iB,cAAc,CAAC7iB,OAAO,GAAGwa,MAAM,CAACmB,oBAAoB,CAAC,UAAA1b,EAAE,EAAI;MACzDgjB,WAAW,CAAChjB,EAAE,CAAC,CAAA;AACjB,KAAC,CAAC,CAAA;IAEFyH,QAAQ,CAAC1H,OAAO,GAAGnC,OAAO,CAAC8L,MAAM,CAAC,UAAA1J,EAAE,EAAI;MACtC,IAAIsb,OAAO,CAACvb,OAAO,EAAE;AACnBwa,QAAAA,MAAM,CAAC9R,GAAG,CAACzI,EAAE,CAAC,CAAA;AAChB,OAAA;AACF,KAAC,CAAC,CAAA;AAEF,IAAA,OAAO,YAAM;MACX,IAAIyH,QAAQ,CAAC1H,OAAO,EAAE;QACpBub,OAAO,CAACvb,OAAO,GAAG,KAAK,CAAA;QACvB0H,QAAQ,CAAC1H,OAAO,EAAE,CAAA;QAClB0H,QAAQ,CAAC1H,OAAO,GAAG,IAAI,CAAA;AACzB,OAAA;MACA,IAAI6iB,cAAc,CAAC7iB,OAAO,EAAE;QAC1B6iB,cAAc,CAAC7iB,OAAO,EAAE,CAAA;QACxB6iB,cAAc,CAAC7iB,OAAO,GAAG,IAAI,CAAA;AAC/B,OAAA;KACD,CAAA;AACH,GAAC,CAAC,CAAA;AAEF,EAAA,OACE0c,GAAA,CAACrL,aAAa,CAACgM,QAAQ,EAAA;AAACzY,IAAAA,KAAK,EAAE4V,MAAO;AAAAtD,IAAAA,QAAA,EACpCwF,GAAA,CAACnL,YAAY,CAAC8L,QAAQ,EAAA;AAACzY,MAAAA,KAAK,EAAEtE,QAAS;AAAA4W,MAAAA,QAAA,EAAEA,QAAAA;KAAgC,CAAA;AAAC,GACpD,CAAC,CAAA;AAE7B;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA,SAASiM,kBAAkBA,CAACC,UAA2B,EAAE;AACvDC,EAAAA,iBAAiB,CAAC,aAAa,EAAED,UAAU,CAAC,CAAA;AAC9C,CAAA;AAEA,SAASE,mBAAmBA,CAACC,WAA4B,EAAE;AACzDF,EAAAA,iBAAiB,CAAC,cAAc,EAAEE,WAAW,CAAC,CAAA;AAChD,CAAA;AAIA,SAASF,iBAAiBA,CAAC1Q,IAAe,EAAEqN,KAAsB,EAAE;AAClE,EAAA,IAAMpK,KAAK,GAAGyE,UAAU,CAAC7I,kBAAkB,CAAC,CAAA;AAE5C0R,EAAAA,eAAe,CAAC,YAAM;AACpBtN,IAAAA,KAAK,CAACjD,IAAI,CAAC,CAAClE,GAAG,CAACuR,KAAK,CAAC,CAAA;AAEtB,IAAA,OAAO,YAAM;AACXpK,MAAAA,KAAK,CAACjD,IAAI,CAAC,CAACkG,MAAM,CAACmH,KAAK,CAAC,CAAA;KAC1B,CAAA;GACF,EAAE,EAAE,CAAC,CAAA;AAEN,EAAA,OAAO,IAAI,CAAA;AACb;;;;"}